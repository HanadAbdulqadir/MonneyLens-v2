var Dx=Object.defineProperty;var pl=s=>{throw TypeError(s)};var Tx=(s,t,a)=>t in s?Dx(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var Ca=(s,t,a)=>Tx(s,typeof t!="symbol"?t+"":t,a),xi=(s,t,a)=>t.has(s)||pl("Cannot "+a);var te=(s,t,a)=>(xi(s,t,"read from private field"),a?a.call(s):t.get(s)),ze=(s,t,a)=>t.has(s)?pl("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,a),we=(s,t,a,n)=>(xi(s,t,"write to private field"),n?n.call(s,a):t.set(s,a),a),yt=(s,t,a)=>(xi(s,t,"access private method"),a);var Hn=(s,t,a,n)=>({set _(r){we(s,t,r,a)},get _(){return te(s,t,n)}});import{j as e,V as Cc,R as kc,A as Dc,C as Tc,T as Ec,D as Mc,P as Ex,c as ds,a as Xs,u as He,b as Tn,d as Ae,e as me,f as zt,g as Dr,h as Tr,i as Mx,k as Er,l as ys,m as va,n as Mr,o as Px,S as Xa,O as En,p as Mn,q as Pc,r as Pr,s as Ar,t as xo,v as go,w as Ac,x as po,y as fo,z as vo,B as yo,E as Ax,L as Rc,F as Ic,G as Oc,H as Rx,I as Fc,J as Ix,K as _c,M as $c,N as Ox,Q as Lc,U as Fx,W as zc,X as Bc,Y as _x,Z as $x,_ as qc,$ as Lx,a0 as zx,a1 as Vc,a2 as Uc,a3 as Wc,a4 as Hc,a5 as Gc,a6 as Yc,a7 as da,a8 as Kc,a9 as Bx,aa as qx,ab as fs,ac as Vx,ad as nr}from"./ui-DAD_zP_Y.js";import{a as Ux,r as u,R as ie,b as Wx,N as fl,L as Ds,u as Rr,f as Js,g as Hx,h as Gx,i as Yx,j as it,H as Kx}from"./vendor-BaygSIya.js";import{c as Qc,R as Tt,P as Ir,a as Or,C as Fr,T as st,B as ua,b as wt,X as St,Y as gt,L as dn,d as pt,e as Qx,f as rr,g as is,h as gi,i as Xx,A as Ea,j as sa,S as Jx,k as Zx}from"./charts-DmZauVZL.js";import{c as eg}from"./supabase-CGiHrkdx.js";import{i as lt,s as Je,a as qe,d as Gt,b as mt,e as Ys,c as Ks,f as Ot,g as un,h as jo,j as Ws,k as mn,l as tg,m as sg,n as za,o as ag,p as ng,q as pi,r as vl,t as rg,u as ig,v as og,w as Xc,x as _r,y as bo,z as Ja,A as lg,B as cg,C as ce,D as Jc,E as ir,F as _e,G as ma,H as $r,I as dg,J as ug,K as mg,L as Gn,M as Zc,N as or,O as hg,P as xg,Q as gg,R as pg}from"./utils-Bl7Pzyoo.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();var ed,yl=Ux;ed=yl.createRoot,yl.hydrateRoot;const fg=1,vg=1e6;let fi=0;function yg(){return fi=(fi+1)%Number.MAX_SAFE_INTEGER,fi.toString()}const vi=new Map,jl=s=>{if(vi.has(s))return;const t=setTimeout(()=>{vi.delete(s),ln({type:"REMOVE_TOAST",toastId:s})},vg);vi.set(s,t)},jg=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,fg)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=t;return a?jl(a):s.toasts.forEach(n=>{jl(n.id)}),{...s,toasts:s.toasts.map(n=>n.id===a||a===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(a=>a.id!==t.toastId)}}},Jn=[];let Zn={toasts:[]};function ln(s){Zn=jg(Zn,s),Jn.forEach(t=>{t(Zn)})}function td({...s}){const t=yg(),a=r=>ln({type:"UPDATE_TOAST",toast:{...r,id:t}}),n=()=>ln({type:"DISMISS_TOAST",toastId:t});return ln({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:r=>{r||n()}}}),{id:t,dismiss:n,update:a}}function Ue(){const[s,t]=u.useState(Zn);return u.useEffect(()=>(Jn.push(t),()=>{const a=Jn.indexOf(t);a>-1&&Jn.splice(a,1)}),[s]),{...s,toast:td,dismiss:a=>ln({type:"DISMISS_TOAST",toastId:a})}}const bl=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,Nl=Qc,ya=(s,t)=>a=>{var n;if((t==null?void 0:t.variants)==null)return Nl(s,a==null?void 0:a.class,a==null?void 0:a.className);const{variants:r,defaultVariants:i}=t,l=Object.keys(r).map(h=>{const x=a==null?void 0:a[h],d=i==null?void 0:i[h];if(x===null)return null;const m=bl(x)||bl(d);return r[h][m]}),o=a&&Object.entries(a).reduce((h,x)=>{let[d,m]=x;return m===void 0||(h[d]=m),h},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((h,x)=>{let{class:d,className:m,...g}=x;return Object.entries(g).every(y=>{let[p,j]=y;return Array.isArray(j)?j.includes({...i,...o}[p]):{...i,...o}[p]===j})?[...h,d,m]:h},[]);return Nl(s,l,c,a==null?void 0:a.class,a==null?void 0:a.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sd=(...s)=>s.filter((t,a,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===a).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ng={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=u.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:r="",children:i,iconNode:l,...o},c)=>u.createElement("svg",{ref:c,...Ng,width:t,height:t,stroke:s,strokeWidth:n?Number(a)*24/Number(t):a,className:sd("lucide",r),...o},[...l.map(([h,x])=>u.createElement(h,x)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=(s,t)=>{const a=u.forwardRef(({className:n,...r},i)=>u.createElement(wg,{ref:i,iconNode:t,className:sd(`lucide-${bg(s)}`,n),...r}));return a.displayName=`${s}`,a};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=X("Accessibility",[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=X("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=X("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=X("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=X("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=X("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=X("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=X("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=X("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=X("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=X("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=X("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=X("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=X("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=X("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=X("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=X("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=X("ChartArea",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=X("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=X("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=X("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=X("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=X("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=X("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=X("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=X("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=X("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=X("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=X("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=X("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=X("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=X("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=X("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=X("Columns3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=X("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=X("Contrast",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 18a6 6 0 0 0 0-12v12z",key:"j4l70d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=X("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=X("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=X("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=X("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=X("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=X("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=X("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=X("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=X("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=X("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=X("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=X("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=X("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=X("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=X("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=X("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=X("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=X("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=X("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=X("Grid2x2",[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 12h18",key:"1i2n21"}],["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=X("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=X("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=X("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=X("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=X("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=X("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=X("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=X("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=X("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=X("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=X("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=X("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=X("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=X("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=X("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=X("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=X("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=X("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=X("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=X("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=X("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=X("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=X("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=X("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=X("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=X("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=X("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=X("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=X("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=X("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=X("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=X("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=X("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=X("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=X("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=X("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=X("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=X("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=X("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=X("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=X("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=X("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=X("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=X("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=X("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=X("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=X("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=X("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=X("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=X("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=X("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=X("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=X("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=X("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=X("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=X("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=X("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=X("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=X("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=X("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=X("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=X("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=X("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=X("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=X("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=X("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=X("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=X("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),To="-",fp=s=>{const t=yp(s),{conflictingClassGroups:a,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:l=>{const o=l.split(To);return o[0]===""&&o.length!==1&&o.shift(),fd(o,t)||vp(l)},getConflictingClassGroupIds:(l,o)=>{const c=a[l]||[];return o&&n[l]?[...c,...n[l]]:c}}},fd=(s,t)=>{var l;if(s.length===0)return t.classGroupId;const a=s[0],n=t.nextPart.get(a),r=n?fd(s.slice(1),n):void 0;if(r)return r;if(t.validators.length===0)return;const i=s.join(To);return(l=t.validators.find(({validator:o})=>o(i)))==null?void 0:l.classGroupId},Tl=/^\[(.+)\]$/,vp=s=>{if(Tl.test(s)){const t=Tl.exec(s)[1],a=t==null?void 0:t.substring(0,t.indexOf(":"));if(a)return"arbitrary.."+a}},yp=s=>{const{theme:t,prefix:a}=s,n={nextPart:new Map,validators:[]};return bp(Object.entries(s.classGroups),a).forEach(([i,l])=>{qi(l,n,i,t)}),n},qi=(s,t,a,n)=>{s.forEach(r=>{if(typeof r=="string"){const i=r===""?t:El(t,r);i.classGroupId=a;return}if(typeof r=="function"){if(jp(r)){qi(r(n),t,a,n);return}t.validators.push({validator:r,classGroupId:a});return}Object.entries(r).forEach(([i,l])=>{qi(l,El(t,i),a,n)})})},El=(s,t)=>{let a=s;return t.split(To).forEach(n=>{a.nextPart.has(n)||a.nextPart.set(n,{nextPart:new Map,validators:[]}),a=a.nextPart.get(n)}),a},jp=s=>s.isThemeGetter,bp=(s,t)=>t?s.map(([a,n])=>{const r=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,o])=>[t+l,o])):i);return[a,r]}):s,Np=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,a=new Map,n=new Map;const r=(i,l)=>{a.set(i,l),t++,t>s&&(t=0,n=a,a=new Map)};return{get(i){let l=a.get(i);if(l!==void 0)return l;if((l=n.get(i))!==void 0)return r(i,l),l},set(i,l){a.has(i)?a.set(i,l):r(i,l)}}},vd="!",wp=s=>{const{separator:t,experimentalParseClassName:a}=s,n=t.length===1,r=t[0],i=t.length,l=o=>{const c=[];let h=0,x=0,d;for(let j=0;j<o.length;j++){let v=o[j];if(h===0){if(v===r&&(n||o.slice(j,j+i)===t)){c.push(o.slice(x,j)),x=j+i;continue}if(v==="/"){d=j;continue}}v==="["?h++:v==="]"&&h--}const m=c.length===0?o:o.substring(x),g=m.startsWith(vd),y=g?m.substring(1):m,p=d&&d>x?d-x:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:p}};return a?o=>a({className:o,parseClassName:l}):l},Sp=s=>{if(s.length<=1)return s;const t=[];let a=[];return s.forEach(n=>{n[0]==="["?(t.push(...a.sort(),n),a=[]):a.push(n)}),t.push(...a.sort()),t},Cp=s=>({cache:Np(s.cacheSize),parseClassName:wp(s),...fp(s)}),kp=/\s+/,Dp=(s,t)=>{const{parseClassName:a,getClassGroupId:n,getConflictingClassGroupIds:r}=t,i=[],l=s.trim().split(kp);let o="";for(let c=l.length-1;c>=0;c-=1){const h=l[c],{modifiers:x,hasImportantModifier:d,baseClassName:m,maybePostfixModifierPosition:g}=a(h);let y=!!g,p=n(y?m.substring(0,g):m);if(!p){if(!y){o=h+(o.length>0?" "+o:o);continue}if(p=n(m),!p){o=h+(o.length>0?" "+o:o);continue}y=!1}const j=Sp(x).join(":"),v=d?j+vd:j,N=v+p;if(i.includes(N))continue;i.push(N);const f=r(p,y);for(let S=0;S<f.length;++S){const D=f[S];i.push(v+D)}o=h+(o.length>0?" "+o:o)}return o};function Tp(){let s=0,t,a,n="";for(;s<arguments.length;)(t=arguments[s++])&&(a=yd(t))&&(n&&(n+=" "),n+=a);return n}const yd=s=>{if(typeof s=="string")return s;let t,a="";for(let n=0;n<s.length;n++)s[n]&&(t=yd(s[n]))&&(a&&(a+=" "),a+=t);return a};function Ep(s,...t){let a,n,r,i=l;function l(c){const h=t.reduce((x,d)=>d(x),s());return a=Cp(h),n=a.cache.get,r=a.cache.set,i=o,o(c)}function o(c){const h=n(c);if(h)return h;const x=Dp(c,a);return r(c,x),x}return function(){return i(Tp.apply(null,arguments))}}const Ye=s=>{const t=a=>a[s]||[];return t.isThemeGetter=!0,t},jd=/^\[(?:([a-z-]+):)?(.+)\]$/i,Mp=/^\d+\/\d+$/,Pp=new Set(["px","full","screen"]),Ap=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Rp=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ip=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Op=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Fp=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ws=s=>Pa(s)||Pp.has(s)||Mp.test(s),_s=s=>en(s,"length",Up),Pa=s=>!!s&&!Number.isNaN(Number(s)),yi=s=>en(s,"number",Pa),an=s=>!!s&&Number.isInteger(Number(s)),_p=s=>s.endsWith("%")&&Pa(s.slice(0,-1)),De=s=>jd.test(s),$s=s=>Ap.test(s),$p=new Set(["length","size","percentage"]),Lp=s=>en(s,$p,bd),zp=s=>en(s,"position",bd),Bp=new Set(["image","url"]),qp=s=>en(s,Bp,Hp),Vp=s=>en(s,"",Wp),nn=()=>!0,en=(s,t,a)=>{const n=jd.exec(s);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):a(n[2]):!1},Up=s=>Rp.test(s)&&!Ip.test(s),bd=()=>!1,Wp=s=>Op.test(s),Hp=s=>Fp.test(s),Gp=()=>{const s=Ye("colors"),t=Ye("spacing"),a=Ye("blur"),n=Ye("brightness"),r=Ye("borderColor"),i=Ye("borderRadius"),l=Ye("borderSpacing"),o=Ye("borderWidth"),c=Ye("contrast"),h=Ye("grayscale"),x=Ye("hueRotate"),d=Ye("invert"),m=Ye("gap"),g=Ye("gradientColorStops"),y=Ye("gradientColorStopPositions"),p=Ye("inset"),j=Ye("margin"),v=Ye("opacity"),N=Ye("padding"),f=Ye("saturate"),S=Ye("scale"),D=Ye("sepia"),w=Ye("skew"),R=Ye("space"),b=Ye("translate"),k=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",De,t],O=()=>[De,t],q=()=>["",ws,_s],P=()=>["auto",Pa,De],A=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],I=()=>["","0",De],C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[Pa,De];return{cacheSize:500,separator:":",theme:{colors:[nn],spacing:[ws,_s],blur:["none","",$s,De],brightness:B(),borderColor:[s],borderRadius:["none","","full",$s,De],borderSpacing:O(),borderWidth:q(),contrast:B(),grayscale:I(),hueRotate:B(),invert:I(),gap:O(),gradientColorStops:[s],gradientColorStopPositions:[_p,_s],inset:F(),margin:F(),opacity:B(),padding:O(),saturate:B(),scale:B(),sepia:I(),skew:B(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",De]}],container:["container"],columns:[{columns:[$s]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...A(),De]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",an,De]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",De]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",an,De]}],"grid-cols":[{"grid-cols":[nn]}],"col-start-end":[{col:["auto",{span:["full",an,De]},De]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[nn]}],"row-start-end":[{row:["auto",{span:[an,De]},De]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",De]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",De]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[N]}],px:[{px:[N]}],py:[{py:[N]}],ps:[{ps:[N]}],pe:[{pe:[N]}],pt:[{pt:[N]}],pr:[{pr:[N]}],pb:[{pb:[N]}],pl:[{pl:[N]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",De,t]}],"min-w":[{"min-w":[De,t,"min","max","fit"]}],"max-w":[{"max-w":[De,t,"none","full","min","max","fit","prose",{screen:[$s]},$s]}],h:[{h:[De,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[De,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[De,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[De,t,"auto","min","max","fit"]}],"font-size":[{text:["base",$s,_s]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",yi]}],"font-family":[{font:[nn]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",De]}],"line-clamp":[{"line-clamp":["none",Pa,yi]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ws,De]}],"list-image":[{"list-image":["none",De]}],"list-style-type":[{list:["none","disc","decimal",De]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ws,_s]}],"underline-offset":[{"underline-offset":["auto",ws,De]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",De]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",De]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...A(),zp]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Lp]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},qp]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:$()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[ws,De]}],"outline-w":[{outline:[ws,_s]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[ws,_s]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",$s,Vp]}],"shadow-color":[{shadow:[nn]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...M(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[a]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",$s,De]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[d]}],saturate:[{saturate:[f]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[a]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[f]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",De]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",De]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",De]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[an,De]}],"translate-x":[{"translate-x":[b]}],"translate-y":[{"translate-y":[b]}],"skew-x":[{"skew-x":[w]}],"skew-y":[{"skew-y":[w]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",De]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",De]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",De]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[ws,_s,yi]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Yp=Ep(Gp);function G(...s){return Yp(Qc(s))}const Kp=Ex,Nd=u.forwardRef(({className:s,...t},a)=>e.jsx(Cc,{ref:a,className:G("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));Nd.displayName=Cc.displayName;const Qp=ya("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),wd=u.forwardRef(({className:s,variant:t,...a},n)=>e.jsx(kc,{ref:n,className:G(Qp({variant:t}),s),...a}));wd.displayName=kc.displayName;const Xp=u.forwardRef(({className:s,...t},a)=>e.jsx(Dc,{ref:a,className:G("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",s),...t}));Xp.displayName=Dc.displayName;const Sd=u.forwardRef(({className:s,...t},a)=>e.jsx(Tc,{ref:a,className:G("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(ut,{className:"h-4 w-4"})}));Sd.displayName=Tc.displayName;const Cd=u.forwardRef(({className:s,...t},a)=>e.jsx(Ec,{ref:a,className:G("text-sm font-semibold",s),...t}));Cd.displayName=Ec.displayName;const kd=u.forwardRef(({className:s,...t},a)=>e.jsx(Mc,{ref:a,className:G("text-sm opacity-90",s),...t}));kd.displayName=Mc.displayName;function Jp(){const{toasts:s}=Ue();return e.jsxs(Kp,{children:[s.map(function({id:t,title:a,description:n,action:r,...i}){return e.jsxs(wd,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx(Cd,{children:a}),n&&e.jsx(kd,{children:n})]}),r,e.jsx(Sd,{})]},t)}),e.jsx(Nd,{})]})}var Ml=["light","dark"],Zp="(prefers-color-scheme: dark)",ef=u.createContext(void 0),tf={setTheme:s=>{},themes:[]},sf=()=>{var s;return(s=u.useContext(ef))!=null?s:tf};u.memo(({forcedTheme:s,storageKey:t,attribute:a,enableSystem:n,enableColorScheme:r,defaultTheme:i,value:l,attrs:o,nonce:c})=>{let h=i==="system",x=a==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${a}',s='setAttribute';`,d=r?Ml.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(y,p=!1,j=!0)=>{let v=l?l[y]:y,N=p?y+"|| ''":`'${v}'`,f="";return r&&j&&!p&&Ml.includes(y)&&(f+=`d.style.colorScheme = '${y}';`),a==="class"?p||v?f+=`c.add(${N})`:f+="null":v&&(f+=`d[s](n,${N})`),f},g=s?`!function(){${x}${m(s)}}()`:n?`!function(){try{${x}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${h})){var t='${Zp}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${l?`var x=${JSON.stringify(l)};`:""}${m(l?"x[e]":"e",!0)}}${h?"":"else{"+m(i,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${x}var e=localStorage.getItem('${t}');if(e){${l?`var x=${JSON.stringify(l)};`:""}${m(l?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${d}}catch(t){}}();`;return u.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})});var af=s=>{switch(s){case"success":return of;case"info":return cf;case"warning":return lf;case"error":return df;default:return null}},nf=Array(12).fill(0),rf=({visible:s,className:t})=>ie.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":s},ie.createElement("div",{className:"sonner-spinner"},nf.map((a,n)=>ie.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),of=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),lf=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),cf=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),df=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),uf=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ie.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ie.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),mf=()=>{let[s,t]=ie.useState(document.hidden);return ie.useEffect(()=>{let a=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",a),()=>window.removeEventListener("visibilitychange",a)},[]),s},Vi=1,hf=class{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{let t=this.subscribers.indexOf(s);this.subscribers.splice(t,1)}),this.publish=s=>{this.subscribers.forEach(t=>t(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var t;let{message:a,...n}=s,r=typeof(s==null?void 0:s.id)=="number"||((t=s.id)==null?void 0:t.length)>0?s.id:Vi++,i=this.toasts.find(o=>o.id===r),l=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),i?this.toasts=this.toasts.map(o=>o.id===r?(this.publish({...o,...s,id:r,title:a}),{...o,...s,id:r,dismissible:l,title:a}):o):this.addToast({title:a,...n,dismissible:l,id:r}),r},this.dismiss=s=>(this.dismissedToasts.add(s),s||this.toasts.forEach(t=>{this.subscribers.forEach(a=>a({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:s,dismiss:!0})),s),this.message=(s,t)=>this.create({...t,message:s}),this.error=(s,t)=>this.create({...t,message:s,type:"error"}),this.success=(s,t)=>this.create({...t,type:"success",message:s}),this.info=(s,t)=>this.create({...t,type:"info",message:s}),this.warning=(s,t)=>this.create({...t,type:"warning",message:s}),this.loading=(s,t)=>this.create({...t,type:"loading",message:s}),this.promise=(s,t)=>{if(!t)return;let a;t.loading!==void 0&&(a=this.create({...t,promise:s,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=s instanceof Promise?s:s(),r=a!==void 0,i,l=n.then(async c=>{if(i=["resolve",c],ie.isValidElement(c))r=!1,this.create({id:a,type:"default",message:c});else if(gf(c)&&!c.ok){r=!1;let h=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,x=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:a,type:"error",message:h,description:x})}else if(t.success!==void 0){r=!1;let h=typeof t.success=="function"?await t.success(c):t.success,x=typeof t.description=="function"?await t.description(c):t.description;this.create({id:a,type:"success",message:h,description:x})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){r=!1;let h=typeof t.error=="function"?await t.error(c):t.error,x=typeof t.description=="function"?await t.description(c):t.description;this.create({id:a,type:"error",message:h,description:x})}}).finally(()=>{var c;r&&(this.dismiss(a),a=void 0),(c=t.finally)==null||c.call(t)}),o=()=>new Promise((c,h)=>l.then(()=>i[0]==="reject"?h(i[1]):c(i[1])).catch(h));return typeof a!="string"&&typeof a!="number"?{unwrap:o}:Object.assign(a,{unwrap:o})},this.custom=(s,t)=>{let a=(t==null?void 0:t.id)||Vi++;return this.create({jsx:s(a),id:a,...t}),a},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Rt=new hf,xf=(s,t)=>{let a=(t==null?void 0:t.id)||Vi++;return Rt.addToast({title:s,...t,id:a}),a},gf=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",pf=xf,ff=()=>Rt.toasts,vf=()=>Rt.getActiveToasts(),ne=Object.assign(pf,{success:Rt.success,info:Rt.info,warning:Rt.warning,error:Rt.error,custom:Rt.custom,message:Rt.message,promise:Rt.promise,dismiss:Rt.dismiss,loading:Rt.loading},{getHistory:ff,getToasts:vf});function yf(s,{insertAt:t}={}){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s))}yf(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Yn(s){return s.label!==void 0}var jf=3,bf="32px",Nf="16px",Pl=4e3,wf=356,Sf=14,Cf=20,kf=200;function ss(...s){return s.filter(Boolean).join(" ")}function Df(s){let[t,a]=s.split("-"),n=[];return t&&n.push(t),a&&n.push(a),n}var Tf=s=>{var t,a,n,r,i,l,o,c,h,x,d;let{invert:m,toast:g,unstyled:y,interacting:p,setHeights:j,visibleToasts:v,heights:N,index:f,toasts:S,expanded:D,removeToast:w,defaultRichColors:R,closeButton:b,style:k,cancelButtonStyle:T,actionButtonStyle:F,className:O="",descriptionClassName:q="",duration:P,position:A,gap:$,loadingIcon:M,expandByDefault:z,classNames:I,icons:C,closeButtonAriaLabel:B="Close toast",pauseWhenPageIsHidden:E}=s,[V,U]=ie.useState(null),[H,Z]=ie.useState(null),[ee,ge]=ie.useState(!1),[le,Oe]=ie.useState(!1),[$t,ve]=ie.useState(!1),[kt,Y]=ie.useState(!1),[se,xe]=ie.useState(!1),[ye,be]=ie.useState(0),[ke,Qe]=ie.useState(0),xt=ie.useRef(g.duration||P||Pl),Un=ie.useRef(null),ea=ie.useRef(null),vx=f===0,yx=f+1<=v,qt=g.type,Na=g.dismissible!==!1,jx=g.className||"",bx=g.descriptionClassName||"",Wn=ie.useMemo(()=>N.findIndex(Ne=>Ne.toastId===g.id)||0,[N,g.id]),Nx=ie.useMemo(()=>{var Ne;return(Ne=g.closeButton)!=null?Ne:b},[g.closeButton,b]),ml=ie.useMemo(()=>g.duration||P||Pl,[g.duration,P]),mi=ie.useRef(0),wa=ie.useRef(0),hl=ie.useRef(0),Sa=ie.useRef(null),[wx,Sx]=A.split("-"),xl=ie.useMemo(()=>N.reduce((Ne,Ve,Xe)=>Xe>=Wn?Ne:Ne+Ve.height,0),[N,Wn]),gl=mf(),Cx=g.invert||m,hi=qt==="loading";wa.current=ie.useMemo(()=>Wn*$+xl,[Wn,xl]),ie.useEffect(()=>{xt.current=ml},[ml]),ie.useEffect(()=>{ge(!0)},[]),ie.useEffect(()=>{let Ne=ea.current;if(Ne){let Ve=Ne.getBoundingClientRect().height;return Qe(Ve),j(Xe=>[{toastId:g.id,height:Ve,position:g.position},...Xe]),()=>j(Xe=>Xe.filter(Zt=>Zt.toastId!==g.id))}},[j,g.id]),ie.useLayoutEffect(()=>{if(!ee)return;let Ne=ea.current,Ve=Ne.style.height;Ne.style.height="auto";let Xe=Ne.getBoundingClientRect().height;Ne.style.height=Ve,Qe(Xe),j(Zt=>Zt.find(es=>es.toastId===g.id)?Zt.map(es=>es.toastId===g.id?{...es,height:Xe}:es):[{toastId:g.id,height:Xe,position:g.position},...Zt])},[ee,g.title,g.description,j,g.id]);let Is=ie.useCallback(()=>{Oe(!0),be(wa.current),j(Ne=>Ne.filter(Ve=>Ve.toastId!==g.id)),setTimeout(()=>{w(g)},kf)},[g,w,j,wa]);ie.useEffect(()=>{if(g.promise&&qt==="loading"||g.duration===1/0||g.type==="loading")return;let Ne;return D||p||E&&gl?(()=>{if(hl.current<mi.current){let Ve=new Date().getTime()-mi.current;xt.current=xt.current-Ve}hl.current=new Date().getTime()})():xt.current!==1/0&&(mi.current=new Date().getTime(),Ne=setTimeout(()=>{var Ve;(Ve=g.onAutoClose)==null||Ve.call(g,g),Is()},xt.current)),()=>clearTimeout(Ne)},[D,p,g,qt,E,gl,Is]),ie.useEffect(()=>{g.delete&&Is()},[Is,g.delete]);function kx(){var Ne,Ve,Xe;return C!=null&&C.loading?ie.createElement("div",{className:ss(I==null?void 0:I.loader,(Ne=g==null?void 0:g.classNames)==null?void 0:Ne.loader,"sonner-loader"),"data-visible":qt==="loading"},C.loading):M?ie.createElement("div",{className:ss(I==null?void 0:I.loader,(Ve=g==null?void 0:g.classNames)==null?void 0:Ve.loader,"sonner-loader"),"data-visible":qt==="loading"},M):ie.createElement(rf,{className:ss(I==null?void 0:I.loader,(Xe=g==null?void 0:g.classNames)==null?void 0:Xe.loader),visible:qt==="loading"})}return ie.createElement("li",{tabIndex:0,ref:ea,className:ss(O,jx,I==null?void 0:I.toast,(t=g==null?void 0:g.classNames)==null?void 0:t.toast,I==null?void 0:I.default,I==null?void 0:I[qt],(a=g==null?void 0:g.classNames)==null?void 0:a[qt]),"data-sonner-toast":"","data-rich-colors":(n=g.richColors)!=null?n:R,"data-styled":!(g.jsx||g.unstyled||y),"data-mounted":ee,"data-promise":!!g.promise,"data-swiped":se,"data-removed":le,"data-visible":yx,"data-y-position":wx,"data-x-position":Sx,"data-index":f,"data-front":vx,"data-swiping":$t,"data-dismissible":Na,"data-type":qt,"data-invert":Cx,"data-swipe-out":kt,"data-swipe-direction":H,"data-expanded":!!(D||z&&ee),style:{"--index":f,"--toasts-before":f,"--z-index":S.length-f,"--offset":`${le?ye:wa.current}px`,"--initial-height":z?"auto":`${ke}px`,...k,...g.style},onDragEnd:()=>{ve(!1),U(null),Sa.current=null},onPointerDown:Ne=>{hi||!Na||(Un.current=new Date,be(wa.current),Ne.target.setPointerCapture(Ne.pointerId),Ne.target.tagName!=="BUTTON"&&(ve(!0),Sa.current={x:Ne.clientX,y:Ne.clientY}))},onPointerUp:()=>{var Ne,Ve,Xe,Zt;if(kt||!Na)return;Sa.current=null;let es=Number(((Ne=ea.current)==null?void 0:Ne.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Os=Number(((Ve=ea.current)==null?void 0:Ve.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ta=new Date().getTime()-((Xe=Un.current)==null?void 0:Xe.getTime()),ts=V==="x"?es:Os,Fs=Math.abs(ts)/ta;if(Math.abs(ts)>=Cf||Fs>.11){be(wa.current),(Zt=g.onDismiss)==null||Zt.call(g,g),Z(V==="x"?es>0?"right":"left":Os>0?"down":"up"),Is(),Y(!0),xe(!1);return}ve(!1),U(null)},onPointerMove:Ne=>{var Ve,Xe,Zt,es;if(!Sa.current||!Na||((Ve=window.getSelection())==null?void 0:Ve.toString().length)>0)return;let Os=Ne.clientY-Sa.current.y,ta=Ne.clientX-Sa.current.x,ts=(Xe=s.swipeDirections)!=null?Xe:Df(A);!V&&(Math.abs(ta)>1||Math.abs(Os)>1)&&U(Math.abs(ta)>Math.abs(Os)?"x":"y");let Fs={x:0,y:0};V==="y"?(ts.includes("top")||ts.includes("bottom"))&&(ts.includes("top")&&Os<0||ts.includes("bottom")&&Os>0)&&(Fs.y=Os):V==="x"&&(ts.includes("left")||ts.includes("right"))&&(ts.includes("left")&&ta<0||ts.includes("right")&&ta>0)&&(Fs.x=ta),(Math.abs(Fs.x)>0||Math.abs(Fs.y)>0)&&xe(!0),(Zt=ea.current)==null||Zt.style.setProperty("--swipe-amount-x",`${Fs.x}px`),(es=ea.current)==null||es.style.setProperty("--swipe-amount-y",`${Fs.y}px`)}},Nx&&!g.jsx?ie.createElement("button",{"aria-label":B,"data-disabled":hi,"data-close-button":!0,onClick:hi||!Na?()=>{}:()=>{var Ne;Is(),(Ne=g.onDismiss)==null||Ne.call(g,g)},className:ss(I==null?void 0:I.closeButton,(r=g==null?void 0:g.classNames)==null?void 0:r.closeButton)},(i=C==null?void 0:C.close)!=null?i:uf):null,g.jsx||u.isValidElement(g.title)?g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title:ie.createElement(ie.Fragment,null,qt||g.icon||g.promise?ie.createElement("div",{"data-icon":"",className:ss(I==null?void 0:I.icon,(l=g==null?void 0:g.classNames)==null?void 0:l.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||kx():null,g.type!=="loading"?g.icon||(C==null?void 0:C[qt])||af(qt):null):null,ie.createElement("div",{"data-content":"",className:ss(I==null?void 0:I.content,(o=g==null?void 0:g.classNames)==null?void 0:o.content)},ie.createElement("div",{"data-title":"",className:ss(I==null?void 0:I.title,(c=g==null?void 0:g.classNames)==null?void 0:c.title)},typeof g.title=="function"?g.title():g.title),g.description?ie.createElement("div",{"data-description":"",className:ss(q,bx,I==null?void 0:I.description,(h=g==null?void 0:g.classNames)==null?void 0:h.description)},typeof g.description=="function"?g.description():g.description):null),u.isValidElement(g.cancel)?g.cancel:g.cancel&&Yn(g.cancel)?ie.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||T,onClick:Ne=>{var Ve,Xe;Yn(g.cancel)&&Na&&((Xe=(Ve=g.cancel).onClick)==null||Xe.call(Ve,Ne),Is())},className:ss(I==null?void 0:I.cancelButton,(x=g==null?void 0:g.classNames)==null?void 0:x.cancelButton)},g.cancel.label):null,u.isValidElement(g.action)?g.action:g.action&&Yn(g.action)?ie.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||F,onClick:Ne=>{var Ve,Xe;Yn(g.action)&&((Xe=(Ve=g.action).onClick)==null||Xe.call(Ve,Ne),!Ne.defaultPrevented&&Is())},className:ss(I==null?void 0:I.actionButton,(d=g==null?void 0:g.classNames)==null?void 0:d.actionButton)},g.action.label):null))};function Al(){if(typeof window>"u"||typeof document>"u")return"ltr";let s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function Ef(s,t){let a={};return[s,t].forEach((n,r)=>{let i=r===1,l=i?"--mobile-offset":"--offset",o=i?Nf:bf;function c(h){["top","right","bottom","left"].forEach(x=>{a[`${l}-${x}`]=typeof h=="number"?`${h}px`:h})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(h=>{n[h]===void 0?a[`${l}-${h}`]=o:a[`${l}-${h}`]=typeof n[h]=="number"?`${n[h]}px`:n[h]}):c(o)}),a}var Mf=u.forwardRef(function(s,t){let{invert:a,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:l,className:o,offset:c,mobileOffset:h,theme:x="light",richColors:d,duration:m,style:g,visibleToasts:y=jf,toastOptions:p,dir:j=Al(),gap:v=Sf,loadingIcon:N,icons:f,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:D}=s,[w,R]=ie.useState([]),b=ie.useMemo(()=>Array.from(new Set([n].concat(w.filter(E=>E.position).map(E=>E.position)))),[w,n]),[k,T]=ie.useState([]),[F,O]=ie.useState(!1),[q,P]=ie.useState(!1),[A,$]=ie.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),M=ie.useRef(null),z=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=ie.useRef(null),C=ie.useRef(!1),B=ie.useCallback(E=>{R(V=>{var U;return(U=V.find(H=>H.id===E.id))!=null&&U.delete||Rt.dismiss(E.id),V.filter(({id:H})=>H!==E.id)})},[]);return ie.useEffect(()=>Rt.subscribe(E=>{if(E.dismiss){R(V=>V.map(U=>U.id===E.id?{...U,delete:!0}:U));return}setTimeout(()=>{Wx.flushSync(()=>{R(V=>{let U=V.findIndex(H=>H.id===E.id);return U!==-1?[...V.slice(0,U),{...V[U],...E},...V.slice(U+1)]:[E,...V]})})})}),[]),ie.useEffect(()=>{if(x!=="system"){$(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;let E=window.matchMedia("(prefers-color-scheme: dark)");try{E.addEventListener("change",({matches:V})=>{$(V?"dark":"light")})}catch{E.addListener(({matches:U})=>{try{$(U?"dark":"light")}catch(H){console.error(H)}})}},[x]),ie.useEffect(()=>{w.length<=1&&O(!1)},[w]),ie.useEffect(()=>{let E=V=>{var U,H;r.every(Z=>V[Z]||V.code===Z)&&(O(!0),(U=M.current)==null||U.focus()),V.code==="Escape"&&(document.activeElement===M.current||(H=M.current)!=null&&H.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),ie.useEffect(()=>{if(M.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,C.current=!1)}},[M.current]),ie.createElement("section",{ref:t,"aria-label":`${S} ${z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},b.map((E,V)=>{var U;let[H,Z]=E.split("-");return w.length?ie.createElement("ol",{key:E,dir:j==="auto"?Al():j,tabIndex:-1,ref:M,className:o,"data-sonner-toaster":!0,"data-theme":A,"data-y-position":H,"data-lifted":F&&w.length>1&&!i,"data-x-position":Z,style:{"--front-toast-height":`${((U=k[0])==null?void 0:U.height)||0}px`,"--width":`${wf}px`,"--gap":`${v}px`,...g,...Ef(c,h)},onBlur:ee=>{C.current&&!ee.currentTarget.contains(ee.relatedTarget)&&(C.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||C.current||(C.current=!0,I.current=ee.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{q||O(!1)},onDragEnd:()=>O(!1),onPointerDown:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},w.filter(ee=>!ee.position&&V===0||ee.position===E).map((ee,ge)=>{var le,Oe;return ie.createElement(Tf,{key:ee.id,icons:f,index:ge,toast:ee,defaultRichColors:d,duration:(le=p==null?void 0:p.duration)!=null?le:m,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:a,visibleToasts:y,closeButton:(Oe=p==null?void 0:p.closeButton)!=null?Oe:l,interacting:q,position:E,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:B,toasts:w.filter($t=>$t.position==ee.position),heights:k.filter($t=>$t.position==ee.position),setHeights:T,expandByDefault:i,gap:v,loadingIcon:N,expanded:F,pauseWhenPageIsHidden:D,swipeDirections:s.swipeDirections})})):null}))});const Pf=({...s})=>{const{theme:t="system"}=sf();return e.jsx(Mf,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})};var[Br,gC]=ds("Tooltip",[Xs]),qr=Xs(),Dd="TooltipProvider",Af=700,Ui="tooltip.open",[Rf,Eo]=Br(Dd),Td=s=>{const{__scopeTooltip:t,delayDuration:a=Af,skipDelayDuration:n=300,disableHoverableContent:r=!1,children:i}=s,l=u.useRef(!0),o=u.useRef(!1),c=u.useRef(0);return u.useEffect(()=>{const h=c.current;return()=>window.clearTimeout(h)},[]),e.jsx(Rf,{scope:t,isOpenDelayedRef:l,delayDuration:a,onOpen:u.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:u.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:o,onPointerInTransitChange:u.useCallback(h=>{o.current=h},[]),disableHoverableContent:r,children:i})};Td.displayName=Dd;var yn="Tooltip",[If,Vr]=Br(yn),Ed=s=>{const{__scopeTooltip:t,children:a,open:n,defaultOpen:r,onOpenChange:i,disableHoverableContent:l,delayDuration:o}=s,c=Eo(yn,s.__scopeTooltip),h=qr(t),[x,d]=u.useState(null),m=ys(),g=u.useRef(0),y=l??c.disableHoverableContent,p=o??c.delayDuration,j=u.useRef(!1),[v,N]=va({prop:n,defaultProp:r??!1,onChange:R=>{R?(c.onOpen(),document.dispatchEvent(new CustomEvent(Ui))):c.onClose(),i==null||i(R)},caller:yn}),f=u.useMemo(()=>v?j.current?"delayed-open":"instant-open":"closed",[v]),S=u.useCallback(()=>{window.clearTimeout(g.current),g.current=0,j.current=!1,N(!0)},[N]),D=u.useCallback(()=>{window.clearTimeout(g.current),g.current=0,N(!1)},[N]),w=u.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{j.current=!0,N(!0),g.current=0},p)},[p,N]);return u.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),e.jsx(Mr,{...h,children:e.jsx(If,{scope:t,contentId:m,open:v,stateAttribute:f,trigger:x,onTriggerChange:d,onTriggerEnter:u.useCallback(()=>{c.isOpenDelayedRef.current?w():S()},[c.isOpenDelayedRef,w,S]),onTriggerLeave:u.useCallback(()=>{y?D():(window.clearTimeout(g.current),g.current=0)},[D,y]),onOpen:S,onClose:D,disableHoverableContent:y,children:a})})};Ed.displayName=yn;var Wi="TooltipTrigger",Md=u.forwardRef((s,t)=>{const{__scopeTooltip:a,...n}=s,r=Vr(Wi,a),i=Eo(Wi,a),l=qr(a),o=u.useRef(null),c=He(t,o,r.onTriggerChange),h=u.useRef(!1),x=u.useRef(!1),d=u.useCallback(()=>h.current=!1,[]);return u.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),e.jsx(Tn,{asChild:!0,...l,children:e.jsx(Ae.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...n,ref:c,onPointerMove:me(s.onPointerMove,m=>{m.pointerType!=="touch"&&!x.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),x.current=!0)}),onPointerLeave:me(s.onPointerLeave,()=>{r.onTriggerLeave(),x.current=!1}),onPointerDown:me(s.onPointerDown,()=>{r.open&&r.onClose(),h.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:me(s.onFocus,()=>{h.current||r.onOpen()}),onBlur:me(s.onBlur,r.onClose),onClick:me(s.onClick,r.onClose)})})});Md.displayName=Wi;var Of="TooltipPortal",[pC,Ff]=Br(Of,{forceMount:void 0}),Wa="TooltipContent",Pd=u.forwardRef((s,t)=>{const a=Ff(Wa,s.__scopeTooltip),{forceMount:n=a.forceMount,side:r="top",...i}=s,l=Vr(Wa,s.__scopeTooltip);return e.jsx(zt,{present:n||l.open,children:l.disableHoverableContent?e.jsx(Ad,{side:r,...i,ref:t}):e.jsx(_f,{side:r,...i,ref:t})})}),_f=u.forwardRef((s,t)=>{const a=Vr(Wa,s.__scopeTooltip),n=Eo(Wa,s.__scopeTooltip),r=u.useRef(null),i=He(t,r),[l,o]=u.useState(null),{trigger:c,onClose:h}=a,x=r.current,{onPointerInTransitChange:d}=n,m=u.useCallback(()=>{o(null),d(!1)},[d]),g=u.useCallback((y,p)=>{const j=y.currentTarget,v={x:y.clientX,y:y.clientY},N=qf(v,j.getBoundingClientRect()),f=Vf(v,N),S=Uf(p.getBoundingClientRect()),D=Hf([...f,...S]);o(D),d(!0)},[d]);return u.useEffect(()=>()=>m(),[m]),u.useEffect(()=>{if(c&&x){const y=j=>g(j,x),p=j=>g(j,c);return c.addEventListener("pointerleave",y),x.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",y),x.removeEventListener("pointerleave",p)}}},[c,x,g,m]),u.useEffect(()=>{if(l){const y=p=>{const j=p.target,v={x:p.clientX,y:p.clientY},N=(c==null?void 0:c.contains(j))||(x==null?void 0:x.contains(j)),f=!Wf(v,l);N?m():f&&(m(),h())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,x,l,h,m]),e.jsx(Ad,{...s,ref:i})}),[$f,Lf]=Br(yn,{isInside:!1}),zf=Px("TooltipContent"),Ad=u.forwardRef((s,t)=>{const{__scopeTooltip:a,children:n,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:l,...o}=s,c=Vr(Wa,a),h=qr(a),{onClose:x}=c;return u.useEffect(()=>(document.addEventListener(Ui,x),()=>document.removeEventListener(Ui,x)),[x]),u.useEffect(()=>{if(c.trigger){const d=m=>{const g=m.target;g!=null&&g.contains(c.trigger)&&x()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,x]),e.jsx(Dr,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:d=>d.preventDefault(),onDismiss:x,children:e.jsxs(Tr,{"data-state":c.stateAttribute,...h,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(zf,{children:n}),e.jsx($f,{scope:a,isInside:!0,children:e.jsx(Mx,{id:c.contentId,role:"tooltip",children:r||n})})]})})});Pd.displayName=Wa;var Rd="TooltipArrow",Bf=u.forwardRef((s,t)=>{const{__scopeTooltip:a,...n}=s,r=qr(a);return Lf(Rd,a).isInside?null:e.jsx(Er,{...r,...n,ref:t})});Bf.displayName=Rd;function qf(s,t){const a=Math.abs(t.top-s.y),n=Math.abs(t.bottom-s.y),r=Math.abs(t.right-s.x),i=Math.abs(t.left-s.x);switch(Math.min(a,n,r,i)){case i:return"left";case r:return"right";case a:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Vf(s,t,a=5){const n=[];switch(t){case"top":n.push({x:s.x-a,y:s.y+a},{x:s.x+a,y:s.y+a});break;case"bottom":n.push({x:s.x-a,y:s.y-a},{x:s.x+a,y:s.y-a});break;case"left":n.push({x:s.x+a,y:s.y-a},{x:s.x+a,y:s.y+a});break;case"right":n.push({x:s.x-a,y:s.y-a},{x:s.x-a,y:s.y+a});break}return n}function Uf(s){const{top:t,right:a,bottom:n,left:r}=s;return[{x:r,y:t},{x:a,y:t},{x:a,y:n},{x:r,y:n}]}function Wf(s,t){const{x:a,y:n}=s;let r=!1;for(let i=0,l=t.length-1;i<t.length;l=i++){const o=t[i],c=t[l],h=o.x,x=o.y,d=c.x,m=c.y;x>n!=m>n&&a<(d-h)*(n-x)/(m-x)+h&&(r=!r)}return r}function Hf(s){const t=s.slice();return t.sort((a,n)=>a.x<n.x?-1:a.x>n.x?1:a.y<n.y?-1:a.y>n.y?1:0),Gf(t)}function Gf(s){if(s.length<=1)return s.slice();const t=[];for(let n=0;n<s.length;n++){const r=s[n];for(;t.length>=2;){const i=t[t.length-1],l=t[t.length-2];if((i.x-l.x)*(r.y-l.y)>=(i.y-l.y)*(r.x-l.x))t.pop();else break}t.push(r)}t.pop();const a=[];for(let n=s.length-1;n>=0;n--){const r=s[n];for(;a.length>=2;){const i=a[a.length-1],l=a[a.length-2];if((i.x-l.x)*(r.y-l.y)>=(i.y-l.y)*(r.x-l.x))a.pop();else break}a.push(r)}return a.pop(),t.length===1&&a.length===1&&t[0].x===a[0].x&&t[0].y===a[0].y?t:t.concat(a)}var Yf=Td,Kf=Ed,Qf=Md,Id=Pd;const Ur=Yf,Hi=Kf,Gi=Qf,xr=u.forwardRef(({className:s,sideOffset:t=4,...a},n)=>e.jsx(Id,{ref:n,sideOffset:t,className:G("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a}));xr.displayName=Id.displayName;const ji=768;function Mo(){const[s,t]=u.useState(void 0);return u.useEffect(()=>{const a=window.matchMedia(`(max-width: ${ji-1}px)`),n=()=>{t(window.innerWidth<ji)};return a.addEventListener("change",n),t(window.innerWidth<ji),()=>a.removeEventListener("change",n)},[]),!!s}const Yi=ya("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium tracking-tight ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-card hover:shadow-card-hover",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-card",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground shadow-sm hover:shadow-card",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",professional:"bg-gradient-primary text-primary-foreground hover:opacity-90 shadow-card hover:shadow-elevated font-medium tracking-tight"},size:{default:"h-10 px-6 py-2.5",sm:"h-9 rounded-md px-4 text-xs",lg:"h-12 rounded-md px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_=u.forwardRef(({className:s,variant:t,size:a,asChild:n=!1,...r},i)=>{const l=n?Xa:"button";return e.jsx(l,{className:G(Yi({variant:t,size:a,className:s})),ref:i,...r})});_.displayName="Button";const ae=u.forwardRef(({className:s,type:t,...a},n)=>e.jsx("input",{type:t,className:G("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...a}));ae.displayName="Input";var Xf="Separator",Rl="horizontal",Jf=["horizontal","vertical"],Od=u.forwardRef((s,t)=>{const{decorative:a,orientation:n=Rl,...r}=s,i=Zf(n)?n:Rl,o=a?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(Ae.div,{"data-orientation":i,...o,...r,ref:t})});Od.displayName=Xf;function Zf(s){return Jf.includes(s)}var Fd=Od;const os=u.forwardRef(({className:s,orientation:t="horizontal",decorative:a=!0,...n},r)=>e.jsx(Fd,{ref:r,decorative:a,orientation:t,className:G("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...n}));os.displayName=Fd.displayName;const ev=xo,tv=go,_d=u.forwardRef(({className:s,...t},a)=>e.jsx(En,{className:G("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));_d.displayName=En.displayName;const sv=ya("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),$d=u.forwardRef(({side:s="right",className:t,children:a,...n},r)=>e.jsxs(tv,{children:[e.jsx(_d,{}),e.jsxs(Mn,{ref:r,className:G(sv({side:s}),t),...n,children:[a,e.jsxs(Pc,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(ut,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));$d.displayName=Mn.displayName;const av=u.forwardRef(({className:s,...t},a)=>e.jsx(Pr,{ref:a,className:G("text-lg font-semibold text-foreground",s),...t}));av.displayName=Pr.displayName;const nv=u.forwardRef(({className:s,...t},a)=>e.jsx(Ar,{ref:a,className:G("text-sm text-muted-foreground",s),...t}));nv.displayName=Ar.displayName;function pe({className:s,...t}){return e.jsx("div",{className:G("animate-pulse rounded-md bg-muted",s),...t})}const rv="sidebar:state",iv=60*60*24*7,ov="16rem",lv="18rem",cv="3rem",dv="b",Ld=u.createContext(null);function Wr(){const s=u.useContext(Ld);if(!s)throw new Error("useSidebar must be used within a SidebarProvider.");return s}const zd=u.forwardRef(({defaultOpen:s=!0,open:t,onOpenChange:a,className:n,style:r,children:i,...l},o)=>{const c=Mo(),[h,x]=u.useState(!1),[d,m]=u.useState(s),g=t??d,y=u.useCallback(N=>{const f=typeof N=="function"?N(g):N;a?a(f):m(f),document.cookie=`${rv}=${f}; path=/; max-age=${iv}`},[a,g]),p=u.useCallback(()=>c?x(N=>!N):y(N=>!N),[c,y,x]);u.useEffect(()=>{const N=f=>{f.key===dv&&(f.metaKey||f.ctrlKey)&&(f.preventDefault(),p())};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[p]);const j=g?"expanded":"collapsed",v=u.useMemo(()=>({state:j,open:g,setOpen:y,isMobile:c,openMobile:h,setOpenMobile:x,toggleSidebar:p}),[j,g,y,c,h,x,p]);return e.jsx(Ld.Provider,{value:v,children:e.jsx(Ur,{delayDuration:0,children:e.jsx("div",{style:{"--sidebar-width":ov,"--sidebar-width-icon":cv,...r},className:G("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",n),ref:o,...l,children:i})})})});zd.displayName="SidebarProvider";const Bd=u.forwardRef(({side:s="left",variant:t="sidebar",collapsible:a="offcanvas",className:n,children:r,...i},l)=>{const{isMobile:o,state:c,openMobile:h,setOpenMobile:x}=Wr();return a==="none"?e.jsx("div",{className:G("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:l,...i,children:r}):o?e.jsx(ev,{open:h,onOpenChange:x,...i,children:e.jsx($d,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":lv},side:s,children:e.jsx("div",{className:"flex h-full w-full flex-col",children:r})})}):e.jsxs("div",{ref:l,className:"group peer hidden text-sidebar-foreground md:block","data-state":c,"data-collapsible":c==="collapsed"?a:"","data-variant":t,"data-side":s,children:[e.jsx("div",{className:G("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),e.jsx("div",{className:G("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",s==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...i,children:e.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:r})})]})});Bd.displayName="Sidebar";const qd=u.forwardRef(({className:s,onClick:t,...a},n)=>{const{toggleSidebar:r}=Wr();return e.jsxs(_,{ref:n,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:G("h-7 w-7",s),onClick:i=>{t==null||t(i),r()},...a,children:[e.jsx(tp,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});qd.displayName="SidebarTrigger";const uv=u.forwardRef(({className:s,...t},a)=>{const{toggleSidebar:n}=Wr();return e.jsx("button",{ref:a,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,title:"Toggle Sidebar",className:G("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",s),...t})});uv.displayName="SidebarRail";const mv=u.forwardRef(({className:s,...t},a)=>e.jsx("main",{ref:a,className:G("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",s),...t}));mv.displayName="SidebarInset";const hv=u.forwardRef(({className:s,...t},a)=>e.jsx(ae,{ref:a,"data-sidebar":"input",className:G("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",s),...t}));hv.displayName="SidebarInput";const Vd=u.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,"data-sidebar":"header",className:G("flex flex-col gap-2 p-2",s),...t}));Vd.displayName="SidebarHeader";const Ud=u.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,"data-sidebar":"footer",className:G("flex flex-col gap-2 p-2",s),...t}));Ud.displayName="SidebarFooter";const xv=u.forwardRef(({className:s,...t},a)=>e.jsx(os,{ref:a,"data-sidebar":"separator",className:G("mx-2 w-auto bg-sidebar-border",s),...t}));xv.displayName="SidebarSeparator";const Wd=u.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,"data-sidebar":"content",className:G("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",s),...t}));Wd.displayName="SidebarContent";const gv=u.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,"data-sidebar":"group",className:G("relative flex w-full min-w-0 flex-col p-2",s),...t}));gv.displayName="SidebarGroup";const pv=u.forwardRef(({className:s,asChild:t=!1,...a},n)=>{const r=t?Xa:"div";return e.jsx(r,{ref:n,"data-sidebar":"group-label",className:G("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",s),...a})});pv.displayName="SidebarGroupLabel";const fv=u.forwardRef(({className:s,asChild:t=!1,...a},n)=>{const r=t?Xa:"button";return e.jsx(r,{ref:n,"data-sidebar":"group-action",className:G("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",s),...a})});fv.displayName="SidebarGroupAction";const vv=u.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,"data-sidebar":"group-content",className:G("w-full text-sm",s),...t}));vv.displayName="SidebarGroupContent";const yv=u.forwardRef(({className:s,...t},a)=>e.jsx("ul",{ref:a,"data-sidebar":"menu",className:G("flex w-full min-w-0 flex-col gap-1",s),...t}));yv.displayName="SidebarMenu";const jv=u.forwardRef(({className:s,...t},a)=>e.jsx("li",{ref:a,"data-sidebar":"menu-item",className:G("group/menu-item relative",s),...t}));jv.displayName="SidebarMenuItem";const bv=ya("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Nv=u.forwardRef(({asChild:s=!1,isActive:t=!1,variant:a="default",size:n="default",tooltip:r,className:i,...l},o)=>{const c=s?Xa:"button",{isMobile:h,state:x}=Wr(),d=e.jsx(c,{ref:o,"data-sidebar":"menu-button","data-size":n,"data-active":t,className:G(bv({variant:a,size:n}),i),...l});return r?(typeof r=="string"&&(r={children:r}),e.jsxs(Hi,{children:[e.jsx(Gi,{asChild:!0,children:d}),e.jsx(xr,{side:"right",align:"center",hidden:x!=="collapsed"||h,...r})]})):d});Nv.displayName="SidebarMenuButton";const wv=u.forwardRef(({className:s,asChild:t=!1,showOnHover:a=!1,...n},r)=>{const i=t?Xa:"button";return e.jsx(i,{ref:r,"data-sidebar":"menu-action",className:G("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",a&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",s),...n})});wv.displayName="SidebarMenuAction";const Sv=u.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,"data-sidebar":"menu-badge",className:G("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",s),...t}));Sv.displayName="SidebarMenuBadge";const Cv=u.forwardRef(({className:s,showIcon:t=!1,...a},n)=>{const r=u.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return e.jsxs("div",{ref:n,"data-sidebar":"menu-skeleton",className:G("flex h-8 items-center gap-2 rounded-md px-2",s),...a,children:[t&&e.jsx(pe,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),e.jsx(pe,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":r}})]})});Cv.displayName="SidebarMenuSkeleton";const kv=u.forwardRef(({className:s,...t},a)=>e.jsx("ul",{ref:a,"data-sidebar":"menu-sub",className:G("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",s),...t}));kv.displayName="SidebarMenuSub";const Dv=u.forwardRef(({...s},t)=>e.jsx("li",{ref:t,...s}));Dv.displayName="SidebarMenuSubItem";const Tv=u.forwardRef(({asChild:s=!1,size:t="md",isActive:a,className:n,...r},i)=>{const l=s?Xa:"a";return e.jsx(l,{ref:i,"data-sidebar":"menu-sub-button","data-size":t,"data-active":a,className:G("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",n),...r})});Tv.displayName="SidebarMenuSubButton";var Hr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Gr=typeof window>"u"||"Deno"in globalThis;function as(){}function Ev(s,t){return typeof s=="function"?s(t):s}function Mv(s){return typeof s=="number"&&s>=0&&s!==1/0}function Pv(s,t){return Math.max(s+(t||0)-Date.now(),0)}function Ki(s,t){return typeof s=="function"?s(t):s}function Av(s,t){return typeof s=="function"?s(t):s}function Il(s,t){const{type:a="all",exact:n,fetchStatus:r,predicate:i,queryKey:l,stale:o}=s;if(l){if(n){if(t.queryHash!==Po(l,t.options))return!1}else if(!bn(t.queryKey,l))return!1}if(a!=="all"){const c=t.isActive();if(a==="active"&&!c||a==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||r&&r!==t.state.fetchStatus||i&&!i(t))}function Ol(s,t){const{exact:a,status:n,predicate:r,mutationKey:i}=s;if(i){if(!t.options.mutationKey)return!1;if(a){if(jn(t.options.mutationKey)!==jn(i))return!1}else if(!bn(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||r&&!r(t))}function Po(s,t){return((t==null?void 0:t.queryKeyHashFn)||jn)(s)}function jn(s){return JSON.stringify(s,(t,a)=>Qi(a)?Object.keys(a).sort().reduce((n,r)=>(n[r]=a[r],n),{}):a)}function bn(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?Object.keys(t).every(a=>bn(s[a],t[a])):!1}function Hd(s,t){if(s===t)return s;const a=Fl(s)&&Fl(t);if(a||Qi(s)&&Qi(t)){const n=a?s:Object.keys(s),r=n.length,i=a?t:Object.keys(t),l=i.length,o=a?[]:{},c=new Set(n);let h=0;for(let x=0;x<l;x++){const d=a?x:i[x];(!a&&c.has(d)||a)&&s[d]===void 0&&t[d]===void 0?(o[d]=void 0,h++):(o[d]=Hd(s[d],t[d]),o[d]===s[d]&&s[d]!==void 0&&h++)}return r===l&&h===r?s:o}return t}function Fl(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Qi(s){if(!_l(s))return!1;const t=s.constructor;if(t===void 0)return!0;const a=t.prototype;return!(!_l(a)||!a.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function _l(s){return Object.prototype.toString.call(s)==="[object Object]"}function Rv(s){return new Promise(t=>{setTimeout(t,s)})}function Iv(s,t,a){return typeof a.structuralSharing=="function"?a.structuralSharing(s,t):a.structuralSharing!==!1?Hd(s,t):t}function Ov(s,t,a=0){const n=[...s,t];return a&&n.length>a?n.slice(1):n}function Fv(s,t,a=0){const n=[t,...s];return a&&n.length>a?n.slice(0,-1):n}var Ao=Symbol();function Gd(s,t){return!s.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!s.queryFn||s.queryFn===Ao?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}var aa,zs,Aa,fc,_v=(fc=class extends Hr{constructor(){super();ze(this,aa);ze(this,zs);ze(this,Aa);we(this,Aa,t=>{if(!Gr&&window.addEventListener){const a=()=>t();return window.addEventListener("visibilitychange",a,!1),()=>{window.removeEventListener("visibilitychange",a)}}})}onSubscribe(){te(this,zs)||this.setEventListener(te(this,Aa))}onUnsubscribe(){var t;this.hasListeners()||((t=te(this,zs))==null||t.call(this),we(this,zs,void 0))}setEventListener(t){var a;we(this,Aa,t),(a=te(this,zs))==null||a.call(this),we(this,zs,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){te(this,aa)!==t&&(we(this,aa,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(a=>{a(t)})}isFocused(){var t;return typeof te(this,aa)=="boolean"?te(this,aa):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},aa=new WeakMap,zs=new WeakMap,Aa=new WeakMap,fc),Yd=new _v,Ra,Bs,Ia,vc,$v=(vc=class extends Hr{constructor(){super();ze(this,Ra,!0);ze(this,Bs);ze(this,Ia);we(this,Ia,t=>{if(!Gr&&window.addEventListener){const a=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",a,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",n)}}})}onSubscribe(){te(this,Bs)||this.setEventListener(te(this,Ia))}onUnsubscribe(){var t;this.hasListeners()||((t=te(this,Bs))==null||t.call(this),we(this,Bs,void 0))}setEventListener(t){var a;we(this,Ia,t),(a=te(this,Bs))==null||a.call(this),we(this,Bs,t(this.setOnline.bind(this)))}setOnline(t){te(this,Ra)!==t&&(we(this,Ra,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return te(this,Ra)}},Ra=new WeakMap,Bs=new WeakMap,Ia=new WeakMap,vc),gr=new $v;function Lv(){let s,t;const a=new Promise((r,i)=>{s=r,t=i});a.status="pending",a.catch(()=>{});function n(r){Object.assign(a,r),delete a.resolve,delete a.reject}return a.resolve=r=>{n({status:"fulfilled",value:r}),s(r)},a.reject=r=>{n({status:"rejected",reason:r}),t(r)},a}function zv(s){return Math.min(1e3*2**s,3e4)}function Kd(s){return(s??"online")==="online"?gr.isOnline():!0}var Qd=class extends Error{constructor(s){super("CancelledError"),this.revert=s==null?void 0:s.revert,this.silent=s==null?void 0:s.silent}};function bi(s){return s instanceof Qd}function Xd(s){let t=!1,a=0,n=!1,r;const i=Lv(),l=p=>{var j;n||(m(new Qd(p)),(j=s.abort)==null||j.call(s))},o=()=>{t=!0},c=()=>{t=!1},h=()=>Yd.isFocused()&&(s.networkMode==="always"||gr.isOnline())&&s.canRun(),x=()=>Kd(s.networkMode)&&s.canRun(),d=p=>{var j;n||(n=!0,(j=s.onSuccess)==null||j.call(s,p),r==null||r(),i.resolve(p))},m=p=>{var j;n||(n=!0,(j=s.onError)==null||j.call(s,p),r==null||r(),i.reject(p))},g=()=>new Promise(p=>{var j;r=v=>{(n||h())&&p(v)},(j=s.onPause)==null||j.call(s)}).then(()=>{var p;r=void 0,n||(p=s.onContinue)==null||p.call(s)}),y=()=>{if(n)return;let p;const j=a===0?s.initialPromise:void 0;try{p=j??s.fn()}catch(v){p=Promise.reject(v)}Promise.resolve(p).then(d).catch(v=>{var w;if(n)return;const N=s.retry??(Gr?0:3),f=s.retryDelay??zv,S=typeof f=="function"?f(a,v):f,D=N===!0||typeof N=="number"&&a<N||typeof N=="function"&&N(a,v);if(t||!D){m(v);return}a++,(w=s.onFail)==null||w.call(s,a,v),Rv(S).then(()=>h()?void 0:g()).then(()=>{t?m(v):y()})})};return{promise:i,cancel:l,continue:()=>(r==null||r(),i),cancelRetry:o,continueRetry:c,canStart:x,start:()=>(x()?y():g().then(y),i)}}var Bv=s=>setTimeout(s,0);function qv(){let s=[],t=0,a=o=>{o()},n=o=>{o()},r=Bv;const i=o=>{t?s.push(o):r(()=>{a(o)})},l=()=>{const o=s;s=[],o.length&&r(()=>{n(()=>{o.forEach(c=>{a(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{a=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{r=o}}}var Et=qv(),na,yc,Jd=(yc=class{constructor(){ze(this,na)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Mv(this.gcTime)&&we(this,na,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(Gr?1/0:5*60*1e3))}clearGcTimeout(){te(this,na)&&(clearTimeout(te(this,na)),we(this,na,void 0))}},na=new WeakMap,yc),Oa,ra,Ut,ia,Nt,kn,oa,ns,Cs,jc,Vv=(jc=class extends Jd{constructor(t){super();ze(this,ns);ze(this,Oa);ze(this,ra);ze(this,Ut);ze(this,ia);ze(this,Nt);ze(this,kn);ze(this,oa);we(this,oa,!1),we(this,kn,t.defaultOptions),this.setOptions(t.options),this.observers=[],we(this,ia,t.client),we(this,Ut,te(this,ia).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,we(this,Oa,Wv(this.options)),this.state=t.state??te(this,Oa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=te(this,Nt))==null?void 0:t.promise}setOptions(t){this.options={...te(this,kn),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&te(this,Ut).remove(this)}setData(t,a){const n=Iv(this.state.data,t,this.options);return yt(this,ns,Cs).call(this,{data:n,type:"success",dataUpdatedAt:a==null?void 0:a.updatedAt,manual:a==null?void 0:a.manual}),n}setState(t,a){yt(this,ns,Cs).call(this,{type:"setState",state:t,setStateOptions:a})}cancel(t){var n,r;const a=(n=te(this,Nt))==null?void 0:n.promise;return(r=te(this,Nt))==null||r.cancel(t),a?a.then(as).catch(as):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(te(this,Oa))}isActive(){return this.observers.some(t=>Av(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ao||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ki(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Pv(this.state.dataUpdatedAt,t)}onFocus(){var a;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(a=te(this,Nt))==null||a.continue()}onOnline(){var a;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(a=te(this,Nt))==null||a.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),te(this,Ut).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(a=>a!==t),this.observers.length||(te(this,Nt)&&(te(this,oa)?te(this,Nt).cancel({revert:!0}):te(this,Nt).cancelRetry()),this.scheduleGc()),te(this,Ut).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||yt(this,ns,Cs).call(this,{type:"invalidate"})}fetch(t,a){var h,x,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(a!=null&&a.cancelRefetch))this.cancel({silent:!0});else if(te(this,Nt))return te(this,Nt).continueRetry(),te(this,Nt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(g=>g.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,r=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(we(this,oa,!0),n.signal)})},i=()=>{const m=Gd(this.options,a),y=(()=>{const p={client:te(this,ia),queryKey:this.queryKey,meta:this.meta};return r(p),p})();return we(this,oa,!1),this.options.persister?this.options.persister(m,y,this):m(y)},o=(()=>{const m={fetchOptions:a,options:this.options,queryKey:this.queryKey,client:te(this,ia),state:this.state,fetchFn:i};return r(m),m})();(h=this.options.behavior)==null||h.onFetch(o,this),we(this,ra,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((x=o.fetchOptions)==null?void 0:x.meta))&&yt(this,ns,Cs).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta});const c=m=>{var g,y,p,j;bi(m)&&m.silent||yt(this,ns,Cs).call(this,{type:"error",error:m}),bi(m)||((y=(g=te(this,Ut).config).onError)==null||y.call(g,m,this),(j=(p=te(this,Ut).config).onSettled)==null||j.call(p,this.state.data,m,this)),this.scheduleGc()};return we(this,Nt,Xd({initialPromise:a==null?void 0:a.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{var g,y,p,j;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(v){c(v);return}(y=(g=te(this,Ut).config).onSuccess)==null||y.call(g,m,this),(j=(p=te(this,Ut).config).onSettled)==null||j.call(p,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,g)=>{yt(this,ns,Cs).call(this,{type:"failed",failureCount:m,error:g})},onPause:()=>{yt(this,ns,Cs).call(this,{type:"pause"})},onContinue:()=>{yt(this,ns,Cs).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),te(this,Nt).start()}},Oa=new WeakMap,ra=new WeakMap,Ut=new WeakMap,ia=new WeakMap,Nt=new WeakMap,kn=new WeakMap,oa=new WeakMap,ns=new WeakSet,Cs=function(t){const a=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Uv(n.data,this.options),fetchMeta:t.meta??null};case"success":return we(this,ra,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return bi(r)&&r.revert&&te(this,ra)?{...te(this,ra),fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=a(this.state),Et.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),te(this,Ut).notify({query:this,type:"updated",action:t})})},jc);function Uv(s,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Kd(t.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function Wv(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,a=t!==void 0,n=a?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:a?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}var xs,bc,Hv=(bc=class extends Hr{constructor(t={}){super();ze(this,xs);this.config=t,we(this,xs,new Map)}build(t,a,n){const r=a.queryKey,i=a.queryHash??Po(r,a);let l=this.get(i);return l||(l=new Vv({client:t,queryKey:r,queryHash:i,options:t.defaultQueryOptions(a),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(l)),l}add(t){te(this,xs).has(t.queryHash)||(te(this,xs).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const a=te(this,xs).get(t.queryHash);a&&(t.destroy(),a===t&&te(this,xs).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Et.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return te(this,xs).get(t)}getAll(){return[...te(this,xs).values()]}find(t){const a={exact:!0,...t};return this.getAll().find(n=>Il(a,n))}findAll(t={}){const a=this.getAll();return Object.keys(t).length>0?a.filter(n=>Il(t,n)):a}notify(t){Et.batch(()=>{this.listeners.forEach(a=>{a(t)})})}onFocus(){Et.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Et.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},xs=new WeakMap,bc),gs,Dt,la,ps,Ls,Nc,Gv=(Nc=class extends Jd{constructor(t){super();ze(this,ps);ze(this,gs);ze(this,Dt);ze(this,la);this.mutationId=t.mutationId,we(this,Dt,t.mutationCache),we(this,gs,[]),this.state=t.state||Yv(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){te(this,gs).includes(t)||(te(this,gs).push(t),this.clearGcTimeout(),te(this,Dt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){we(this,gs,te(this,gs).filter(a=>a!==t)),this.scheduleGc(),te(this,Dt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){te(this,gs).length||(this.state.status==="pending"?this.scheduleGc():te(this,Dt).remove(this))}continue(){var t;return((t=te(this,la))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,l,o,c,h,x,d,m,g,y,p,j,v,N,f,S,D,w,R,b;const a=()=>{yt(this,ps,Ls).call(this,{type:"continue"})};we(this,la,Xd({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,T)=>{yt(this,ps,Ls).call(this,{type:"failed",failureCount:k,error:T})},onPause:()=>{yt(this,ps,Ls).call(this,{type:"pause"})},onContinue:a,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>te(this,Dt).canRun(this)}));const n=this.state.status==="pending",r=!te(this,la).canStart();try{if(n)a();else{yt(this,ps,Ls).call(this,{type:"pending",variables:t,isPaused:r}),await((l=(i=te(this,Dt).config).onMutate)==null?void 0:l.call(i,t,this));const T=await((c=(o=this.options).onMutate)==null?void 0:c.call(o,t));T!==this.state.context&&yt(this,ps,Ls).call(this,{type:"pending",context:T,variables:t,isPaused:r})}const k=await te(this,la).start();return await((x=(h=te(this,Dt).config).onSuccess)==null?void 0:x.call(h,k,t,this.state.context,this)),await((m=(d=this.options).onSuccess)==null?void 0:m.call(d,k,t,this.state.context)),await((y=(g=te(this,Dt).config).onSettled)==null?void 0:y.call(g,k,null,this.state.variables,this.state.context,this)),await((j=(p=this.options).onSettled)==null?void 0:j.call(p,k,null,t,this.state.context)),yt(this,ps,Ls).call(this,{type:"success",data:k}),k}catch(k){try{throw await((N=(v=te(this,Dt).config).onError)==null?void 0:N.call(v,k,t,this.state.context,this)),await((S=(f=this.options).onError)==null?void 0:S.call(f,k,t,this.state.context)),await((w=(D=te(this,Dt).config).onSettled)==null?void 0:w.call(D,void 0,k,this.state.variables,this.state.context,this)),await((b=(R=this.options).onSettled)==null?void 0:b.call(R,void 0,k,t,this.state.context)),k}finally{yt(this,ps,Ls).call(this,{type:"error",error:k})}}finally{te(this,Dt).runNext(this)}}},gs=new WeakMap,Dt=new WeakMap,la=new WeakMap,ps=new WeakSet,Ls=function(t){const a=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=a(this.state),Et.batch(()=>{te(this,gs).forEach(n=>{n.onMutationUpdate(t)}),te(this,Dt).notify({mutation:this,type:"updated",action:t})})},Nc);function Yv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ks,rs,Dn,wc,Kv=(wc=class extends Hr{constructor(t={}){super();ze(this,ks);ze(this,rs);ze(this,Dn);this.config=t,we(this,ks,new Set),we(this,rs,new Map),we(this,Dn,0)}build(t,a,n){const r=new Gv({mutationCache:this,mutationId:++Hn(this,Dn)._,options:t.defaultMutationOptions(a),state:n});return this.add(r),r}add(t){te(this,ks).add(t);const a=Kn(t);if(typeof a=="string"){const n=te(this,rs).get(a);n?n.push(t):te(this,rs).set(a,[t])}this.notify({type:"added",mutation:t})}remove(t){if(te(this,ks).delete(t)){const a=Kn(t);if(typeof a=="string"){const n=te(this,rs).get(a);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&te(this,rs).delete(a)}}this.notify({type:"removed",mutation:t})}canRun(t){const a=Kn(t);if(typeof a=="string"){const n=te(this,rs).get(a),r=n==null?void 0:n.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){var n;const a=Kn(t);if(typeof a=="string"){const r=(n=te(this,rs).get(a))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Et.batch(()=>{te(this,ks).forEach(t=>{this.notify({type:"removed",mutation:t})}),te(this,ks).clear(),te(this,rs).clear()})}getAll(){return Array.from(te(this,ks))}find(t){const a={exact:!0,...t};return this.getAll().find(n=>Ol(a,n))}findAll(t={}){return this.getAll().filter(a=>Ol(t,a))}notify(t){Et.batch(()=>{this.listeners.forEach(a=>{a(t)})})}resumePausedMutations(){const t=this.getAll().filter(a=>a.state.isPaused);return Et.batch(()=>Promise.all(t.map(a=>a.continue().catch(as))))}},ks=new WeakMap,rs=new WeakMap,Dn=new WeakMap,wc);function Kn(s){var t;return(t=s.options.scope)==null?void 0:t.id}function $l(s){return{onFetch:(t,a)=>{var x,d,m,g,y;const n=t.options,r=(m=(d=(x=t.fetchOptions)==null?void 0:x.meta)==null?void 0:d.fetchMore)==null?void 0:m.direction,i=((g=t.state.data)==null?void 0:g.pages)||[],l=((y=t.state.data)==null?void 0:y.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const h=async()=>{let p=!1;const j=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},v=Gd(t.options,t.fetchOptions),N=async(f,S,D)=>{if(p)return Promise.reject();if(S==null&&f.pages.length)return Promise.resolve(f);const R=(()=>{const F={client:t.client,queryKey:t.queryKey,pageParam:S,direction:D?"backward":"forward",meta:t.options.meta};return j(F),F})(),b=await v(R),{maxPages:k}=t.options,T=D?Fv:Ov;return{pages:T(f.pages,b,k),pageParams:T(f.pageParams,S,k)}};if(r&&i.length){const f=r==="backward",S=f?Qv:Ll,D={pages:i,pageParams:l},w=S(n,D);o=await N(D,w,f)}else{const f=s??i.length;do{const S=c===0?l[0]??n.initialPageParam:Ll(n,o);if(c>0&&S==null)break;o=await N(o,S),c++}while(c<f)}return o};t.options.persister?t.fetchFn=()=>{var p,j;return(j=(p=t.options).persister)==null?void 0:j.call(p,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},a)}:t.fetchFn=h}}}function Ll(s,{pages:t,pageParams:a}){const n=t.length-1;return t.length>0?s.getNextPageParam(t[n],t,a[n],a):void 0}function Qv(s,{pages:t,pageParams:a}){var n;return t.length>0?(n=s.getPreviousPageParam)==null?void 0:n.call(s,t[0],t,a[0],a):void 0}var et,qs,Vs,Fa,_a,Us,$a,La,Sc,Xv=(Sc=class{constructor(s={}){ze(this,et);ze(this,qs);ze(this,Vs);ze(this,Fa);ze(this,_a);ze(this,Us);ze(this,$a);ze(this,La);we(this,et,s.queryCache||new Hv),we(this,qs,s.mutationCache||new Kv),we(this,Vs,s.defaultOptions||{}),we(this,Fa,new Map),we(this,_a,new Map),we(this,Us,0)}mount(){Hn(this,Us)._++,te(this,Us)===1&&(we(this,$a,Yd.subscribe(async s=>{s&&(await this.resumePausedMutations(),te(this,et).onFocus())})),we(this,La,gr.subscribe(async s=>{s&&(await this.resumePausedMutations(),te(this,et).onOnline())})))}unmount(){var s,t;Hn(this,Us)._--,te(this,Us)===0&&((s=te(this,$a))==null||s.call(this),we(this,$a,void 0),(t=te(this,La))==null||t.call(this),we(this,La,void 0))}isFetching(s){return te(this,et).findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return te(this,qs).findAll({...s,status:"pending"}).length}getQueryData(s){var a;const t=this.defaultQueryOptions({queryKey:s});return(a=te(this,et).get(t.queryHash))==null?void 0:a.state.data}ensureQueryData(s){const t=this.defaultQueryOptions(s),a=te(this,et).build(this,t),n=a.state.data;return n===void 0?this.fetchQuery(s):(s.revalidateIfStale&&a.isStaleByTime(Ki(t.staleTime,a))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(s){return te(this,et).findAll(s).map(({queryKey:t,state:a})=>{const n=a.data;return[t,n]})}setQueryData(s,t,a){const n=this.defaultQueryOptions({queryKey:s}),r=te(this,et).get(n.queryHash),i=r==null?void 0:r.state.data,l=Ev(t,i);if(l!==void 0)return te(this,et).build(this,n).setData(l,{...a,manual:!0})}setQueriesData(s,t,a){return Et.batch(()=>te(this,et).findAll(s).map(({queryKey:n})=>[n,this.setQueryData(n,t,a)]))}getQueryState(s){var a;const t=this.defaultQueryOptions({queryKey:s});return(a=te(this,et).get(t.queryHash))==null?void 0:a.state}removeQueries(s){const t=te(this,et);Et.batch(()=>{t.findAll(s).forEach(a=>{t.remove(a)})})}resetQueries(s,t){const a=te(this,et);return Et.batch(()=>(a.findAll(s).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...s},t)))}cancelQueries(s,t={}){const a={revert:!0,...t},n=Et.batch(()=>te(this,et).findAll(s).map(r=>r.cancel(a)));return Promise.all(n).then(as).catch(as)}invalidateQueries(s,t={}){return Et.batch(()=>(te(this,et).findAll(s).forEach(a=>{a.invalidate()}),(s==null?void 0:s.refetchType)==="none"?Promise.resolve():this.refetchQueries({...s,type:(s==null?void 0:s.refetchType)??(s==null?void 0:s.type)??"active"},t)))}refetchQueries(s,t={}){const a={...t,cancelRefetch:t.cancelRefetch??!0},n=Et.batch(()=>te(this,et).findAll(s).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,a);return a.throwOnError||(i=i.catch(as)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(as)}fetchQuery(s){const t=this.defaultQueryOptions(s);t.retry===void 0&&(t.retry=!1);const a=te(this,et).build(this,t);return a.isStaleByTime(Ki(t.staleTime,a))?a.fetch(t):Promise.resolve(a.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(as).catch(as)}fetchInfiniteQuery(s){return s.behavior=$l(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(as).catch(as)}ensureInfiniteQueryData(s){return s.behavior=$l(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return gr.isOnline()?te(this,qs).resumePausedMutations():Promise.resolve()}getQueryCache(){return te(this,et)}getMutationCache(){return te(this,qs)}getDefaultOptions(){return te(this,Vs)}setDefaultOptions(s){we(this,Vs,s)}setQueryDefaults(s,t){te(this,Fa).set(jn(s),{queryKey:s,defaultOptions:t})}getQueryDefaults(s){const t=[...te(this,Fa).values()],a={};return t.forEach(n=>{bn(s,n.queryKey)&&Object.assign(a,n.defaultOptions)}),a}setMutationDefaults(s,t){te(this,_a).set(jn(s),{mutationKey:s,defaultOptions:t})}getMutationDefaults(s){const t=[...te(this,_a).values()],a={};return t.forEach(n=>{bn(s,n.mutationKey)&&Object.assign(a,n.defaultOptions)}),a}defaultQueryOptions(s){if(s._defaulted)return s;const t={...te(this,Vs).queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return t.queryHash||(t.queryHash=Po(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ao&&(t.enabled=!1),t}defaultMutationOptions(s){return s!=null&&s._defaulted?s:{...te(this,Vs).mutations,...(s==null?void 0:s.mutationKey)&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){te(this,et).clear(),te(this,qs).clear()}},et=new WeakMap,qs=new WeakMap,Vs=new WeakMap,Fa=new WeakMap,_a=new WeakMap,Us=new WeakMap,$a=new WeakMap,La=new WeakMap,Sc),Jv=u.createContext(void 0),Zv=({client:s,children:t})=>(u.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),e.jsx(Jv.Provider,{value:s,children:t}));const ey="https://maourawciifennrsivps.supabase.co",ty="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hb3VyYXdjaWlmZW5ucnNpdnBzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg0NDkyMzEsImV4cCI6MjA3NDAyNTIzMX0.vyHiZUKXPO7y3D9GHRU0HKiZQruJ5tsBEk4LCGmolgM",sy=()=>{try{return typeof window<"u"&&typeof window.localStorage<"u"?localStorage:null}catch(s){return console.warn("localStorage is not available:",s),null}},ue=eg(ey,ty,{auth:{storage:sy(),persistSession:!0,autoRefreshToken:!0}}),Zd=u.createContext(void 0),Rs=()=>{const s=u.useContext(Zd);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},ay=({children:s})=>{const[t,a]=u.useState(null),[n,r]=u.useState(null),[i,l]=u.useState(!0);u.useEffect(()=>{(async()=>{try{const{data:{session:p},error:j}=await ue.auth.getSession();j?(console.error("Error getting session:",j),ne.error("Authentication error occurred")):(r(p),a((p==null?void 0:p.user)??null))}catch(p){console.error("Unexpected error getting session:",p)}finally{l(!1)}})();const{data:{subscription:y}}=ue.auth.onAuthStateChange(async(p,j)=>{var v;switch(console.log("Auth state changed:",p,(v=j==null?void 0:j.user)==null?void 0:v.email),r(j),a((j==null?void 0:j.user)??null),l(!1),p){case"SIGNED_IN":ne.success("Successfully signed in!");break;case"SIGNED_OUT":ne.success("Successfully signed out!");break;case"TOKEN_REFRESHED":console.log("Token refreshed");break;case"USER_UPDATED":ne.success("Profile updated successfully!");break;case"PASSWORD_RECOVERY":ne.success("Password recovery email sent!");break}});return()=>{y.unsubscribe()}},[]);const m={user:t,session:n,loading:i,signUp:async(g,y,p)=>{try{l(!0);const{data:j,error:v}=await ue.auth.signUp({email:g,password:y,options:{data:p||{}}});return v?(ne.error(v.message),{user:null,error:v}):(j.user&&!j.session&&ne.success("Please check your email to confirm your account!"),{user:j.user,error:null})}catch(j){const v=j;return ne.error("An unexpected error occurred during sign up"),{user:null,error:v}}finally{l(!1)}},signIn:async(g,y)=>{try{l(!0);const{data:p,error:j}=await ue.auth.signInWithPassword({email:g,password:y});return j?(ne.error(j.message),{user:null,error:j}):{user:p.user,error:null}}catch(p){const j=p;return ne.error("An unexpected error occurred during sign in"),{user:null,error:j}}finally{l(!1)}},signOut:async()=>{try{l(!0);const{error:g}=await ue.auth.signOut();return g?(ne.error(g.message),{error:g}):(localStorage.clear(),{error:null})}catch(g){const y=g;return ne.error("An unexpected error occurred during sign out"),{error:y}}finally{l(!1)}},resetPassword:async g=>{try{const{error:y}=await ue.auth.resetPasswordForEmail(g,{redirectTo:`${window.location.origin}/reset-password`});return y?(ne.error(y.message),{error:y}):(ne.success("Password reset email sent!"),{error:null})}catch(y){const p=y;return ne.error("An unexpected error occurred"),{error:p}}},updateProfile:async g=>{try{l(!0);const{error:y}=await ue.auth.updateUser(g);return y?(ne.error(y.message),{error:y}):{error:null}}catch(y){const p=y;return ne.error("An unexpected error occurred while updating profile"),{error:p}}finally{l(!1)}},isAuthenticated:!!t};return e.jsx(Zd.Provider,{value:m,children:s})},eu=u.createContext(void 0);function ny({children:s}){const{user:t}=Rs(),[a,n]=u.useState([]),[r,i]=u.useState([]),[l,o]=u.useState([]),[c,h]=u.useState([]),[x,d]=u.useState(0),[m,g]=u.useState("USD"),[y,p]=u.useState(!1),[j,v]=u.useState(""),[N,f]=u.useState([]),[S,D]=u.useState(!0),w=Y=>({id:Y.id,name:Y.description||"Unnamed Transaction",category:Y.category,amount:Number(Y.amount),frequency:Y.frequency,nextDate:Y.last_processed||Y.start_date,isActive:Y.is_active}),R=Y=>({id:Y.id,date:Y.date,category:Y.category,amount:Number(Y.amount),description:Y.description||void 0,tags:Y.tags||[],pot_id:Y.pot_id||void 0}),b=Y=>({id:Y.id,title:Y.title,name:Y.title,description:Y.description||void 0,targetAmount:Number(Y.target_amount),currentAmount:Number(Y.current_amount),targetDate:Y.target_date||void 0,deadline:Y.target_date||void 0,category:Y.category||void 0,completed:Y.is_completed,isCompleted:Y.is_completed}),k=(Y,se)=>({id:Y.id,name:Y.name,totalAmount:Number(Y.total_amount),remainingAmount:Number(Y.remaining_amount),interestRate:Number(Y.interest_rate),minimumPayment:Y.minimum_payment?Number(Y.minimum_payment):void 0,dueDate:Y.due_date||void 0,payments:se.map(xe=>({id:xe.id,amount:Number(xe.amount),date:xe.payment_date,notes:xe.notes||void 0}))}),T=Y=>({date:Y.date,earnings:Number(Y.earnings),expenses:Number(Y.expenses),netChange:Number(Y.net_change),balance:Number(Y.balance)}),F=async()=>{if(t){D(!0);try{const{data:Y}=await ue.from("transactions").select("*").eq("user_id",t.id).order("date",{ascending:!1});Y&&n(Y.map(R));const{data:se}=await ue.from("financial_goals").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});se&&i(se.map(b));const{data:xe}=await ue.from("debts").select(`
          *,
          debt_payments (*)
        `).eq("user_id",t.id).order("created_at",{ascending:!1});xe&&o(xe.map(xt=>k(xt,xt.debt_payments||[])));const{data:ye}=await ue.from("daily_entries").select("*").eq("user_id",t.id).order("date",{ascending:!0});ye&&h(ye.map(T));const{data:be}=await ue.from("user_settings").select("*").eq("user_id",t.id).single();be&&(d(Number(be.monthly_starting_point)),p(be.is_dark_mode),v(be.category_filter||""));const{data:ke}=await ue.from("profiles").select("currency").eq("user_id",t.id).single();ke&&g(ke.currency||"USD");const{data:Qe}=await ue.from("recurring_transactions").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});Qe&&f(Qe.map(w))}catch(Y){console.error("Error loading data:",Y),ne.error("Failed to load financial data")}finally{D(!1)}}};u.useEffect(()=>{t&&F()},[t]);const O=async Y=>{if(!t)return;const{data:se,error:xe}=await ue.from("transactions").insert({user_id:t.id,date:Y.date,category:Y.category,amount:Y.amount,description:Y.description||null,tags:Y.tags||[],pot_id:Y.pot_id||null}).select().single();if(xe)throw ne.error("Failed to add transaction"),xe;if(se){const ye=R(se);n(be=>[ye,...be]),await ve(),ne.success("Transaction added successfully")}},q=async(Y,se)=>{if(!t)return;const{data:xe,error:ye}=await ue.from("transactions").update({...se.date&&{date:se.date},...se.category&&{category:se.category},...se.amount!==void 0&&{amount:se.amount},...se.description!==void 0&&{description:se.description||null},...se.tags&&{tags:se.tags},...se.pot_id!==void 0&&{pot_id:se.pot_id||null}}).eq("id",Y).eq("user_id",t.id).select().single();if(ye)throw ne.error("Failed to update transaction"),ye;if(xe){const be=R(xe);n(ke=>ke.map(Qe=>Qe.id===Y?be:Qe)),await ve(),ne.success("Transaction updated successfully")}},P=async Y=>{if(!t)return;const{error:se}=await ue.from("transactions").delete().eq("id",Y).eq("user_id",t.id);if(se)throw ne.error("Failed to delete transaction"),se;n(xe=>xe.filter(ye=>ye.id!==Y)),await ve(),ne.success("Transaction deleted successfully")},A=async Y=>{if(!t)return;const{data:se,error:xe}=await ue.from("financial_goals").insert({user_id:t.id,title:Y.title,description:Y.description||null,target_amount:Y.targetAmount,current_amount:Y.currentAmount,target_date:Y.targetDate||null,category:Y.category||null}).select().single();if(xe)throw ne.error("Failed to add goal"),xe;if(se){const ye=b(se);i(be=>[ye,...be]),ne.success("Goal added successfully")}},$=async(Y,se)=>{if(!t)return;const{data:xe,error:ye}=await ue.from("financial_goals").update({...se.title&&{title:se.title},...se.description!==void 0&&{description:se.description||null},...se.targetAmount!==void 0&&{target_amount:se.targetAmount},...se.currentAmount!==void 0&&{current_amount:se.currentAmount},...se.targetDate!==void 0&&{target_date:se.targetDate||null},...se.category!==void 0&&{category:se.category||null},...se.completed!==void 0&&{is_completed:se.completed}}).eq("id",Y).eq("user_id",t.id).select().single();if(ye)throw ne.error("Failed to update goal"),ye;if(xe){const be=b(xe);i(ke=>ke.map(Qe=>Qe.id===Y?be:Qe)),ne.success("Goal updated successfully")}},M=async Y=>{if(!t)return;const{error:se}=await ue.from("financial_goals").delete().eq("id",Y).eq("user_id",t.id);if(se)throw ne.error("Failed to delete goal"),se;i(xe=>xe.filter(ye=>ye.id!==Y)),ne.success("Goal deleted successfully")},z=async Y=>{if(!t)return;const{data:se,error:xe}=await ue.from("debts").insert({user_id:t.id,name:Y.name,total_amount:Y.totalAmount,remaining_amount:Y.remainingAmount,interest_rate:Y.interestRate,minimum_payment:Y.minimumPayment||null,due_date:Y.dueDate||null}).select().single();if(xe)throw ne.error("Failed to add debt"),xe;if(se){const ye=k(se,[]);o(be=>[ye,...be]),ne.success("Debt added successfully")}},I=async(Y,se)=>{if(!t)return;const{data:xe,error:ye}=await ue.from("debts").update({...se.name&&{name:se.name},...se.totalAmount!==void 0&&{total_amount:se.totalAmount},...se.remainingAmount!==void 0&&{remaining_amount:se.remainingAmount},...se.interestRate!==void 0&&{interest_rate:se.interestRate},...se.minimumPayment!==void 0&&{minimum_payment:se.minimumPayment||null},...se.dueDate!==void 0&&{due_date:se.dueDate||null}}).eq("id",Y).eq("user_id",t.id).select().single();if(ye)throw ne.error("Failed to update debt"),ye;xe&&(o(be=>be.map(ke=>ke.id===Y?{...ke,...se}:ke)),ne.success("Debt updated successfully"))},C=async Y=>{if(!t)return;const{error:se}=await ue.from("debts").delete().eq("id",Y).eq("user_id",t.id);if(se)throw ne.error("Failed to delete debt"),se;o(xe=>xe.filter(ye=>ye.id!==Y)),ne.success("Debt deleted successfully")},B=async(Y,se)=>{if(!t)return;const{data:xe,error:ye}=await ue.from("debt_payments").insert({debt_id:Y,user_id:t.id,amount:se.amount,payment_date:se.date,notes:se.notes||null}).select().single();if(ye)throw ne.error("Failed to add payment"),ye;if(xe){const be=l.find(ke=>ke.id===Y);if(be){const ke=be.remainingAmount-se.amount;await I(Y,{remainingAmount:ke}),o(Qe=>Qe.map(xt=>xt.id===Y?{...xt,remainingAmount:ke,payments:[...xt.payments,{id:xe.id,amount:Number(xe.amount),date:xe.payment_date,notes:xe.notes||void 0}]}:xt))}ne.success("Payment added successfully")}},E=async Y=>{if(!t)return;const{error:se}=await ue.from("user_settings").update({monthly_starting_point:Y}).eq("user_id",t.id);if(se)throw ne.error("Failed to update starting point"),se;d(Y),await ve(),ne.success("Starting point updated successfully")},V=async Y=>{if(!t)return;const{error:se}=await ue.from("profiles").update({currency:Y}).eq("user_id",t.id);if(se)throw ne.error("Failed to update currency"),se;g(Y),ne.success("Currency updated successfully")},U=async Y=>{if(!t)return;const{error:se}=await ue.from("user_settings").update({is_dark_mode:Y}).eq("user_id",t.id);if(se)throw ne.error("Failed to update theme"),se;p(Y)},H=async Y=>{if(!t)return;const{error:se}=await ue.from("user_settings").update({category_filter:Y}).eq("user_id",t.id);if(se)throw ne.error("Failed to update filter"),se;v(Y)},Z=async Y=>{if(!t)return;const{data:se,error:xe}=await ue.from("recurring_transactions").insert({user_id:t.id,description:Y.name,category:Y.category,amount:Y.amount,frequency:Y.frequency,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0],last_processed:Y.nextDate,is_active:Y.isActive,tags:[]}).select().single();if(xe)throw ne.error("Failed to add recurring transaction"),xe;if(se){const ye=w(se);f(be=>[ye,...be]),ne.success("Recurring transaction added successfully")}},ee=async(Y,se)=>{if(!t)return;const{data:xe,error:ye}=await ue.from("recurring_transactions").update({...se.name&&{description:se.name},...se.category&&{category:se.category},...se.amount!==void 0&&{amount:se.amount},...se.frequency&&{frequency:se.frequency},...se.nextDate&&{last_processed:se.nextDate},...se.isActive!==void 0&&{is_active:se.isActive}}).eq("id",Y).eq("user_id",t.id).select().single();if(ye)throw ne.error("Failed to update recurring transaction"),ye;if(xe){const be=w(xe);f(ke=>ke.map(Qe=>Qe.id===Y?be:Qe)),ne.success("Recurring transaction updated successfully")}},ge=async Y=>{if(!t)return;const{error:se}=await ue.from("recurring_transactions").delete().eq("id",Y).eq("user_id",t.id);if(se)throw ne.error("Failed to delete recurring transaction"),se;f(xe=>xe.filter(ye=>ye.id!==Y)),ne.success("Recurring transaction deleted successfully")},le=async()=>{if(t)try{await ue.from("debt_payments").delete().eq("user_id",t.id),await ue.from("debts").delete().eq("user_id",t.id),await ue.from("financial_goals").delete().eq("user_id",t.id),await ue.from("transactions").delete().eq("user_id",t.id),await ue.from("daily_entries").delete().eq("user_id",t.id),await ue.from("recurring_transactions").delete().eq("user_id",t.id),await ue.from("user_settings").update({monthly_starting_point:0,category_filter:null}).eq("user_id",t.id),n([]),i([]),o([]),h([]),f([]),d(0),v(""),ne.success("All data cleared successfully")}catch(Y){throw console.error("Error clearing data:",Y),ne.error("Failed to clear data"),Y}},Oe=()=>c.length===0?x:c[c.length-1].balance,$t=()=>{const Y=new Date().toISOString().split("T")[0],se=a.filter(ke=>ke.date===Y),xe=se.filter(ke=>ke.amount>0).reduce((ke,Qe)=>ke+Qe.amount,0),ye=se.filter(ke=>ke.amount<0).reduce((ke,Qe)=>ke+Math.abs(Qe.amount),0),be=xe-ye;return{date:Y,earnings:xe,expenses:ye,netChange:be,balance:Oe()+be}},ve=async()=>{if(!t)return;const Y=a.reduce((be,ke)=>(be[ke.date]||(be[ke.date]={earnings:0,expenses:0}),ke.amount>0?be[ke.date].earnings+=ke.amount:be[ke.date].expenses+=Math.abs(ke.amount),be),{}),se=Object.keys(Y).sort(),xe=[];let ye=x;for(const be of se){const{earnings:ke,expenses:Qe}=Y[be],xt=ke-Qe;ye+=xt;const Un={date:be,earnings:ke,expenses:Qe,netChange:xt,balance:ye};xe.push(Un),await ue.from("daily_entries").upsert({user_id:t.id,date:be,earnings:ke,expenses:Qe,net_change:xt,balance:ye})}h(xe)},kt={transactions:a,goals:r,debts:l,dailyData:c,monthlyStartingPoint:x,currency:m,isDarkMode:y,categoryFilter:j,loading:S,recurringTransactions:N,addTransaction:O,updateTransaction:q,deleteTransaction:P,addGoal:A,updateGoal:$,deleteGoal:M,addDebt:z,updateDebt:I,deleteDebt:C,addDebtPayment:B,updateMonthlyStartingPoint:E,setMonthlyStartingPoint:E,updateCurrency:V,setCurrency:V,updateDarkMode:U,toggleDarkMode:()=>U(!y),updateCategoryFilter:H,setCategoryFilter:H,addRecurringTransaction:Z,updateRecurringTransaction:ee,deleteRecurringTransaction:ge,getCurrentBalance:Oe,getTodaysData:$t,recalculateBalances:ve,clearAllData:le};return e.jsx(eu.Provider,{value:kt,children:s})}function he(){const s=u.useContext(eu);if(s===void 0)throw new Error("useFinancial must be used within a FinancialProvider");return s}const tu=u.createContext(void 0);function ry({children:s}){const{user:t}=Rs(),[a,n]=u.useState([]),[r,i]=u.useState([]),[l,o]=u.useState([]),[c,h]=u.useState(!0);u.useEffect(()=>{t?x():(n([]),i([]),o([]),h(!1))},[t]);const x=async()=>{if(t)try{h(!0);const{data:D,error:w}=await ue.from("pots").select("*").eq("user_id",t.id).order("priority");if(w){console.warn("Database not available, loading from local storage:",w);const F=JSON.parse(localStorage.getItem(`pots-${t.id}`)||"[]");n(F)}else n(D||[]);const{data:R,error:b}=await ue.from("allocation_rules").select("*").eq("user_id",t.id).order("priority");b?(console.warn("Allocation rules table not available:",b),i([])):i(R||[]);const{data:k,error:T}=await ue.from("allocation_transactions").select("*").eq("user_id",t.id).order("allocation_date",{ascending:!1}).limit(50);T?(console.warn("Allocation transactions table not available:",T),o([])):o(k||[])}catch(D){console.error("Error loading pots data:",D),ne.error("Failed to load pots data")}finally{h(!1)}},S={pots:a,allocationRules:r,allocationTransactions:l,loading:c,createPot:async D=>{if(!t)throw new Error("User not authenticated");try{const{data:w,error:R}=await ue.from("pots").insert({...D,user_id:t.id}).select().single();if(R){console.warn("Database table not available, using local storage fallback:",R);const b={id:`local-${Date.now()}`,user_id:t.id,name:D.name,description:D.description||null,target_amount:D.target_amount,current_balance:D.current_balance||0,priority:D.priority,allocation_rule:D.allocation_rule||{},auto_transfer_enabled:D.auto_transfer_enabled||!1,color:D.color,icon:D.icon,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},T=[...JSON.parse(localStorage.getItem(`pots-${t.id}`)||"[]"),b];localStorage.setItem(`pots-${t.id}`,JSON.stringify(T)),n(F=>[...F,b]),ne.success(`Pot "${D.name}" created successfully (local storage)`);return}n(b=>[...b,w]),ne.success(`Pot "${D.name}" created successfully`)}catch(w){throw console.error("Error creating pot:",w),ne.error("Failed to create pot"),w}},updatePot:async(D,w)=>{try{const{data:R,error:b}=await ue.from("pots").update(w).eq("id",D).select().single();if(b)throw b;n(k=>k.map(T=>T.id===D?R:T)),ne.success("Pot updated successfully")}catch(R){throw console.error("Error updating pot:",R),ne.error("Failed to update pot"),R}},deletePot:async D=>{try{const{error:w}=await ue.from("pots").delete().eq("id",D);if(w)throw w;n(R=>R.filter(b=>b.id!==D)),ne.success("Pot deleted successfully")}catch(w){throw console.error("Error deleting pot:",w),ne.error("Failed to delete pot"),w}},createAllocationRule:async D=>{if(!t)throw new Error("User not authenticated");try{const{data:w,error:R}=await ue.from("allocation_rules").insert({...D,user_id:t.id}).select().single();if(R)throw R;i(b=>[...b,w]),ne.success("Allocation rule created successfully")}catch(w){throw console.error("Error creating allocation rule:",w),ne.error("Failed to create allocation rule"),w}},updateAllocationRule:async(D,w)=>{try{const{data:R,error:b}=await ue.from("allocation_rules").update(w).eq("id",D).select().single();if(b)throw b;i(k=>k.map(T=>T.id===D?R:T)),ne.success("Allocation rule updated successfully")}catch(R){throw console.error("Error updating allocation rule:",R),ne.error("Failed to update allocation rule"),R}},deleteAllocationRule:async D=>{try{const{error:w}=await ue.from("allocation_rules").delete().eq("id",D);if(w)throw w;i(R=>R.filter(b=>b.id!==D)),ne.success("Allocation rule deleted successfully")}catch(w){throw console.error("Error deleting allocation rule:",w),ne.error("Failed to delete allocation rule"),w}},allocateIncome:async(D,w=new Date().toISOString().split("T")[0])=>{if(!t)throw new Error("User not authenticated");try{const{data:R,error:b}=await ue.rpc("allocate_income_to_pots",{p_user_id:t.id,p_amount:D,p_date:w});if(b)throw b;return await x(),ne.success(`Income of £${D} allocated successfully`),Array.isArray(R)?R:[]}catch(R){throw console.error("Error allocating income:",R),ne.error("Failed to allocate income"),R}},transferBetweenPots:async(D,w,R)=>{if(!t)throw new Error("User not authenticated");try{const b=a.find(q=>q.id===D),k=a.find(q=>q.id===w);if(!b||!k)throw new Error("Invalid pot selection");if(b.current_balance<R)throw new Error("Insufficient funds in source pot");const{error:T}=await ue.from("pots").update({current_balance:b.current_balance-R}).eq("id",D);if(T)throw T;const{error:F}=await ue.from("pots").update({current_balance:k.current_balance+R}).eq("id",w);if(F)throw F;const{error:O}=await ue.from("allocation_transactions").insert({user_id:t.id,pot_id:w,amount:R,allocation_date:new Date().toISOString().split("T")[0],status:"completed"});if(O)throw O;await x(),ne.success(`Transferred £${R} from ${b.name} to ${k.name}`)}catch(b){throw console.error("Error transferring between pots:",b),ne.error("Failed to transfer funds"),b}},getPotAllocationNeeds:async(D=new Date().toISOString().split("T")[0])=>{if(!t)throw new Error("User not authenticated");try{return a.map(R=>{const k=r.filter(T=>T.pot_id===R.id&&T.enabled).reduce((T,F)=>T+F.amount,0);return{pot_id:R.id,pot_name:R.name,target_amount:R.target_amount,current_balance:R.current_balance,allocation_needed:k,shortfall:Math.max(0,k-R.current_balance)}})}catch(w){throw console.error("Error getting pot allocation needs:",w),w}}};return e.jsx(tu.Provider,{value:S,children:s})}function In(){const s=u.useContext(tu);if(s===void 0)throw new Error("usePots must be used within a PotsProvider");return s}const jt=({children:s,requireAuth:t=!0})=>{const{isAuthenticated:a,loading:n}=Rs();return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pt,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading..."})]})}):t&&!a?e.jsx(fl,{to:"/login",replace:!0}):!t&&a?e.jsx(fl,{to:"/",replace:!0}):e.jsx(e.Fragment,{children:s})},L=u.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:G("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));L.displayName="Card";const re=u.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:G("flex flex-col space-y-1.5 p-6",s),...t}));re.displayName="CardHeader";const oe=u.forwardRef(({className:s,...t},a)=>e.jsx("h3",{ref:a,className:G("text-2xl font-semibold leading-none tracking-tight",s),...t}));oe.displayName="CardTitle";const Ce=u.forwardRef(({className:s,...t},a)=>e.jsx("p",{ref:a,className:G("text-sm text-muted-foreground",s),...t}));Ce.displayName="CardDescription";const Q=u.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:G("p-6 pt-0",s),...t}));Q.displayName="CardContent";const Nn=u.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:G("flex items-center p-6 pt-0",s),...t}));Nn.displayName="CardFooter";const iy=ya("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),us=u.forwardRef(({className:s,variant:t,...a},n)=>e.jsx("div",{ref:n,role:"alert",className:G(iy({variant:t}),s),...a}));us.displayName="Alert";const oy=u.forwardRef(({className:s,...t},a)=>e.jsx("h5",{ref:a,className:G("mb-1 font-medium leading-none tracking-tight",s),...t}));oy.displayName="AlertTitle";const ms=u.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:G("text-sm [&_p]:leading-relaxed",s),...t}));ms.displayName="AlertDescription";class ly extends u.Component{constructor(){super(...arguments);Ca(this,"state",{hasError:!1});Ca(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})});Ca(this,"handleReload",()=>{window.location.reload()})}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,n){console.error("ErrorBoundary caught an error:",a,n),this.setState({error:a,errorInfo:n})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs(L,{className:"w-full max-w-md",children:[e.jsxs(re,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 h-16 w-16 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(Ze,{className:"h-8 w-8 text-red-600"})}),e.jsx(oe,{className:"text-2xl",children:"Something went wrong"}),e.jsx(Ce,{children:"We encountered an unexpected error. Please try refreshing the page."})]}),e.jsxs(Q,{className:"space-y-4",children:[!1,e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs(_,{onClick:this.handleReset,className:"w-full",children:[e.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Try Again"]}),e.jsxs(_,{onClick:this.handleReload,variant:"outline",className:"w-full",children:[e.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Reload Page"]}),e.jsx(_,{asChild:!0,variant:"ghost",className:"w-full",children:e.jsxs(Ds,{to:"/",children:[e.jsx(An,{className:"mr-2 h-4 w-4"}),"Go to Dashboard"]})})]}),e.jsx("div",{className:"text-center text-sm text-muted-foreground",children:e.jsx("p",{children:"If the problem persists, please contact support."})})]})]})}):this.props.children}}const cy=ya("inline-flex items-center rounded-full border px-3 py-1 text-xs font-medium tracking-tight transition-all focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80 shadow-sm",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground border-border bg-background hover:bg-accent hover:text-accent-foreground",professional:"border-transparent bg-gradient-card text-foreground shadow-card font-medium"}},defaultVariants:{variant:"default"}});function K({className:s,variant:t,...a}){return e.jsx("div",{className:G(cy({variant:t}),s),...a})}const zl=[{id:"dashboard",title:"Dashboard Hub",description:"Financial overview and quick insights",icon:dd,path:"/",color:"text-blue-600",subItems:[{id:"overview",title:"Overview",path:"/",description:"Daily financial snapshot"},{id:"quick-allocation",title:"Quick Allocation",path:"/quick-allocation",description:"Smart daily earnings distribution"},{id:"notifications",title:"Notifications",path:"/notifications",description:"Financial alerts and updates"}]},{id:"planning",title:"Planning Hub",description:"Goals, budgets, and long-term strategy",icon:je,path:"/financial-hub",color:"text-green-600",subItems:[{id:"financial-hub",title:"Financial Hub",path:"/financial-hub",description:"Complete financial planning"},{id:"pots",title:"Pots",path:"/pots",description:"Envelope budgeting system"},{id:"budget",title:"Budget",path:"/budget",description:"Budget management & tracking"},{id:"goals",title:"Goals",path:"/goals",description:"Financial goal achievement"},{id:"debts",title:"Debts",path:"/debts",description:"Debt management & payoff"}]},{id:"transactions",title:"Transactions Hub",description:"Income, expenses, and transaction management",icon:Mt,path:"/transactions",color:"text-purple-600",subItems:[{id:"transactions",title:"Transactions",path:"/transactions",description:"Manage income & expenses"},{id:"categories",title:"Categories",path:"/categories",description:"Expense categorization"},{id:"recurring",title:"Recurring",path:"/recurring",description:"Recurring transactions"},{id:"calendar",title:"Calendar",path:"/calendar",description:"Financial calendar view"}]},{id:"analytics",title:"Analytics Hub",description:"Deep financial insights and reporting",icon:de,path:"/analytics",color:"text-orange-600",subItems:[{id:"analytics",title:"Analytics",path:"/analytics",description:"Advanced financial analytics"}]},{id:"tools",title:"Tools Hub",description:"Calculators, scenarios, and financial tools",icon:vs,path:"/tools",color:"text-red-600",subItems:[{id:"what-if",title:"What-If Scenarios",path:"/tools?tool=what-if",description:"Financial scenario testing"},{id:"ai-insights",title:"AI Insights",path:"/tools?tool=ai-insights",description:"Intelligent financial analysis"},{id:"loan-calculator",title:"Loan Calculator",path:"/tools?tool=loan-calculator",description:"Mortgage and loan calculations"},{id:"investment-calculator",title:"Investment Calculator",path:"/tools?tool=investment-calculator",description:"Investment growth projections"},{id:"retirement-calculator",title:"Retirement Calculator",path:"/tools?tool=retirement-calculator",description:"Retirement planning"},{id:"savings-calculator",title:"Savings Goal Calculator",path:"/tools?tool=savings-calculator",description:"Goal tracking and planning"}]},{id:"settings",title:"Settings Hub",description:"User preferences and account management",icon:As,path:"/settings",color:"text-gray-600",subItems:[{id:"profile",title:"Profile",path:"/profile",description:"User profile & account settings"},{id:"settings",title:"Settings",path:"/settings",description:"Application configuration"},{id:"import-export",title:"Import/Export",path:"/import-export",description:"Data management"}]}];function dy({className:s,variant:t="sidebar"}){const a=Rr(),n=Js(),[r,i]=u.useState(null),l=d=>{var m;return((m=d.subItems)==null?void 0:m.some(g=>a.pathname===g.path))||a.pathname===d.path},o=d=>{const m=a.pathname+a.search;if(a.pathname==="/tools"&&d.path.includes("?tool=")){const y=new URLSearchParams(a.search).get("tool"),p=new URLSearchParams(d.path.split("?")[1]).get("tool");return y===p}return m===d.path},c=d=>{i(r===d?null:d)},h=d=>{d.subItems&&d.subItems.length>0?(c(d.id),d.id==="tools"&&!l(d)?n(d.path):l(d)||n(d.subItems[0].path)):n(d.path)},x=d=>{n(d.path)};return t==="header"?e.jsx("div",{className:G("flex items-center gap-1",s),children:zl.map(d=>e.jsxs(_,{variant:l(d)?"secondary":"ghost",size:"sm",onClick:()=>h(d),className:G("flex items-center gap-2 transition-all",l(d)&&"bg-primary/10 text-primary"),children:[e.jsx(d.icon,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:d.title}),d.badge&&e.jsx(K,{variant:"secondary",className:"ml-1 text-xs",children:d.badge})]},d.id))}):e.jsx("div",{className:G("space-y-1",s),children:zl.map(d=>{const m=l(d),g=r===d.id,y=d.icon;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(_,{variant:m?"secondary":"ghost",onClick:()=>h(d),className:G("w-full justify-start gap-3 h-auto py-3 px-4 transition-all",m&&"bg-primary/10 text-primary border border-primary/20"),children:[e.jsx(y,{className:G("h-5 w-5 flex-shrink-0",d.color)}),e.jsxs("div",{className:"flex-1 text-left min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-sm truncate",children:d.title}),d.subItems&&d.subItems.length>0&&e.jsx(So,{className:G("h-4 w-4 transition-transform",g&&"rotate-180")})]}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:d.description})]}),d.badge&&e.jsx(K,{variant:"secondary",className:"ml-auto text-xs",children:d.badge})]}),d.subItems&&d.subItems.length>0&&g&&e.jsx("div",{className:"ml-4 space-y-1",children:d.subItems.map(p=>e.jsxs(_,{variant:o(p)?"secondary":"ghost",size:"sm",onClick:()=>x(p),className:G("w-full justify-start gap-2 h-auto py-2 px-3 text-xs",o(p)&&"bg-muted text-foreground"),children:[e.jsx(Za,{className:"h-3 w-3"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("span",{className:"font-medium",children:p.title}),e.jsx("p",{className:"text-muted-foreground truncate",children:p.description})]})]},p.id))})]},d.id)})})}function uy(){const{user:s,signOut:t}=Rs(),[a,n]=u.useState("");return u.useEffect(()=>{const r=localStorage.getItem("user-name")||"";n(r);const i=()=>{const l=localStorage.getItem("user-name")||"";n(l)};return window.addEventListener("user-name-updated",i),()=>window.removeEventListener("user-name-updated",i)},[]),e.jsxs(Bd,{className:"border-r bg-background/95 backdrop-blur-sm",children:[e.jsx(Vd,{className:"border-b p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary text-primary-foreground",children:e.jsx("span",{className:"text-sm font-bold",children:"ML"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"font-semibold text-sm truncate",children:"MoneyLens"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:a||"Financial Companion"})]})]})}),e.jsx(Wd,{className:"p-2",children:e.jsx(dy,{variant:"sidebar"})}),e.jsx(Ud,{className:"border-t p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(vn,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.email)||"Guest User"}),a&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:a})]})]}),e.jsx(_,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8",title:"Sign Out",children:e.jsx(Jg,{className:"h-4 w-4"})})]})})]})}var su=["PageUp","PageDown"],au=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],nu={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},tn="Slider",[Xi,my,hy]=Ac(tn),[ru,fC]=ds(tn,[hy]),[xy,Yr]=ru(tn),iu=u.forwardRef((s,t)=>{const{name:a,min:n=0,max:r=100,step:i=1,orientation:l="horizontal",disabled:o=!1,minStepsBetweenThumbs:c=0,defaultValue:h=[n],value:x,onValueChange:d=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:y,...p}=s,j=u.useRef(new Set),v=u.useRef(0),f=l==="horizontal"?gy:py,[S=[],D]=va({prop:x,defaultProp:h,onChange:F=>{var q;(q=[...j.current][v.current])==null||q.focus(),d(F)}}),w=u.useRef(S);function R(F){const O=by(S,F);T(F,O)}function b(F){T(F,v.current)}function k(){const F=w.current[v.current];S[v.current]!==F&&m(S)}function T(F,O,{commit:q}={commit:!1}){const P=Cy(i),A=ky(Math.round((F-n)/i)*i+n,P),$=yo(A,[n,r]);D((M=[])=>{const z=yy(M,$,O);if(Sy(z,c*i)){v.current=z.indexOf($);const I=String(z)!==String(M);return I&&q&&m(z),I?z:M}else return M})}return e.jsx(xy,{scope:s.__scopeSlider,name:a,disabled:o,min:n,max:r,valueIndexToChangeRef:v,thumbs:j.current,values:S,orientation:l,form:y,children:e.jsx(Xi.Provider,{scope:s.__scopeSlider,children:e.jsx(Xi.Slot,{scope:s.__scopeSlider,children:e.jsx(f,{"aria-disabled":o,"data-disabled":o?"":void 0,...p,ref:t,onPointerDown:me(p.onPointerDown,()=>{o||(w.current=S)}),min:n,max:r,inverted:g,onSlideStart:o?void 0:R,onSlideMove:o?void 0:b,onSlideEnd:o?void 0:k,onHomeKeyDown:()=>!o&&T(n,0,{commit:!0}),onEndKeyDown:()=>!o&&T(r,S.length-1,{commit:!0}),onStepKeyDown:({event:F,direction:O})=>{if(!o){const A=su.includes(F.key)||F.shiftKey&&au.includes(F.key)?10:1,$=v.current,M=S[$],z=i*A*O;T(M+z,$,{commit:!0})}}})})})})});iu.displayName=tn;var[ou,lu]=ru(tn,{startEdge:"left",endEdge:"right",size:"width",direction:1}),gy=u.forwardRef((s,t)=>{const{min:a,max:n,dir:r,inverted:i,onSlideStart:l,onSlideMove:o,onSlideEnd:c,onStepKeyDown:h,...x}=s,[d,m]=u.useState(null),g=He(t,f=>m(f)),y=u.useRef(void 0),p=po(r),j=p==="ltr",v=j&&!i||!j&&i;function N(f){const S=y.current||d.getBoundingClientRect(),D=[0,S.width],R=Ro(D,v?[a,n]:[n,a]);return y.current=S,R(f-S.left)}return e.jsx(ou,{scope:s.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:e.jsx(cu,{dir:p,"data-orientation":"horizontal",...x,ref:g,style:{...x.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:f=>{const S=N(f.clientX);l==null||l(S)},onSlideMove:f=>{const S=N(f.clientX);o==null||o(S)},onSlideEnd:()=>{y.current=void 0,c==null||c()},onStepKeyDown:f=>{const D=nu[v?"from-left":"from-right"].includes(f.key);h==null||h({event:f,direction:D?-1:1})}})})}),py=u.forwardRef((s,t)=>{const{min:a,max:n,inverted:r,onSlideStart:i,onSlideMove:l,onSlideEnd:o,onStepKeyDown:c,...h}=s,x=u.useRef(null),d=He(t,x),m=u.useRef(void 0),g=!r;function y(p){const j=m.current||x.current.getBoundingClientRect(),v=[0,j.height],f=Ro(v,g?[n,a]:[a,n]);return m.current=j,f(p-j.top)}return e.jsx(ou,{scope:s.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:e.jsx(cu,{"data-orientation":"vertical",...h,ref:d,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const j=y(p.clientY);i==null||i(j)},onSlideMove:p=>{const j=y(p.clientY);l==null||l(j)},onSlideEnd:()=>{m.current=void 0,o==null||o()},onStepKeyDown:p=>{const v=nu[g?"from-bottom":"from-top"].includes(p.key);c==null||c({event:p,direction:v?-1:1})}})})}),cu=u.forwardRef((s,t)=>{const{__scopeSlider:a,onSlideStart:n,onSlideMove:r,onSlideEnd:i,onHomeKeyDown:l,onEndKeyDown:o,onStepKeyDown:c,...h}=s,x=Yr(tn,a);return e.jsx(Ae.span,{...h,ref:t,onKeyDown:me(s.onKeyDown,d=>{d.key==="Home"?(l(d),d.preventDefault()):d.key==="End"?(o(d),d.preventDefault()):su.concat(au).includes(d.key)&&(c(d),d.preventDefault())}),onPointerDown:me(s.onPointerDown,d=>{const m=d.target;m.setPointerCapture(d.pointerId),d.preventDefault(),x.thumbs.has(m)?m.focus():n(d)}),onPointerMove:me(s.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:me(s.onPointerUp,d=>{const m=d.target;m.hasPointerCapture(d.pointerId)&&(m.releasePointerCapture(d.pointerId),i(d))})})}),du="SliderTrack",uu=u.forwardRef((s,t)=>{const{__scopeSlider:a,...n}=s,r=Yr(du,a);return e.jsx(Ae.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...n,ref:t})});uu.displayName=du;var Ji="SliderRange",mu=u.forwardRef((s,t)=>{const{__scopeSlider:a,...n}=s,r=Yr(Ji,a),i=lu(Ji,a),l=u.useRef(null),o=He(t,l),c=r.values.length,h=r.values.map(m=>gu(m,r.min,r.max)),x=c>1?Math.min(...h):0,d=100-Math.max(...h);return e.jsx(Ae.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...n,ref:o,style:{...s.style,[i.startEdge]:x+"%",[i.endEdge]:d+"%"}})});mu.displayName=Ji;var Zi="SliderThumb",hu=u.forwardRef((s,t)=>{const a=my(s.__scopeSlider),[n,r]=u.useState(null),i=He(t,o=>r(o)),l=u.useMemo(()=>n?a().findIndex(o=>o.ref.current===n):-1,[a,n]);return e.jsx(fy,{...s,ref:i,index:l})}),fy=u.forwardRef((s,t)=>{const{__scopeSlider:a,index:n,name:r,...i}=s,l=Yr(Zi,a),o=lu(Zi,a),[c,h]=u.useState(null),x=He(t,N=>h(N)),d=c?l.form||!!c.closest("form"):!0,m=fo(c),g=l.values[n],y=g===void 0?0:gu(g,l.min,l.max),p=jy(n,l.values.length),j=m==null?void 0:m[o.size],v=j?Ny(j,y,o.direction):0;return u.useEffect(()=>{if(c)return l.thumbs.add(c),()=>{l.thumbs.delete(c)}},[c,l.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${y}% + ${v}px)`},children:[e.jsx(Xi.ItemSlot,{scope:s.__scopeSlider,children:e.jsx(Ae.span,{role:"slider","aria-label":s["aria-label"]||p,"aria-valuemin":l.min,"aria-valuenow":g,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...i,ref:x,style:g===void 0?{display:"none"}:s.style,onFocus:me(s.onFocus,()=>{l.valueIndexToChangeRef.current=n})})}),d&&e.jsx(xu,{name:r??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:g},n)]})});hu.displayName=Zi;var vy="RadioBubbleInput",xu=u.forwardRef(({__scopeSlider:s,value:t,...a},n)=>{const r=u.useRef(null),i=He(r,n),l=vo(t);return u.useEffect(()=>{const o=r.current;if(!o)return;const c=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==t&&x){const d=new Event("input",{bubbles:!0});x.call(o,t),o.dispatchEvent(d)}},[l,t]),e.jsx(Ae.input,{style:{display:"none"},...a,ref:i,defaultValue:t})});xu.displayName=vy;function yy(s=[],t,a){const n=[...s];return n[a]=t,n.sort((r,i)=>r-i)}function gu(s,t,a){const i=100/(a-t)*(s-t);return yo(i,[0,100])}function jy(s,t){return t>2?`Value ${s+1} of ${t}`:t===2?["Minimum","Maximum"][s]:void 0}function by(s,t){if(s.length===1)return 0;const a=s.map(r=>Math.abs(r-t)),n=Math.min(...a);return a.indexOf(n)}function Ny(s,t,a){const n=s/2,i=Ro([0,50],[0,n]);return(n-i(t)*a)*a}function wy(s){return s.slice(0,-1).map((t,a)=>s[a+1]-t)}function Sy(s,t){if(t>0){const a=wy(s);return Math.min(...a)>=t}return!0}function Ro(s,t){return a=>{if(s[0]===s[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(s[1]-s[0]);return t[0]+n*(a-s[0])}}function Cy(s){return(String(s).split(".")[1]||"").length}function ky(s,t){const a=Math.pow(10,t);return Math.round(s*a)/a}var pu=iu,Dy=uu,Ty=mu,Ey=hu;const ct=u.forwardRef(({className:s,...t},a)=>e.jsxs(pu,{ref:a,className:G("relative flex w-full touch-none select-none items-center",s),...t,children:[e.jsx(Dy,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(Ty,{className:"absolute h-full bg-primary"})}),e.jsx(Ey,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));ct.displayName=pu.displayName;var Kr="Switch",[My,vC]=ds(Kr),[Py,Ay]=My(Kr),fu=u.forwardRef((s,t)=>{const{__scopeSwitch:a,name:n,checked:r,defaultChecked:i,required:l,disabled:o,value:c="on",onCheckedChange:h,form:x,...d}=s,[m,g]=u.useState(null),y=He(t,f=>g(f)),p=u.useRef(!1),j=m?x||!!m.closest("form"):!0,[v,N]=va({prop:r,defaultProp:i??!1,onChange:h,caller:Kr});return e.jsxs(Py,{scope:a,checked:v,disabled:o,children:[e.jsx(Ae.button,{type:"button",role:"switch","aria-checked":v,"aria-required":l,"data-state":bu(v),"data-disabled":o?"":void 0,disabled:o,value:c,...d,ref:y,onClick:me(s.onClick,f=>{N(S=>!S),j&&(p.current=f.isPropagationStopped(),p.current||f.stopPropagation())})}),j&&e.jsx(ju,{control:m,bubbles:!p.current,name:n,value:c,checked:v,required:l,disabled:o,form:x,style:{transform:"translateX(-100%)"}})]})});fu.displayName=Kr;var vu="SwitchThumb",yu=u.forwardRef((s,t)=>{const{__scopeSwitch:a,...n}=s,r=Ay(vu,a);return e.jsx(Ae.span,{"data-state":bu(r.checked),"data-disabled":r.disabled?"":void 0,...n,ref:t})});yu.displayName=vu;var Ry="SwitchBubbleInput",ju=u.forwardRef(({__scopeSwitch:s,control:t,checked:a,bubbles:n=!0,...r},i)=>{const l=u.useRef(null),o=He(l,i),c=vo(a),h=fo(t);return u.useEffect(()=>{const x=l.current;if(!x)return;const d=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(d,"checked").set;if(c!==a&&g){const y=new Event("click",{bubbles:n});g.call(x,a),x.dispatchEvent(y)}},[c,a,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...r,tabIndex:-1,ref:o,style:{...r.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ju.displayName=Ry;function bu(s){return s?"checked":"unchecked"}var Nu=fu,Iy=yu;const ot=u.forwardRef(({className:s,...t},a)=>e.jsx(Nu,{className:G("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",s),...t,ref:a,children:e.jsx(Iy,{className:G("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ot.displayName=Nu.displayName;var Oy="Label",wu=u.forwardRef((s,t)=>e.jsx(Ae.label,{...s,ref:t,onMouseDown:a=>{var r;a.target.closest("button, input, select, textarea")||((r=s.onMouseDown)==null||r.call(s,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));wu.displayName=Oy;var Su=wu;const Fy=ya("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),W=u.forwardRef(({className:s,...t},a)=>e.jsx(Su,{ref:a,className:G(Fy(),s),...t}));W.displayName=Su.displayName;const dt=xo,Ft=Ax,_y=go,Cu=u.forwardRef(({className:s,...t},a)=>e.jsx(En,{ref:a,className:G("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));Cu.displayName=En.displayName;const at=u.forwardRef(({className:s,children:t,...a},n)=>e.jsxs(_y,{children:[e.jsx(Cu,{}),e.jsxs(Mn,{ref:n,className:G("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a,children:[t,e.jsxs(Pc,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(ut,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));at.displayName=Mn.displayName;const nt=({className:s,...t})=>e.jsx("div",{className:G("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});nt.displayName="DialogHeader";const eo=({className:s,...t})=>e.jsx("div",{className:G("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});eo.displayName="DialogFooter";const rt=u.forwardRef(({className:s,...t},a)=>e.jsx(Pr,{ref:a,className:G("text-lg font-semibold leading-none tracking-tight",s),...t}));rt.displayName=Pr.displayName;const pr=u.forwardRef(({className:s,...t},a)=>e.jsx(Ar,{ref:a,className:G("text-sm text-muted-foreground",s),...t}));pr.displayName=Ar.displayName;const $y=({open:s,onOpenChange:t})=>{const[a,n]=u.useState({fontSize:100,highContrast:!1,reducedMotion:!1,soundEffects:!0,focusIndicators:!0,keyboardNavigation:!0,screenReaderMode:!1,colorBlindSupport:"none"}),[r,i]=u.useState(!1),l=s!==void 0?s:r,o=t||i;u.useEffect(()=>{const h=localStorage.getItem("accessibility-settings");h&&n(JSON.parse(h))},[]),u.useEffect(()=>{const h=document.documentElement;h.style.setProperty("--font-scale",`${a.fontSize/100}`),a.highContrast?h.classList.add("high-contrast"):h.classList.remove("high-contrast"),a.reducedMotion?h.classList.add("reduced-motion"):h.classList.remove("reduced-motion"),a.focusIndicators?h.classList.add("enhanced-focus"):h.classList.remove("enhanced-focus"),a.colorBlindSupport!=="none"?h.classList.add(`colorblind-${a.colorBlindSupport}`):h.className=h.className.replace(/colorblind-\w+/g,""),a.screenReaderMode?h.classList.add("screen-reader-mode"):h.classList.remove("screen-reader-mode"),localStorage.setItem("accessibility-settings",JSON.stringify(a))},[a]),u.useEffect(()=>{const h=x=>{a.keyboardNavigation&&(x.altKey&&x.key==="a"&&(x.preventDefault(),i(!0)),x.altKey&&x.key==="+"&&(x.preventDefault(),n(d=>({...d,fontSize:Math.min(150,d.fontSize+10)}))),x.altKey&&x.key==="-"&&(x.preventDefault(),n(d=>({...d,fontSize:Math.max(75,d.fontSize-10)}))),x.altKey&&x.key==="c"&&(x.preventDefault(),n(d=>({...d,highContrast:!d.highContrast}))))};if(a.keyboardNavigation)return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[a.keyboardNavigation]);const c=()=>{n({fontSize:100,highContrast:!1,reducedMotion:!1,soundEffects:!0,focusIndicators:!0,keyboardNavigation:!0,screenReaderMode:!1,colorBlindSupport:"none"})};return e.jsx(e.Fragment,{children:e.jsxs(dt,{open:l,onOpenChange:o,children:[e.jsx(Ft,{asChild:!0,children:e.jsx(_,{size:"sm",className:"fixed bottom-4 left-64 z-50 shadow-lg rounded-full w-10 h-10 p-0 bg-background/95 backdrop-blur-sm border","aria-label":"Open accessibility settings",title:"Accessibility Settings (Alt+A)",children:e.jsx(_i,{className:"h-4 w-4"})})}),e.jsxs(at,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[e.jsx(nt,{children:e.jsxs(rt,{className:"flex items-center gap-2",children:[e.jsx(_i,{className:"h-5 w-5"}),"Accessibility Settings"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(L,{className:"p-4",children:[e.jsxs("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4"}),"Visual Settings"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{className:"text-sm",children:["Font Size: ",a.fontSize,"%"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{size:"sm",variant:"outline",onClick:()=>n(h=>({...h,fontSize:Math.max(75,h.fontSize-10)})),"aria-label":"Decrease font size",children:e.jsx(pd,{className:"h-3 w-3"})}),e.jsx(ct,{value:[a.fontSize],onValueChange:h=>n(x=>({...x,fontSize:h[0]})),min:75,max:150,step:5,className:"flex-1","aria-label":"Font size slider"}),e.jsx(_,{size:"sm",variant:"outline",onClick:()=>n(h=>({...h,fontSize:Math.min(150,h.fontSize+10)})),"aria-label":"Increase font size",children:e.jsx(gd,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx($g,{className:"h-4 w-4"}),"High Contrast Mode"]}),e.jsx(ot,{checked:a.highContrast,onCheckedChange:h=>n(x=>({...x,highContrast:h})),"aria-label":"Toggle high contrast mode"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(md,{className:"h-4 w-4"}),"Color Blind Support"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"none",label:"None"},{value:"deuteranopia",label:"Deuteranopia"},{value:"protanopia",label:"Protanopia"},{value:"tritanopia",label:"Tritanopia"}].map(h=>e.jsx(_,{variant:a.colorBlindSupport===h.value?"default":"outline",size:"sm",onClick:()=>n(x=>({...x,colorBlindSupport:h.value})),className:"text-xs",children:h.label},h.value))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:"Reduce Motion & Animations"}),e.jsx(ot,{checked:a.reducedMotion,onCheckedChange:h=>n(x=>({...x,reducedMotion:h})),"aria-label":"Toggle reduced motion"})]})]})]}),e.jsxs(L,{className:"p-4",children:[e.jsxs("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[e.jsx(cd,{className:"h-4 w-4"}),"Navigation Settings"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:"Enhanced Keyboard Navigation"}),e.jsx(ot,{checked:a.keyboardNavigation,onCheckedChange:h=>n(x=>({...x,keyboardNavigation:h})),"aria-label":"Toggle keyboard navigation"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:"Enhanced Focus Indicators"}),e.jsx(ot,{checked:a.focusIndicators,onCheckedChange:h=>n(x=>({...x,focusIndicators:h})),"aria-label":"Toggle focus indicators"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(kl,{className:"h-4 w-4"}),"Screen Reader Optimization"]}),e.jsx(ot,{checked:a.screenReaderMode,onCheckedChange:h=>n(x=>({...x,screenReaderMode:h})),"aria-label":"Toggle screen reader mode"})]})]})]}),e.jsxs(L,{className:"p-4",children:[e.jsxs("h3",{className:"font-medium mb-4 flex items-center gap-2",children:[e.jsx(kl,{className:"h-4 w-4"}),"Audio Settings"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:"UI Sound Effects"}),e.jsx(ot,{checked:a.soundEffects,onCheckedChange:h=>n(x=>({...x,soundEffects:h})),"aria-label":"Toggle sound effects"})]})]}),a.keyboardNavigation&&e.jsxs(L,{className:"p-4 bg-muted/50",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Keyboard Shortcuts"}),e.jsxs("div",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-background border rounded text-xs",children:"Alt + A"})," - Open accessibility panel"]}),e.jsxs("div",{children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-background border rounded text-xs",children:"Alt + +"})," - Increase font size"]}),e.jsxs("div",{children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-background border rounded text-xs",children:"Alt + -"})," - Decrease font size"]}),e.jsxs("div",{children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-background border rounded text-xs",children:"Alt + C"})," - Toggle high contrast"]}),e.jsxs("div",{children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-background border rounded text-xs",children:"Tab"})," - Navigate between elements"]}),e.jsxs("div",{children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-background border rounded text-xs",children:"Enter/Space"})," - Activate buttons"]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(_,{variant:"outline",onClick:c,children:"Reset to Defaults"})})]})]})]})})};var Io="Progress",Oo=100,[Ly,yC]=ds(Io),[zy,By]=Ly(Io),ku=u.forwardRef((s,t)=>{const{__scopeProgress:a,value:n=null,max:r,getValueLabel:i=qy,...l}=s;(r||r===0)&&!Bl(r)&&console.error(Vy(`${r}`,"Progress"));const o=Bl(r)?r:Oo;n!==null&&!ql(n,o)&&console.error(Uy(`${n}`,"Progress"));const c=ql(n,o)?n:null,h=fr(c)?i(c,o):void 0;return e.jsx(zy,{scope:a,value:c,max:o,children:e.jsx(Ae.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":fr(c)?c:void 0,"aria-valuetext":h,role:"progressbar","data-state":Eu(c,o),"data-value":c??void 0,"data-max":o,...l,ref:t})})});ku.displayName=Io;var Du="ProgressIndicator",Tu=u.forwardRef((s,t)=>{const{__scopeProgress:a,...n}=s,r=By(Du,a);return e.jsx(Ae.div,{"data-state":Eu(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...n,ref:t})});Tu.displayName=Du;function qy(s,t){return`${Math.round(s/t*100)}%`}function Eu(s,t){return s==null?"indeterminate":s===t?"complete":"loading"}function fr(s){return typeof s=="number"}function Bl(s){return fr(s)&&!isNaN(s)&&s>0}function ql(s,t){return fr(s)&&!isNaN(s)&&s<=t&&s>=0}function Vy(s,t){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Oo}\`.`}function Uy(s,t){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Oo} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Mu=ku,Wy=Tu;const Te=u.forwardRef(({className:s,value:t,...a},n)=>e.jsx(Mu,{ref:n,className:G("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...a,children:e.jsx(Wy,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Te.displayName=Mu.displayName;const Pu=({open:s,onOpenChange:t})=>{const{transactions:a,addTransaction:n}=he(),{toast:r}=Ue(),[i,l]=u.useState(!1),o=s!==void 0?s:i,c=t||l,[h,x]=u.useState(0),[d,m]=u.useState([]);u.useEffect(()=>{const D=localStorage.getItem("onboarding-completed"),w=a.length===0;!D&&w&&setTimeout(()=>l(!0),1e3);const R=()=>{l(!0)};return window.addEventListener("open-tour",R),()=>{window.removeEventListener("open-tour",R)}},[a]);const g=[{id:"welcome",title:"Welcome to MoneyLens! 👋",description:"Your personal finance tracker that makes money management simple and insightful.",component:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-primary rounded-full flex items-center justify-center",children:e.jsx(Ua,{className:"h-10 w-10 text-primary-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Let's get you started!"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This quick tour will help you understand the key features and get the most out of MoneyLens."})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 rounded-lg bg-muted/50",children:[e.jsx(de,{className:"h-6 w-6 text-primary"}),e.jsx("span",{children:"Track Spending"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 rounded-lg bg-muted/50",children:[e.jsx(je,{className:"h-6 w-6 text-primary"}),e.jsx("span",{children:"Set Budgets"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 rounded-lg bg-muted/50",children:[e.jsx(Hs,{className:"h-6 w-6 text-primary"}),e.jsx("span",{children:"Get Insights"})]})]})]})},{id:"add-transaction",title:"Add Your First Transaction",description:"Start by recording a recent purchase or income to see how tracking works.",component:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-primary/5 rounded-lg border border-primary/20",children:[e.jsx("h4",{className:"font-medium mb-2",children:"🎯 Try this:"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Add a recent coffee purchase, grocery shopping, or salary to see your first transaction."}),e.jsx(_,{size:"sm",onClick:()=>{r({title:"Great!",description:"Use the Quick Actions toolbar or go to Transactions page to add entries."}),y("add-transaction")},className:"w-full",children:"I'll add a transaction"})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Tip:"})," Use Ctrl+K anywhere in the app for quick transaction entry!"]})})]})},{id:"navigation",title:"Navigate Like a Pro",description:"Discover the main sections and how to move around efficiently.",component:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("div",{className:"font-medium mb-1",children:"📊 Dashboard"}),e.jsx("div",{className:"text-muted-foreground",children:"Your overview & insights"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("div",{className:"font-medium mb-1",children:"💳 Transactions"}),e.jsx("div",{className:"text-muted-foreground",children:"Add & manage entries"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("div",{className:"font-medium mb-1",children:"🎯 Budget"}),e.jsx("div",{className:"text-muted-foreground",children:"Set spending limits"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("div",{className:"font-medium mb-1",children:"📈 Analytics"}),e.jsx("div",{className:"text-muted-foreground",children:"Deep insights & trends"})]})]}),e.jsx("div",{className:"p-3 bg-muted/50 rounded-lg",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"💡 The sidebar collapses on smaller screens. Use the hamburger menu to navigate."})})]})},{id:"features",title:"Key Features to Explore",description:"Here are the powerful features that will transform how you manage money.",component:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-3 p-3 border rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded flex items-center justify-center flex-shrink-0",children:e.jsx(je,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Smart Budgeting"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Set budgets and get warnings before overspending"})]})]}),e.jsxs("div",{className:"flex gap-3 p-3 border rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded flex items-center justify-center flex-shrink-0",children:e.jsx(de,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Predictive Analytics"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"AI-powered insights predict your spending patterns"})]})]}),e.jsxs("div",{className:"flex gap-3 p-3 border rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded flex items-center justify-center flex-shrink-0",children:e.jsx(Hs,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Quick Actions"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Keyboard shortcuts and floating toolbar for speed"})]})]})]})})},{id:"complete",title:"You're All Set! 🎉",description:"Start tracking your finances and watch your financial health improve.",component:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-success/10 rounded-full flex items-center justify-center",children:e.jsx(Ee,{className:"h-8 w-8 text-success"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"Ready to take control!"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Remember, consistent tracking leads to better financial decisions. Start small and build the habit."})]}),e.jsx("div",{className:"p-3 bg-primary/5 rounded-lg",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:["💡 ",e.jsx("strong",{children:"Pro tip:"})," Check your dashboard weekly to spot spending patterns and stay on track with your goals."]})})]})}],y=D=>{m(w=>[...w,D])},p=()=>{h<g.length-1&&(y(g[h].id),x(D=>D+1))},j=()=>{h>0&&x(D=>D-1)},v=()=>{localStorage.setItem("onboarding-completed","true"),l(!1),r({title:"Welcome aboard! 🎉",description:"You're all set up and ready to manage your finances like a pro!"})},N=()=>{localStorage.setItem("onboarding-completed","true"),l(!1)},f=(h+1)/g.length*100,S=g[h];return e.jsx(e.Fragment,{children:e.jsxs(dt,{open:o,onOpenChange:c,children:[e.jsx("div",{"data-onboarding-dialog":!0,style:{display:"none"}}),e.jsxs(at,{className:"sm:max-w-[500px] p-0",children:[e.jsxs(nt,{className:"p-6 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(K,{variant:"outline",className:"text-xs",children:["Step ",h+1," of ",g.length]}),e.jsx(rt,{className:"text-lg font-semibold",children:S.title})]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:N,children:e.jsx(ut,{className:"h-4 w-4"})})]}),e.jsx(Te,{value:f,className:"mt-3"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:S.description})]}),e.jsx("div",{className:"px-6 pb-6",children:S.component}),e.jsxs("div",{className:"flex items-center justify-between p-6 pt-0 border-t",children:[e.jsxs(_,{variant:"ghost",onClick:j,disabled:h===0,className:"gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"Previous"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",onClick:N,children:"Skip Tour"}),h===g.length-1?e.jsxs(_,{onClick:v,className:"gap-2",children:["Get Started",e.jsx(Hs,{className:"h-4 w-4"})]}):e.jsxs(_,{onClick:p,className:"gap-2",children:["Next",e.jsx(Ps,{className:"h-4 w-4"})]})]})]})]})]})})},Hy=()=>{const[s,t]=u.useState(!0),[a,n]=u.useState(!1),[r,i]=u.useState(!1),l=x=>({"/":"Dashboard","/financial-hub":"Financial Hub","/analytics":"Analytics","/transactions":"Transactions","/goals":"Goals","/debts":"Debts","/recurring":"Recurring","/categories":"Categories","/budget":"Budget","/calendar":"Calendar","/settings":"Settings"})[x]||"Dashboard",o=[{id:"command-palette",icon:_g,label:"Command Palette",shortcut:"Ctrl+K",action:()=>{const x=new KeyboardEvent("keydown",{key:"k",ctrlKey:!0,bubbles:!0});window.dispatchEvent(x)},category:"primary"},{id:"accessibility",icon:_i,label:"Accessibility",shortcut:"Alt+A",action:()=>n(!0),category:"primary"},{id:"tour",icon:ls,label:"Take Tour",action:()=>{const x=window.location.pathname,d=l(x);window.dispatchEvent(new CustomEvent("open-page-tour",{detail:{pageName:d}}))},category:"primary"},{id:"shortcuts",icon:cd,label:"Shortcuts",shortcut:"?",action:()=>{const x=new KeyboardEvent("keydown",{key:"k",ctrlKey:!0,bubbles:!0});window.dispatchEvent(x)},category:"secondary"}],c=o.filter(x=>x.category==="primary"),h=o.filter(x=>x.category==="secondary");return e.jsx(Ur,{children:e.jsxs("div",{className:"fixed bottom-4 right-4 z-40",children:[a&&e.jsx("div",{className:"absolute bottom-full right-0 mb-2",children:e.jsx($y,{open:a,onOpenChange:n})}),r&&e.jsx("div",{className:"absolute bottom-full right-0 mb-2",children:e.jsx(Pu,{open:r,onOpenChange:i})}),e.jsxs(L,{className:`bg-background/95 backdrop-blur-sm border shadow-lg transition-all duration-300 cursor-pointer ${s?"w-16 h-16 rounded-full shadow-xl hover:shadow-2xl hover:scale-105":"w-56"}`,onClick:s?()=>t(!1):void 0,children:[e.jsxs("div",{className:`flex items-center justify-between p-2 border-b bg-muted/30 ${s?"border-b-0 bg-transparent p-0 justify-center h-16 rounded-full hover:bg-primary/10":""}`,children:[e.jsx("div",{className:"flex items-center gap-2",children:s?e.jsxs("div",{className:"relative flex items-center justify-center w-full h-full",children:[e.jsx(Be,{className:"h-6 w-6 text-primary transition-all duration-300 hover:scale-110"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-primary rounded-full animate-pulse opacity-60"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"h-3 w-3 text-primary"}),e.jsx("span",{className:"text-xs font-medium",children:"Quick Tools"})]})}),!s&&e.jsx(_,{size:"sm",variant:"ghost",className:"h-5 w-5 p-0 hover:bg-muted",onClick:()=>t(!s),children:e.jsx(Co,{className:"h-2.5 w-2.5"})})]}),!s&&e.jsxs("div",{className:"p-3 space-y-3 animate-fade-in",children:[e.jsx("div",{className:"space-y-1",children:c.map(x=>{const d=x.icon;return e.jsxs(Hi,{children:[e.jsx(Gi,{asChild:!0,children:e.jsxs(_,{variant:"ghost",size:"sm",className:"w-full justify-start gap-3 h-9 px-3 hover:bg-primary/10 hover:text-primary transition-colors text-left",onClick:m=>{m.stopPropagation(),x.action()},children:[e.jsx(d,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium flex-1",children:x.label}),x.shortcut&&e.jsx(K,{variant:"outline",className:"text-xs px-1.5 py-0.5 ml-auto",children:x.shortcut})]})}),e.jsxs(xr,{side:"right",className:"text-xs",children:[e.jsx("p",{children:x.label}),x.shortcut&&e.jsx("p",{className:"text-muted-foreground",children:x.shortcut})]})]},x.id)})}),e.jsx(os,{}),h.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(os,{}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:h.map(x=>{const d=x.icon;return e.jsxs(Hi,{children:[e.jsx(Gi,{asChild:!0,children:e.jsxs(_,{variant:"ghost",size:"sm",className:"h-8 justify-start gap-3 hover:bg-muted transition-colors",onClick:m=>{m.stopPropagation(),x.action()},children:[e.jsx(d,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"text-xs font-medium",children:x.label}),x.shortcut&&e.jsx(K,{variant:"outline",className:"text-xs px-1.5 py-0.5 ml-auto",children:x.shortcut})]})}),e.jsxs(xr,{side:"right",className:"text-xs",children:[e.jsx("p",{children:x.label}),x.shortcut&&e.jsx("p",{className:"text-muted-foreground",children:x.shortcut})]})]},x.id)})})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-success animate-pulse"}),e.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:"System Ready"})]})})]})]})]})})},Gy=()=>{const{toast:s}=Ue(),{transactions:t,addTransaction:a}=he(),[n,r]=u.useState(!1),[i,l]=u.useState(!1),[o,c]=u.useState({amount:"",category:"Food"}),h=()=>{const y=parseFloat(o.amount);if(!y){s({title:"Error",description:"Please enter a valid amount",variant:"destructive"});return}a({amount:o.category==="Earnings"?y:-Math.abs(y),category:o.category,date:new Date().toISOString().split("T")[0],week:`Week ${Math.ceil(new Date().getDate()/7)}`}),c({amount:"",category:"Food"}),r(!1),s({title:"Transaction Added",description:`${o.category} transaction recorded successfully`})},x=()=>{const y=["Date,Category,Amount,Week",...t.map(N=>`${N.date},${N.category},${N.amount},${N.week}`)].join(`
`),p=new Blob([y],{type:"text/csv"}),j=URL.createObjectURL(p),v=document.createElement("a");v.href=j,v.download=`financial-data-${new Date().toISOString().split("T")[0]}.csv`,v.click(),URL.revokeObjectURL(j),s({title:"Data Exported",description:"Your financial data has been downloaded as CSV"})},m=(()=>{const y=new Date,p=new Date(y.getFullYear(),y.getMonth(),1),j=t.filter(f=>new Date(f.date)>=p),v=j.filter(f=>f.amount>0).reduce((f,S)=>f+S.amount,0),N=j.filter(f=>f.amount<0).reduce((f,S)=>f+Math.abs(S.amount),0);return{income:v,expenses:N,net:v-N}})();ie.useEffect(()=>{const y=p=>{(p.ctrlKey||p.metaKey)&&p.key==="k"&&(p.preventDefault(),r(!0)),p.key==="Escape"&&n&&r(!1)};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]);const g=y=>({"/":"Dashboard","/financial-hub":"Financial Hub","/analytics":"Analytics","/transactions":"Transactions","/goals":"Goals","/debts":"Debts","/recurring":"Recurring","/categories":"Categories","/budget":"Budget","/calendar":"Calendar","/settings":"Settings"})[y]||"Dashboard";return e.jsxs(Ur,{children:[e.jsxs(L,{className:`fixed top-4 right-4 z-40 bg-background/95 backdrop-blur-sm border shadow-lg transition-all duration-300 cursor-pointer ${i?"w-16 h-16 rounded-full shadow-xl hover:shadow-2xl hover:scale-105":"w-80"}`,onClick:i?()=>l(!1):void 0,children:[e.jsxs("div",{className:`flex items-center justify-between p-3 border-b bg-muted/30 ${i?"border-b-0 bg-transparent p-0 justify-center h-16 rounded-full hover:bg-primary/10":""}`,children:[e.jsx("div",{className:"flex items-center gap-2",children:i?e.jsxs("div",{className:"relative flex items-center justify-center w-full h-full",children:[e.jsx(Ua,{className:"h-6 w-6 text-primary transition-all duration-300 hover:scale-110"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-success rounded-full animate-pulse opacity-60"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"text-sm font-medium",children:"Quick Actions"})]})}),!i&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"text-xs",children:"This Month"}),e.jsx(_,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 hover:bg-muted",onClick:()=>l(!i),children:e.jsx(Co,{className:"h-3 w-3"})})]})]}),!i&&e.jsxs("div",{className:"p-3 space-y-3 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[e.jsxs("div",{className:"text-center p-2 rounded-lg bg-success/10",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx(de,{className:"h-3 w-3 text-success"}),e.jsxs("div",{className:"text-success font-medium",children:["£",m.income.toFixed(0)]})]}),e.jsx("div",{className:"text-muted-foreground",children:"Income"})]}),e.jsxs("div",{className:"text-center p-2 rounded-lg bg-destructive/10",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx(We,{className:"h-3 w-3 text-destructive"}),e.jsxs("div",{className:"text-destructive font-medium",children:["£",m.expenses.toFixed(0)]})]}),e.jsx("div",{className:"text-muted-foreground",children:"Spent"})]}),e.jsxs("div",{className:"text-center p-2 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:`flex items-center justify-center gap-1 mb-1 font-medium ${m.net>=0?"text-success":"text-destructive"}`,children:[e.jsx(Ua,{className:"h-3 w-3"}),e.jsxs("div",{children:["£",Math.abs(m.net).toFixed(0)]})]}),e.jsx("div",{className:"text-muted-foreground",children:m.net>=0?"Saved":"Over"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs(_,{size:"sm",onClick:()=>r(!0),className:"gap-2 text-xs h-9 hover:bg-primary/10 hover:text-primary transition-colors",title:"Quick Add Transaction (Ctrl+K)",children:[e.jsx(Ke,{className:"h-3 w-3"}),"Add"]}),e.jsxs(_,{size:"sm",variant:"outline",onClick:x,className:"gap-2 text-xs h-9 hover:bg-muted transition-colors",title:"Export Data",children:[e.jsx(vt,{className:"h-3 w-3"}),"Export"]}),e.jsxs(_,{size:"sm",variant:"outline",onClick:()=>{const y=window.location.pathname,p=g(y);window.dispatchEvent(new CustomEvent("open-page-tour",{detail:{pageName:p}}))},className:"gap-2 text-xs h-9 hover:bg-muted transition-colors",title:"Take a tour of this page",children:[e.jsx(ls,{className:"h-3 w-3"}),"Tour"]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Press ",e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted border rounded text-xs font-mono",children:"Ctrl+K"})," for quick add"]})})})]})]}),e.jsx(dt,{open:n,onOpenChange:r,children:e.jsxs(at,{className:"sm:max-w-md",children:[e.jsx(nt,{children:e.jsxs(rt,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5"}),"Quick Add Transaction"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Amount (£)"}),e.jsx(ae,{type:"number",step:"0.01",placeholder:"0.00",value:o.amount,onChange:y=>c(p=>({...p,amount:y.target.value})),autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Category"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Earnings","Food","Petrol","Other"].map(y=>e.jsx(_,{variant:o.category===y?"default":"outline",size:"sm",onClick:()=>c(p=>({...p,category:y})),className:"text-xs",children:y},y))})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(_,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(_,{onClick:h,children:"Add Transaction"})]})]})]})})]})},Yy=({pageName:s,steps:t,open:a,onOpenChange:n})=>{const{toast:r}=Ue(),[i,l]=u.useState(!1),[o,c]=u.useState(0),h=a!==void 0?a:i,x=n||l,d=()=>({Dashboard:e.jsx(tt,{className:"h-6 w-6"}),Transactions:e.jsx(Mt,{className:"h-6 w-6"}),Budget:e.jsx(je,{className:"h-6 w-6"}),Analytics:e.jsx(de,{className:"h-6 w-6"}),Calendar:e.jsx(Fe,{className:"h-6 w-6"}),Categories:e.jsx(Ua,{className:"h-6 w-6"}),Goals:e.jsx(It,{className:"h-6 w-6"}),Debts:e.jsx(Mt,{className:"h-6 w-6"}),Recurring:e.jsx(Fe,{className:"h-6 w-6"}),Settings:e.jsx(As,{className:"h-6 w-6"}),"Financial Hub":e.jsx(Be,{className:"h-6 w-6"})})[s]||e.jsx(mr,{className:"h-6 w-6"}),m=()=>{o<t.length-1?c(N=>N+1):y()},g=()=>{o>0&&c(N=>N-1)},y=()=>{localStorage.setItem(`${s.toLowerCase()}-tour-completed`,"true"),x(!1),c(0),r({title:"Tour Complete! 🎉",description:`You've learned how to use the ${s} page.`})},p=()=>{localStorage.setItem(`${s.toLowerCase()}-tour-completed`,"true"),x(!1),c(0)},j=(o+1)/t.length*100,v=t[o];return e.jsx(dt,{open:h,onOpenChange:x,children:e.jsxs(at,{className:"sm:max-w-[500px] p-0",children:[e.jsxs(nt,{className:"p-6 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:d()}),e.jsxs("div",{children:[e.jsxs(K,{variant:"outline",className:"text-xs",children:[s," Tour"]}),e.jsx(rt,{className:"text-lg font-semibold mt-1",children:v.title})]})]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:p,children:e.jsx(ut,{className:"h-4 w-4"})})]}),e.jsx(Te,{value:j,className:"mt-3"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:v.description})]}),e.jsx("div",{className:"px-6 pb-6",children:e.jsx(L,{className:"p-4 bg-muted/50",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(mr,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-medium",children:"What you'll learn:"})]}),e.jsx("ul",{className:"text-sm space-y-1 text-muted-foreground ml-6",children:t.map((N,f)=>e.jsxs("li",{className:`${f<=o?"text-foreground":"text-muted-foreground"}`,children:[f+1,". ",N.title]},N.id))})]})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 pt-0 border-t",children:[e.jsxs(_,{variant:"ghost",onClick:g,disabled:o===0,className:"gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"Previous"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",onClick:p,children:"Skip Tour"}),e.jsx(_,{onClick:m,className:"gap-2",children:o===t.length-1?e.jsxs(e.Fragment,{children:["Complete Tour",e.jsx(Hs,{className:"h-4 w-4"})]}):e.jsxs(e.Fragment,{children:["Next",e.jsx(Ps,{className:"h-4 w-4"})]})})]})]})]})})},Ky=()=>{const[s,t]=u.useState(null),[a,n]=u.useState(!1),r={Dashboard:[{id:"welcome-dashboard",title:"Welcome to Your Financial Dashboard",description:"This is your central hub for monitoring your financial health. The dashboard provides real-time insights into your income, expenses, and overall financial status."},{id:"balance-card",title:"Balance Overview Card",description:"The balance card shows your current financial standing. Green indicates positive balance, red shows negative. Click on different sections to filter transactions by type."},{id:"personalized-overview",title:"Personalized Financial Overview",description:"This section adapts to your spending patterns. It highlights key metrics like monthly spending trends, category breakdowns, and financial health indicators."},{id:"recent-transactions",title:"Recent Transactions Panel",description:"View your latest financial activity here. Each transaction shows amount, category, and date. Click any transaction to see more details or make edits."},{id:"weekly-chart",title:"Weekly Spending Chart",description:"This interactive chart visualizes your spending patterns over the current week. Hover over bars to see exact amounts and compare daily spending."},{id:"quick-insights",title:"Quick Insights Grid",description:"Get instant financial insights like spending alerts, budget status, and upcoming recurring payments. These cards update in real-time as you add transactions."},{id:"navigation-sidebar",title:"Navigation Sidebar",description:"Use the sidebar to access different sections: Transactions, Budget, Analytics, Goals, and Settings. The active page is highlighted for easy orientation."},{id:"toolbar-actions",title:"Quick Action Toolbars",description:"Two floating toolbars provide quick access: the top toolbar shows monthly stats and quick add, while the bottom toolbar offers comprehensive tools and accessibility features."}],Transactions:[{id:"welcome-transactions",title:"Comprehensive Transaction Management",description:"This page serves as your complete transaction hub. Track every financial movement, categorize spending, and analyze your cash flow patterns."},{id:"transaction-filters",title:"Advanced Filtering System",description:"Use the filter panel to narrow down transactions by date range, category, amount, or type. Multiple filters can be combined for precise searching."},{id:"transaction-table",title:"Interactive Transaction Table",description:"The main table displays all your transactions with sortable columns. Click column headers to sort by date, amount, or category."},{id:"transaction-details",title:"Transaction Details View",description:"Click any transaction row to open detailed view. Edit amounts, categories, or add notes to keep your records accurate."},{id:"bulk-actions",title:"Bulk Transaction Operations",description:"Select multiple transactions to perform batch operations like category changes, deletion, or exporting selected items."},{id:"search-functionality",title:"Smart Search System",description:"Use the search bar to find transactions by description, category, or amount. The search updates results in real-time as you type."},{id:"export-options",title:"Data Export Features",description:"Export your transaction data to CSV format for external analysis or backup purposes. Choose date ranges and specific categories for export."},{id:"import-capabilities",title:"Transaction Import Tools",description:"Import transactions from bank statements or other financial apps using the universal CSV importer for comprehensive data consolidation."}],Budget:[{id:"welcome-budget",title:"Smart Budget Management System",description:"Create, monitor, and adjust your financial budgets with precision. This system helps you maintain spending discipline across all categories."},{id:"budget-overview",title:"Budget Overview Dashboard",description:"See all your budgets at a glance with progress indicators. Green shows you're within budget, yellow indicates caution, red means overspending."},{id:"category-budgets",title:"Category-Specific Budgets",description:"Set individual spending limits for each category like groceries, entertainment, utilities. Each category shows current spending vs. budget."},{id:"progress-visualization",title:"Visual Progress Indicators",description:"Progress bars and circular indicators show how close you are to your budget limits. Hover for detailed breakdowns."},{id:"budget-creation",title:"Creating New Budgets",description:"Use the budget creation wizard to set up new spending limits. Choose categories, set amounts, and define time periods."},{id:"budget-adjustment",title:"Dynamic Budget Adjustments",description:"Easily modify existing budgets as your financial situation changes. Adjust amounts, extend timeframes, or pause budgets temporarily."},{id:"spending-alerts",title:"Smart Spending Alerts",description:"Receive notifications when you approach or exceed budget limits. Alerts help prevent overspending before it happens."},{id:"budget-reports",title:"Budget Performance Reports",description:"Generate detailed reports showing budget adherence, spending patterns, and areas for improvement."}],Analytics:[{id:"welcome-analytics",title:"Financial Analytics",description:"Deep insights into your spending patterns and financial trends."},{id:"charts-graphs",title:"Visual Analytics",description:"Interactive charts and graphs help you understand your financial data."},{id:"spending-trends",title:"Spending Trends",description:"Identify patterns in your spending over time."},{id:"category-breakdown",title:"Category Breakdown",description:"See how your money is distributed across different spending categories."}],"Financial Hub":[{id:"welcome-hub",title:"Financial Hub",description:"Your central dashboard for comprehensive financial management."},{id:"overview-cards",title:"Overview Cards",description:"Quick glance at key financial metrics and recent activity."},{id:"configuration-tools",title:"Configuration Tools",description:"Set up and customize your financial tracking preferences."},{id:"data-import",title:"Data Import",description:"Import financial data from various sources for comprehensive tracking."}],Goals:[{id:"welcome-goals",title:"Financial Goals",description:"Set and track your financial objectives and savings targets."},{id:"goal-setting",title:"Setting Goals",description:"Define specific financial goals with target amounts and deadlines."},{id:"progress-tracking-goals",title:"Goal Progress",description:"Monitor your progress towards achieving your financial objectives."},{id:"goal-adjustments",title:"Adjusting Goals",description:"Modify your goals as your financial priorities evolve."}],Settings:[{id:"welcome-settings",title:"Application Settings",description:"Customize your MoneyLens experience and manage your preferences."},{id:"profile-settings",title:"Profile Settings",description:"Update your personal information and account preferences."},{id:"data-management",title:"Data Management",description:"Export, import, or clear your financial data."},{id:"preferences",title:"Preferences",description:"Customize the application behavior and appearance."}]};return u.useEffect(()=>{const i=l=>{const{pageName:o}=l.detail,c=r[o]||r.Dashboard;t({pageName:o,steps:c}),n(!0)};return window.addEventListener("open-page-tour",i),()=>{window.removeEventListener("open-page-tour",i)}},[]),s?e.jsx(Yy,{pageName:s.pageName,steps:s.steps,open:a,onOpenChange:n}):null},Qy=()=>{const{goals:s,transactions:t}=he(),{toast:a}=Ue(),[n,r]=u.useState([]),i=()=>{const c=[],h=new Date;return s.forEach(x=>{const d=x.currentAmount/x.targetAmount,m=Math.ceil((new Date(x.deadline).getTime()-h.getTime())/(1e3*60*60*24));if(m<=7&&d<1){const g=x.targetAmount-x.currentAmount;c.push({id:`goal-reminder-${x.id}`,type:"goal_reminder",title:`Goal Deadline Approaching: ${x.name}`,message:`Only ${m} days left! You need £${g.toFixed(2)} more to reach your goal.`,severity:"high",timestamp:new Date,isRead:!1,actionable:!0,goalId:x.id,actionType:"earn_money",pushEnabled:!0})}h.getDay()===1&&d<.5&&c.push({id:`goal-progress-${x.id}-${h.toISOString().split("T")[0]}`,type:"goal_progress",title:`Goal Progress Update: ${x.name}`,message:`You're ${(d*100).toFixed(0)}% towards your goal. Keep going!`,severity:"medium",timestamp:new Date,isRead:!1,actionable:!1,goalId:x.id,pushEnabled:!0}),m>0&&d<m/30*.3&&c.push({id:`goal-action-${x.id}`,type:"action_required",title:`Action Required: ${x.name}`,message:"Your progress is behind schedule. Consider adjusting your savings plan.",severity:"high",timestamp:new Date,isRead:!1,actionable:!0,goalId:x.id,actionType:"review_budget",pushEnabled:!0})}),c},l=()=>{const c=[];return s.length===0&&c.push({id:"setup-goals",type:"action_required",title:"Set Up Your First Goal",message:"Create financial goals to track your progress and stay motivated.",severity:"medium",timestamp:new Date,isRead:!1,actionable:!0,actionType:"complete_step",pushEnabled:!0}),t.filter(x=>{const d=new Date(x.date),m=new Date;return m.setDate(m.getDate()-7),d>=m}).length===0&&c.push({id:"update-transactions",type:"action_required",title:"Update Your Transactions",message:"Add your recent transactions to get accurate financial insights.",severity:"medium",timestamp:new Date,isRead:!1,actionable:!0,actionType:"update_transactions",pushEnabled:!0}),c},o=()=>{const c=i(),h=l();return[...c,...h]};return u.useEffect(()=>{const c=()=>{const x=o(),d=n.map(g=>g.id),m=x.filter(g=>!d.includes(g.id));m.length>0&&(r(g=>[...m,...g].slice(0,10)),m.forEach(g=>{g.pushEnabled&&a({title:g.title,description:g.message,variant:g.severity==="high"?"destructive":(g.severity==="medium","default")})}))};c();const h=setInterval(c,6*60*60*1e3);return()=>clearInterval(h)},[s,t,n]),null},Xy=()=>{const{transactions:s}=he(),{toast:t}=Ue(),[a,n]=u.useState([]),[r,i]=u.useState(!1),[l,o]=u.useState({budgetWarnings:!0,budgetExceeded:!0,spendingSpikes:!0,goalUpdates:!1,weeklySummary:!0,soundEnabled:!0,warningThreshold:80}),c={Food:400,Petrol:200,Other:300},h=()=>{const v=new Date,N=new Date(v.getFullYear(),v.getMonth(),1),f=s.filter(S=>new Date(S.date)>=N&&S.amount<0);return{Food:f.filter(S=>S.category==="Food").reduce((S,D)=>S+Math.abs(D.amount),0),Petrol:f.filter(S=>S.category==="Petrol").reduce((S,D)=>S+Math.abs(D.amount),0),Other:f.filter(S=>S.category==="Other").reduce((S,D)=>S+Math.abs(D.amount),0)}},x=()=>{const v=[],N=h();if(Object.entries(c).forEach(([f,S])=>{const D=N[f],w=D/S*100;l.budgetExceeded&&w>=100?v.push({id:`budget-exceeded-${f}`,type:"budget_exceeded",title:`${f} Budget Exceeded!`,message:`You've spent £${D.toFixed(2)} of your £${S} ${f.toLowerCase()} budget (${w.toFixed(0)}%)`,severity:"high",timestamp:new Date,isRead:!1,actionable:!0,category:f,amount:D-S,pushEnabled:!0}):l.budgetWarnings&&w>=l.warningThreshold&&v.push({id:`budget-warning-${f}`,type:"budget_warning",title:`${f} Budget Warning`,message:`You've used ${w.toFixed(0)}% of your ${f.toLowerCase()} budget (£${D.toFixed(2)}/£${S})`,severity:"medium",timestamp:new Date,isRead:!1,actionable:!0,category:f,amount:D,pushEnabled:!0})}),l.spendingSpikes){const f=s.filter(D=>{const w=new Date(D.date),R=new Date;return R.setDate(R.getDate()-7),w>=R&&D.amount<0}).reduce((D,w)=>D+Math.abs(w.amount),0),S=200;f>S*1.5&&v.push({id:"spending-spike",type:"spending_spike",title:"Unusual Spending Detected",message:`Your spending this week (£${f.toFixed(2)}) is 50% higher than usual`,severity:"medium",timestamp:new Date,isRead:!1,actionable:!0,amount:f-S,pushEnabled:!0})}if(l.weeklySummary&&new Date().getDay()===1){const S=s.filter(w=>w.amount>0).reduce((w,R)=>w+R.amount,0),D=s.filter(w=>w.amount<0).reduce((w,R)=>w+Math.abs(R.amount),0);v.push({id:"weekly-summary",type:"weekly_summary",title:"Weekly Financial Summary",message:`Last week: £${S.toFixed(2)} income, £${D.toFixed(2)} expenses`,severity:"low",timestamp:new Date,isRead:!1,actionable:!1,pushEnabled:!0})}return v};u.useEffect(()=>{const v=()=>{const f=x(),S=a.map(w=>w.id),D=f.filter(w=>!S.includes(w.id));D.length>0&&(n(w=>[...D,...w].slice(0,20)),D.forEach(w=>{w.severity==="high"&&t({title:w.title,description:w.message,variant:"destructive"})}))};v();const N=setInterval(v,60*60*1e3);return()=>clearInterval(N)},[s,l,a]),u.useEffect(()=>{const v=localStorage.getItem("notification-settings");v&&o(JSON.parse(v))},[]),u.useEffect(()=>{localStorage.setItem("notification-settings",JSON.stringify(l))},[l]);const d=v=>{n(N=>N.map(f=>f.id===v?{...f,isRead:!0}:f))},m=()=>{n(v=>v.map(N=>({...N,isRead:!0})))},g=v=>{n(N=>N.filter(f=>f.id!==v))},y=v=>{switch(v){case"budget_warning":case"budget_exceeded":return e.jsx(Ze,{className:"h-4 w-4"});case"spending_spike":return e.jsx(de,{className:"h-4 w-4"});case"goal_progress":return e.jsx(je,{className:"h-4 w-4"});case"weekly_summary":return e.jsx(Fe,{className:"h-4 w-4"});default:return e.jsx(mr,{className:"h-4 w-4"})}},p=v=>{switch(v){case"high":return"text-destructive";case"medium":return"text-warning";default:return"text-muted-foreground"}},j=a.filter(v=>!v.isRead).length;return e.jsx(e.Fragment,{children:e.jsxs(dt,{open:r,onOpenChange:i,children:[e.jsx(Ft,{asChild:!0,children:e.jsxs(_,{variant:"ghost",size:"sm",className:"relative",children:[e.jsx(Ma,{className:"h-5 w-5"}),j>0&&e.jsx(K,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-xs flex items-center justify-center",children:j>9?"9+":j})]})}),e.jsxs(at,{className:"sm:max-w-[500px] max-h-[80vh] overflow-y-auto",children:[e.jsx(nt,{children:e.jsxs(rt,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ma,{className:"h-5 w-5"}),"Notifications",j>0&&e.jsxs(K,{variant:"secondary",children:[j," unread"]})]}),e.jsxs("div",{className:"flex gap-2",children:[j>0&&e.jsx(_,{variant:"ghost",size:"sm",onClick:m,children:"Mark all read"}),e.jsxs(dt,{children:[e.jsx(Ft,{asChild:!0,children:e.jsx(_,{variant:"ghost",size:"sm",children:e.jsx(As,{className:"h-4 w-4"})})}),e.jsxs(at,{children:[e.jsx(nt,{children:e.jsx(rt,{children:"Notification Settings"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:"Budget Warnings"}),e.jsx(ot,{checked:l.budgetWarnings,onCheckedChange:v=>o(N=>({...N,budgetWarnings:v}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:"Budget Exceeded Alerts"}),e.jsx(ot,{checked:l.budgetExceeded,onCheckedChange:v=>o(N=>({...N,budgetExceeded:v}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:"Spending Spike Alerts"}),e.jsx(ot,{checked:l.spendingSpikes,onCheckedChange:v=>o(N=>({...N,spendingSpikes:v}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:"Weekly Summary"}),e.jsx(ot,{checked:l.weeklySummary,onCheckedChange:v=>o(N=>({...N,weeklySummary:v}))})]})]})]})]})]})]})}),e.jsx("div",{className:"space-y-3",children:a.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ma,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No notifications yet"}),e.jsx("p",{className:"text-sm",children:"We'll notify you about budget alerts and spending insights"})]}):a.map(v=>e.jsx(L,{className:`p-4 ${v.isRead?"opacity-75":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-1 rounded-full ${p(v.severity)}`,children:y(v.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:v.title}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(K,{variant:"outline",className:"text-xs",children:v.timestamp.toLocaleDateString()}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>g(v.id),className:"h-6 w-6 p-0",children:e.jsx(ut,{className:"h-3 w-3"})})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:v.message}),v.actionable&&e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx(_,{size:"sm",variant:"outline",onClick:()=>d(v.id),children:"Mark as read"}),v.category&&e.jsx(_,{size:"sm",onClick:()=>{d(v.id),i(!1)},children:"View Budget"})]})]})]})},v.id))})]})]})})},Xt=Rx,Bt=u.forwardRef(({className:s,...t},a)=>e.jsx(Rc,{ref:a,className:G("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));Bt.displayName=Rc.displayName;const $e=u.forwardRef(({className:s,...t},a)=>e.jsx(Ic,{ref:a,className:G("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",s),...t}));$e.displayName=Ic.displayName;const Le=u.forwardRef(({className:s,...t},a)=>e.jsx(Oc,{ref:a,className:G("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));Le.displayName=Oc.displayName;function Jy({onImportComplete:s}){const{addTransaction:t,addGoal:a,addDebt:n,addRecurringTransaction:r,transactions:i,goals:l,debts:o,currency:c}=he(),h=u.useRef(null),[x,d]=u.useState(!1),[m,g]=u.useState(null),[y,p]=u.useState(""),[j,v]=u.useState(0),N=w=>{var T;const R=w.split(`
`).filter(F=>F.trim());if(R.length<2)return[];const b=R[0].split(",").map(F=>F.trim().toLowerCase()),k=[];for(let F=1;F<R.length;F++){const O=R[F].split(",").map(A=>A.trim());if(O.length<4)continue;const q=parseFloat(O[b.indexOf("amount")]||"0");if(isNaN(q)||q===0)continue;const P={date:O[b.indexOf("date")]||"",description:O[b.indexOf("description")]||O[b.indexOf("name")]||"",amount:Math.abs(q),category:O[b.indexOf("category")]||"Other",type:q>0?"income":"expense",tags:((T=O[b.indexOf("tags")])==null?void 0:T.split(";").filter(A=>A))||[],goal:O[b.indexOf("goal")]||void 0,debt:O[b.indexOf("debt")]||void 0};P.date&&k.push(P)}return k},f=async w=>{v(10),w.sort((C,B)=>new Date(C.date).getTime()-new Date(B.date).getTime()),v(20);const R=w.map(C=>new Date(C.date)),b={start:R[0].toISOString().split("T")[0],end:R[R.length-1].toISOString().split("T")[0]},k=w.filter(C=>C.type==="income"),T=w.filter(C=>C.type==="expense"),F=k.reduce((C,B)=>C+B.amount,0),O=T.reduce((C,B)=>C+B.amount,0);v(30);let q=0;for(const C of w)try{await t({date:C.date,category:C.category,amount:C.type==="income"?C.amount:-C.amount,description:C.description,tags:C.tags||[]}),q++}catch(B){console.error("Error importing transaction:",B)}v(60);const P={};T.forEach(C=>{P[C.category]||(P[C.category]={total:0,count:0,avg:0}),P[C.category].total+=C.amount,P[C.category].count+=1}),Object.keys(P).forEach(C=>{P[C].avg=P[C].total/P[C].count}),v(70);const A=[];let $=0,M=0;Object.entries(P).forEach(([C,B])=>{if(B.count>=3){let E="monthly";B.count>20?E="daily":B.count>8&&(E="weekly");const V={name:`${C} Expense`,amount:Math.round(B.avg),frequency:E,category:C,occurrences:B.count};A.push(V);try{r({name:V.name,category:V.category,amount:V.amount,frequency:V.frequency,nextDate:new Date().toISOString().split("T")[0],isActive:!0}),M++}catch(U){console.error("Error creating recurring transaction:",U)}if(B.avg>100)try{a({title:`${C} Savings Goal`,name:`${C} Savings Goal`,targetAmount:Math.round(B.avg*3),currentAmount:0,category:C,isCompleted:!1}),$++}catch(U){console.error("Error creating goal:",U)}}}),v(80);let z=0;const I=w.filter(C=>C.debt||C.description.toLowerCase().includes("debt")||C.description.toLowerCase().includes("loan"));if(I.length>0){const C=I.reduce((B,E)=>B+E.amount,0);if(C>0)try{await n({name:"Imported Debt",totalAmount:C*2,remainingAmount:C,interestRate:5,minimumPayment:Math.round(C/12)}),z++}catch(B){console.error("Error creating debt:",B)}}return v(100),{totalRows:w.length,transactionsImported:q,goalsCreated:$,debtsCreated:z,categoriesFound:Object.keys(P),dateRange:b,totalIncome:F,totalExpenses:O,recurringPatterns:A}},S=async w=>{var k;const R=(k=w.target.files)==null?void 0:k[0];if(!R)return;p(R.name),d(!0),v(0);const b=new FileReader;b.onload=async T=>{var F;try{const O=(F=T.target)==null?void 0:F.result,q=N(O);if(q.length===0)throw new Error("No valid data found in CSV");const P=await f(q);g(P),ne.success(`Successfully imported ${P.transactionsImported} transactions`),s()}catch(O){console.error("Error processing CSV:",O),ne.error("Error processing CSV file. Please check the format.")}finally{d(!1)}},b.readAsText(R)},D=()=>{var w;(w=h.current)==null||w.click()};return e.jsx(L,{children:e.jsxs(Q,{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(cr,{className:"w-12 h-12 mx-auto mb-4 text-blue-500"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Universal CSV Import"}),e.jsx("p",{className:"text-gray-600",children:"Upload a single CSV file to populate all application data across all pages"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx("input",{ref:h,type:"file",accept:".csv",onChange:S,className:"hidden"}),!y&&!x&&e.jsxs("div",{children:[e.jsx(Ts,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Import transactions, goals, debts, and more from a single file"}),e.jsx(_,{onClick:D,children:"Choose CSV File"})]}),y&&e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ts,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"font-medium",children:y})]}),x&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(Te,{value:j,className:"w-full"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Importing data... ",j,"%"]})]})]}),m&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m.totalRows}),e.jsx("div",{className:"text-sm text-blue-800",children:"Total Rows"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:m.transactionsImported}),e.jsx("div",{className:"text-sm text-green-800",children:"Transactions"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:m.goalsCreated}),e.jsx("div",{className:"text-sm text-purple-800",children:"Goals Created"})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:m.debtsCreated}),e.jsx("div",{className:"text-sm text-orange-800",children:"Debts Created"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4"}),"Financial Summary"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Date Range:"}),e.jsxs("span",{children:[m.dateRange.start," to ",m.dateRange.end]})]}),e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Total Income:"}),e.jsxs("span",{children:[c," ",m.totalIncome]})]}),e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{children:"Total Expenses:"}),e.jsxs("span",{children:[c," ",m.totalExpenses]})]}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Net:"}),e.jsxs("span",{children:[c," ",m.totalIncome-m.totalExpenses]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4"}),"Categories Found (",m.categoriesFound.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.categoriesFound.map(w=>e.jsx(K,{variant:"outline",children:w},w))})]})]}),m.recurringPatterns.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Recurring Patterns Detected"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:m.recurringPatterns.map((w,R)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:w.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:[w.frequency," • ",w.occurrences," occurrences"]})]}),e.jsxs(K,{variant:"secondary",children:[c," ",w.amount]})]},R))})]}),e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(Ee,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Data imported successfully! All application pages are now populated."})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Ba,{className:"w-4 h-4 text-yellow-600"}),"CSV Format for Universal Import"]}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Required columns:"})," Date, Description, Amount, Category"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Optional columns:"})," Tags (semicolon-separated), Goal, Debt"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Date format:"})," YYYY-MM-DD or DD/MM/YYYY"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Amount:"})," Positive for income, negative for expenses"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Special features:"}),e.jsxs("ul",{className:"ml-4 mt-1",children:[e.jsx("li",{children:'Rows with "Goal" column will create financial goals'}),e.jsx("li",{children:'Rows with "Debt" column will create debt records'}),e.jsx("li",{children:"Tags will be applied to transactions for filtering"})]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold mb-2 text-blue-900",children:"Example CSV Format"}),e.jsx("pre",{className:"text-xs bg-white p-3 rounded border text-blue-800 overflow-x-auto",children:`Date,Description,Amount,Category,Tags,Goal,Debt
2025-01-01,Salary,1800,Income,work;salary,,
2025-01-02,Groceries,-50,Food,essential,,
2025-01-03,Petrol,-20,Transport,essential,,
2025-01-04,Rent,-800,Housing,essential;rent,,
2025-01-05,Investment,-200,Savings,investment,Retirement Fund,
2025-01-06,Car Loan,-150,Debt,loan,,Car Loan`})]})]})]})})}const Zy=()=>{const{addTransaction:s}=he(),{toast:t}=Ue(),a=u.useRef(null),[n,r]=u.useState(!1),[i,l]=u.useState(!1),[o,c]=u.useState(null),[h,x]=u.useState({date:"date",category:"category",amount:"amount",description:""}),d=()=>{const j=["Date,Category,Amount,Description","2024-01-15,Food,-25.50,Lunch at cafe","2024-01-16,Petrol,-45.00,Fuel for car","2024-01-17,Earnings,2500.00,Monthly salary","2024-01-18,Other,-15.00,Coffee","2024-01-19,Food,-32.75,Grocery shopping"].join(`
`),v=new Blob([j],{type:"text/csv"}),N=URL.createObjectURL(v),f=document.createElement("a");f.href=N,f.download="transaction-template.csv",f.click(),URL.revokeObjectURL(N),t({title:"Template Downloaded",description:"Use this CSV template to format your transaction data"})},m=j=>j.trim().split(`
`).map(N=>{const f=[];let S="",D=!1;for(let w=0;w<N.length;w++){const R=N[w];R==='"'?D=!D:R===","&&!D?(f.push(S.trim()),S=""):S+=R}return f.push(S.trim()),f}),g=(j,v,N)=>{var $,M,z;const f=[],S=N.findIndex(I=>I.toLowerCase()===h.date.toLowerCase()),D=N.findIndex(I=>I.toLowerCase()===h.category.toLowerCase()),w=N.findIndex(I=>I.toLowerCase()===h.amount.toLowerCase()),R=(($=j[S])==null?void 0:$.trim())||"",b=((M=j[D])==null?void 0:M.trim())||"",k=((z=j[w])==null?void 0:z.trim())||"";let T="";if(R){const I=new Date(R);isNaN(I.getTime())?f.push("Invalid date format"):T=I.toISOString().split("T")[0]}else f.push("Date is required");const F=["Earnings","Food","Petrol","Other"];let O=b;if(!b)f.push("Category is required");else if(!F.includes(b)){const C={income:"Earnings",salary:"Earnings",wage:"Earnings",food:"Food",groceries:"Food",dining:"Food",restaurant:"Food",gas:"Petrol",fuel:"Petrol",petrol:"Petrol",gasoline:"Petrol",other:"Other",misc:"Other",miscellaneous:"Other"}[b.toLowerCase()];C?O=C:f.push(`Invalid category: ${b}. Valid categories: ${F.join(", ")}`)}let q=0;if(!k)f.push("Amount is required");else{const I=k.replace(/[£$€,]/g,"");q=parseFloat(I),isNaN(q)&&f.push("Invalid amount format")}const P=new Date(T),A=`Week ${Math.ceil(P.getDate()/7)}`;return{date:T,category:O,amount:q,week:A,isValid:f.length===0,errors:f,originalRow:v+1}},y=j=>{var f;const v=(f=j.target.files)==null?void 0:f[0];if(!v)return;if(v.type!=="text/csv"&&!v.name.endsWith(".csv")){t({title:"Invalid File Type",description:"Please upload a CSV file",variant:"destructive"});return}l(!0);const N=new FileReader;N.onload=S=>{var D;try{const w=(D=S.target)==null?void 0:D.result,R=m(w);if(R.length<2)throw new Error("CSV file must contain at least a header row and one data row");const b=R[0],T=R.slice(1).map((P,A)=>g(P,A,b)),F=T.filter(P=>P.isValid),O=T.filter(P=>!P.isValid),q=F.reduce((P,A)=>P+Math.abs(A.amount),0);c({transactions:T,validCount:F.length,invalidCount:O.length,totalAmount:q}),t({title:"File Processed",description:`Found ${F.length} valid transactions, ${O.length} with errors`})}catch(w){t({title:"Import Error",description:w instanceof Error?w.message:"Failed to process CSV file",variant:"destructive"})}finally{l(!1)}},N.readAsText(v)},p=()=>{if(!o)return;const j=o.transactions.filter(N=>N.isValid);let v=0;j.forEach(N=>{s({date:N.date,category:N.category,amount:N.amount,week:N.week}),v++}),t({title:"Import Successful!",description:`Successfully imported ${v} transactions`}),c(null),r(!1),a.current&&(a.current.value="")};return e.jsxs(dt,{open:n,onOpenChange:r,children:[e.jsx(Ft,{asChild:!0,children:e.jsxs(_,{className:"gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),"Import Data"]})}),e.jsxs(at,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[e.jsx(nt,{children:e.jsxs(rt,{className:"flex items-center gap-2",children:[e.jsx(Bg,{className:"h-5 w-5"}),"Import Transaction Data"]})}),e.jsxs("div",{className:"space-y-6",children:[!o&&e.jsxs(Xt,{defaultValue:"universal",className:"w-full",children:[e.jsxs(Bt,{className:"grid w-full grid-cols-2",children:[e.jsxs($e,{value:"universal",className:"flex items-center gap-2",children:[e.jsx(Wg,{className:"h-4 w-4"}),"Universal Import"]}),e.jsxs($e,{value:"transactions",className:"flex items-center gap-2",children:[e.jsx(Ts,{className:"h-4 w-4"}),"Transactions Only"]})]}),e.jsx(Le,{value:"universal",className:"space-y-4",children:e.jsx(Jy,{onImportComplete:()=>r(!1)})}),e.jsxs(Le,{value:"transactions",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-8 border-2 border-dashed border-border rounded-lg bg-gradient-to-br from-primary/5 to-secondary/5",children:[e.jsx(Ts,{className:"h-16 w-16 mx-auto text-primary mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Import Your Financial Data"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6 max-w-md mx-auto",children:"Get started quickly by importing your existing transaction data. We support CSV files from most banks and financial apps."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-center mb-6",children:[e.jsx(_,{onClick:()=>{var j;return(j=a.current)==null?void 0:j.click()},disabled:i,size:"lg",className:"gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"h-4 w-4"}),"Choose CSV File"]})}),e.jsxs(_,{variant:"outline",onClick:d,size:"lg",className:"gap-2",children:[e.jsx(vt,{className:"h-4 w-4"}),"Download Template"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center p-2 bg-background rounded border",children:[e.jsx(Ts,{className:"h-6 w-6 mx-auto mb-1 text-primary"}),e.jsx("span",{children:"CSV Format"})]}),e.jsxs("div",{className:"text-center p-2 bg-background rounded border",children:[e.jsx(Ee,{className:"h-6 w-6 mx-auto mb-1 text-success"}),e.jsx("span",{children:"Auto-Detect"})]}),e.jsxs("div",{className:"text-center p-2 bg-background rounded border",children:[e.jsx(Lt,{className:"h-6 w-6 mx-auto mb-1 text-blue-500"}),e.jsx("span",{children:"Secure"})]})]}),e.jsx("input",{ref:a,type:"file",accept:".csv",onChange:y,className:"hidden"})]}),i&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Te,{value:50,className:"w-full"}),e.jsx("p",{className:"text-sm text-center text-muted-foreground",children:"Processing your file..."})]})]}),e.jsxs(L,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"CSV Format Requirements"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4 text-success"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Required columns:"})," Date, Category, Amount"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4 text-success"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Date format:"})," YYYY-MM-DD, MM/DD/YYYY, or DD/MM/YYYY"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4 text-success"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Categories:"})," Earnings, Food, Petrol, Other"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4 text-success"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Amount:"})," Positive for income, negative for expenses"]})]})]})]})]})]}),o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(L,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-success",children:o.validCount}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Valid"})]}),e.jsxs(L,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-destructive",children:o.invalidCount}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Errors"})]}),e.jsxs(L,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["£",o.totalAmount.toFixed(2)]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"})]})]}),o.invalidCount>0&&e.jsxs(us,{children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsxs(ms,{children:[o.invalidCount," transaction",o.invalidCount!==1?"s have":" has"," errors and will not be imported. Review the details below to fix these issues."]})]}),e.jsxs("div",{className:"max-h-60 overflow-y-auto border rounded-lg",children:[e.jsxs("div",{className:"p-2 border-b bg-muted/50 font-medium text-sm",children:["Transaction Preview (",o.transactions.length," total)"]}),e.jsxs("div",{className:"space-y-2 p-2",children:[o.transactions.slice(0,10).map((j,v)=>e.jsxs("div",{className:`flex items-center justify-between p-2 rounded text-sm ${j.isValid?"bg-success/10":"bg-destructive/10"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[j.isValid?e.jsx(Ee,{className:"h-4 w-4 text-success"}):e.jsx(ut,{className:"h-4 w-4 text-destructive"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[j.date," - ",j.category]}),j.errors.length>0&&e.jsxs("div",{className:"text-xs text-destructive",children:["Row ",j.originalRow,": ",j.errors.join(", ")]})]})]}),e.jsxs(K,{variant:j.isValid?"default":"destructive",children:["£",Math.abs(j.amount).toFixed(2)]})]},v)),o.transactions.length>10&&e.jsxs("div",{className:"text-center text-sm text-muted-foreground py-2",children:["... and ",o.transactions.length-10," more"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(_,{variant:"outline",onClick:()=>{c(null),a.current&&(a.current.value="")},children:"Cancel"}),e.jsxs(_,{onClick:p,disabled:o.validCount===0,className:"gap-2",children:["Import ",o.validCount," Transaction",o.validCount!==1?"s":"",e.jsx(Ps,{className:"h-4 w-4"})]})]})]})]})]})]})},Re=Lx,Ie=zx,Me=u.forwardRef(({className:s,children:t,...a},n)=>e.jsxs(Fc,{ref:n,className:G("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...a,children:[t,e.jsx(Ix,{asChild:!0,children:e.jsx(So,{className:"h-4 w-4 opacity-50"})})]}));Me.displayName=Fc.displayName;const Au=u.forwardRef(({className:s,...t},a)=>e.jsx(_c,{ref:a,className:G("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Ag,{className:"h-4 w-4"})}));Au.displayName=_c.displayName;const Ru=u.forwardRef(({className:s,...t},a)=>e.jsx($c,{ref:a,className:G("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(So,{className:"h-4 w-4"})}));Ru.displayName=$c.displayName;const Pe=u.forwardRef(({className:s,children:t,position:a="popper",...n},r)=>e.jsx(Ox,{children:e.jsxs(Lc,{ref:r,className:G("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...n,children:[e.jsx(Au,{}),e.jsx(Fx,{className:G("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(Ru,{})]})}));Pe.displayName=Lc.displayName;const ej=u.forwardRef(({className:s,...t},a)=>e.jsx(zc,{ref:a,className:G("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));ej.displayName=zc.displayName;const J=u.forwardRef(({className:s,children:t,...a},n)=>e.jsxs(Bc,{ref:n,className:G("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(_x,{children:e.jsx(wo,{className:"h-4 w-4"})})}),e.jsx($x,{children:t})]}));J.displayName=Bc.displayName;const tj=u.forwardRef(({className:s,...t},a)=>e.jsx(qc,{ref:a,className:G("-mx-1 my-1 h-px bg-muted",s),...t}));tj.displayName=qc.displayName;var fe=function(){return fe=Object.assign||function(t){for(var a,n=1,r=arguments.length;n<r;n++){a=arguments[n];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},fe.apply(this,arguments)};function sj(s,t){var a={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(a[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(a[n[r]]=s[n[r]]);return a}function Iu(s,t,a){for(var n=0,r=t.length,i;n<r;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return s.concat(i||Array.prototype.slice.call(t))}function On(s){return s.mode==="multiple"}function Fn(s){return s.mode==="range"}function Qr(s){return s.mode==="single"}var aj={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function nj(s,t){return ce(s,"LLLL y",t)}function rj(s,t){return ce(s,"d",t)}function ij(s,t){return ce(s,"LLLL",t)}function oj(s){return"".concat(s)}function lj(s,t){return ce(s,"cccccc",t)}function cj(s,t){return ce(s,"yyyy",t)}var dj=Object.freeze({__proto__:null,formatCaption:nj,formatDay:rj,formatMonthCaption:ij,formatWeekNumber:oj,formatWeekdayName:lj,formatYearCaption:cj}),uj=function(s,t,a){return ce(s,"do MMMM (EEEE)",a)},mj=function(){return"Month: "},hj=function(){return"Go to next month"},xj=function(){return"Go to previous month"},gj=function(s,t){return ce(s,"cccc",t)},pj=function(s){return"Week n. ".concat(s)},fj=function(){return"Year: "},vj=Object.freeze({__proto__:null,labelDay:uj,labelMonthDropdown:mj,labelNext:hj,labelPrevious:xj,labelWeekNumber:pj,labelWeekday:gj,labelYearDropdown:fj});function yj(){var s="buttons",t=aj,a=ag,n={},r={},i=1,l={},o=new Date;return{captionLayout:s,classNames:t,formatters:dj,labels:vj,locale:a,modifiersClassNames:n,modifiers:r,numberOfMonths:i,styles:l,today:o,mode:"default"}}function jj(s){var t=s.fromYear,a=s.toYear,n=s.fromMonth,r=s.toMonth,i=s.fromDate,l=s.toDate;return n?i=mt(n):t&&(i=new Date(t,0,1)),r?l=Ys(r):a&&(l=new Date(a,11,31)),{fromDate:i?Ks(i):void 0,toDate:l?Ks(l):void 0}}var Ou=u.createContext(void 0);function bj(s){var t,a=s.initialProps,n=yj(),r=jj(a),i=r.fromDate,l=r.toDate,o=(t=a.captionLayout)!==null&&t!==void 0?t:n.captionLayout;o!=="buttons"&&(!i||!l)&&(o="buttons");var c;(Qr(a)||On(a)||Fn(a))&&(c=a.onSelect);var h=fe(fe(fe({},n),a),{captionLayout:o,classNames:fe(fe({},n.classNames),a.classNames),components:fe({},a.components),formatters:fe(fe({},n.formatters),a.formatters),fromDate:i,labels:fe(fe({},n.labels),a.labels),mode:a.mode||n.mode,modifiers:fe(fe({},n.modifiers),a.modifiers),modifiersClassNames:fe(fe({},n.modifiersClassNames),a.modifiersClassNames),onSelect:c,styles:fe(fe({},n.styles),a.styles),toDate:l});return e.jsx(Ou.Provider,{value:h,children:s.children})}function Ge(){var s=u.useContext(Ou);if(!s)throw new Error("useDayPicker must be used within a DayPickerProvider.");return s}function Fu(s){var t=Ge(),a=t.locale,n=t.classNames,r=t.styles,i=t.formatters.formatCaption;return e.jsx("div",{className:n.caption_label,style:r.caption_label,"aria-live":"polite",role:"presentation",id:s.id,children:i(s.displayMonth,{locale:a})})}function Nj(s){return e.jsx("svg",fe({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},s,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function _u(s){var t,a,n=s.onChange,r=s.value,i=s.children,l=s.caption,o=s.className,c=s.style,h=Ge(),x=(a=(t=h.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&a!==void 0?a:Nj;return e.jsxs("div",{className:o,style:c,children:[e.jsx("span",{className:h.classNames.vhidden,children:s["aria-label"]}),e.jsx("select",{name:s.name,"aria-label":s["aria-label"],className:h.classNames.dropdown,style:h.styles.dropdown,value:r,onChange:n,children:i}),e.jsxs("div",{className:h.classNames.caption_label,style:h.styles.caption_label,"aria-hidden":"true",children:[l,e.jsx(x,{className:h.classNames.dropdown_icon,style:h.styles.dropdown_icon})]})]})}function wj(s){var t,a=Ge(),n=a.fromDate,r=a.toDate,i=a.styles,l=a.locale,o=a.formatters.formatMonthCaption,c=a.classNames,h=a.components,x=a.labels.labelMonthDropdown;if(!n)return e.jsx(e.Fragment,{});if(!r)return e.jsx(e.Fragment,{});var d=[];if(ng(n,r))for(var m=mt(n),g=n.getMonth();g<=r.getMonth();g++)d.push(pi(m,g));else for(var m=mt(new Date),g=0;g<=11;g++)d.push(pi(m,g));var y=function(j){var v=Number(j.target.value),N=pi(mt(s.displayMonth),v);s.onChange(N)},p=(t=h==null?void 0:h.Dropdown)!==null&&t!==void 0?t:_u;return e.jsx(p,{name:"months","aria-label":x(),className:c.dropdown_month,style:i.dropdown_month,onChange:y,value:s.displayMonth.getMonth(),caption:o(s.displayMonth,{locale:l}),children:d.map(function(j){return e.jsx("option",{value:j.getMonth(),children:o(j,{locale:l})},j.getMonth())})})}function Sj(s){var t,a=s.displayMonth,n=Ge(),r=n.fromDate,i=n.toDate,l=n.locale,o=n.styles,c=n.classNames,h=n.components,x=n.formatters.formatYearCaption,d=n.labels.labelYearDropdown,m=[];if(!r)return e.jsx(e.Fragment,{});if(!i)return e.jsx(e.Fragment,{});for(var g=r.getFullYear(),y=i.getFullYear(),p=g;p<=y;p++)m.push(vl(rg(new Date),p));var j=function(N){var f=vl(mt(a),Number(N.target.value));s.onChange(f)},v=(t=h==null?void 0:h.Dropdown)!==null&&t!==void 0?t:_u;return e.jsx(v,{name:"years","aria-label":d(),className:c.dropdown_year,style:o.dropdown_year,onChange:j,value:a.getFullYear(),caption:x(a,{locale:l}),children:m.map(function(N){return e.jsx("option",{value:N.getFullYear(),children:x(N,{locale:l})},N.getFullYear())})})}function Cj(s,t){var a=u.useState(s),n=a[0],r=a[1],i=t===void 0?n:t;return[i,r]}function kj(s){var t=s.month,a=s.defaultMonth,n=s.today,r=t||a||n||new Date,i=s.toDate,l=s.fromDate,o=s.numberOfMonths,c=o===void 0?1:o;if(i&&un(i,r)<0){var h=-1*(c-1);r=Ot(i,h)}return l&&un(r,l)<0&&(r=l),mt(r)}function Dj(){var s=Ge(),t=kj(s),a=Cj(t,s.month),n=a[0],r=a[1],i=function(l){var o;if(!s.disableNavigation){var c=mt(l);r(c),(o=s.onMonthChange)===null||o===void 0||o.call(s,c)}};return[n,i]}function Tj(s,t){for(var a=t.reverseMonths,n=t.numberOfMonths,r=mt(s),i=mt(Ot(r,n)),l=un(i,r),o=[],c=0;c<l;c++){var h=Ot(r,c);o.push(h)}return a&&(o=o.reverse()),o}function Ej(s,t){if(!t.disableNavigation){var a=t.toDate,n=t.pagedNavigation,r=t.numberOfMonths,i=r===void 0?1:r,l=n?i:1,o=mt(s);if(!a)return Ot(o,l);var c=un(a,s);if(!(c<i))return Ot(o,l)}}function Mj(s,t){if(!t.disableNavigation){var a=t.fromDate,n=t.pagedNavigation,r=t.numberOfMonths,i=r===void 0?1:r,l=n?i:1,o=mt(s);if(!a)return Ot(o,-l);var c=un(o,a);if(!(c<=0))return Ot(o,-l)}}var $u=u.createContext(void 0);function Pj(s){var t=Ge(),a=Dj(),n=a[0],r=a[1],i=Tj(n,t),l=Ej(n,t),o=Mj(n,t),c=function(d){return i.some(function(m){return jo(d,m)})},h=function(d,m){c(d)||(m&&Ws(d,m)?r(Ot(d,1+t.numberOfMonths*-1)):r(d))},x={currentMonth:n,displayMonths:i,goToMonth:r,goToDate:h,previousMonth:o,nextMonth:l,isDateDisplayed:c};return e.jsx($u.Provider,{value:x,children:s.children})}function _n(){var s=u.useContext($u);if(!s)throw new Error("useNavigation must be used within a NavigationProvider");return s}function Vl(s){var t,a=Ge(),n=a.classNames,r=a.styles,i=a.components,l=_n().goToMonth,o=function(x){l(Ot(x,s.displayIndex?-s.displayIndex:0))},c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:Fu,h=e.jsx(c,{id:s.id,displayMonth:s.displayMonth});return e.jsxs("div",{className:n.caption_dropdowns,style:r.caption_dropdowns,children:[e.jsx("div",{className:n.vhidden,children:h}),e.jsx(wj,{onChange:o,displayMonth:s.displayMonth}),e.jsx(Sj,{onChange:o,displayMonth:s.displayMonth})]})}function Aj(s){return e.jsx("svg",fe({width:"16px",height:"16px",viewBox:"0 0 120 120"},s,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Rj(s){return e.jsx("svg",fe({width:"16px",height:"16px",viewBox:"0 0 120 120"},s,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var vr=u.forwardRef(function(s,t){var a=Ge(),n=a.classNames,r=a.styles,i=[n.button_reset,n.button];s.className&&i.push(s.className);var l=i.join(" "),o=fe(fe({},r.button_reset),r.button);return s.style&&Object.assign(o,s.style),e.jsx("button",fe({},s,{ref:t,type:"button",className:l,style:o}))});function Ij(s){var t,a,n=Ge(),r=n.dir,i=n.locale,l=n.classNames,o=n.styles,c=n.labels,h=c.labelPrevious,x=c.labelNext,d=n.components;if(!s.nextMonth&&!s.previousMonth)return e.jsx(e.Fragment,{});var m=h(s.previousMonth,{locale:i}),g=[l.nav_button,l.nav_button_previous].join(" "),y=x(s.nextMonth,{locale:i}),p=[l.nav_button,l.nav_button_next].join(" "),j=(t=d==null?void 0:d.IconRight)!==null&&t!==void 0?t:Rj,v=(a=d==null?void 0:d.IconLeft)!==null&&a!==void 0?a:Aj;return e.jsxs("div",{className:l.nav,style:o.nav,children:[!s.hidePrevious&&e.jsx(vr,{name:"previous-month","aria-label":m,className:g,style:o.nav_button_previous,disabled:!s.previousMonth,onClick:s.onPreviousClick,children:r==="rtl"?e.jsx(j,{className:l.nav_icon,style:o.nav_icon}):e.jsx(v,{className:l.nav_icon,style:o.nav_icon})}),!s.hideNext&&e.jsx(vr,{name:"next-month","aria-label":y,className:p,style:o.nav_button_next,disabled:!s.nextMonth,onClick:s.onNextClick,children:r==="rtl"?e.jsx(v,{className:l.nav_icon,style:o.nav_icon}):e.jsx(j,{className:l.nav_icon,style:o.nav_icon})})]})}function Ul(s){var t=Ge().numberOfMonths,a=_n(),n=a.previousMonth,r=a.nextMonth,i=a.goToMonth,l=a.displayMonths,o=l.findIndex(function(y){return jo(s.displayMonth,y)}),c=o===0,h=o===l.length-1,x=t>1&&(c||!h),d=t>1&&(h||!c),m=function(){n&&i(n)},g=function(){r&&i(r)};return e.jsx(Ij,{displayMonth:s.displayMonth,hideNext:x,hidePrevious:d,nextMonth:r,previousMonth:n,onPreviousClick:m,onNextClick:g})}function Oj(s){var t,a=Ge(),n=a.classNames,r=a.disableNavigation,i=a.styles,l=a.captionLayout,o=a.components,c=(t=o==null?void 0:o.CaptionLabel)!==null&&t!==void 0?t:Fu,h;return r?h=e.jsx(c,{id:s.id,displayMonth:s.displayMonth}):l==="dropdown"?h=e.jsx(Vl,{displayMonth:s.displayMonth,id:s.id}):l==="dropdown-buttons"?h=e.jsxs(e.Fragment,{children:[e.jsx(Vl,{displayMonth:s.displayMonth,displayIndex:s.displayIndex,id:s.id}),e.jsx(Ul,{displayMonth:s.displayMonth,displayIndex:s.displayIndex,id:s.id})]}):h=e.jsxs(e.Fragment,{children:[e.jsx(c,{id:s.id,displayMonth:s.displayMonth,displayIndex:s.displayIndex}),e.jsx(Ul,{displayMonth:s.displayMonth,id:s.id})]}),e.jsx("div",{className:n.caption,style:i.caption,children:h})}function Fj(s){var t=Ge(),a=t.footer,n=t.styles,r=t.classNames.tfoot;return a?e.jsx("tfoot",{className:r,style:n.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:a})})}):e.jsx(e.Fragment,{})}function _j(s,t,a){for(var n=a?bo(new Date):Ja(new Date,{locale:s,weekStartsOn:t}),r=[],i=0;i<7;i++){var l=qe(n,i);r.push(l)}return r}function $j(){var s=Ge(),t=s.classNames,a=s.styles,n=s.showWeekNumber,r=s.locale,i=s.weekStartsOn,l=s.ISOWeek,o=s.formatters.formatWeekdayName,c=s.labels.labelWeekday,h=_j(r,i,l);return e.jsxs("tr",{style:a.head_row,className:t.head_row,children:[n&&e.jsx("td",{style:a.head_cell,className:t.head_cell}),h.map(function(x,d){return e.jsx("th",{scope:"col",className:t.head_cell,style:a.head_cell,"aria-label":c(x,{locale:r}),children:o(x,{locale:r})},d)})]})}function Lj(){var s,t=Ge(),a=t.classNames,n=t.styles,r=t.components,i=(s=r==null?void 0:r.HeadRow)!==null&&s!==void 0?s:$j;return e.jsx("thead",{style:n.head,className:a.head,children:e.jsx(i,{})})}function zj(s){var t=Ge(),a=t.locale,n=t.formatters.formatDay;return e.jsx(e.Fragment,{children:n(s.date,{locale:a})})}var Fo=u.createContext(void 0);function Bj(s){if(!On(s.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return e.jsx(Fo.Provider,{value:t,children:s.children})}return e.jsx(qj,{initialProps:s.initialProps,children:s.children})}function qj(s){var t=s.initialProps,a=s.children,n=t.selected,r=t.min,i=t.max,l=function(h,x,d){var m,g;(m=t.onDayClick)===null||m===void 0||m.call(t,h,x,d);var y=!!(x.selected&&r&&(n==null?void 0:n.length)===r);if(!y){var p=!!(!x.selected&&i&&(n==null?void 0:n.length)===i);if(!p){var j=n?Iu([],n):[];if(x.selected){var v=j.findIndex(function(N){return lt(h,N)});j.splice(v,1)}else j.push(h);(g=t.onSelect)===null||g===void 0||g.call(t,j,h,x,d)}}},o={disabled:[]};n&&o.disabled.push(function(h){var x=i&&n.length>i-1,d=n.some(function(m){return lt(m,h)});return!!(x&&!d)});var c={selected:n,onDayClick:l,modifiers:o};return e.jsx(Fo.Provider,{value:c,children:a})}function _o(){var s=u.useContext(Fo);if(!s)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return s}function Vj(s,t){var a=t||{},n=a.from,r=a.to;return n&&r?lt(r,s)&&lt(n,s)?void 0:lt(r,s)?{from:r,to:void 0}:lt(n,s)?void 0:mn(n,s)?{from:s,to:r}:{from:n,to:s}:r?mn(s,r)?{from:r,to:s}:{from:s,to:r}:n?Ws(s,n)?{from:s,to:n}:{from:n,to:s}:{from:s,to:void 0}}var $o=u.createContext(void 0);function Uj(s){if(!Fn(s.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx($o.Provider,{value:t,children:s.children})}return e.jsx(Wj,{initialProps:s.initialProps,children:s.children})}function Wj(s){var t=s.initialProps,a=s.children,n=t.selected,r=n||{},i=r.from,l=r.to,o=t.min,c=t.max,h=function(g,y,p){var j,v;(j=t.onDayClick)===null||j===void 0||j.call(t,g,y,p);var N=Vj(g,n);(v=t.onSelect)===null||v===void 0||v.call(t,N,g,y,p)},x={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(x.range_start=[i],l?(x.range_end=[l],lt(i,l)||(x.range_middle=[{after:i,before:l}])):x.range_end=[i]):l&&(x.range_start=[l],x.range_end=[l]),o&&(i&&!l&&x.disabled.push({after:Je(i,o-1),before:qe(i,o-1)}),i&&l&&x.disabled.push({after:i,before:qe(i,o-1)}),!i&&l&&x.disabled.push({after:Je(l,o-1),before:qe(l,o-1)})),c){if(i&&!l&&(x.disabled.push({before:qe(i,-c+1)}),x.disabled.push({after:qe(i,c-1)})),i&&l){var d=Gt(l,i)+1,m=c-d;x.disabled.push({before:Je(i,m)}),x.disabled.push({after:qe(l,m)})}!i&&l&&(x.disabled.push({before:qe(l,-c+1)}),x.disabled.push({after:qe(l,c-1)}))}return e.jsx($o.Provider,{value:{selected:n,onDayClick:h,modifiers:x},children:a})}function Lo(){var s=u.useContext($o);if(!s)throw new Error("useSelectRange must be used within a SelectRangeProvider");return s}function tr(s){return Array.isArray(s)?Iu([],s):s!==void 0?[s]:[]}function Hj(s){var t={};return Object.entries(s).forEach(function(a){var n=a[0],r=a[1];t[n]=tr(r)}),t}var cs;(function(s){s.Outside="outside",s.Disabled="disabled",s.Selected="selected",s.Hidden="hidden",s.Today="today",s.RangeStart="range_start",s.RangeEnd="range_end",s.RangeMiddle="range_middle"})(cs||(cs={}));var Gj=cs.Selected,Ss=cs.Disabled,Yj=cs.Hidden,Kj=cs.Today,Ni=cs.RangeEnd,wi=cs.RangeMiddle,Si=cs.RangeStart,Qj=cs.Outside;function Xj(s,t,a){var n,r=(n={},n[Gj]=tr(s.selected),n[Ss]=tr(s.disabled),n[Yj]=tr(s.hidden),n[Kj]=[s.today],n[Ni]=[],n[wi]=[],n[Si]=[],n[Qj]=[],n);return s.fromDate&&r[Ss].push({before:s.fromDate}),s.toDate&&r[Ss].push({after:s.toDate}),On(s)?r[Ss]=r[Ss].concat(t.modifiers[Ss]):Fn(s)&&(r[Ss]=r[Ss].concat(a.modifiers[Ss]),r[Si]=a.modifiers[Si],r[wi]=a.modifiers[wi],r[Ni]=a.modifiers[Ni]),r}var Lu=u.createContext(void 0);function Jj(s){var t=Ge(),a=_o(),n=Lo(),r=Xj(t,a,n),i=Hj(t.modifiers),l=fe(fe({},r),i);return e.jsx(Lu.Provider,{value:l,children:s.children})}function zu(){var s=u.useContext(Lu);if(!s)throw new Error("useModifiers must be used within a ModifiersProvider");return s}function Zj(s){return!!(s&&typeof s=="object"&&"before"in s&&"after"in s)}function e0(s){return!!(s&&typeof s=="object"&&"from"in s)}function t0(s){return!!(s&&typeof s=="object"&&"after"in s)}function s0(s){return!!(s&&typeof s=="object"&&"before"in s)}function a0(s){return!!(s&&typeof s=="object"&&"dayOfWeek"in s)}function n0(s,t){var a,n=t.from,r=t.to;if(n&&r){var i=Gt(r,n)<0;i&&(a=[r,n],n=a[0],r=a[1]);var l=Gt(s,n)>=0&&Gt(r,s)>=0;return l}return r?lt(r,s):n?lt(n,s):!1}function r0(s){return Jc(s)}function i0(s){return Array.isArray(s)&&s.every(Jc)}function o0(s,t){return t.some(function(a){if(typeof a=="boolean")return a;if(r0(a))return lt(s,a);if(i0(a))return a.includes(s);if(e0(a))return n0(s,a);if(a0(a))return a.dayOfWeek.includes(s.getDay());if(Zj(a)){var n=Gt(a.before,s),r=Gt(a.after,s),i=n>0,l=r<0,o=mn(a.before,a.after);return o?l&&i:i||l}return t0(a)?Gt(s,a.after)>0:s0(a)?Gt(a.before,s)>0:typeof a=="function"?a(s):!1})}function zo(s,t,a){var n=Object.keys(t).reduce(function(i,l){var o=t[l];return o0(s,o)&&i.push(l),i},[]),r={};return n.forEach(function(i){return r[i]=!0}),a&&!jo(s,a)&&(r.outside=!0),r}function l0(s,t){for(var a=mt(s[0]),n=Ys(s[s.length-1]),r,i,l=a;l<=n;){var o=zo(l,t),c=!o.disabled&&!o.hidden;if(!c){l=qe(l,1);continue}if(o.selected)return l;o.today&&!i&&(i=l),r||(r=l),l=qe(l,1)}return i||r}var c0=365;function Bu(s,t){var a=t.moveBy,n=t.direction,r=t.context,i=t.modifiers,l=t.retry,o=l===void 0?{count:0,lastFocused:s}:l,c=r.weekStartsOn,h=r.fromDate,x=r.toDate,d=r.locale,m={day:qe,week:za,month:Ot,year:ir,startOfWeek:function(j){return r.ISOWeek?bo(j):Ja(j,{locale:d,weekStartsOn:c})},endOfWeek:function(j){return r.ISOWeek?Xc(j):_r(j,{locale:d,weekStartsOn:c})}},g=m[a](s,n==="after"?1:-1);n==="before"&&h?g=ig([h,g]):n==="after"&&x&&(g=og([x,g]));var y=!0;if(i){var p=zo(g,i);y=!p.disabled&&!p.hidden}return y?g:o.count>c0?o.lastFocused:Bu(g,{moveBy:a,direction:n,context:r,modifiers:i,retry:fe(fe({},o),{count:o.count+1})})}var qu=u.createContext(void 0);function d0(s){var t=_n(),a=zu(),n=u.useState(),r=n[0],i=n[1],l=u.useState(),o=l[0],c=l[1],h=l0(t.displayMonths,a),x=r??(o&&t.isDateDisplayed(o))?o:h,d=function(){c(r),i(void 0)},m=function(j){i(j)},g=Ge(),y=function(j,v){if(r){var N=Bu(r,{moveBy:j,direction:v,context:g,modifiers:a});lt(r,N)||(t.goToDate(N,r),m(N))}},p={focusedDay:r,focusTarget:x,blur:d,focus:m,focusDayAfter:function(){return y("day","after")},focusDayBefore:function(){return y("day","before")},focusWeekAfter:function(){return y("week","after")},focusWeekBefore:function(){return y("week","before")},focusMonthBefore:function(){return y("month","before")},focusMonthAfter:function(){return y("month","after")},focusYearBefore:function(){return y("year","before")},focusYearAfter:function(){return y("year","after")},focusStartOfWeek:function(){return y("startOfWeek","before")},focusEndOfWeek:function(){return y("endOfWeek","after")}};return e.jsx(qu.Provider,{value:p,children:s.children})}function Bo(){var s=u.useContext(qu);if(!s)throw new Error("useFocusContext must be used within a FocusProvider");return s}function u0(s,t){var a=zu(),n=zo(s,a,t);return n}var qo=u.createContext(void 0);function m0(s){if(!Qr(s.initialProps)){var t={selected:void 0};return e.jsx(qo.Provider,{value:t,children:s.children})}return e.jsx(h0,{initialProps:s.initialProps,children:s.children})}function h0(s){var t=s.initialProps,a=s.children,n=function(i,l,o){var c,h,x;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,l,o),l.selected&&!t.required){(h=t.onSelect)===null||h===void 0||h.call(t,void 0,i,l,o);return}(x=t.onSelect)===null||x===void 0||x.call(t,i,i,l,o)},r={selected:t.selected,onDayClick:n};return e.jsx(qo.Provider,{value:r,children:a})}function Vu(){var s=u.useContext(qo);if(!s)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return s}function x0(s,t){var a=Ge(),n=Vu(),r=_o(),i=Lo(),l=Bo(),o=l.focusDayAfter,c=l.focusDayBefore,h=l.focusWeekAfter,x=l.focusWeekBefore,d=l.blur,m=l.focus,g=l.focusMonthBefore,y=l.focusMonthAfter,p=l.focusYearBefore,j=l.focusYearAfter,v=l.focusStartOfWeek,N=l.focusEndOfWeek,f=function(M){var z,I,C,B;Qr(a)?(z=n.onDayClick)===null||z===void 0||z.call(n,s,t,M):On(a)?(I=r.onDayClick)===null||I===void 0||I.call(r,s,t,M):Fn(a)?(C=i.onDayClick)===null||C===void 0||C.call(i,s,t,M):(B=a.onDayClick)===null||B===void 0||B.call(a,s,t,M)},S=function(M){var z;m(s),(z=a.onDayFocus)===null||z===void 0||z.call(a,s,t,M)},D=function(M){var z;d(),(z=a.onDayBlur)===null||z===void 0||z.call(a,s,t,M)},w=function(M){var z;(z=a.onDayMouseEnter)===null||z===void 0||z.call(a,s,t,M)},R=function(M){var z;(z=a.onDayMouseLeave)===null||z===void 0||z.call(a,s,t,M)},b=function(M){var z;(z=a.onDayPointerEnter)===null||z===void 0||z.call(a,s,t,M)},k=function(M){var z;(z=a.onDayPointerLeave)===null||z===void 0||z.call(a,s,t,M)},T=function(M){var z;(z=a.onDayTouchCancel)===null||z===void 0||z.call(a,s,t,M)},F=function(M){var z;(z=a.onDayTouchEnd)===null||z===void 0||z.call(a,s,t,M)},O=function(M){var z;(z=a.onDayTouchMove)===null||z===void 0||z.call(a,s,t,M)},q=function(M){var z;(z=a.onDayTouchStart)===null||z===void 0||z.call(a,s,t,M)},P=function(M){var z;(z=a.onDayKeyUp)===null||z===void 0||z.call(a,s,t,M)},A=function(M){var z;switch(M.key){case"ArrowLeft":M.preventDefault(),M.stopPropagation(),a.dir==="rtl"?o():c();break;case"ArrowRight":M.preventDefault(),M.stopPropagation(),a.dir==="rtl"?c():o();break;case"ArrowDown":M.preventDefault(),M.stopPropagation(),h();break;case"ArrowUp":M.preventDefault(),M.stopPropagation(),x();break;case"PageUp":M.preventDefault(),M.stopPropagation(),M.shiftKey?p():g();break;case"PageDown":M.preventDefault(),M.stopPropagation(),M.shiftKey?j():y();break;case"Home":M.preventDefault(),M.stopPropagation(),v();break;case"End":M.preventDefault(),M.stopPropagation(),N();break}(z=a.onDayKeyDown)===null||z===void 0||z.call(a,s,t,M)},$={onClick:f,onFocus:S,onBlur:D,onKeyDown:A,onKeyUp:P,onMouseEnter:w,onMouseLeave:R,onPointerEnter:b,onPointerLeave:k,onTouchCancel:T,onTouchEnd:F,onTouchMove:O,onTouchStart:q};return $}function g0(){var s=Ge(),t=Vu(),a=_o(),n=Lo(),r=Qr(s)?t.selected:On(s)?a.selected:Fn(s)?n.selected:void 0;return r}function p0(s){return Object.values(cs).includes(s)}function f0(s,t){var a=[s.classNames.day];return Object.keys(t).forEach(function(n){var r=s.modifiersClassNames[n];if(r)a.push(r);else if(p0(n)){var i=s.classNames["day_".concat(n)];i&&a.push(i)}}),a}function v0(s,t){var a=fe({},s.styles.day);return Object.keys(t).forEach(function(n){var r;a=fe(fe({},a),(r=s.modifiersStyles)===null||r===void 0?void 0:r[n])}),a}function y0(s,t,a){var n,r,i,l=Ge(),o=Bo(),c=u0(s,t),h=x0(s,c),x=g0(),d=!!(l.onDayClick||l.mode!=="default");u.useEffect(function(){var w;c.outside||o.focusedDay&&d&&lt(o.focusedDay,s)&&((w=a.current)===null||w===void 0||w.focus())},[o.focusedDay,s,a,d,c.outside]);var m=f0(l,c).join(" "),g=v0(l,c),y=!!(c.outside&&!l.showOutsideDays||c.hidden),p=(i=(r=l.components)===null||r===void 0?void 0:r.DayContent)!==null&&i!==void 0?i:zj,j=e.jsx(p,{date:s,displayMonth:t,activeModifiers:c}),v={style:g,className:m,children:j,role:"gridcell"},N=o.focusTarget&&lt(o.focusTarget,s)&&!c.outside,f=o.focusedDay&&lt(o.focusedDay,s),S=fe(fe(fe({},v),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=f||N?0:-1,n)),h),D={isButton:d,isHidden:y,activeModifiers:c,selectedDays:x,buttonProps:S,divProps:v};return D}function j0(s){var t=u.useRef(null),a=y0(s.date,s.displayMonth,t);return a.isHidden?e.jsx("div",{role:"gridcell"}):a.isButton?e.jsx(vr,fe({name:"day",ref:t},a.buttonProps)):e.jsx("div",fe({},a.divProps))}function b0(s){var t=s.number,a=s.dates,n=Ge(),r=n.onWeekNumberClick,i=n.styles,l=n.classNames,o=n.locale,c=n.labels.labelWeekNumber,h=n.formatters.formatWeekNumber,x=h(Number(t),{locale:o});if(!r)return e.jsx("span",{className:l.weeknumber,style:i.weeknumber,children:x});var d=c(Number(t),{locale:o}),m=function(g){r(t,a,g)};return e.jsx(vr,{name:"week-number","aria-label":d,className:l.weeknumber,style:i.weeknumber,onClick:m,children:x})}function N0(s){var t,a,n=Ge(),r=n.styles,i=n.classNames,l=n.showWeekNumber,o=n.components,c=(t=o==null?void 0:o.Day)!==null&&t!==void 0?t:j0,h=(a=o==null?void 0:o.WeekNumber)!==null&&a!==void 0?a:b0,x;return l&&(x=e.jsx("td",{className:i.cell,style:r.cell,children:e.jsx(h,{number:s.weekNumber,dates:s.dates})})),e.jsxs("tr",{className:i.row,style:r.row,children:[x,s.dates.map(function(d){return e.jsx("td",{className:i.cell,style:r.cell,role:"presentation",children:e.jsx(c,{displayMonth:s.displayMonth,date:d})},tg(d))})]})}function Wl(s,t,a){for(var n=a!=null&&a.ISOWeek?Xc(t):_r(t,a),r=a!=null&&a.ISOWeek?bo(s):Ja(s,a),i=Gt(n,r),l=[],o=0;o<=i;o++)l.push(qe(r,o));var c=l.reduce(function(h,x){var d=a!=null&&a.ISOWeek?lg(x):cg(x,a),m=h.find(function(g){return g.weekNumber===d});return m?(m.dates.push(x),h):(h.push({weekNumber:d,dates:[x]}),h)},[]);return c}function w0(s,t){var a=Wl(mt(s),Ys(s),t);if(t!=null&&t.useFixedWeeks){var n=sg(s,t);if(n<6){var r=a[a.length-1],i=r.dates[r.dates.length-1],l=za(i,6-n),o=Wl(za(i,1),l,t);a.push.apply(a,o)}}return a}function S0(s){var t,a,n,r=Ge(),i=r.locale,l=r.classNames,o=r.styles,c=r.hideHead,h=r.fixedWeeks,x=r.components,d=r.weekStartsOn,m=r.firstWeekContainsDate,g=r.ISOWeek,y=w0(s.displayMonth,{useFixedWeeks:!!h,ISOWeek:g,locale:i,weekStartsOn:d,firstWeekContainsDate:m}),p=(t=x==null?void 0:x.Head)!==null&&t!==void 0?t:Lj,j=(a=x==null?void 0:x.Row)!==null&&a!==void 0?a:N0,v=(n=x==null?void 0:x.Footer)!==null&&n!==void 0?n:Fj;return e.jsxs("table",{id:s.id,className:l.table,style:o.table,role:"grid","aria-labelledby":s["aria-labelledby"],children:[!c&&e.jsx(p,{}),e.jsx("tbody",{className:l.tbody,style:o.tbody,children:y.map(function(N){return e.jsx(j,{displayMonth:s.displayMonth,dates:N.dates,weekNumber:N.weekNumber},N.weekNumber)})}),e.jsx(v,{displayMonth:s.displayMonth})]})}function C0(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var k0=C0()?u.useLayoutEffect:u.useEffect,Ci=!1,D0=0;function Hl(){return"react-day-picker-".concat(++D0)}function T0(s){var t,a=s??(Ci?Hl():null),n=u.useState(a),r=n[0],i=n[1];return k0(function(){r===null&&i(Hl())},[]),u.useEffect(function(){Ci===!1&&(Ci=!0)},[]),(t=s??r)!==null&&t!==void 0?t:void 0}function E0(s){var t,a,n=Ge(),r=n.dir,i=n.classNames,l=n.styles,o=n.components,c=_n().displayMonths,h=T0(n.id?"".concat(n.id,"-").concat(s.displayIndex):void 0),x=n.id?"".concat(n.id,"-grid-").concat(s.displayIndex):void 0,d=[i.month],m=l.month,g=s.displayIndex===0,y=s.displayIndex===c.length-1,p=!g&&!y;r==="rtl"&&(t=[g,y],y=t[0],g=t[1]),g&&(d.push(i.caption_start),m=fe(fe({},m),l.caption_start)),y&&(d.push(i.caption_end),m=fe(fe({},m),l.caption_end)),p&&(d.push(i.caption_between),m=fe(fe({},m),l.caption_between));var j=(a=o==null?void 0:o.Caption)!==null&&a!==void 0?a:Oj;return e.jsxs("div",{className:d.join(" "),style:m,children:[e.jsx(j,{id:h,displayMonth:s.displayMonth,displayIndex:s.displayIndex}),e.jsx(S0,{id:x,"aria-labelledby":h,displayMonth:s.displayMonth})]},s.displayIndex)}function M0(s){var t=Ge(),a=t.classNames,n=t.styles;return e.jsx("div",{className:a.months,style:n.months,children:s.children})}function P0(s){var t,a,n=s.initialProps,r=Ge(),i=Bo(),l=_n(),o=u.useState(!1),c=o[0],h=o[1];u.useEffect(function(){r.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),h(!0)))},[r.initialFocus,c,i.focus,i.focusTarget,i]);var x=[r.classNames.root,r.className];r.numberOfMonths>1&&x.push(r.classNames.multiple_months),r.showWeekNumber&&x.push(r.classNames.with_weeknumber);var d=fe(fe({},r.styles.root),r.style),m=Object.keys(n).filter(function(y){return y.startsWith("data-")}).reduce(function(y,p){var j;return fe(fe({},y),(j={},j[p]=n[p],j))},{}),g=(a=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&a!==void 0?a:M0;return e.jsx("div",fe({className:x.join(" "),style:d,dir:r.dir,id:r.id,nonce:n.nonce,title:n.title,lang:n.lang},m,{children:e.jsx(g,{children:l.displayMonths.map(function(y,p){return e.jsx(E0,{displayIndex:p,displayMonth:y},p)})})}))}function A0(s){var t=s.children,a=sj(s,["children"]);return e.jsx(bj,{initialProps:a,children:e.jsx(Pj,{children:e.jsx(m0,{initialProps:a,children:e.jsx(Bj,{initialProps:a,children:e.jsx(Uj,{initialProps:a,children:e.jsx(Jj,{children:e.jsx(d0,{children:t})})})})})})})}function R0(s){return e.jsx(A0,fe({},s,{children:e.jsx(P0,{initialProps:s})}))}function $n({className:s,classNames:t,showOutsideDays:a=!0,...n}){return e.jsx(R0,{showOutsideDays:a,className:G("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:G(Yi({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-sm",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:G(Yi({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...r})=>e.jsx(hn,{className:"h-4 w-4"}),IconRight:({...r})=>e.jsx(Za,{className:"h-4 w-4"})},...n})}$n.displayName="Calendar";var Xr="Popover",[Uu,jC]=ds(Xr,[Xs]),Ln=Xs(),[I0,Zs]=Uu(Xr),Wu=s=>{const{__scopePopover:t,children:a,open:n,defaultOpen:r,onOpenChange:i,modal:l=!1}=s,o=Ln(t),c=u.useRef(null),[h,x]=u.useState(!1),[d,m]=va({prop:n,defaultProp:r??!1,onChange:i,caller:Xr});return e.jsx(Mr,{...o,children:e.jsx(I0,{scope:t,contentId:ys(),triggerRef:c,open:d,onOpenChange:m,onOpenToggle:u.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:h,onCustomAnchorAdd:u.useCallback(()=>x(!0),[]),onCustomAnchorRemove:u.useCallback(()=>x(!1),[]),modal:l,children:a})})};Wu.displayName=Xr;var Hu="PopoverAnchor",O0=u.forwardRef((s,t)=>{const{__scopePopover:a,...n}=s,r=Zs(Hu,a),i=Ln(a),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=r;return u.useEffect(()=>(l(),()=>o()),[l,o]),e.jsx(Tn,{...i,...n,ref:t})});O0.displayName=Hu;var Gu="PopoverTrigger",Yu=u.forwardRef((s,t)=>{const{__scopePopover:a,...n}=s,r=Zs(Gu,a),i=Ln(a),l=He(t,r.triggerRef),o=e.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Zu(r.open),...n,ref:l,onClick:me(s.onClick,r.onOpenToggle)});return r.hasCustomAnchor?o:e.jsx(Tn,{asChild:!0,...i,children:o})});Yu.displayName=Gu;var Vo="PopoverPortal",[F0,_0]=Uu(Vo,{forceMount:void 0}),Ku=s=>{const{__scopePopover:t,forceMount:a,children:n,container:r}=s,i=Zs(Vo,t);return e.jsx(F0,{scope:t,forceMount:a,children:e.jsx(zt,{present:a||i.open,children:e.jsx(Gc,{asChild:!0,container:r,children:n})})})};Ku.displayName=Vo;var Ha="PopoverContent",Qu=u.forwardRef((s,t)=>{const a=_0(Ha,s.__scopePopover),{forceMount:n=a.forceMount,...r}=s,i=Zs(Ha,s.__scopePopover);return e.jsx(zt,{present:n||i.open,children:i.modal?e.jsx(L0,{...r,ref:t}):e.jsx(z0,{...r,ref:t})})});Qu.displayName=Ha;var $0=Yc("PopoverContent.RemoveScroll"),L0=u.forwardRef((s,t)=>{const a=Zs(Ha,s.__scopePopover),n=u.useRef(null),r=He(t,n),i=u.useRef(!1);return u.useEffect(()=>{const l=n.current;if(l)return Vc(l)},[]),e.jsx(Uc,{as:$0,allowPinchZoom:!0,children:e.jsx(Xu,{...s,ref:r,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(s.onCloseAutoFocus,l=>{var o;l.preventDefault(),i.current||(o=a.triggerRef.current)==null||o.focus()}),onPointerDownOutside:me(s.onPointerDownOutside,l=>{const o=l.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,h=o.button===2||c;i.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:me(s.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),z0=u.forwardRef((s,t)=>{const a=Zs(Ha,s.__scopePopover),n=u.useRef(!1),r=u.useRef(!1);return e.jsx(Xu,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=s.onCloseAutoFocus)==null||l.call(s,i),i.defaultPrevented||(n.current||(o=a.triggerRef.current)==null||o.focus(),i.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:i=>{var c,h;(c=s.onInteractOutside)==null||c.call(s,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const l=i.target;((h=a.triggerRef.current)==null?void 0:h.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),Xu=u.forwardRef((s,t)=>{const{__scopePopover:a,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:h,onInteractOutside:x,...d}=s,m=Zs(Ha,a),g=Ln(a);return Wc(),e.jsx(Hc,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:i,children:e.jsx(Dr,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:x,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:h,onDismiss:()=>m.onOpenChange(!1),children:e.jsx(Tr,{"data-state":Zu(m.open),role:"dialog",id:m.contentId,...g,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Ju="PopoverClose",B0=u.forwardRef((s,t)=>{const{__scopePopover:a,...n}=s,r=Zs(Ju,a);return e.jsx(Ae.button,{type:"button",...n,ref:t,onClick:me(s.onClick,()=>r.onOpenChange(!1))})});B0.displayName=Ju;var q0="PopoverArrow",V0=u.forwardRef((s,t)=>{const{__scopePopover:a,...n}=s,r=Ln(a);return e.jsx(Er,{...r,...n,ref:t})});V0.displayName=q0;function Zu(s){return s?"open":"closed"}var U0=Wu,W0=Yu,H0=Ku,em=Qu;const Es=U0,Ms=W0,bs=u.forwardRef(({className:s,align:t="center",sideOffset:a=4,...n},r)=>e.jsx(H0,{children:e.jsx(em,{ref:r,align:t,sideOffset:a,className:G("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})}));bs.displayName=em.displayName;const G0=({onResultsChange:s,compact:t=!1})=>{const{transactions:a}=he(),[n,r]=u.useState(!1),[i,l]=u.useState({query:"",category:"all",dateRange:{from:null,to:null},amountRange:{min:null,max:null},sortBy:"date",sortOrder:"desc"}),o=u.useMemo(()=>{let d=[...a];if(i.query.trim()){const m=i.query.toLowerCase();d=d.filter(g=>g.category.toLowerCase().includes(m)||g.description&&g.description.toLowerCase().includes(m)||g.date.includes(m))}return i.category!=="all"&&(d=d.filter(m=>m.category===i.category)),(i.dateRange.from||i.dateRange.to)&&(d=d.filter(m=>{const g=_e(m.date);return i.dateRange.from&&i.dateRange.to?ma(g,{start:i.dateRange.from,end:i.dateRange.to}):i.dateRange.from?g>=i.dateRange.from:i.dateRange.to?g<=i.dateRange.to:!0})),(i.amountRange.min!==null||i.amountRange.max!==null)&&(d=d.filter(m=>{const g=Math.abs(m.amount);return i.amountRange.min!==null&&i.amountRange.max!==null?g>=i.amountRange.min&&g<=i.amountRange.max:i.amountRange.min!==null?g>=i.amountRange.min:i.amountRange.max!==null?g<=i.amountRange.max:!0})),d.sort((m,g)=>{let y=0;switch(i.sortBy){case"date":y=new Date(m.date).getTime()-new Date(g.date).getTime();break;case"amount":y=Math.abs(m.amount)-Math.abs(g.amount);break;case"category":y=m.category.localeCompare(g.category);break}return i.sortOrder==="asc"?y:-y}),d},[a,i]);ie.useEffect(()=>{s&&s(o)},[o,s]);const c=()=>{l({query:"",category:"all",dateRange:{from:null,to:null},amountRange:{min:null,max:null},sortBy:"date",sortOrder:"desc"})},h=[i.query,i.category!=="all"?i.category:null,i.dateRange.from||i.dateRange.to?"dateRange":null,i.amountRange.min!==null||i.amountRange.max!==null?"amountRange":null].filter(Boolean).length,x=()=>{const d=["Date,Category,Amount,Description",...o.map(p=>`${p.date},${p.category},${p.amount},"${p.description||""}"`)].join(`
`),m=new Blob([d],{type:"text/csv"}),g=URL.createObjectURL(m),y=document.createElement("a");y.href=g,y.download=`search-results-${new Date().toISOString().split("T")[0]}.csv`,y.click(),URL.revokeObjectURL(g)};return t?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ae,{placeholder:"Search transactions...",value:i.query,onChange:d=>l(m=>({...m,query:d.target.value})),className:"pl-10"})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>r(!n),className:"gap-2",children:[e.jsx(ip,{className:"h-4 w-4"}),"Filters",h>0&&e.jsx(K,{variant:"secondary",className:"ml-1 h-5 w-5 rounded-full p-0 text-xs",children:h})]})]}):e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ca,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Advanced Search"}),h>0&&e.jsxs(K,{variant:"secondary",children:[h," active filter",h!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(K,{variant:"outline",className:"text-xs",children:[o.length," result",o.length!==1?"s":""]}),o.length>0&&e.jsxs(_,{variant:"outline",size:"sm",onClick:x,className:"gap-2",children:[e.jsx(vt,{className:"h-3 w-3"}),"Export"]}),h>0&&e.jsxs(_,{variant:"ghost",size:"sm",onClick:c,className:"gap-2",children:[e.jsx(ut,{className:"h-3 w-3"}),"Clear"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ae,{placeholder:"Search by category, description, or date...",value:i.query,onChange:d=>l(m=>({...m,query:d.target.value})),className:"pl-10"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Category"}),e.jsxs(Re,{value:i.category,onValueChange:d=>l(m=>({...m,category:d})),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"all",children:"All Categories"}),e.jsx(J,{value:"Earnings",children:"Earnings"}),e.jsx(J,{value:"Food",children:"Food"}),e.jsx(J,{value:"Petrol",children:"Petrol"}),e.jsx(J,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Date Range"}),e.jsxs(Es,{children:[e.jsx(Ms,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(Fe,{className:"mr-2 h-4 w-4"}),i.dateRange.from?i.dateRange.to?e.jsxs(e.Fragment,{children:[ce(i.dateRange.from,"LLL dd")," - ",ce(i.dateRange.to,"LLL dd")]}):ce(i.dateRange.from,"LLL dd, y"):"Pick dates"]})}),e.jsx(bs,{className:"w-auto p-0",align:"start",children:e.jsx($n,{initialFocus:!0,mode:"range",defaultMonth:i.dateRange.from||void 0,selected:{from:i.dateRange.from||void 0,to:i.dateRange.to||void 0},onSelect:d=>l(m=>({...m,dateRange:{from:(d==null?void 0:d.from)||null,to:(d==null?void 0:d.to)||null}})),numberOfMonths:2})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Amount Range (£)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ae,{type:"number",placeholder:"Min",value:i.amountRange.min||"",onChange:d=>l(m=>({...m,amountRange:{...m.amountRange,min:d.target.value?parseFloat(d.target.value):null}}))}),e.jsx(ae,{type:"number",placeholder:"Max",value:i.amountRange.max||"",onChange:d=>l(m=>({...m,amountRange:{...m.amountRange,max:d.target.value?parseFloat(d.target.value):null}}))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Sort By"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Re,{value:i.sortBy,onValueChange:d=>l(m=>({...m,sortBy:d})),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"date",children:"Date"}),e.jsx(J,{value:"amount",children:"Amount"}),e.jsx(J,{value:"category",children:"Category"})]})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>l(d=>({...d,sortOrder:d.sortOrder==="asc"?"desc":"asc"})),className:"px-3",children:i.sortOrder==="asc"?e.jsx(de,{className:"h-4 w-4"}):e.jsx(We,{className:"h-4 w-4"})})]})]})]}),o.length>0&&e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Found ",o.length," transaction",o.length!==1?"s":""]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:["Total: £",o.reduce((d,m)=>d+Math.abs(m.amount),0).toFixed(2)]}),e.jsxs("span",{children:["Income: £",o.filter(d=>d.amount>0).reduce((d,m)=>d+m.amount,0).toFixed(2)]}),e.jsxs("span",{children:["Expenses: £",o.filter(d=>d.amount<0).reduce((d,m)=>d+Math.abs(m.amount),0).toFixed(2)]})]})]})})]})]})},Gl={income:[{name:"Salary",icon:"DollarSign",color:"hsl(var(--success))"},{name:"Freelance",icon:"Briefcase",color:"hsl(var(--success))"},{name:"Business",icon:"Building2",color:"hsl(var(--primary))"},{name:"Investment",icon:"TrendingUp",color:"hsl(var(--accent))"},{name:"Rental Income",icon:"Home",color:"hsl(var(--destructive))"},{name:"Bonus",icon:"Gift",color:"hsl(var(--warning))"}],housing:[{name:"Rent",icon:"Home",color:"hsl(var(--destructive))"},{name:"Utilities",icon:"Zap",color:"hsl(var(--warning))"},{name:"Home Maintenance",icon:"Wrench",color:"hsl(var(--accent))"},{name:"Home Insurance",icon:"Shield",color:"hsl(var(--primary))"}],food:[{name:"Groceries",icon:"ShoppingCart",color:"hsl(var(--success))"},{name:"Restaurants",icon:"UtensilsCrossed",color:"hsl(var(--destructive))"},{name:"Coffee",icon:"Coffee",color:"hsl(var(--chart-4))"},{name:"Takeout",icon:"Truck",color:"hsl(var(--warning))"}],transportation:[{name:"Gas",icon:"Fuel",color:"hsl(var(--warning))"},{name:"Public Transport",icon:"Train",color:"hsl(var(--primary))"},{name:"Car Payment",icon:"Car",color:"hsl(var(--chart-4))"},{name:"Car Maintenance",icon:"Settings",color:"hsl(var(--muted-foreground))"}],health:[{name:"Medical",icon:"Heart",color:"hsl(var(--destructive))"},{name:"Pharmacy",icon:"Pill",color:"hsl(var(--success))"},{name:"Dental",icon:"Smile",color:"hsl(var(--primary))"}],entertainment:[{name:"Movies",icon:"Film",color:"hsl(var(--accent))"},{name:"Streaming",icon:"Play",color:"hsl(var(--destructive))"},{name:"Games",icon:"Gamepad2",color:"hsl(var(--success))"},{name:"Books",icon:"Book",color:"hsl(var(--primary))"}],shopping:[{name:"Clothing",icon:"Shirt",color:"hsl(var(--chart-4))"},{name:"Electronics",icon:"Smartphone",color:"hsl(var(--muted-foreground))"},{name:"Personal Care",icon:"Sparkles",color:"hsl(var(--accent))"}],other:[{name:"Education",icon:"GraduationCap",color:"hsl(var(--primary))"},{name:"Travel",icon:"Plane",color:"hsl(var(--success))"},{name:"Gym",icon:"Dumbbell",color:"hsl(var(--destructive))"},{name:"Subscriptions",icon:"Calendar",color:"hsl(var(--accent))"},{name:"Gifts",icon:"Gift",color:"hsl(var(--warning))"}]},Yl={DollarSign:ht,Briefcase:Eg,Building2:Mg,TrendingUp:de,Home:An,Gift:Ug,Zap:Be,Wrench:pp,Shield:Lt,ShoppingCart:xd,UtensilsCrossed:Rn,Coffee:Ig,Truck:hp,Fuel:Pn,Train:mp,Car:nd,Settings:As,Heart:ld,Pill:sp,Smile:op,Film:qg,Play:ls,Gamepad2:Vg,Book:Tg,Shirt:rp,Smartphone:Bi,Sparkles:Hs,GraduationCap:od,Plane:hd,Dumbbell:Lg,Calendar:Fe,Plus:Ke},wn=({onCategorySelect:s,value:t,showCreateNew:a=!0})=>{const[n,r]=u.useState([]),[i,l]=u.useState(!1),[o,c]=u.useState(""),[h,x]=u.useState("hsl(var(--primary))"),[d,m]=u.useState("Plus"),{toast:g}=Ue();u.useEffect(()=>{y()},[]);const y=async()=>{try{const{data:f,error:S}=await ue.from("tags").select("*").order("name");if(S)throw S;r(f||[])}catch(f){console.error("Error loading categories:",f)}},p=async f=>{var S;try{const{data:D,error:w}=await ue.from("tags").insert({name:f.name,color:f.color,user_id:(S=(await ue.auth.getUser()).data.user)==null?void 0:S.id}).select().single();if(w)throw w;r(R=>[...R,D]),g({title:"Success",description:`${f.name} category added!`})}catch(D){console.error("Error adding category:",D),g({title:"Error",description:"Failed to add category"})}},j=async()=>{var f;if(!o.trim()){g({title:"Error",description:"Please enter a category name"});return}try{const{data:S,error:D}=await ue.from("tags").insert({name:o.trim(),color:h,user_id:(f=(await ue.auth.getUser()).data.user)==null?void 0:f.id}).select().single();if(D)throw D;r(R=>[...R,S]);const w=o.trim();c(""),x("hsl(var(--primary))"),m("Plus"),l(!1),g({title:"Success",description:`${w} category created!`}),s&&s(w)}catch(S){console.error("Error creating category:",S),g({title:"Error",description:"Failed to create category"})}},v=[{name:"Primary",value:"hsl(var(--primary))"},{name:"Destructive",value:"hsl(var(--destructive))"},{name:"Success",value:"hsl(var(--success))"},{name:"Warning",value:"hsl(var(--warning))"},{name:"Accent",value:"hsl(var(--accent))"},{name:"Chart 1",value:"hsl(var(--chart-1))"},{name:"Chart 2",value:"hsl(var(--chart-2))"},{name:"Chart 3",value:"hsl(var(--chart-3))"},{name:"Chart 4",value:"hsl(var(--chart-4))"},{name:"Chart 5",value:"hsl(var(--chart-5))"}],N=[...n.map(f=>({...f,isCustom:!0})),...Object.values(Gl).flat().filter(f=>!n.some(S=>S.name===f.name)).map(f=>({...f,isCustom:!1}))];return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Re,{value:t,onValueChange:s,children:[e.jsx(Me,{children:e.jsx(Ie,{placeholder:"Select category"})}),e.jsx(Pe,{children:N.map(f=>{const S=Yl[f.icon]||Ke;return e.jsx(J,{value:f.name,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 rounded bg-primary/10 text-primary",style:{backgroundColor:`${f.color}20`,color:f.color},children:e.jsx(S,{className:"h-3 w-3"})}),e.jsx("span",{children:f.name}),f.isCustom&&e.jsx(K,{variant:"outline",className:"text-xs ml-auto",children:"Custom"})]})},f.name)})})]}),a&&e.jsxs(dt,{open:i,onOpenChange:l,children:[e.jsx(Ft,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"sm",children:e.jsx(Ke,{className:"h-4 w-4"})})}),e.jsxs(at,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsx(nt,{children:e.jsx(rt,{children:"Add Categories"})}),e.jsxs(Xt,{defaultValue:"quick-add",className:"w-full",children:[e.jsxs(Bt,{className:"grid w-full grid-cols-2",children:[e.jsx($e,{value:"quick-add",children:"Quick Add"}),e.jsx($e,{value:"create-custom",children:"Create Custom"})]}),e.jsx(Le,{value:"quick-add",className:"space-y-4",children:Object.entries(Gl).map(([f,S])=>e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium capitalize mb-2 text-sm text-muted-foreground",children:f}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:S.map(D=>{const w=Yl[D.icon],R=n.some(b=>b.name===D.name);return e.jsxs(_,{variant:R?"secondary":"outline",size:"sm",className:"justify-start gap-2 h-auto p-2",onClick:()=>!R&&p(D),disabled:R,children:[e.jsx("div",{className:"p-1 rounded bg-primary/10 text-primary",style:{backgroundColor:`${D.color}20`,color:D.color},children:e.jsx(w,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-xs",children:D.name}),R&&e.jsx(Ee,{className:"h-3 w-3 ml-auto"})]},D.name)})})]},f))}),e.jsx(Le,{value:"create-custom",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"category-name",children:"Category Name"}),e.jsx(ae,{id:"category-name",placeholder:"Enter category name",value:o,onChange:f=>c(f.target.value)})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Category Color"}),e.jsx("div",{className:"flex gap-2 flex-wrap mt-2",children:v.map(f=>e.jsx("button",{type:"button",className:`w-8 h-8 rounded-full border-2 transition-all ${h===f.value?"border-foreground scale-110":"border-muted hover:border-border"}`,style:{backgroundColor:f.value},onClick:()=>x(f.value),title:f.name},f.name))})]}),e.jsxs(_,{onClick:j,className:"w-full",disabled:!o.trim(),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Create Category"]})]})})]})]})]})]})},tm=({open:s,onOpenChange:t,triggerPosition:a})=>{const[n,r]=u.useState(!1),[i,l]=u.useState(!1),[o,c]=u.useState(""),[h,x]=u.useState({description:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],location:""}),[d]=u.useState([5,10,20,50,100]),[m,g]=u.useState([]),{addTransaction:y,transactions:p}=he(),{toast:j}=Ue(),v=Mo(),N=u.useRef(null);u.useEffect(()=>{const F={};p.forEach(q=>{F[q.category]=(F[q.category]||0)+1});const O=Object.entries(F).sort(([,q],[,P])=>P-q).slice(0,5).map(([q])=>q);g(O)},[p]),u.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const F=window.SpeechRecognition||window.webkitSpeechRecognition;N.current=new F,N.current.continuous=!1,N.current.interimResults=!1,N.current.lang="en-US",N.current.onresult=O=>{const q=O.results[0][0].transcript;c(q),f(q)},N.current.onerror=O=>{console.error("Speech recognition error:",O.error),j({title:"Voice input failed",description:"Please try again or type manually",variant:"destructive"})}}},[]);const f=F=>{const O=F.match(/(\d+(?:\.\d{2})?)/),q={"Food & Dining":["food","lunch","dinner","restaurant","coffee","groceries"],Transportation:["transport","bus","train","taxi","fuel","parking"],Shopping:["shopping","store","mall","clothes","electronics"],Entertainment:["movie","concert","game","entertainment","netflix"],"Bills & Utilities":["bill","utility","electric","water","internet"]};let P="";for(const[A,$]of Object.entries(q))if($.some(M=>F.toLowerCase().includes(M))){P=A;break}x(A=>({...A,description:F,amount:O?O[1]:"",category:P}))},S=()=>{N.current?(l(!0),N.current.start()):j({title:"Voice input not supported",description:"Your browser doesn't support speech recognition",variant:"destructive"})},D=()=>{N.current&&(N.current.stop(),l(!1))},w=F=>{x(O=>({...O,amount:F.toString()}))},R=F=>{x(O=>({...O,category:F}))},b=F=>{if(F.preventDefault(),!h.amount||!h.category){j({title:"Missing information",description:"Please enter amount and category",variant:"destructive"});return}y({date:h.date,category:h.category,amount:parseFloat(h.amount),description:h.description||`Transaction ${new Date().toLocaleTimeString()}`,week:"W"+Math.ceil(new Date().getDate()/7)}),j({title:"Transaction added!",description:"Your transaction has been recorded successfully"}),x({description:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],location:""}),c(""),r(!1)},k=s!==void 0?s:n,T=t||r;return e.jsxs(e.Fragment,{children:[!s&&e.jsx(_,{onClick:()=>T(!0),className:`
            fixed z-50 rounded-full shadow-lg hover:shadow-xl transition-all duration-300
            ${v?"bottom-24 right-4 w-16 h-16 text-2xl":"bottom-8 right-8 w-14 h-14 text-xl"}
            bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700
          `,style:a?{position:"fixed",left:a.x-28,top:a.y-28}:{},children:e.jsx(Ke,{className:"h-6 w-6"})}),e.jsx(dt,{open:k,onOpenChange:T,children:e.jsxs(at,{className:`
          sm:max-w-[500px] p-0 overflow-hidden
          ${v?"max-h-[90vh]":""}
        `,children:[e.jsx(nt,{className:"p-6 pb-4 bg-gradient-to-r from-blue-50 to-purple-50",children:e.jsxs(rt,{className:"flex items-center gap-2 text-xl",children:[e.jsx(Be,{className:"h-5 w-5 text-blue-600"}),"Quick Transaction Entry"]})}),e.jsxs("form",{onSubmit:b,className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(Sl,{className:"h-4 w-4"}),"Voice Input (Optional)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ae,{placeholder:"Describe your transaction...",value:o,onChange:F=>c(F.target.value),className:"flex-1"}),e.jsx(_,{type:"button",variant:i?"destructive":"outline",onClick:i?D:S,className:"shrink-0",children:e.jsx(Sl,{className:"h-4 w-4"})})]}),i&&e.jsx("div",{className:"flex items-center gap-2 text-sm text-orange-600",children:e.jsx("div",{className:"animate-pulse",children:"● Recording..."})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(ht,{className:"h-4 w-4"}),"Quick Amounts"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(F=>e.jsxs(K,{variant:h.amount===F.toString()?"default":"outline",className:"cursor-pointer px-3 py-1.5",onClick:()=>w(F),children:["£",F]},F))})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"amount",children:"Amount (£)"}),e.jsx(ae,{id:"amount",type:"number",step:"0.01",placeholder:"0.00",value:h.amount,onChange:F=>x(O=>({...O,amount:F.target.value})),required:!0,className:"mt-1"})]}),m.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(fn,{className:"h-4 w-4"}),"Frequent Categories"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(F=>e.jsx(K,{variant:h.category===F?"default":"outline",className:"cursor-pointer px-3 py-1.5",onClick:()=>R(F),children:F},F))})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"category",children:"Category"}),e.jsx("div",{className:"mt-1",children:e.jsx(wn,{value:h.category,onCategorySelect:F=>x(O=>({...O,category:F||""})),showCreateNew:!0})})]}),e.jsxs("div",{children:[e.jsxs(W,{htmlFor:"date",className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4"}),"Date"]}),e.jsx(ae,{id:"date",type:"date",value:h.date,onChange:F=>x(O=>({...O,date:F.target.value})),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(ae,{id:"description",placeholder:"What was this for?",value:h.description,onChange:F=>x(O=>({...O,description:F.target.value})),className:"mt-1"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>T(!1),className:"flex-1",children:"Cancel"}),e.jsx(_,{type:"submit",className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600",children:"Add Transaction"})]})]})]})})]})},Y0=()=>{const s=Mo(),t=Rr();if(!s)return null;const a=[{icon:dd,label:"Dashboard",href:"/",active:t.pathname==="/"},{icon:Mt,label:"Transactions",href:"/transactions",active:t.pathname.startsWith("/transactions")},{icon:de,label:"Analytics",href:"/analytics",active:t.pathname.startsWith("/analytics")},{icon:je,label:"Goals",href:"/goals",active:t.pathname.startsWith("/goals")},{icon:Ua,label:"More",href:"/financial-hub",active:!1}];return e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm border-t border-border",children:e.jsx("div",{className:"flex items-center justify-around h-16 px-2",children:a.map(n=>{const r=n.icon;return e.jsx(_,{asChild:!0,variant:"ghost",size:"sm",className:G("flex flex-col items-center gap-1 h-14 w-14 rounded-lg transition-all duration-200",n.active?"text-primary bg-primary/10":"text-muted-foreground hover:text-foreground hover:bg-muted/50"),children:e.jsxs(Ds,{to:n.href,className:"flex flex-col items-center",children:[e.jsx(r,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium",children:n.label})]})},n.href)})})})},K0=()=>{const{getCurrentBalance:s,getTodaysData:t,monthlyStartingPoint:a}=he(),n=s(),r=t(),i=r.netChange>=0;return e.jsxs(L,{className:"relative overflow-hidden bg-gradient-primary shadow-glow border-0 animate-scale-in",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"}),e.jsxs("div",{className:"relative p-6 text-primary-foreground",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-foreground/80 text-sm font-medium",children:"Current Balance"}),e.jsxs("h2",{className:"text-3xl font-bold",children:["£",(n||0).toFixed(2)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`flex items-center gap-1 ${i?"text-green-200":"text-red-200"}`,children:[i?e.jsx(de,{className:"h-4 w-4"}):e.jsx(We,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["£",Math.abs(r.netChange||0).toFixed(2)]})]}),e.jsx("p",{className:"text-xs text-primary-foreground/60 mt-1",children:"Today's change"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 pt-4 border-t border-primary-foreground/20",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-primary-foreground/80",children:"Starting"}),e.jsxs("p",{className:"font-semibold text-blue-200",children:["£",(a||0).toFixed(0)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-primary-foreground/80",children:"Earnings"}),e.jsxs("p",{className:"font-semibold text-green-200",children:["+£",r.earnings]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-primary-foreground/80",children:"Expenses"}),e.jsxs("p",{className:"font-semibold text-red-200",children:["-£",(r.expenses||0).toFixed(2)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-primary-foreground/80",children:"Net"}),e.jsxs("p",{className:`font-semibold ${i?"text-green-200":"text-red-200"}`,children:[i?"+":"","£",(r.netChange||0).toFixed(2)]})]})]})]})]})},Q0=()=>{const{transactions:s,categoryFilter:t,setCategoryFilter:a}=he(),[n,r]=u.useState("pie"),[i,l]=u.useState("month"),[o,c]=u.useState(!1),[h,x]=u.useState(null),d=u.useMemo(()=>{let b=s;const k=new Date;if(i==="week"){const T=Ja(k),F=_r(k);b=b.filter(O=>{const q=_e(O.date);return q>=T&&q<=F})}else if(i==="month"){const T=Je(k,30);b=b.filter(F=>_e(F.date)>=T)}return b},[s,i]),m=()=>{const b={Petrol:0,Food:0,Other:0,Earnings:0},k={Petrol:0,Food:0,Other:0,Earnings:0};return d.forEach(T=>{T.category in b&&(b[T.category]+=Math.abs(T.amount),k[T.category]++)}),{totals:b,counts:k}},{totals:g,counts:y}=m(),p=g.Petrol+g.Food+g.Other,j={Petrol:300,Food:400,Other:200,Earnings:0},v=[{name:"Earnings",amount:g.Earnings,count:y.Earnings,budget:j.Earnings,icon:de,color:"text-success",bg:"bg-success/10",chartColor:"hsl(var(--success))",borderColor:"border-success/20",isEarnings:!0},{name:"Petrol",amount:g.Petrol,count:y.Petrol,budget:j.Petrol,icon:Pn,color:"text-warning",bg:"bg-warning/10",chartColor:"hsl(var(--warning))",borderColor:"border-warning/20",isEarnings:!1},{name:"Food",amount:g.Food,count:y.Food,budget:j.Food,icon:Rn,color:"text-destructive",bg:"bg-destructive/10",chartColor:"hsl(var(--destructive))",borderColor:"border-destructive/20",isEarnings:!1},{name:"Other",amount:g.Other,count:y.Other,budget:j.Other,icon:Va,color:"text-muted-foreground",bg:"bg-muted/50",chartColor:"hsl(var(--muted-foreground))",borderColor:"border-muted/50",isEarnings:!1}],N=v.filter(b=>!b.isEarnings&&b.amount>0),f=N.map(b=>({name:b.name,value:b.amount,color:b.chartColor,percentage:p>0?(b.amount/p*100).toFixed(1):0,budget:b.budget,remaining:Math.max(0,b.budget-b.amount),overBudget:b.amount>b.budget,count:b.count})),S=u.useMemo(()=>i!=="month"?[]:$r({start:Je(new Date,30),end:new Date}).map(k=>{const T=d.filter(O=>ce(_e(O.date),"yyyy-MM-dd")===ce(k,"yyyy-MM-dd")),F={Petrol:0,Food:0,Other:0};return T.forEach(O=>{O.category!=="Earnings"&&O.category in F&&(F[O.category]+=Math.abs(O.amount))}),{date:ce(k,"MMM dd"),...F,total:F.Petrol+F.Food+F.Other}}).filter((k,T)=>T%2===0),[d,i]),D=b=>{t===b?(a(null),x(null)):(a(b),x(b))},w=({active:b,payload:k})=>{if(b&&k&&k.length){const T=k[0];return e.jsxs("div",{className:"bg-card border border-border rounded-lg p-3 shadow-lg",children:[e.jsx("p",{className:"font-semibold mb-2",children:T.name}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{children:"Amount:"}),e.jsxs("span",{className:"font-medium",children:["£",T.value.toFixed(2)]})]}),T.payload.percentage&&e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{children:"Percentage:"}),e.jsxs("span",{className:"font-medium",children:[T.payload.percentage,"%"]})]}),T.payload.count&&e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{children:"Transactions:"}),e.jsx("span",{className:"font-medium",children:T.payload.count})]}),o&&T.payload.budget>0&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t pt-1 mt-2",children:[e.jsxs("p",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Budget:"}),e.jsxs("span",{children:["£",T.payload.budget]})]}),e.jsxs("p",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Remaining:"}),e.jsxs("span",{className:T.payload.overBudget?"text-destructive":"text-success",children:[T.payload.overBudget?"Over by £":"£",Math.abs(T.payload.remaining).toFixed(0)]})]})]})})]})]})}return null},R=()=>{if(f.length===0)return e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"});switch(n){case"bar":return e.jsxs(ua,{data:f,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(wt,{strokeDasharray:"3 3",className:"stroke-border/50"}),e.jsx(St,{dataKey:"name",className:"text-xs"}),e.jsx(gt,{className:"text-xs"}),e.jsx(st,{content:e.jsx(w,{})}),o&&e.jsx(dn,{}),e.jsx(pt,{dataKey:"value",fill:"hsl(var(--primary))",radius:[4,4,0,0],name:"Spent"}),o&&e.jsx(pt,{dataKey:"budget",fill:"hsl(var(--muted))",radius:[4,4,0,0],name:"Budget"})]});case"treemap":return e.jsx(Qx,{data:f,dataKey:"value",aspectRatio:4/3,stroke:"hsl(var(--background))",children:e.jsx(st,{content:e.jsx(w,{})})});case"trend":return e.jsxs(ua,{data:S,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(wt,{strokeDasharray:"3 3",className:"stroke-border/50"}),e.jsx(St,{dataKey:"date",className:"text-xs"}),e.jsx(gt,{className:"text-xs"}),e.jsx(st,{}),e.jsx(dn,{}),e.jsx(pt,{dataKey:"Petrol",stackId:"a",fill:"hsl(var(--warning))"}),e.jsx(pt,{dataKey:"Food",stackId:"a",fill:"hsl(var(--destructive))"}),e.jsx(pt,{dataKey:"Other",stackId:"a",fill:"hsl(var(--muted-foreground))"})]});default:return e.jsxs(Ir,{margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(Or,{data:f,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",className:"cursor-pointer",onClick:b=>D(b.name),label:({name:b,percentage:k})=>`${b}: ${k}%`,labelLine:!1,children:f.map((b,k)=>e.jsx(Fr,{fill:b.color,stroke:h===b.name?"hsl(var(--primary))":"transparent",strokeWidth:h===b.name?3:0,className:"hover:opacity-80 transition-opacity"},`cell-${k}`))}),e.jsx(st,{content:e.jsx(w,{})})]})}};return e.jsxs(L,{className:"p-6 shadow-card hover:shadow-card-hover transition-all duration-300 hover:scale-[1.01]",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"Enhanced Category Analysis"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[i==="week"?"This week":i==="month"?"Last 30 days":"All time"," •",N.length," categories • £",p.toFixed(0)," total"]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"flex bg-muted rounded-lg p-1",children:[{type:"pie",icon:rd},{type:"bar",icon:tt},{type:"trend",icon:de}].map(({type:b,icon:k})=>e.jsx(_,{variant:n===b?"secondary":"ghost",size:"sm",onClick:()=>r(b),className:"h-7 w-7 p-0",children:e.jsx(k,{className:"h-4 w-4"})},b))}),e.jsx("div",{className:"flex bg-muted rounded-lg p-1",children:[{value:"week",label:"Week"},{value:"month",label:"Month"},{value:"all",label:"All"}].map(({value:b,label:k})=>e.jsx(_,{variant:i===b?"secondary":"ghost",size:"sm",onClick:()=>l(b),className:"h-7 px-3 text-xs",children:k},b))}),e.jsx(_,{variant:o?"secondary":"outline",size:"sm",onClick:()=>c(!o),className:"text-xs",children:"Budget"}),t&&e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>D(t),className:"text-xs",children:[e.jsx(ut,{className:"h-3 w-3 mr-1"}),"Clear"]})]})]}),e.jsx("div",{className:"h-64 mb-6",children:e.jsx(Tt,{width:"100%",height:"100%",children:R()})}),e.jsx("div",{className:"space-y-3",children:v.map(b=>{const k=b.icon,T=t===b.name,F=t&&t!==b.name,O=b.budget>0?b.amount/b.budget*100:0;return e.jsxs("div",{className:`p-4 rounded-lg cursor-pointer transition-all border-2 ${T?`bg-primary/5 ${b.borderColor} border-2`:"border-transparent hover:bg-muted/50"} ${F?"opacity-50":""}`,onClick:()=>D(b.name),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${b.bg}`,children:e.jsx(k,{className:`h-5 w-5 ${b.color}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:b.name}),e.jsxs(K,{variant:"outline",className:"text-xs",children:[b.count," transactions"]}),O>100&&e.jsx(K,{variant:"destructive",className:"text-xs",children:"Over budget"})]}),p>0&&!b.isEarnings&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(b.amount/p*100).toFixed(1),"% of total spending"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-bold text-lg ${b.isEarnings?"text-success":"text-foreground"}`,children:[b.isEarnings?"+":"-","£",b.amount.toFixed(0)]}),!b.isEarnings&&b.amount>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["£",(b.amount/(b.count||1)).toFixed(0)," avg"]})]})]}),o&&b.budget>0&&!b.isEarnings&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Budget Progress"}),e.jsxs("span",{className:"text-xs font-medium",children:["£",b.amount.toFixed(0)," / £",b.budget]})]}),e.jsx(Te,{value:Math.min(O,100),className:`h-2 ${O>100?"[&>div]:bg-destructive":O>80?"[&>div]:bg-warning":"[&>div]:bg-success"}`}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{children:[O.toFixed(0),"% used"]}),e.jsx("span",{className:O>100?"text-destructive":"text-success",children:O>100?`£${(b.amount-b.budget).toFixed(0)} over`:`£${(b.budget-b.amount).toFixed(0)} left`})]})]})]},b.name)})})]})},X0=()=>{const{transactions:s,deleteTransaction:t,categoryFilter:a,setCategoryFilter:n}=he(),{toast:r}=Ue(),l=((m=8)=>(a?s.filter(y=>y.category===a):s).sort((y,p)=>new Date(p.date).getTime()-new Date(y.date).getTime()).slice(0,m))(8),o=m=>{t(m),r({title:"Success",description:"Transaction deleted successfully"})},c=m=>{switch(m){case"Petrol":return Pn;case"Food":return Rn;case"Other":return Va;case"Earnings":return de;default:return Va}},h=m=>{switch(m){case"Petrol":return"text-warning";case"Food":return"text-destructive";case"Other":return"text-muted-foreground";case"Earnings":return"text-success";default:return"text-muted-foreground"}},x=m=>{switch(m){case"Petrol":return"bg-warning/10";case"Food":return"bg-destructive/10";case"Other":return"bg-muted/50";case"Earnings":return"bg-success/10";default:return"bg-muted/50"}},d=m=>new Date(m).toLocaleDateString("en-GB",{day:"numeric",month:"short"});return e.jsxs(L,{className:"p-6 shadow-card hover:shadow-card-hover transition-all duration-300 hover:scale-[1.02]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Recent Transactions",a&&e.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(",a,")"]})]}),a&&e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>n(null),className:"text-xs",children:[e.jsx(ut,{className:"h-3 w-3 mr-1"}),"Show All"]})]}),e.jsx("div",{className:"space-y-3",children:l.map((m,g)=>{const y=c(m.category),p=m.category==="Earnings";return e.jsxs("div",{className:"flex items-center justify-between py-2 group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${x(m.category)}`,children:e.jsx(y,{className:`h-4 w-4 ${h(m.category)}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:m.category}),e.jsx("p",{className:"text-xs text-muted-foreground",children:d(m.date)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`font-semibold text-sm ${p?"text-success":"text-foreground"}`,children:[p?"+":"-","£",m.amount.toFixed(2)]}),e.jsx(_,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 h-8 w-8 text-destructive hover:text-destructive",onClick:()=>o(m.dailyEntryId.toString()),children:e.jsx(ft,{className:"h-3 w-3"})})]})]},g)})})]})},J0=()=>{const{dailyData:s,monthlyStartingPoint:t,transactions:a}=he(),[n,r]=u.useState("line"),[i,l]=u.useState("30d"),[o,c]=u.useState(!1),[h,x]=u.useState(!1),d=u.useMemo(()=>{const j=Je(new Date,i==="7d"?7:i==="30d"?30:i==="90d"?90:365);return s.filter(v=>_e(v.date)>=j).map(v=>({date:ce(_e(v.date),"MMM dd"),fullDate:v.date,balance:v.balance,netChange:v.netChange,earnings:v.earnings,expenses:v.expenses,balanceMA:v.balance,trend:v.netChange>0?"positive":v.netChange<0?"negative":"neutral"}))},[s,i]),m=u.useMemo(()=>{if(d.length===0)return null;const p=d.reduce((S,D)=>S+D.earnings,0),j=d.reduce((S,D)=>S+D.expenses,0),v=p-j,N=d.reduce((S,D)=>S+D.balance,0)/d.length,f=d.length>1?d[d.length-1].balance-d[0].balance:0;return{totalEarnings:p,totalExpenses:j,netChange:v,avgDailyBalance:N,trend:f,volatility:Math.abs(f)/d.length}},[d]),g=({active:p,payload:j,label:v})=>{if(p&&j&&j.length){const N=j[0].payload;return e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 shadow-lg min-w-48",children:[e.jsx("p",{className:"font-semibold text-sm mb-3",children:v}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Balance:"}),e.jsxs("span",{className:"font-bold text-primary",children:["£",N.balance.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Net Change:"}),e.jsxs("span",{className:`font-semibold ${N.netChange>=0?"text-success":"text-destructive"}`,children:[N.netChange>=0?"+":"","£",N.netChange.toFixed(2)]})]}),e.jsxs("div",{className:"border-t border-border pt-2 space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-success",children:"Earnings:"}),e.jsxs("span",{className:"font-medium",children:["+£",N.earnings.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-destructive",children:"Expenses:"}),e.jsxs("span",{className:"font-medium",children:["-£",N.expenses.toFixed(2)]})]}),n==="composed"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-xs text-warning",children:[e.jsx("span",{children:"Petrol:"}),e.jsxs("span",{children:["£",N.petrol.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-destructive",children:[e.jsx("span",{children:"Food:"}),e.jsxs("span",{children:["£",N.food.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Other:"}),e.jsxs("span",{children:["£",N.other.toFixed(2)]})]})]})]})]})]})}return null},y=()=>{const p={data:d,margin:{top:5,right:30,left:20,bottom:5}};switch(n){case"area":return e.jsxs(Ea,{...p,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"balanceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:.05})]})}),e.jsx(wt,{strokeDasharray:"3 3",className:"stroke-border/50"}),e.jsx(St,{dataKey:"date",className:"text-xs",tick:{fontSize:11}}),e.jsx(gt,{className:"text-xs",tick:{fontSize:11},domain:["dataMin - 50","dataMax + 50"]}),e.jsx(st,{content:e.jsx(g,{})}),e.jsx(sa,{type:"monotone",dataKey:"balance",stroke:"hsl(var(--primary))",strokeWidth:2,fill:"url(#balanceGradient)",dot:{fill:"hsl(var(--primary))",r:3},activeDot:{r:6,fill:"hsl(var(--primary))"}}),e.jsx(gi,{y:t,stroke:"hsl(var(--muted-foreground))",strokeDasharray:"5 5",label:{value:"Starting Point",position:"insideTopRight"}})]});case"bar":return e.jsxs(ua,{...p,children:[e.jsx(wt,{strokeDasharray:"3 3",className:"stroke-border/50"}),e.jsx(St,{dataKey:"date",className:"text-xs",tick:{fontSize:11}}),e.jsx(gt,{className:"text-xs",tick:{fontSize:11}}),e.jsx(st,{content:e.jsx(g,{})}),e.jsx(pt,{dataKey:"netChange",fill:"hsl(var(--primary))",radius:[4,4,0,0]})]});case"composed":return e.jsxs(Xx,{...p,children:[e.jsx(wt,{strokeDasharray:"3 3",className:"stroke-border/50"}),e.jsx(St,{dataKey:"date",className:"text-xs",tick:{fontSize:11}}),e.jsx(gt,{yAxisId:"balance",className:"text-xs",tick:{fontSize:11},domain:["dataMin - 50","dataMax + 50"]}),e.jsx(gt,{yAxisId:"amounts",orientation:"right",className:"text-xs",tick:{fontSize:11}}),e.jsx(st,{content:e.jsx(g,{})}),e.jsx(dn,{}),e.jsx(is,{yAxisId:"balance",type:"monotone",dataKey:"balance",stroke:"hsl(var(--primary))",strokeWidth:3,dot:{r:3},name:"Balance"}),e.jsx(pt,{yAxisId:"amounts",dataKey:"earnings",fill:"hsl(var(--success))",name:"Earnings"}),e.jsx(pt,{yAxisId:"amounts",dataKey:"petrol",fill:"hsl(var(--warning))",name:"Petrol"}),e.jsx(pt,{yAxisId:"amounts",dataKey:"food",fill:"hsl(var(--destructive))",name:"Food"}),e.jsx(pt,{yAxisId:"amounts",dataKey:"other",fill:"hsl(var(--muted-foreground))",name:"Other"}),e.jsx(gi,{yAxisId:"balance",y:t,stroke:"hsl(var(--muted-foreground))",strokeDasharray:"5 5"})]});default:return e.jsxs(rr,{...p,children:[e.jsx(wt,{strokeDasharray:"3 3",className:"stroke-border/50"}),e.jsx(St,{dataKey:"date",className:"text-xs",tick:{fontSize:11}}),e.jsx(gt,{className:"text-xs",tick:{fontSize:11},domain:["dataMin - 50","dataMax + 50"]}),e.jsx(st,{content:e.jsx(g,{})}),e.jsx(is,{type:"monotone",dataKey:"balance",stroke:"hsl(var(--primary))",strokeWidth:3,dot:{fill:"hsl(var(--primary))",r:4},activeDot:{r:7,fill:"hsl(var(--primary))"}}),e.jsx(gi,{y:t,stroke:"hsl(var(--muted-foreground))",strokeDasharray:"5 5",label:{value:"Starting Point",position:"left"}})]})}};return e.jsxs(L,{className:`p-6 shadow-card hover:shadow-card-hover transition-all duration-300 ${h?"fixed inset-4 z-50":"hover:scale-[1.01]"}`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-1",children:"Enhanced Balance Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Interactive financial trends and insights"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"flex bg-muted rounded-lg p-1",children:[{type:"line",icon:No,label:"Line"},{type:"area",icon:Pg,label:"Area"},{type:"bar",icon:tt,label:"Bar"},{type:"composed",icon:tt,label:"Mixed"}].map(({type:p,icon:j,label:v})=>e.jsxs(_,{variant:n===p?"secondary":"ghost",size:"sm",onClick:()=>r(p),className:"h-8 px-2",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-1 hidden sm:inline text-xs",children:v})]},p))}),e.jsxs(Re,{value:i,onValueChange:p=>l(p),children:[e.jsx(Me,{className:"w-32",children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"7d",children:"7 days"}),e.jsx(J,{value:"30d",children:"30 days"}),e.jsx(J,{value:"90d",children:"3 months"}),e.jsx(J,{value:"1y",children:"1 year"})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>c(!o),className:o?"bg-primary/10 border-primary":"",children:e.jsx(Be,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>x(!h),children:e.jsx(hr,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"sm",children:e.jsx(vt,{className:"h-4 w-4"})})]})]})]}),m&&e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-3 bg-success/5 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Total Earnings"}),e.jsxs("p",{className:"font-bold text-success",children:["+£",m.totalEarnings.toFixed(0)]})]}),e.jsxs("div",{className:"text-center p-3 bg-destructive/5 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Total Expenses"}),e.jsxs("p",{className:"font-bold text-destructive",children:["-£",m.totalExpenses.toFixed(0)]})]}),e.jsxs("div",{className:"text-center p-3 bg-primary/5 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Net Change"}),e.jsxs("p",{className:`font-bold ${m.netChange>=0?"text-success":"text-destructive"}`,children:[m.netChange>=0?"+":"","£",m.netChange.toFixed(0)]})]}),e.jsxs("div",{className:"text-center p-3 bg-muted/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[m.trend>=0?e.jsx(de,{className:"h-3 w-3 text-success"}):e.jsx(We,{className:"h-3 w-3 text-destructive"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Trend"})]}),e.jsxs("p",{className:`font-bold ${m.trend>=0?"text-success":"text-destructive"}`,children:[m.trend>=0?"+":"","£",m.trend.toFixed(0)]})]})]}),e.jsx("div",{className:h?"h-96":"h-64",children:e.jsx(Tt,{width:"100%",height:"100%",children:y()})}),o&&e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-primary/5 to-accent/5 rounded-lg border border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Be,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-semibold text-sm",children:"AI Insights"}),e.jsx(K,{variant:"secondary",className:"text-xs",children:"Beta"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[(m==null?void 0:m.trend)&&m.trend>0&&e.jsxs("p",{children:["📈 Your balance is trending upward by £",m.trend.toFixed(0)," over this period."]}),(m==null?void 0:m.trend)&&m.trend<0&&e.jsxs("p",{children:["📉 Your balance is trending downward by £",Math.abs(m.trend).toFixed(0),". Consider reviewing expenses."]}),(m==null?void 0:m.volatility)&&m.volatility<5&&e.jsx("p",{children:"✅ Your spending patterns are stable with low volatility."})]})]})]})},Z0=()=>{const[s,t]=u.useState(!1),{monthlyStartingPoint:a,setMonthlyStartingPoint:n}=he(),[r,i]=u.useState(a.toString()),{toast:l}=Ue(),o=c=>{c.preventDefault();const h=parseFloat(r);if(isNaN(h)){l({title:"Error",description:"Please enter a valid amount",variant:"destructive"});return}n(h),l({title:"Success",description:"Monthly starting point updated successfully"}),t(!1)};return e.jsxs(dt,{open:s,onOpenChange:t,children:[e.jsx(Ft,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(As,{className:"h-4 w-4"}),"Set Starting Point"]})}),e.jsxs(at,{className:"sm:max-w-[425px]",children:[e.jsx(nt,{children:e.jsx(rt,{children:"Set Monthly Starting Point"})}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"starting-amount",children:"Starting Balance (£)"}),e.jsx(ae,{id:"starting-amount",type:"number",step:"0.01",placeholder:"0.00",value:r,onChange:c=>i(c.target.value),required:!0}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"This is your account balance at the beginning of the month. All calculations will be based on this starting point."})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsx(_,{type:"submit",children:"Update Starting Point"})]})]})]})]})},eb=()=>{const{transactions:s,goals:t}=he();Ue();const[a,n]=u.useState([]),[r,i]=u.useState(null),[l,o]=u.useState([]),[c,h]=u.useState(!0);u.useEffect(()=>{x()},[s,t]);const x=()=>{h(!0),setTimeout(()=>{const v=d(),N=g(),f=y(v,N);n(v),i(N),o(f),h(!1)},1e3)},d=()=>{if(s.length===0)return[];const v={};new Date().getMonth(),s.forEach(f=>{if(f.category!=="Earnings"){const S=new Date(f.date).getMonth();v[f.category]||(v[f.category]=new Array(12).fill(0)),v[f.category][S]+=Math.abs(f.amount)}});const N=[];return Object.entries(v).forEach(([f,S])=>{const D=S.slice(-3).filter(F=>F>0);if(D.length<2)return;const w=D.reduce((F,O)=>F+O,0)/D.length,R=D[D.length-1],b=D[D.length-2],k=(R-b)/b*100;let T="stable";k>10?T="increasing":k<-10&&(T="decreasing"),N.push({category:f,averageMonthly:w,trend:T,changePercentage:Math.abs(k),recommendation:m(f,T)})}),N.sort((f,S)=>S.averageMonthly-f.averageMonthly).slice(0,5)},m=(v,N,f)=>({"Food & Dining":N==="increasing"?"Consider meal prepping to reduce dining out costs":"Great job managing food expenses!",Transportation:"Explore public transport or carpooling options",Shopping:"Try implementing a 24-hour waiting period before non-essential purchases",Entertainment:"Look for free community events as alternatives","Bills & Utilities":"Compare providers to ensure you have the best rates"})[v]||"Monitor this category for optimization opportunities",g=()=>{if(s.length===0)return{overall:0,spending:0,savings:0,budgeting:0,goals:0};const v=s.filter(k=>k.category!=="Earnings").reduce((k,T)=>k+Math.abs(T.amount),0),N=s.filter(k=>k.category==="Earnings").reduce((k,T)=>k+T.amount,0),f=N>0?v/N:1,S=Math.max(0,100-f*100),D=N>0?Math.min(100,(N-v)/N*100):0,w=50,R=t.length>0?t.reduce((k,T)=>k+T.currentAmount/T.targetAmount*100,0)/t.length:0,b=S*.3+D*.3+w*.2+R*.2;return{overall:Math.round(b),spending:Math.round(S),savings:Math.round(D),budgeting:Math.round(w),goals:Math.round(R)}},y=(v,N)=>{const f=[];return v.forEach(S=>{S.trend==="increasing"&&S.changePercentage>20&&f.push({id:`spending-${S.category}`,type:"warning",title:`Rising ${S.category} Costs`,description:`Your ${S.category.toLowerCase()} spending increased by ${S.changePercentage.toFixed(0)}% last month. ${S.recommendation}`,priority:"high",icon:e.jsx(de,{className:"h-4 w-4"})})}),N.overall<50?f.push({id:"health-low",type:"warning",title:"Financial Health Needs Attention",description:"Your overall financial health score is below average. Focus on reducing expenses and increasing savings.",priority:"high",icon:e.jsx(Ze,{className:"h-4 w-4"})}):N.overall>80&&f.push({id:"health-excellent",type:"achievement",title:"Excellent Financial Health!",description:"Your financial habits are outstanding. Consider investing your surplus funds.",priority:"low",icon:e.jsx(Ee,{className:"h-4 w-4"})}),t.forEach(S=>{const D=S.currentAmount/S.targetAmount*100;D>75&&f.push({id:`goal-${S.id}`,type:"achievement",title:`${S.name} Almost Complete!`,description:`You're ${D.toFixed(0)}% towards your ${S.name} goal. Keep it up!`,priority:"medium",icon:e.jsx(je,{className:"h-4 w-4"})})}),N.savings<30&&f.push({id:"savings-opportunity",type:"opportunity",title:"Savings Opportunity",description:"Consider setting up automatic transfers to build your savings faster.",priority:"medium",icon:e.jsx(It,{className:"h-4 w-4"})}),f.sort((S,D)=>{const w={high:3,medium:2,low:1};return w[D.priority]-w[S.priority]}).slice(0,5)},p=v=>{switch(v){case"increasing":return e.jsx(de,{className:"h-4 w-4 text-red-500"});case"decreasing":return e.jsx(We,{className:"h-4 w-4 text-green-500"});default:return e.jsx(Lt,{className:"h-4 w-4 text-blue-500"})}},j=v=>{switch(v){case"increasing":return"text-red-600";case"decreasing":return"text-green-600";default:return"text-blue-600"}};return c?e.jsxs(L,{children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"h-5 w-5"}),"AI Financial Insights"]}),e.jsx(Ce,{children:"Analyzing your financial patterns..."})]}),e.jsx(Q,{children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):s.length===0?e.jsxs(L,{children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"h-5 w-5"}),"AI Financial Insights"]}),e.jsx(Ce,{children:"Add some transactions to unlock personalized insights"})]}),e.jsx(Q,{children:e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(gn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Once you start tracking expenses, I'll provide intelligent recommendations to optimize your finances."})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(L,{children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5"}),"Financial Health Score"]}),e.jsx(Ce,{children:"Your overall financial wellness assessment"})]}),e.jsx(Q,{children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"w-24 h-24 rounded-full border-8 border-primary/20 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold",children:r==null?void 0:r.overall})}),e.jsx(K,{variant:r&&r.overall>=70?"default":"secondary",className:"absolute -top-2 -right-2",children:r&&r.overall>=70?"Excellent":"Needs Attention"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Spending"}),e.jsxs("span",{children:[r==null?void 0:r.spending,"%"]})]}),e.jsx(Te,{value:r==null?void 0:r.spending,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Savings"}),e.jsxs("span",{children:[r==null?void 0:r.savings,"%"]})]}),e.jsx(Te,{value:r==null?void 0:r.savings,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Budgeting"}),e.jsxs("span",{children:[r==null?void 0:r.budgeting,"%"]})]}),e.jsx(Te,{value:r==null?void 0:r.budgeting,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Goals"}),e.jsxs("span",{children:[r==null?void 0:r.goals,"%"]})]}),e.jsx(Te,{value:r==null?void 0:r.goals,className:"h-2"})]})]})]})})]}),l.length>0&&e.jsxs(L,{children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(gn,{className:"h-5 w-5"}),"Smart Recommendations"]}),e.jsx(Ce,{children:"AI-powered insights to improve your finances"})]}),e.jsx(Q,{children:e.jsx("div",{className:"space-y-3",children:l.map(v=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border",children:[e.jsx("div",{className:`p-2 rounded-full ${v.type==="warning"?"bg-red-100 text-red-600":v.type==="achievement"?"bg-green-100 text-green-600":v.type==="opportunity"?"bg-blue-100 text-blue-600":"bg-yellow-100 text-yellow-600"}`,children:v.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:v.title}),e.jsx(K,{variant:v.priority==="high"?"destructive":v.priority==="medium"?"secondary":"outline",className:"text-xs",children:v.priority})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:v.description})]})]},v.id))})})]}),a.length>0&&e.jsxs(L,{children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5"}),"Spending Patterns"]}),e.jsx(Ce,{children:"Analysis of your monthly spending habits"})]}),e.jsx(Q,{children:e.jsx("div",{className:"space-y-4",children:a.map(v=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[p(v.trend),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:v.category}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["£",v.averageMonthly.toFixed(2),"/month"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-medium ${j(v.trend)}`,children:[v.trend==="increasing"?"+":v.trend==="decreasing"?"-":"",v.changePercentage.toFixed(0),"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground capitalize",children:v.trend})]})]},v.category))})})]}),e.jsxs(_,{onClick:x,variant:"outline",className:"w-full",children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Refresh Insights"]})]})},tb=()=>{const{transactions:s,goals:t,debts:a}=he(),[n,r]=u.useState([]),i=()=>{const c=[],h=new Date,x=new Date(h.getTime()+7*24*60*60*1e3),d=s.filter(g=>{const y=new Date(g.date),p=new Date(h.getTime()-7*24*60*60*1e3);return y>=p&&g.category!=="Earnings"}).reduce((g,y)=>g+y.amount,0);return d>500&&c.push({id:"high-spending",type:"warning",title:"High Spending Alert",message:`You've spent £${d.toFixed(2)} this week - 25% above your average`,action:"View Budget",actionUrl:"/budget",icon:Ze}),t.forEach(g=>{const y=g.currentAmount/g.targetAmount*100,p=new Date(g.deadline),j=p<=x&&p>=h;y>=100&&!g.isCompleted?c.push({id:`goal-complete-${g.id}`,type:"success",title:"🎉 Goal Achieved!",message:`Congratulations! You've reached your "${g.name}" goal of £${g.targetAmount}`,action:"View Goals",actionUrl:"/goals",icon:Ee}):y>=75&&y<100?c.push({id:`goal-progress-${g.id}`,type:"success",title:"Great Progress!",message:`You're ${y.toFixed(0)}% of the way to your "${g.name}" goal`,action:"View Goals",actionUrl:"/goals",icon:de}):j&&y<75&&c.push({id:`goal-deadline-${g.id}`,type:"warning",title:"Goal Deadline Approaching",message:`"${g.name}" deadline is in ${Math.ceil((p.getTime()-h.getTime())/(1e3*60*60*24))} days`,action:"View Goals",actionUrl:"/goals",icon:Fe})}),a.forEach(g=>{if(g.remainingAmount<=0)return;const y=new Date(g.dueDate),p=Math.ceil((y.getTime()-h.getTime())/(1e3*60*60*24));p<=0?c.push({id:`debt-overdue-${g.id}`,type:"danger",title:"Payment Overdue!",message:`${g.name} payment is ${Math.abs(p)} days overdue`,action:"Make Payment",actionUrl:"/debts",icon:Ze}):p<=3&&c.push({id:`debt-due-soon-${g.id}`,type:"warning",title:"Payment Due Soon",message:`${g.name} payment of £${g.minimumPayment} due in ${p} days`,action:"View Debts",actionUrl:"/debts",icon:Mt})}),s.reduce((g,y)=>y.category==="Earnings"?g+y.amount:g-y.amount,755)>=1e3&&!n.includes("milestone-1000")&&c.push({id:"milestone-1000",type:"success",title:"🎉 Financial Milestone!",message:"You've reached £1,000 in your account - keep up the great work!",action:"View Analytics",actionUrl:"/analytics",icon:je}),c.filter(g=>!n.includes(g.id))},l=c=>{r(h=>[...h,c])},o=i();return o.length===0?null:e.jsx("div",{className:"space-y-3 mb-6",children:o.slice(0,3).map(c=>{const h=c.icon;return e.jsx(us,{className:`relative transition-all duration-300 hover:shadow-md ${c.type==="success"?"border-success bg-success/5":c.type==="warning"?"border-warning bg-warning/5":c.type==="danger"?"border-destructive bg-destructive/5":"border-primary bg-primary/5"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(h,{className:`h-5 w-5 mt-0.5 ${c.type==="success"?"text-success":c.type==="warning"?"text-warning":c.type==="danger"?"text-destructive":"text-primary"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:c.title}),e.jsx(K,{variant:"outline",className:`text-xs ${c.type==="success"?"border-success text-success":c.type==="warning"?"border-warning text-warning":c.type==="danger"?"border-destructive text-destructive":"border-primary text-primary"}`,children:c.type.toUpperCase()})]}),e.jsx(ms,{className:"text-sm",children:c.message})]}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-muted",onClick:()=>l(c.id),children:e.jsx(ut,{className:"h-3 w-3"})})]}),c.action&&e.jsx("div",{className:"mt-3",children:e.jsx(_,{variant:"outline",size:"sm",className:`text-xs h-7 ${c.type==="success"?"border-success text-success hover:bg-success/10":c.type==="warning"?"border-warning text-warning hover:bg-warning/10":c.type==="danger"?"border-destructive text-destructive hover:bg-destructive/10":"border-primary text-primary hover:bg-primary/10"}`,onClick:()=>{c.actionUrl&&(window.location.href=c.actionUrl)},children:c.action})})]})]})},c.id)})})},sb=()=>{const{transactions:s,goals:t,debts:a,getCurrentBalance:n}=he(),[r,i]=u.useState("");u.useEffect(()=>{const g=localStorage.getItem("user-name")||"";i(g);const y=()=>{const j=localStorage.getItem("user-name")||"";i(j)},p=()=>{const j=localStorage.getItem("user-name")||"";i(j)};return window.addEventListener("storage",y),window.addEventListener("user-name-updated",p),()=>{window.removeEventListener("storage",y),window.removeEventListener("user-name-updated",p)}},[]);const l=()=>{const g=new Date().getHours(),y=r||"there";return g<12?`Good morning${r?`, ${y}`:""}!`:g<17?`Good afternoon${r?`, ${y}`:""}!`:`Good evening${r?`, ${y}`:""}!`},o=()=>{const g=new Date,y=new Date(g.getTime()-7*24*60*60*1e3),p=s.filter(k=>new Date(k.date)>=y),j=p.filter(k=>k.category!=="Earnings").reduce((k,T)=>T.amount>k.amount?T:k,{amount:0,category:"None",date:"",dailyEntryId:0}),v=p.reduce((k,T)=>(T.category!=="Earnings"&&(k[T.category]=(k[T.category]||0)+T.amount),k),{}),N=Object.entries(v).reduce((k,[T,F])=>F>k.amount?{category:T,amount:F}:k,{category:"None",amount:0}),f=new Date(g.getTime()-14*24*60*60*1e3),S=s.filter(k=>{const T=new Date(k.date);return T>=f&&T<y}),D=p.filter(k=>k.category!=="Earnings").reduce((k,T)=>k+T.amount,0),w=S.filter(k=>k.category!=="Earnings").reduce((k,T)=>k+T.amount,0),R=D-w,b=w>0?R/w*100:0;return{biggestExpense:j,mostUsedCategory:N,thisWeekSpending:D,spendingChange:R,spendingChangePercent:b}},c=()=>{const g=t.filter(p=>!p.isCompleted),y=g.filter(p=>p.currentAmount/p.targetAmount>=.8);return{activeGoals:g.length,nearCompletion:y.length,nextGoal:g[0]}},h=()=>{const g=n(),y=a.filter(j=>j.remainingAmount>0).reduce((j,v)=>j+v.remainingAmount,0),p=g-y;return{currentBalance:g,totalDebt:y,netWorth:p}},x=o(),d=c(),m=h();return e.jsx(L,{className:"p-6 bg-gradient-to-br from-primary/5 to-background border-primary/20 hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:l()}),e.jsx("p",{className:"text-muted-foreground",children:r?"Here's your personalized financial snapshot for this week":"Here's your financial snapshot for this week"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[x.spendingChange>=0?e.jsx(de,{className:"h-4 w-4 text-destructive"}):e.jsx(We,{className:"h-4 w-4 text-success"}),e.jsxs("span",{className:`font-bold text-sm ${x.spendingChange>=0?"text-destructive":"text-success"}`,children:[x.spendingChangePercent>=0?"+":"",(x.spendingChangePercent||0).toFixed(0),"%"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"vs last week"}),e.jsxs("p",{className:"text-xs font-medium",children:["£",(x.thisWeekSpending||0).toFixed(2)," spent"]})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/30",children:[e.jsx(Be,{className:"h-4 w-4 mx-auto mb-1 text-warning"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Biggest expense"}),e.jsxs("p",{className:"font-bold text-sm",children:["£",(x.biggestExpense.amount||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:x.biggestExpense.category})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/30",children:[e.jsx(je,{className:"h-4 w-4 mx-auto mb-1 text-primary"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Top category"}),e.jsx("p",{className:"font-bold text-sm",children:x.mostUsedCategory.category}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["£",(x.mostUsedCategory.amount||0).toFixed(2)]})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/30",children:[e.jsx(ad,{className:"h-4 w-4 mx-auto mb-1 text-success"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Net worth"}),e.jsxs("p",{className:`font-bold text-sm ${m.netWorth>=0?"text-success":"text-destructive"}`,children:["£",(m.netWorth||0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:m.totalDebt>0?`£${(m.totalDebt||0).toFixed(2)} debt`:"Debt free!"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-primary"}),"Smart Insights"]}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"p-3 rounded-lg border border-border bg-card/50",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx(K,{variant:x.spendingChangePercent>20?"destructive":x.spendingChangePercent<-10?"default":"secondary",children:x.spendingChangePercent>20?"High Spending":x.spendingChangePercent<-10?"Great Saving":"Normal Spending"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.spendingChangePercent>20?`You've spent ${(x.spendingChangePercent||0).toFixed(0)}% more than last week. Consider reviewing your ${x.mostUsedCategory.category} expenses.`:x.spendingChangePercent<-10?`Excellent! You've reduced spending by ${Math.abs(x.spendingChangePercent||0).toFixed(0)}% compared to last week.`:"Your spending is consistent with last week's pattern. Keep it up!"})]}),e.jsxs("div",{className:"p-3 rounded-lg border border-border bg-card/50",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx(K,{variant:d.nearCompletion>0?"default":"secondary",children:d.nearCompletion>0?"Goal Progress":"Stay Focused"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d.nearCompletion>0?`${d.nearCompletion} goal${d.nearCompletion>1?"s are":" is"} almost complete! You're doing great.`:d.activeGoals>0?`Keep working towards your ${d.activeGoals} active goal${d.activeGoals>1?"s":""}. Every pound counts!`:"Consider setting a financial goal to stay motivated and track your progress."})]})]})]})]})})},ab=()=>{const{transactions:s,goals:t,debts:a,getCurrentBalance:n}=he(),r=()=>{const d=s&&s.length>0,m=n()!==0,g=t&&t.length>0||a&&a.length>0;return d||m||g},i=()=>{let d=0;const m=[],g=n(),y=s&&s.length>0?Math.abs(s.filter(N=>N.category!=="Earnings"&&N.amount<0).reduce((N,f)=>N+f.amount,0))/Math.max(1,s.length/30):0;if(s.length===0&&g===0)m.push({name:"Emergency Fund",score:0,status:"needs work",description:"No financial data available"});else{const N=y>0?g/(y*3):g>0?1:0;N>=1?(d+=30,m.push({name:"Emergency Fund",score:30,status:"excellent",description:"3+ months of expenses saved"})):N>=.5?(d+=20,m.push({name:"Emergency Fund",score:20,status:"good",description:"Building emergency fund"})):g>0?(d+=10,m.push({name:"Emergency Fund",score:10,status:"needs work",description:"Need more emergency savings"})):m.push({name:"Emergency Fund",score:0,status:"needs work",description:"No emergency fund"})}const p=a?a.filter(N=>N.remainingAmount>0):[],j=p.reduce((N,f)=>N+f.remainingAmount,0);if(!a||a.length===0)d+=15,m.push({name:"Debt Management",score:15,status:"good",description:"No debt data available"});else if(j===0)d+=25,m.push({name:"Debt Management",score:25,status:"excellent",description:"Debt-free!"});else{const N=j/Math.max(g,1);N<.3?(d+=20,m.push({name:"Debt Management",score:20,status:"good",description:"Manageable debt levels"})):N<.6?(d+=10,m.push({name:"Debt Management",score:10,status:"needs work",description:"High debt levels"})):(d+=5,m.push({name:"Debt Management",score:5,status:"critical",description:"Critical debt situation"}))}const v=t?t.filter(N=>!N.isCompleted):[];if(!t||t.length===0)m.push({name:"Savings Goals",score:0,status:"needs work",description:"No goals set yet"});else{const N=v.reduce((f,S)=>S.currentAmount/S.targetAmount,0)/Math.max(v.length,1);v.length>0&&N>=.7?(d+=20,m.push({name:"Savings Goals",score:20,status:"excellent",description:"On track with goals"})):v.length>0&&N>=.4?(d+=15,m.push({name:"Savings Goals",score:15,status:"good",description:"Making progress on goals"})):v.length>0?(d+=10,m.push({name:"Savings Goals",score:10,status:"needs work",description:"Goals need attention"})):(d+=5,m.push({name:"Savings Goals",score:5,status:"needs work",description:"No active goals set"}))}if(!s||s.length<14)m.push({name:"Spending Consistency",score:0,status:"needs work",description:"Need more transaction history"});else{const N=Math.abs(s.filter(D=>{const w=new Date(D.date),R=new Date(Date.now()-7*24*60*60*1e3);return w>=R&&D.category!=="Earnings"&&D.amount<0}).reduce((D,w)=>D+w.amount,0)),f=Math.abs(s.filter(D=>{const w=new Date(D.date),R=new Date(Date.now()-14*24*60*60*1e3),b=new Date(Date.now()-7*24*60*60*1e3);return w>=R&&w<b&&D.category!=="Earnings"&&D.amount<0}).reduce((D,w)=>D+w.amount,0)),S=f>0?Math.abs(N-f)/f:0;S<.2?(d+=15,m.push({name:"Spending Consistency",score:15,status:"excellent",description:"Consistent spending habits"})):S<.4?(d+=10,m.push({name:"Spending Consistency",score:10,status:"good",description:"Fairly consistent spending"})):(d+=5,m.push({name:"Spending Consistency",score:5,status:"needs work",description:"Irregular spending patterns"}))}if(!a||a.length===0)m.push({name:"Payment Timeliness",score:5,status:"good",description:"No debt payments to track"}),d+=5;else{const N=p.filter(f=>new Date(f.dueDate)<new Date);N.length===0?(d+=10,m.push({name:"Payment Timeliness",score:10,status:"excellent",description:"All payments on time"})):m.push({name:"Payment Timeliness",score:0,status:"critical",description:`${N.length} overdue payment${N.length>1?"s":""}`})}return{score:Math.min(d,100),factors:m}};if(!r())return e.jsx(L,{className:"p-6 bg-gradient-to-br from-card to-muted/30 border-2 border-dashed",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-3 rounded-full bg-muted/50 w-fit mx-auto",children:e.jsx(Lt,{className:"h-8 w-8 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Financial Health Score"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add some financial data to see your health score"}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[e.jsx("p",{children:"To calculate your financial health score, we need:"}),e.jsxs("ul",{className:"text-left max-w-md mx-auto space-y-1",children:[e.jsx("li",{children:"• Some transaction history"}),e.jsx("li",{children:"• Current balance information"}),e.jsx("li",{children:"• Financial goals or debt information"})]})]})]}),e.jsx(K,{variant:"outline",className:"text-muted-foreground",children:"Insufficient Data"})]})});const{score:l,factors:o}=i(),h=(d=>d>=80?{level:"Excellent",color:"text-success",bgColor:"bg-success",description:"Outstanding financial health!"}:d>=60?{level:"Good",color:"text-primary",bgColor:"bg-primary",description:"Good financial foundation"}:d>=40?{level:"Fair",color:"text-warning",bgColor:"bg-warning",description:"Room for improvement"}:{level:"Needs Work",color:"text-destructive",bgColor:"bg-destructive",description:"Focus on financial basics"})(l),x=d=>{switch(d){case"excellent":return e.jsx(Ee,{className:"h-4 w-4 text-success"});case"good":return e.jsx(de,{className:"h-4 w-4 text-primary"});case"needs work":return e.jsx(Ze,{className:"h-4 w-4 text-warning"});case"critical":return e.jsx(Ze,{className:"h-4 w-4 text-destructive"});default:return e.jsx(Lt,{className:"h-4 w-4 text-muted-foreground"})}};return e.jsx(L,{className:"p-6 bg-gradient-to-br from-card to-muted/30 border-2 hover:shadow-xl transition-all duration-300",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-primary/10",children:e.jsx(Lt,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:"Financial Health Score"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your overall financial wellness"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-3xl font-bold ${h.color}`,children:l}),e.jsx("span",{className:"text-muted-foreground",children:"/100"})]}),e.jsx(K,{variant:"outline",className:`${h.color} border-current`,children:h.level})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Te,{value:l,className:`h-3 transition-all duration-1000 [&>div]:${h.bgColor}`}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:h.description})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm text-muted-foreground uppercase tracking-wide",children:"Health Factors"}),e.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2",children:o.map((d,m)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50 hover:bg-muted/70 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[x(d.status),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:d.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:d.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-bold text-sm",children:d.score}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["/",d.name==="Emergency Fund"?"30":d.name==="Debt Management"?"25":d.name==="Savings Goals"?"20":d.name==="Spending Consistency"?"15":"10"]})]})]},m))})]}),e.jsxs("div",{className:"pt-4 border-t border-border",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"💡 Quick Improvement Tips:"}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[l<80&&e.jsxs(e.Fragment,{children:[o.find(d=>d.name==="Emergency Fund"&&d.score<25)&&e.jsx("p",{children:"• Build emergency fund to 3+ months of expenses"}),o.find(d=>d.name==="Debt Management"&&d.score<20)&&e.jsx("p",{children:"• Focus on paying down high-interest debt first"}),o.find(d=>d.name==="Savings Goals"&&d.score<15)&&e.jsx("p",{children:"• Set specific, achievable financial goals"})]}),l>=80&&e.jsx("p",{children:"• Excellent work! Consider advanced investment strategies"})]})]})]})})},nb=()=>{const{transactions:s,getCurrentBalance:t,goals:a,debts:n}=he(),i=(()=>{const o=new Date,c=new Date(o.getTime()-30*24*60*60*1e3),h=new Date(o.getTime()-60*24*60*60*1e3),x=s.filter(b=>new Date(b.date)>=c),d=s.filter(b=>{const k=new Date(b.date);return k>=h&&k<c}),m=x.filter(b=>b.category==="Earnings").reduce((b,k)=>b+k.amount,0),g=x.filter(b=>b.category!=="Earnings").reduce((b,k)=>b+k.amount,0),y=d.filter(b=>b.category==="Earnings").reduce((b,k)=>b+k.amount,0),p=d.filter(b=>b.category!=="Earnings").reduce((b,k)=>b+k.amount,0),j=x.filter(b=>b.category!=="Earnings").reduce((b,k)=>(b[k.category]=(b[k.category]||0)+k.amount,b),{}),v=Object.entries(j).reduce((b,[k,T])=>T>b.amount?{category:k,amount:T}:b,{category:"None",amount:0}),N=a.filter(b=>!b.isCompleted),f=N.length>0?N.reduce((b,k)=>b+k.currentAmount/k.targetAmount,0)/N.length*100:0,S=n.filter(b=>b.remainingAmount>0).reduce((b,k)=>b+k.remainingAmount,0),D=n.filter(b=>b.remainingAmount>0).reduce((b,k)=>b+k.minimumPayment,0),w=m>0?(m-g)/m*100:0,R=x.length/30;return{currentIncome:m,currentExpenses:g,previousIncome:y,previousExpenses:p,topCategory:v,avgGoalProgress:f,totalDebt:S,monthlyDebtPayments:D,savingsRate:w,avgDailyTransactions:R,netChange:m-g,incomeChange:(m-y)/Math.max(y,1)*100,expenseChange:(g-p)/Math.max(p,1)*100}})(),l=[{title:"Savings Rate",value:`${i.savingsRate.toFixed(1)}%`,subtitle:"of income saved",icon:de,color:i.savingsRate>=20?"text-success":i.savingsRate>=10?"text-warning":"text-destructive",bgColor:i.savingsRate>=20?"bg-success/10":i.savingsRate>=10?"bg-warning/10":"bg-destructive/10",trend:i.savingsRate>=20?"excellent":i.savingsRate>=10?"good":"needs work"},{title:"Income Trend",value:`${i.incomeChange>=0?"+":""}${i.incomeChange.toFixed(1)}%`,subtitle:"vs last month",icon:i.incomeChange>=0?de:We,color:i.incomeChange>=0?"text-success":"text-destructive",bgColor:i.incomeChange>=0?"bg-success/10":"bg-destructive/10",trend:i.incomeChange>=10?"excellent":i.incomeChange>=0?"good":"declining"},{title:"Top Category",value:i.topCategory.category,subtitle:`£${i.topCategory.amount.toFixed(0)} spent`,icon:rd,color:"text-primary",bgColor:"bg-primary/10",trend:"category"},{title:"Debt Load",value:i.totalDebt>0?`£${i.totalDebt.toFixed(0)}`:"Debt Free!",subtitle:i.totalDebt>0?`£${i.monthlyDebtPayments.toFixed(0)}/mo payments`:"No active debts",icon:ht,color:i.totalDebt===0?"text-success":i.totalDebt>5e3?"text-destructive":"text-warning",bgColor:i.totalDebt===0?"bg-success/10":i.totalDebt>5e3?"bg-destructive/10":"bg-warning/10",trend:i.totalDebt===0?"excellent":"has debt"},{title:"Goal Progress",value:`${i.avgGoalProgress.toFixed(0)}%`,subtitle:"average completion",icon:je,color:i.avgGoalProgress>=75?"text-success":i.avgGoalProgress>=50?"text-warning":"text-muted-foreground",bgColor:i.avgGoalProgress>=75?"bg-success/10":i.avgGoalProgress>=50?"bg-warning/10":"bg-muted/10",trend:i.avgGoalProgress>=75?"excellent":i.avgGoalProgress>=50?"good":"behind"},{title:"Activity Level",value:i.avgDailyTransactions.toFixed(1),subtitle:"transactions/day",icon:Be,color:i.avgDailyTransactions>=2?"text-primary":"text-muted-foreground",bgColor:i.avgDailyTransactions>=2?"bg-primary/10":"bg-muted/10",trend:i.avgDailyTransactions>=2?"active":"low"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Quick Insights"}),e.jsx(K,{variant:"outline",className:"text-xs",children:"Last 30 Days"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:l.map((o,c)=>{const h=o.icon;return e.jsx(L,{className:"p-4 hover:shadow-md transition-all duration-200 hover:scale-105",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${o.bgColor}`,children:e.jsx(h,{className:`h-4 w-4 ${o.color}`})}),e.jsx("h4",{className:"font-semibold text-sm",children:o.title})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-xl font-bold ${o.color}`,children:o.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o.subtitle})]})]}),e.jsx("div",{className:"ml-2",children:e.jsx(K,{variant:"secondary",className:`text-xs ${o.trend==="excellent"?"bg-success/20 text-success":o.trend==="good"?"bg-primary/20 text-primary":o.trend==="declining"||o.trend==="needs work"||o.trend==="behind"?"bg-destructive/20 text-destructive":"bg-muted/50 text-muted-foreground"}`,children:o.trend==="excellent"?"Great":o.trend==="good"?"Good":o.trend==="declining"?"Down":o.trend==="needs work"?"Low":o.trend==="behind"?"Behind":o.trend==="has debt"?"Debt":o.trend==="active"?"Active":o.trend==="category"?"Top":"Low"})})]})},c)})})]})},rb=()=>{const{transactions:s,goals:t,debts:a}=he(),[n,r]=u.useState(!1),l=(()=>{const c=[],h=new Date,x=new Date(h.getTime()-7*24*60*60*1e3);return s.filter(m=>new Date(m.date)>=x).slice(0,15).forEach(m=>{c.push({id:`transaction-${m.dailyEntryId}`,type:"transaction",title:m.category==="Earnings"?"Income Received":`${m.category} Purchase`,description:`£${m.amount.toFixed(2)} ${m.category==="Earnings"?"earned":"spent"}`,amount:m.amount,date:m.date,icon:m.category==="Earnings"?$i:Cg,color:m.category==="Earnings"?"text-success":"text-destructive",bgColor:m.category==="Earnings"?"bg-success/10":"bg-destructive/10"})}),t.forEach(m=>{const g=m.currentAmount/m.targetAmount*100;g>=25&&g<30&&c.push({id:`goal-milestone-${m.id}-25`,type:"goal",title:"Goal Milestone Reached",description:`25% progress on "${m.name}"`,date:new Date(h.getTime()-2*24*60*60*1e3).toISOString().split("T")[0],icon:je,color:"text-primary",bgColor:"bg-primary/10"}),g>=50&&g<55&&c.push({id:`goal-milestone-${m.id}-50`,type:"goal",title:"Halfway There!",description:`50% progress on "${m.name}"`,date:new Date(h.getTime()-1*24*60*60*1e3).toISOString().split("T")[0],icon:je,color:"text-primary",bgColor:"bg-primary/10"}),m.isCompleted&&c.push({id:`goal-completed-${m.id}`,type:"goal",title:"Goal Completed! 🎉",description:`"${m.name}" achieved`,amount:m.targetAmount,date:new Date(h.getTime()-Math.random()*7*24*60*60*1e3).toISOString().split("T")[0],icon:je,color:"text-success",bgColor:"bg-success/10"})}),a.forEach(m=>{m.payments&&m.payments.length>0&&m.payments.filter(g=>new Date(g.date)>=x).forEach(g=>{c.push({id:`debt-payment-${m.id}-${g.id}`,type:"debt",title:"Payment Made",description:`£${g.amount.toFixed(2)} paid toward ${m.name}`,amount:g.amount,date:g.date,icon:Mt,color:"text-warning",bgColor:"bg-warning/10"})})}),s.reduce((m,g)=>g.category==="Earnings"?m+g.amount:m-g.amount,755)>=1e3&&c.push({id:"milestone-1000",type:"milestone",title:"Financial Milestone!",description:"Reached £1,000 in account balance",date:new Date(h.getTime()-3*24*60*60*1e3).toISOString().split("T")[0],icon:je,color:"text-success",bgColor:"bg-success/10"}),c.sort((m,g)=>new Date(g.date).getTime()-new Date(m.date).getTime()).slice(0,n?c.length:6)})(),o=c=>{const h=new Date(c),d=new Date().getTime()-h.getTime(),m=Math.floor(d/(1e3*60*60*24));return m===0?"Today":m===1?"Yesterday":m<7?`${m} days ago`:h.toLocaleDateString("en-GB",{day:"numeric",month:"short"})};return l.length===0?e.jsxs(L,{className:"p-6 text-center",children:[e.jsx(Fe,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No recent activity"})]}):e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Recent Activity"}),e.jsx(K,{variant:"outline",className:"text-xs",children:"Last 7 Days"})]}),e.jsx("div",{className:"space-y-4",children:l.map((c,h)=>{const x=c.icon;return e.jsxs("div",{className:"flex items-start gap-3 group hover:bg-muted/50 p-2 rounded-lg transition-colors",children:[e.jsx("div",{className:`p-2 rounded-lg ${c.bgColor} group-hover:scale-110 transition-transform`,children:e.jsx(x,{className:`h-4 w-4 ${c.color}`})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:c.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:c.description})]}),e.jsxs("div",{className:"text-right",children:[c.amount&&e.jsxs("p",{className:`font-semibold text-sm ${c.color}`,children:[c.type==="transaction"&&c.title.includes("Income")?"+":c.type==="transaction"?"-":"","£",c.amount.toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o(c.date)})]})]})})]},c.id)})}),!n&&l.length>=6&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(_,{variant:"ghost",size:"sm",onClick:()=>r(!0),className:"text-xs",children:[e.jsx(dr,{className:"h-3 w-3 mr-1"}),"Show More Activities"]})})]})},ib=()=>{const{debts:s}=he(),t=Js(),a=s.filter(c=>(c==null?void 0:c.remainingAmount)>0),n=a.reduce((c,h)=>c+((h==null?void 0:h.remainingAmount)||0),0),r=a.reduce((c,h)=>c+((h==null?void 0:h.totalAmount)||0),0),i=r>0?(r-n)/r*100:0,l=c=>{const h=new Date,d=new Date(c).getTime()-h.getTime();return Math.ceil(d/(1e3*60*60*24))},o=a.filter(c=>l(c.dueDate)<=7);return a.length===0?e.jsxs(L,{className:"p-6 text-center bg-gradient-to-br from-success/5 to-background border-success/20",children:[e.jsx(Mt,{className:"h-8 w-8 text-success mx-auto mb-2"}),e.jsx("h3",{className:"font-semibold text-success mb-1",children:"Debt Free! 🎉"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"You have no active debts"}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>t("/debts"),className:"border-success text-success hover:bg-success/10",children:"View Debt History"})]}):e.jsxs(L,{className:"p-6 hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-destructive/10 rounded-lg",children:e.jsx(Mt,{className:"h-5 w-5 text-destructive"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:"Active Debts"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.length," debt",a.length>1?"s":""," to pay off"]})]})]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>t("/debts"),className:"text-primary hover:bg-primary/10",children:e.jsx(Ps,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Debt Progress"}),e.jsxs("span",{className:"text-sm font-bold",children:[i.toFixed(1),"%"]})]}),e.jsx(Te,{value:i,className:"h-2 [&>div]:bg-success"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{children:["Paid: £",(r-n).toFixed(0)]}),e.jsxs("span",{children:["Remaining: £",n.toFixed(0)]})]})]}),o.length>0&&e.jsxs("div",{className:"mb-4 p-3 bg-destructive/5 border border-destructive/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ze,{className:"h-4 w-4 text-destructive"}),e.jsxs("span",{className:"font-semibold text-sm text-destructive",children:[o.length," payment",o.length>1?"s":""," due soon"]})]}),o.slice(0,2).map(c=>{const h=l(c.dueDate);return e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:c.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",children:["£",(c.minimumPayment||0).toFixed(0)]}),e.jsx(K,{variant:"destructive",className:"text-xs",children:h<=0?"Overdue":`${h}d`})]})]},c.id)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm text-muted-foreground",children:"Largest Debts"}),a.sort((c,h)=>h.remainingAmount-c.remainingAmount).slice(0,3).map(c=>{const h=(c.totalAmount-c.remainingAmount)/c.totalAmount*100,x=l(c.dueDate);return e.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:c.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Debt"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-sm text-destructive",children:["£",c.remainingAmount.toFixed(0)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Fe,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:`text-xs ${x<=7?"text-destructive":"text-muted-foreground"}`,children:x<=0?"Overdue":`${x}d`})]})]})]}),e.jsx(Te,{value:h,className:"h-1.5 [&>div]:bg-success"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{children:[h.toFixed(0),"% paid off"]}),e.jsxs("span",{children:["Min: £",(c.minimumPayment||0).toFixed(0)]})]})]},c.id)})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-border grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-destructive",children:["£",n.toFixed(0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Remaining"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold",children:["£",a.reduce((c,h)=>c+(h.minimumPayment||0),0).toFixed(0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Monthly Payments"})]})]})]})},ob=()=>{const{goals:s}=he(),t=Js(),a=s.filter(h=>!h.isCompleted),n=s.filter(h=>h.isCompleted),r=a.reduce((h,x)=>h+x.targetAmount,0),i=a.reduce((h,x)=>h+x.currentAmount,0),l=r>0?i/r*100:0,o=h=>{const x=new Date,m=new Date(h).getTime()-x.getTime();return Math.ceil(m/(1e3*60*60*24))},c=a.filter(h=>{const x=o(h.deadline),d=h.currentAmount/h.targetAmount*100;return x<=30&&d<75});return s.length===0?e.jsxs(L,{className:"p-6 text-center",children:[e.jsx(je,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("h3",{className:"font-semibold mb-1",children:"No Goals Set"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Set financial goals to track your progress"}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>t("/goals"),children:"Create First Goal"})]}):e.jsxs(L,{className:"p-6 hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(je,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:"Financial Goals"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.length," active • ",n.length," completed"]})]})]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>t("/goals"),className:"text-primary hover:bg-primary/10",children:e.jsx(Ps,{className:"h-4 w-4"})})]}),a.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm font-bold text-primary",children:[l.toFixed(1),"%"]})]}),e.jsx(Te,{value:l,className:"h-2 [&>div]:bg-primary"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{children:["Saved: £",i.toFixed(0)]}),e.jsxs("span",{children:["Target: £",r.toFixed(0)]})]})]}),c.length>0&&e.jsxs("div",{className:"mb-4 p-3 bg-warning/5 border border-warning/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-warning"}),e.jsxs("span",{className:"font-semibold text-sm text-warning",children:[c.length," goal",c.length>1?"s":""," need attention"]})]}),c.slice(0,2).map(h=>{const x=o(h.deadline),d=h.currentAmount/h.targetAmount*100;return e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:h.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",children:[d.toFixed(0),"%"]}),e.jsx(K,{variant:"secondary",className:"text-xs bg-warning/20 text-warning",children:x<=0?"Overdue":`${x}d left`})]})]},h.id)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm text-muted-foreground",children:"Recent Goals"}),a.sort((h,x)=>x.currentAmount/x.targetAmount-h.currentAmount/h.targetAmount).slice(0,3).map(h=>{const x=h.currentAmount/h.targetAmount*100,d=o(h.deadline),m=x>=80;return e.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-medium text-sm",children:h.name}),m&&e.jsx(de,{className:"h-3 w-3 text-success"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:h.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-sm text-primary",children:["£",h.currentAmount.toFixed(0)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Fe,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:`text-xs ${d<=30?"text-warning":"text-muted-foreground"}`,children:d<=0?"Overdue":`${d}d`})]})]})]}),e.jsx(Te,{value:x,className:`h-1.5 ${x>=100?"[&>div]:bg-success":(x>=75,"[&>div]:bg-primary")}`}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{children:[x.toFixed(0),"% complete"]}),e.jsxs("span",{children:["Goal: £",h.targetAmount.toFixed(0)]})]})]},h.id)})]}),n.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-success flex items-center gap-1",children:[e.jsx(Ee,{className:"h-4 w-4"}),"Recently Completed"]}),e.jsxs(K,{variant:"outline",className:"text-xs border-success text-success",children:[n.length," goal",n.length>1?"s":""]})]}),n.slice(0,2).map(h=>e.jsxs("div",{className:"text-sm text-muted-foreground",children:["• ",h.name," - £",h.targetAmount.toFixed(0)," ✓"]},h.id))]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-border grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-primary",children:["£",i.toFixed(0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Saved"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold",children:["£",(r-i).toFixed(0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Left to Save"})]})]})]})},lb=()=>{const{transactions:s}=he(),t=Js(),[a]=u.useState({Petrol:300,Food:400,Other:500}),n=d=>s.filter(m=>m.category===d).reduce((m,g)=>m+g.amount,0),r=Object.entries(a).map(([d,m])=>{const g=n(d),y=g/m*100,p=m-g;let j="safe";return y>=100?j="danger":y>=75&&(j="warning"),{category:d,budget:m,spent:g,percentage:Math.min(y,100),remaining:p,status:j}}),i=Object.values(a).reduce((d,m)=>d+m,0),l=Object.keys(a).reduce((d,m)=>d+n(m),0),o=i-l,c=l/i*100,h=r.filter(d=>d.status==="danger"),x=r.filter(d=>d.status==="warning");return e.jsxs(L,{className:"p-6 hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(Ua,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:"Budget Tracker"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly spending overview"})]})]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>t("/budget"),className:"text-primary hover:bg-primary/10",children:e.jsx(Ps,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Overall Budget Usage"}),e.jsxs("span",{className:`text-sm font-bold ${c>=100?"text-destructive":c>=75?"text-warning":"text-success"}`,children:[c.toFixed(1),"%"]})]}),e.jsx(Te,{value:c,className:`h-2 ${c>=100?"[&>div]:bg-destructive":c>=75?"[&>div]:bg-warning":"[&>div]:bg-success"}`}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{children:["Spent: £",l.toFixed(0)]}),e.jsxs("span",{children:["Budget: £",i.toFixed(0)]})]})]}),(h.length>0||x.length>0)&&e.jsxs("div",{className:"mb-4 space-y-2",children:[h.length>0&&e.jsxs("div",{className:"p-3 bg-destructive/5 border border-destructive/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ze,{className:"h-4 w-4 text-destructive"}),e.jsxs("span",{className:"font-semibold text-sm text-destructive",children:[h.length," categor",h.length>1?"ies":"y"," over budget"]})]}),h.map(d=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:d.category}),e.jsxs("span",{className:"font-medium text-destructive",children:["£",Math.abs(d.remaining).toFixed(0)," over"]})]},d.category))]}),x.length>0&&e.jsxs("div",{className:"p-3 bg-warning/5 border border-warning/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(de,{className:"h-4 w-4 text-warning"}),e.jsxs("span",{className:"font-semibold text-sm text-warning",children:[x.length," categor",x.length>1?"ies":"y"," approaching limit"]})]}),x.map(d=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:d.category}),e.jsxs("span",{className:"font-medium text-warning",children:[d.percentage.toFixed(0),"% used"]})]},d.category))]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm text-muted-foreground",children:"Category Breakdown"}),r.map(d=>{const m=()=>{switch(d.status){case"danger":return e.jsx(Ze,{className:"h-3 w-3 text-destructive"});case"warning":return e.jsx(de,{className:"h-3 w-3 text-warning"});default:return e.jsx(Ee,{className:"h-3 w-3 text-success"})}},g=()=>{switch(d.status){case"danger":return"text-destructive";case"warning":return"text-warning";default:return"text-success"}};return e.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[m(),e.jsx("span",{className:"font-medium text-sm",children:d.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-sm",children:["£",d.spent.toFixed(0)]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["of £",d.budget]})]})]}),e.jsx(Te,{value:d.percentage,className:`h-1.5 mb-1 ${d.status==="danger"?"[&>div]:bg-destructive":d.status==="warning"?"[&>div]:bg-warning":"[&>div]:bg-success"}`}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:g(),children:[d.percentage.toFixed(0),"% used"]}),e.jsx("span",{className:d.remaining>=0?"text-muted-foreground":"text-destructive",children:d.remaining>=0?`£${d.remaining.toFixed(0)} left`:`£${Math.abs(d.remaining).toFixed(0)} over`})]})]},d.category)})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-border grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold",children:["£",i.toFixed(0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Budget"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:`text-lg font-bold ${l>i?"text-destructive":"text-primary"}`,children:["£",l.toFixed(0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Spent"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:`text-lg font-bold ${o>=0?"text-success":"text-destructive"}`,children:["£",Math.abs(o).toFixed(0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o>=0?"Remaining":"Over Budget"})]})]})]})},sm=({onFiltersChange:s,showTimeRange:t=!0,showCategories:a=!0,showAmountRange:n=!0,compact:r=!1})=>{const{transactions:i,categoryFilter:l,setCategoryFilter:o}=he(),[c,h]=u.useState({timeRange:"30d",categories:[],amountRange:{min:0,max:1e4},transactionType:"all"}),[x,d]=u.useState(!1),m=[{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 3 months"},{value:"1y",label:"Last year"},{value:"custom",label:"Custom range"}],g=[{value:"Earnings",label:"Earnings",icon:de,color:"text-success"},{value:"Petrol",label:"Petrol",icon:Pn,color:"text-warning"},{value:"Food",label:"Food",icon:Rn,color:"text-destructive"},{value:"Other",label:"Other",icon:Va,color:"text-muted-foreground"}],y=f=>{const S={...c,...f};h(S),s==null||s(S)},p=f=>{const S=c.categories.includes(f)?c.categories.filter(D=>D!==f):[...c.categories,f];y({categories:S})},j=()=>{const f={timeRange:"30d",categories:[],amountRange:{min:0,max:1e4},transactionType:"all"};h(f),o==null||o(null),s==null||s(f)},N=(()=>{let f=0;return c.timeRange!=="30d"&&f++,c.categories.length>0&&f++,c.transactionType!=="all"&&f++,(c.amountRange.min>0||c.amountRange.max<1e4)&&f++,f})();return r?e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(Es,{children:[e.jsx(Ms,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",className:"relative",children:[e.jsx(ur,{className:"h-4 w-4 mr-2"}),"Filters",N>0&&e.jsx(K,{variant:"secondary",className:"ml-2 h-5 w-5 p-0 flex items-center justify-center text-xs",children:N})]})}),e.jsx(bs,{className:"w-80 p-4",align:"start",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold",children:"Filters"}),N>0&&e.jsxs(_,{variant:"ghost",size:"sm",onClick:j,children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),"Clear"]})]}),t&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Time Range"}),e.jsxs(Re,{value:c.timeRange,onValueChange:f=>y({timeRange:f}),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsx(Pe,{children:m.map(f=>e.jsx(J,{value:f.value,children:f.label},f.value))})]})]}),a&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(f=>{const S=f.icon,D=c.categories.includes(f.value);return e.jsxs(_,{variant:D?"default":"outline",size:"sm",onClick:()=>p(f.value),className:"text-xs",children:[e.jsx(S,{className:"h-3 w-3 mr-1"}),f.label]},f.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Transaction Type"}),e.jsx("div",{className:"flex gap-2",children:[{value:"all",label:"All",icon:ht},{value:"income",label:"Income",icon:de},{value:"expense",label:"Expense",icon:We}].map(f=>{const S=f.icon;return e.jsxs(_,{variant:c.transactionType===f.value?"default":"outline",size:"sm",onClick:()=>y({transactionType:f.value}),className:"flex-1 text-xs",children:[e.jsx(S,{className:"h-3 w-3 mr-1"}),f.label]},f.value)})})]})]})})]}),c.categories.map(f=>e.jsxs(K,{variant:"secondary",className:"text-xs",children:[f,e.jsx(_,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-1 hover:bg-transparent",onClick:()=>p(f),children:e.jsx(ut,{className:"h-3 w-3"})})]},f))]}):e.jsxs(L,{className:"p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ur,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Data Filters"}),N>0&&e.jsxs(K,{variant:"secondary",children:[N," active"]})]}),N>0&&e.jsxs(_,{variant:"outline",size:"sm",onClick:j,children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Clear All"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Time Range"}),e.jsxs(Re,{value:c.timeRange,onValueChange:f=>y({timeRange:f}),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsx(Pe,{children:m.map(f=>e.jsx(J,{value:f.value,children:f.label},f.value))})]}),c.timeRange==="custom"&&e.jsxs(Es,{open:x,onOpenChange:d,children:[e.jsx(Ms,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:"w-full mt-2 text-xs",children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),c.customStartDate&&c.customEndDate?`${ce(c.customStartDate,"MMM d")} - ${ce(c.customEndDate,"MMM d")}`:"Select dates"]})}),e.jsx(bs,{className:"w-auto p-0",align:"start",children:e.jsx($n,{mode:"range",selected:{from:c.customStartDate,to:c.customEndDate},onSelect:f=>{y({customStartDate:f==null?void 0:f.from,customEndDate:f==null?void 0:f.to})},numberOfMonths:2})})]})]}),a&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Categories"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:g.map(f=>{const S=f.icon,D=c.categories.includes(f.value);return e.jsxs(_,{variant:D?"default":"outline",size:"sm",onClick:()=>p(f.value),className:"text-xs h-8",children:[e.jsx(S,{className:"h-3 w-3 mr-1"}),f.label]},f.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Transaction Type"}),e.jsx("div",{className:"space-y-1",children:[{value:"all",label:"All Transactions",icon:ht},{value:"income",label:"Income Only",icon:de},{value:"expense",label:"Expenses Only",icon:We}].map(f=>{const S=f.icon;return e.jsxs(_,{variant:c.transactionType===f.value?"default":"outline",size:"sm",onClick:()=>y({transactionType:f.value}),className:"w-full justify-start text-xs h-8",children:[e.jsx(S,{className:"h-3 w-3 mr-2"}),f.label]},f.value)})})]})]})]})},cb=({children:s,className:t,enableGridToggle:a=!1,enableDevicePreview:n=!1})=>{const[r,i]=u.useState(2),[l,o]=u.useState(!1),[c,h]=u.useState("desktop"),[x,d]=u.useState(!1);u.useEffect(()=>{const y=()=>{d(window.innerWidth<768),window.innerWidth<768&&i(1)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]);const m=()=>{const y="grid gap-4 lg:gap-6";switch(r){case 1:return`${y} grid-cols-1`;case 2:return`${y} grid-cols-1 lg:grid-cols-2`;case 3:return`${y} grid-cols-1 md:grid-cols-2 xl:grid-cols-3`;case 4:return`${y} grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4`;default:return`${y} grid-cols-1 lg:grid-cols-2`}},g=()=>{switch(c){case"mobile":return"max-w-sm mx-auto";case"tablet":return"max-w-4xl mx-auto";default:return"w-full"}};return e.jsxs("div",{className:G("space-y-6",t),children:[(a||n)&&!x&&e.jsx(L,{className:"p-3 bg-muted/20 border-dashed",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[a&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Layout:"}),e.jsx("div",{className:"flex bg-background rounded-lg p-1 border",children:[{size:1,icon:lp,label:"Single Column"},{size:2,icon:Og,label:"Two Columns"},{size:3,icon:Fg,label:"Three Columns"},{size:4,icon:Hg,label:"Four Columns"}].map(({size:y,icon:p,label:j})=>e.jsxs(_,{variant:r===y?"secondary":"ghost",size:"sm",onClick:()=>i(y),className:"h-8 px-2 min-w-[2.5rem]",disabled:x&&y>1,title:j,children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-1 hidden lg:inline text-xs",children:y})]},y))})]}),n&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Preview:"}),e.jsx("div",{className:"flex bg-background rounded-lg p-1 border",children:[{type:"mobile",icon:Bi,label:"Mobile"},{type:"tablet",icon:dp,label:"Tablet"},{type:"desktop",icon:ud,label:"Desktop"}].map(({type:y,icon:p,label:j})=>e.jsxs(_,{variant:c===y?"secondary":"ghost",size:"sm",onClick:()=>h(y),className:"h-8 px-2",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-1 hidden sm:inline text-xs",children:j})]},y))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(K,{variant:"outline",className:"text-xs",children:[r===1?"Single":r===2?"Two":r===3?"Three":"Four"," column",r>1?"s":""," • ",c]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>o(!l),className:"h-8 w-8 p-0",children:l?e.jsx(hr,{className:"h-4 w-4"}):e.jsx(Co,{className:"h-4 w-4"})})]})]})}),!l&&e.jsx("div",{className:G(g(),"transition-all duration-300"),children:e.jsx("div",{className:m(),style:{display:"grid",gridTemplateColumns:r===1?"1fr":"repeat(auto-fit, minmax(min(320px, 100%), 1fr))",gap:"clamp(1rem, 4vw, 1.5rem)"},children:s})}),x&&e.jsx(L,{className:"p-3 bg-primary/5 border-primary/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Bi,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-primary font-medium",children:"Mobile optimized view"}),e.jsx(K,{variant:"secondary",className:"text-xs ml-auto",children:"Single column layout"})]})})]})},Kl=({children:s,columns:t={sm:1,md:2,lg:3,xl:4},gap:a=6,className:n,minWidth:r="300px"})=>{const i=["grid",`gap-${a}`,t.sm===1?"grid-cols-1":"",t.md&&t.md>1?`md:grid-cols-[repeat(auto-fit,minmax(${r},1fr))]`:"",`grid-cols-${t.sm||1}`,t.md&&`md:grid-cols-${Math.min(t.md,2)}`,t.lg&&`lg:grid-cols-${Math.min(t.lg,3)}`,t.xl&&`xl:grid-cols-${Math.min(t.xl,4)}`].filter(Boolean).join(" ");return e.jsx("div",{className:G(i,n),style:{display:"grid",gridTemplateColumns:t.sm===1?"1fr":`repeat(auto-fit, minmax(min(${r}, 100%), 1fr))`,gap:`${a*.25}rem`},children:s})},db=()=>{const{transactions:s,goals:t,debts:a,recurringTransactions:n}=he(),r=s.length===0&&t.length===0&&a.length===0,i=new Date().toISOString().split("T")[0],l=s.filter(o=>o.date===i);return l.filter(o=>o.category==="Earnings").reduce((o,c)=>o+c.amount,0),l.filter(o=>o.category!=="Earnings").reduce((o,c)=>o+Math.abs(c.amount),0),n.slice(0,3),e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:r?"Welcome to MoneyLens! 👋":"Daily Financial Operations"}),e.jsx("p",{className:"text-muted-foreground",children:r?"Let's get started with your financial journey":"Your daily financial command center"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z0,{}),e.jsx("div",{"data-add-transaction":!0,children:e.jsx(tm,{})})]})]}),e.jsx(tb,{}),e.jsx(eb,{}),e.jsx(sb,{}),e.jsx(K0,{}),e.jsx(nb,{}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx(ib,{}),e.jsx(ob,{}),e.jsx(lb,{})]}),e.jsx(sm,{compact:!0}),e.jsx(cb,{enableGridToggle:!0,enableDevicePreview:!1,children:e.jsxs(Kl,{columns:{sm:1,lg:2},gap:6,minWidth:"350px",children:[e.jsx(J0,{}),e.jsx(Q0,{})]})}),e.jsxs(Kl,{columns:{sm:1,md:2},gap:6,minWidth:"280px",children:[e.jsx(X0,{}),e.jsx(rb,{})]}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(ab,{})})]})},ub=({className:s})=>{const{dailyData:t,transactions:a,recurringTransactions:n,goals:r,currency:i}=he(),[l,o]=u.useState("30d"),[c,h]=u.useState("area"),[x,d]=u.useState("overview"),m=u.useMemo(()=>{const f=new Date;let S;switch(l){case"7d":S=Je(f,7);break;case"30d":S=Je(f,30);break;case"90d":S=Je(f,90);break;case"1y":S=Je(f,365);break;default:S=Je(f,30)}return{start:S,end:f}},[l]),g=f=>{if(f.length<2)return 0;const S=f.reduce((w,R)=>w+R,0)/f.length,D=f.reduce((w,R)=>w+Math.pow(R-S,2),0)/f.length;return Math.sqrt(D)},y=u.useMemo(()=>{const f=a.filter(C=>{const B=_e(C.date);return ma(B,m)}),S=f.filter(C=>C.category==="Earnings"),D=f.filter(C=>C.category!=="Earnings"),w=S.reduce((C,B)=>C+B.amount,0),R=D.reduce((C,B)=>C+B.amount,0),b=w-R,k=D.reduce((C,B)=>(C[B.category]=(C[B.category]||0)+B.amount,C),{}),T=$r(m).map(C=>{const B=ce(C,"yyyy-MM-dd"),E=f.filter(H=>H.date===B),V=E.filter(H=>H.category==="Earnings").reduce((H,Z)=>H+Z.amount,0),U=E.filter(H=>H.category!=="Earnings").reduce((H,Z)=>H+Z.amount,0);return{date:ce(C,"MMM dd"),fullDate:B,earnings:V,expenses:U,net:V-U,count:E.length}}),F=f.reduce((C,B)=>{const E=ce(_e(B.date),"EEEE");return C[E]||(C[E]={count:0,amount:0}),C[E].count+=1,C[E].amount+=Math.abs(B.amount),C},{}),O=dg({start:ug(m.end,11),end:m.end}).map(C=>{const B=mt(C),E=Ys(C),V=a.filter(Z=>{const ee=_e(Z.date);return ma(ee,{start:B,end:E})}),U=V.filter(Z=>Z.category==="Earnings").reduce((Z,ee)=>Z+ee.amount,0),H=V.filter(Z=>Z.category!=="Earnings").reduce((Z,ee)=>Z+ee.amount,0);return{month:ce(C,"MMM yyyy"),earnings:U,expenses:H,net:U-H,transactions:V.length}}),q=T.map((C,B)=>{if(B===0)return{...C,velocity:0};const E=T[B-1],V=C.expenses-E.expenses;return{...C,velocity:V}}),P=w/T.length,A=R/T.length,$=w>0?(w-R)/w*100:0,M=g(T.map(C=>C.expenses)),z=D.length>0?R/D.length:0,I=Object.entries(k).map(([C,B])=>{const E=D.filter(H=>H.category===C),V=B/E.length,U=E.length;return{category:C,amount:B,frequency:U,avgAmount:V,efficiency:U>0?B/U:0}});return{totalTransactions:f.length,totalEarnings:w,totalExpenses:R,netAmount:b,categoryBreakdown:k,dailyTrends:T,weeklyPattern:F,monthlyData:O,spendingVelocity:q,avgDailyIncome:P,avgDailyExpenses:A,savingsRate:$,expenseVolatility:M,avgExpensePerTransaction:z,categoryEfficiency:I,timeRange:`${ce(m.start,"MMM dd")} - ${ce(m.end,"MMM dd")}`}},[a,m,l]),p=Object.entries(y.categoryBreakdown).map(([f,S])=>({name:f,value:S,color:f==="Food"?"hsl(var(--chart-1))":f==="Petrol"?"hsl(var(--chart-2))":f==="Other"?"hsl(var(--chart-3))":"hsl(var(--chart-4))"})),j=Object.entries(y.weeklyPattern).map(([f,S])=>({day:f.substring(0,3),transactions:S.count,amount:S.amount})),v=y.categoryEfficiency.map(f=>({category:f.category,efficiency:f.efficiency,frequency:f.frequency,amount:f.amount})),N=()=>{const f=c==="line"?rr:c==="area"?Ea:ua;return e.jsx(Tt,{width:"100%",height:400,children:e.jsxs(f,{data:y.dailyTrends,children:[e.jsx(wt,{strokeDasharray:"3 3",className:"stroke-border"}),e.jsx(St,{dataKey:"date"}),e.jsx(gt,{}),e.jsx(st,{formatter:(S,D)=>[`${i}${Number(S).toFixed(2)}`,D],labelFormatter:S=>`Date: ${S}`}),e.jsx(dn,{}),c==="line"?e.jsxs(e.Fragment,{children:[e.jsx(is,{type:"monotone",dataKey:"earnings",stroke:"hsl(var(--success))",name:"Earnings",strokeWidth:2}),e.jsx(is,{type:"monotone",dataKey:"expenses",stroke:"hsl(var(--destructive))",name:"Expenses",strokeWidth:2}),e.jsx(is,{type:"monotone",dataKey:"net",stroke:"hsl(var(--primary))",name:"Net",strokeWidth:2})]}):c==="area"?e.jsxs(e.Fragment,{children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"earningsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--success))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--success))",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"expensesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--destructive))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--destructive))",stopOpacity:.1})]})]}),e.jsx(sa,{type:"monotone",dataKey:"earnings",stroke:"hsl(var(--success))",fill:"url(#earningsGradient)",name:"Earnings"}),e.jsx(sa,{type:"monotone",dataKey:"expenses",stroke:"hsl(var(--destructive))",fill:"url(#expensesGradient)",name:"Expenses"})]}):e.jsxs(e.Fragment,{children:[e.jsx(pt,{dataKey:"earnings",fill:"hsl(var(--success))",name:"Earnings"}),e.jsx(pt,{dataKey:"expenses",fill:"hsl(var(--destructive))",name:"Expenses"})]})]})})};return e.jsxs("div",{className:`space-y-6 ${s}`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Advanced Analytics"}),e.jsxs("p",{className:"text-muted-foreground",children:["Deep insights for ",y.timeRange," • ",y.totalTransactions," transactions"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Re,{value:l,onValueChange:f=>o(f),children:[e.jsx(Me,{className:"w-24",children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"7d",children:"7 Days"}),e.jsx(J,{value:"30d",children:"30 Days"}),e.jsx(J,{value:"90d",children:"90 Days"}),e.jsx(J,{value:"1y",children:"1 Year"})]})]}),e.jsxs(Re,{value:c,onValueChange:f=>h(f),children:[e.jsx(Me,{className:"w-20",children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"line",children:"Line"}),e.jsx(J,{value:"area",children:"Area"}),e.jsx(J,{value:"bar",children:"Bar"})]})]}),e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-4",children:[e.jsx(L,{className:"p-4 bg-gradient-success text-success-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(de,{className:"h-6 w-6 mx-auto mb-2"}),e.jsxs("p",{className:"text-lg font-bold",children:[i,y.totalEarnings.toFixed(0)]}),e.jsx("p",{className:"text-xs opacity-90",children:"Total Income"})]})}),e.jsx(L,{className:"p-4 border-destructive/20 bg-destructive/5",children:e.jsxs("div",{className:"text-center",children:[e.jsx(We,{className:"h-6 w-6 mx-auto mb-2 text-destructive"}),e.jsxs("p",{className:"text-lg font-bold text-destructive",children:[i,y.totalExpenses.toFixed(0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Expenses"})]})}),e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(je,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),e.jsxs("p",{className:`text-lg font-bold ${y.netAmount>=0?"text-success":"text-destructive"}`,children:[y.netAmount>=0?"+":"",i,y.netAmount.toFixed(0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Net Amount"})]})}),e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ko,{className:"h-6 w-6 mx-auto mb-2 text-accent"}),e.jsxs("p",{className:`text-lg font-bold ${y.savingsRate>=0?"text-success":"text-destructive"}`,children:[y.savingsRate.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Savings Rate"})]})}),e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Sg,{className:"h-6 w-6 mx-auto mb-2 text-warning"}),e.jsxs("p",{className:"text-lg font-bold text-warning",children:[i,y.expenseVolatility.toFixed(0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Volatility"})]})}),e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ad,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),e.jsxs("p",{className:"text-lg font-bold",children:[i,y.avgExpensePerTransaction.toFixed(0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg/Transaction"})]})})]}),e.jsxs(Xt,{value:x,onValueChange:d,children:[e.jsxs(Bt,{className:"grid w-full grid-cols-4",children:[e.jsx($e,{value:"overview",children:"Overview"}),e.jsx($e,{value:"trends",children:"Trends"}),e.jsx($e,{value:"patterns",children:"Patterns"}),e.jsx($e,{value:"efficiency",children:"Efficiency"})]}),e.jsx(Le,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(L,{className:"p-6 lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Financial Trends"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:c==="line"?"default":"outline",size:"sm",onClick:()=>h("line"),children:e.jsx(No,{className:"h-4 w-4"})}),e.jsx(_,{variant:c==="area"?"default":"outline",size:"sm",onClick:()=>h("area"),children:e.jsx(Ea,{className:"h-4 w-4"})}),e.jsx(_,{variant:c==="bar"?"default":"outline",size:"sm",onClick:()=>h("bar"),children:e.jsx(tt,{className:"h-4 w-4"})})]})]}),N()]}),e.jsxs(L,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Expense Categories"}),e.jsx("div",{className:"h-64",children:e.jsx(Tt,{width:"100%",height:"100%",children:e.jsxs(Ir,{children:[e.jsx(Or,{data:p,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:f,percent:S})=>`${f}: ${(S*100).toFixed(0)}%`,children:p.map((f,S)=>e.jsx(Fr,{fill:f.color},`cell-${S}`))}),e.jsx(st,{formatter:f=>[`${i}${f.toFixed(2)}`,"Amount"]})]})})})]}),e.jsxs(L,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Weekly Activity"}),e.jsx("div",{className:"h-64",children:e.jsx(Tt,{width:"100%",height:"100%",children:e.jsxs(ua,{data:j,children:[e.jsx(wt,{strokeDasharray:"3 3"}),e.jsx(St,{dataKey:"day"}),e.jsx(gt,{}),e.jsx(st,{}),e.jsx(pt,{dataKey:"transactions",fill:"hsl(var(--primary))",name:"Transactions"})]})})})]})]})}),e.jsx(Le,{value:"trends",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(L,{className:"p-6 lg:col-span-2",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Monthly Comparison"}),e.jsx("div",{className:"h-80",children:e.jsx(Tt,{width:"100%",height:"100%",children:e.jsxs(Ea,{data:y.monthlyData,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"netGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:.1})]})}),e.jsx(wt,{strokeDasharray:"3 3"}),e.jsx(St,{dataKey:"month"}),e.jsx(gt,{}),e.jsx(st,{}),e.jsx(sa,{type:"monotone",dataKey:"net",stroke:"hsl(var(--primary))",fill:"url(#netGradient)",name:"Net Amount"}),e.jsx(is,{type:"monotone",dataKey:"earnings",stroke:"hsl(var(--success))",name:"Earnings"}),e.jsx(is,{type:"monotone",dataKey:"expenses",stroke:"hsl(var(--destructive))",name:"Expenses"})]})})})]}),e.jsxs(L,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Spending Velocity"}),e.jsx("div",{className:"h-64",children:e.jsx(Tt,{width:"100%",height:"100%",children:e.jsxs(rr,{data:y.spendingVelocity,children:[e.jsx(wt,{strokeDasharray:"3 3"}),e.jsx(St,{dataKey:"date"}),e.jsx(gt,{}),e.jsx(st,{}),e.jsx(is,{type:"monotone",dataKey:"velocity",stroke:"hsl(var(--warning))",name:"Velocity",strokeWidth:2})]})})})]}),e.jsxs(L,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Cumulative Progress"}),e.jsx("div",{className:"h-64",children:e.jsx(Tt,{width:"100%",height:"100%",children:e.jsxs(Ea,{data:y.dailyTrends.map((f,S)=>({...f,cumulative:y.dailyTrends.slice(0,S+1).reduce((D,w)=>D+w.net,0)})),children:[e.jsx(wt,{strokeDasharray:"3 3"}),e.jsx(St,{dataKey:"date"}),e.jsx(gt,{}),e.jsx(st,{}),e.jsx(sa,{type:"monotone",dataKey:"cumulative",stroke:"hsl(var(--accent))",fill:"hsl(var(--accent) / 0.2)",name:"Cumulative Net"})]})})})]})]})}),e.jsx(Le,{value:"patterns",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(L,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Activity Heatmap"}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(f=>e.jsx("div",{className:"text-center text-xs font-medium p-2",children:f},f)),Array.from({length:28},(f,S)=>{const D=Math.random();return e.jsx("div",{className:`h-8 rounded ${D>.7?"bg-success":D>.4?"bg-warning":D>.2?"bg-primary/50":"bg-muted"}`,title:`Day ${S+1}: ${Math.floor(D*100)}% activity`},S)})]})]}),e.jsxs(L,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Spending Distribution"}),e.jsx("div",{className:"space-y-4",children:Object.entries(y.categoryBreakdown).map(([f,S])=>{const D=S/y.totalExpenses*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"font-medium",children:f}),e.jsxs("span",{children:[i,S.toFixed(0)," (",D.toFixed(1),"%)"]})]}),e.jsx(Te,{value:D,className:"h-2"})]},f)})})]})]})}),e.jsx(Le,{value:"efficiency",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(L,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Category Efficiency Analysis"}),e.jsx("div",{className:"h-80",children:e.jsx(Tt,{width:"100%",height:"100%",children:e.jsxs(Jx,{data:v,children:[e.jsx(wt,{strokeDasharray:"3 3"}),e.jsx(St,{dataKey:"frequency",name:"Frequency"}),e.jsx(gt,{dataKey:"amount",name:"Total Amount"}),e.jsx(st,{formatter:(f,S)=>[S==="amount"?`${i}${f.toFixed(2)}`:f,S==="amount"?"Total Amount":"Frequency"],labelFormatter:f=>`Category: ${f}`}),e.jsx(Zx,{dataKey:"amount",fill:"hsl(var(--primary))"})]})})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:`text-4xl font-bold ${y.savingsRate>20?"text-success":y.savingsRate>0?"text-warning":"text-destructive"}`,children:Math.max(0,Math.min(100,Math.round(y.savingsRate+50))).toFixed(0)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Health Score"})]}),e.jsx(Te,{value:Math.max(0,Math.min(100,y.savingsRate+50)),className:"h-2"})]})}),e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Be,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:y.categoryEfficiency.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Categories"})]})}),e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(xn,{className:"h-8 w-8 mx-auto mb-2 text-accent"}),e.jsx("p",{className:"text-2xl font-bold",children:(y.totalTransactions/(l==="7d"?7:l==="30d"?30:l==="90d"?90:365)).toFixed(1)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Daily Transactions"})]})})]})]})})]})]})},am=({filteredTransactions:s,timeRange:t})=>{he();const[a,n]=u.useState("overview"),[r,i]=u.useState(!1),l=u.useMemo(()=>{if(!s.length)return null;const d=s.length,m=s.filter(w=>w.category==="Earnings"),g=s.filter(w=>w.category!=="Earnings"),y=m.reduce((w,R)=>w+R.amount,0),p=g.reduce((w,R)=>w+R.amount,0),j=y-p,v=s.reduce((w,R)=>w+Math.abs(R.amount),0)/d,N=p/30,f=s.reduce((w,R)=>(w[R.category]=(w[R.category]||0)+Math.abs(R.amount),w),{}),S=$r({start:Je(new Date,30),end:new Date}).map(w=>{const R=s.filter(T=>ce(_e(T.date),"yyyy-MM-dd")===ce(w,"yyyy-MM-dd")),b=R.filter(T=>T.category==="Earnings").reduce((T,F)=>T+F.amount,0),k=R.filter(T=>T.category!=="Earnings").reduce((T,F)=>T+F.amount,0);return{date:ce(w,"MMM dd"),earnings:b,expenses:k,net:b-k,count:R.length}}),D=s.reduce((w,R)=>{const b=ce(_e(R.date),"EEEE");return w[b]||(w[b]={count:0,amount:0}),w[b].count+=1,w[b].amount+=Math.abs(R.amount),w},{});return{totalTransactions:d,totalEarnings:y,totalExpenses:p,netAmount:j,avgTransactionAmount:v,avgDailySpending:N,categoryTotals:f,dailyTrends:S,weeklyPattern:D,savingsRate:y>0?(y-p)/y*100:0}},[s]);if(!l)return null;const o=Object.entries(l.categoryTotals).map(([d,m])=>({name:d,value:m,color:d==="Earnings"?"hsl(var(--success))":d==="Petrol"?"hsl(var(--warning))":d==="Food"?"hsl(var(--destructive))":"hsl(var(--muted-foreground))"})),c=Object.entries(l.weeklyPattern).map(([d,m])=>({day:d.substring(0,3),count:m.count,amount:m.amount})),h=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-primary/5 rounded-lg",children:[e.jsx(ht,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:l.totalTransactions}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Transactions"})]}),e.jsxs("div",{className:"text-center p-4 bg-success/5 rounded-lg",children:[e.jsx(de,{className:"h-8 w-8 text-success mx-auto mb-2"}),e.jsxs("p",{className:"text-2xl font-bold text-success",children:["£",l.totalEarnings.toFixed(0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Income"})]}),e.jsxs("div",{className:"text-center p-4 bg-destructive/5 rounded-lg",children:[e.jsx(We,{className:"h-8 w-8 text-destructive mx-auto mb-2"}),e.jsxs("p",{className:"text-2xl font-bold text-destructive",children:["£",l.totalExpenses.toFixed(0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Expenses"})]}),e.jsxs("div",{className:"text-center p-4 bg-accent/5 rounded-lg",children:[e.jsx(je,{className:"h-8 w-8 text-accent mx-auto mb-2"}),e.jsxs("p",{className:`text-2xl font-bold ${l.netAmount>=0?"text-success":"text-destructive"}`,children:[l.netAmount>=0?"+":"","£",l.netAmount.toFixed(0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Net Amount"})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-primary/5 to-success/5 rounded-lg border border-primary/20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Savings Rate"}),e.jsxs(K,{variant:l.savingsRate>20?"default":l.savingsRate>0?"secondary":"destructive",children:[l.savingsRate.toFixed(1),"%"]})]}),e.jsx(Te,{value:Math.max(0,l.savingsRate),className:"h-3"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:l.savingsRate>20?"Excellent savings rate!":l.savingsRate>0?"Good progress, try to save more":"Consider reducing expenses"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Spending by Category"}),e.jsx("div",{className:"h-64",children:e.jsx(Tt,{width:"100%",height:"100%",children:e.jsxs(Ir,{children:[e.jsx(Or,{data:o.filter(d=>d.name!=="Earnings"),cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:d,percent:m})=>`${d}: ${(m*100).toFixed(0)}%`,children:o.map((d,m)=>e.jsx(Fr,{fill:d.color},`cell-${m}`))}),e.jsx(st,{formatter:d=>[`£${d.toFixed(2)}`,"Amount"]})]})})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Weekly Activity Pattern"}),e.jsx("div",{className:"h-64",children:e.jsx(Tt,{width:"100%",height:"100%",children:e.jsxs(ua,{data:c,children:[e.jsx(wt,{strokeDasharray:"3 3"}),e.jsx(St,{dataKey:"day"}),e.jsx(gt,{}),e.jsx(st,{}),e.jsx(pt,{dataKey:"count",fill:"hsl(var(--primary))",name:"Transactions"})]})})})]})]})]}),x=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"h-80",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"30-Day Financial Trend"}),e.jsx(Tt,{width:"100%",height:"100%",children:e.jsxs(Ea,{data:l.dailyTrends,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"earningsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--success))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--success))",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"expensesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--destructive))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--destructive))",stopOpacity:.1})]})]}),e.jsx(wt,{strokeDasharray:"3 3"}),e.jsx(St,{dataKey:"date"}),e.jsx(gt,{}),e.jsx(st,{}),e.jsx(sa,{type:"monotone",dataKey:"earnings",stroke:"hsl(var(--success))",fill:"url(#earningsGradient)",name:"Earnings"}),e.jsx(sa,{type:"monotone",dataKey:"expenses",stroke:"hsl(var(--destructive))",fill:"url(#expensesGradient)",name:"Expenses"})]})})]})});return e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"Transaction Analytics"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Insights from ",l.totalTransactions," transactions"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex bg-muted rounded-lg p-1",children:[{type:"overview",icon:tt,label:"Overview"},{type:"trends",icon:No,label:"Trends"}].map(({type:d,icon:m,label:g})=>e.jsxs(_,{variant:a===d?"secondary":"ghost",size:"sm",onClick:()=>n(d),className:"h-8 px-3",children:[e.jsx(m,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"text-xs",children:g})]},d))}),e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>i(!r),children:e.jsx(Qt,{className:"h-4 w-4"})})]})]}),a==="overview"&&h(),a==="trends"&&x()]})},mb=()=>{const{transactions:s,dailyData:t}=he();return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Deep insights and predictions from your financial data"})]})}),e.jsx(ub,{}),e.jsx(am,{filteredTransactions:s,timeRange:"30d"})]})},Ga=()=>{const[s,t]=u.useState(!1),[a,n]=u.useState({date:new Date().toISOString().split("T")[0],category:"",amount:"",week:"W4"}),{addTransaction:r}=he(),{toast:i}=Ue(),l=o=>{if(o.preventDefault(),!a.category||!a.amount||!a.date){i({title:"Error",description:"Please fill in all fields",variant:"destructive"});return}r({date:a.date,category:a.category,amount:parseFloat(a.amount),week:a.week}),i({title:"Success",description:"Transaction added successfully"}),n({date:new Date().toISOString().split("T")[0],category:"",amount:"",week:"W4"}),t(!1)};return e.jsxs(dt,{open:s,onOpenChange:t,children:[e.jsx(Ft,{asChild:!0,children:e.jsxs(_,{className:"gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Add Transaction"]})}),e.jsxs(at,{className:"sm:max-w-[425px]",children:[e.jsx(nt,{children:e.jsx(rt,{children:"Add New Transaction"})}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"date",children:"Date"}),e.jsx(ae,{id:"date",type:"date",value:a.date,onChange:o=>n(c=>({...c,date:o.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"category",children:"Category"}),e.jsx(wn,{value:a.category,onCategorySelect:o=>n(c=>({...c,category:o||""})),showCreateNew:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"amount",children:"Amount (£)"}),e.jsx(ae,{id:"amount",type:"number",step:"0.01",placeholder:"0.00",value:a.amount,onChange:o=>n(c=>({...c,amount:o.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"week",children:"Week"}),e.jsxs(Re,{value:a.week,onValueChange:o=>n(c=>({...c,week:o})),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"W1",children:"W1"}),e.jsx(J,{value:"W2",children:"W2"}),e.jsx(J,{value:"W3",children:"W3"}),e.jsx(J,{value:"W4",children:"W4"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsx(_,{type:"submit",children:"Add Transaction"})]})]})]})]})};var Ql=1,hb=.9,xb=.8,gb=.17,ki=.1,Di=.999,pb=.9999,fb=.99,vb=/[\\\/_+.#"@\[\(\{&]/,yb=/[\\\/_+.#"@\[\(\{&]/g,jb=/[\s-]/,nm=/[\s-]/g;function to(s,t,a,n,r,i,l){if(i===t.length)return r===s.length?Ql:fb;var o=`${r},${i}`;if(l[o]!==void 0)return l[o];for(var c=n.charAt(i),h=a.indexOf(c,r),x=0,d,m,g,y;h>=0;)d=to(s,t,a,n,h+1,i+1,l),d>x&&(h===r?d*=Ql:vb.test(s.charAt(h-1))?(d*=xb,g=s.slice(r,h-1).match(yb),g&&r>0&&(d*=Math.pow(Di,g.length))):jb.test(s.charAt(h-1))?(d*=hb,y=s.slice(r,h-1).match(nm),y&&r>0&&(d*=Math.pow(Di,y.length))):(d*=gb,r>0&&(d*=Math.pow(Di,h-r))),s.charAt(h)!==t.charAt(i)&&(d*=pb)),(d<ki&&a.charAt(h-1)===n.charAt(i+1)||n.charAt(i+1)===n.charAt(i)&&a.charAt(h-1)!==n.charAt(i))&&(m=to(s,t,a,n,h+1,i+2,l),m*ki>d&&(d=m*ki)),d>x&&(x=d),h=a.indexOf(c,h+1);return l[o]=x,x}function Xl(s){return s.toLowerCase().replace(nm," ")}function bb(s,t,a){return s=a&&a.length>0?`${s+" "+a.join(" ")}`:s,to(s,t,Xl(s),Xl(t),0,0,{})}var rn='[cmdk-group=""]',Ti='[cmdk-group-items=""]',Nb='[cmdk-group-heading=""]',rm='[cmdk-item=""]',Jl=`${rm}:not([aria-disabled="true"])`,so="cmdk-item-select",Da="data-value",wb=(s,t,a)=>bb(s,t,a),im=u.createContext(void 0),zn=()=>u.useContext(im),om=u.createContext(void 0),Uo=()=>u.useContext(om),lm=u.createContext(void 0),cm=u.forwardRef((s,t)=>{let a=Ta(()=>{var E,V;return{search:"",value:(V=(E=s.value)!=null?E:s.defaultValue)!=null?V:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=Ta(()=>new Set),r=Ta(()=>new Map),i=Ta(()=>new Map),l=Ta(()=>new Set),o=dm(s),{label:c,children:h,value:x,onValueChange:d,filter:m,shouldFilter:g,loop:y,disablePointerSelection:p=!1,vimBindings:j=!0,...v}=s,N=ys(),f=ys(),S=ys(),D=u.useRef(null),w=Ib();ga(()=>{if(x!==void 0){let E=x.trim();a.current.value=E,R.emit()}},[x]),ga(()=>{w(6,q)},[]);let R=u.useMemo(()=>({subscribe:E=>(l.current.add(E),()=>l.current.delete(E)),snapshot:()=>a.current,setState:(E,V,U)=>{var H,Z,ee,ge;if(!Object.is(a.current[E],V)){if(a.current[E]=V,E==="search")O(),T(),w(1,F);else if(E==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let le=document.getElementById(S);le?le.focus():(H=document.getElementById(N))==null||H.focus()}if(w(7,()=>{var le;a.current.selectedItemId=(le=P())==null?void 0:le.id,R.emit()}),U||w(5,q),((Z=o.current)==null?void 0:Z.value)!==void 0){let le=V??"";(ge=(ee=o.current).onValueChange)==null||ge.call(ee,le);return}}R.emit()}},emit:()=>{l.current.forEach(E=>E())}}),[]),b=u.useMemo(()=>({value:(E,V,U)=>{var H;V!==((H=i.current.get(E))==null?void 0:H.value)&&(i.current.set(E,{value:V,keywords:U}),a.current.filtered.items.set(E,k(V,U)),w(2,()=>{T(),R.emit()}))},item:(E,V)=>(n.current.add(E),V&&(r.current.has(V)?r.current.get(V).add(E):r.current.set(V,new Set([E]))),w(3,()=>{O(),T(),a.current.value||F(),R.emit()}),()=>{i.current.delete(E),n.current.delete(E),a.current.filtered.items.delete(E);let U=P();w(4,()=>{O(),(U==null?void 0:U.getAttribute("id"))===E&&F(),R.emit()})}),group:E=>(r.current.has(E)||r.current.set(E,new Set),()=>{i.current.delete(E),r.current.delete(E)}),filter:()=>o.current.shouldFilter,label:c||s["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:N,inputId:S,labelId:f,listInnerRef:D}),[]);function k(E,V){var U,H;let Z=(H=(U=o.current)==null?void 0:U.filter)!=null?H:wb;return E?Z(E,a.current.search,V):0}function T(){if(!a.current.search||o.current.shouldFilter===!1)return;let E=a.current.filtered.items,V=[];a.current.filtered.groups.forEach(H=>{let Z=r.current.get(H),ee=0;Z.forEach(ge=>{let le=E.get(ge);ee=Math.max(le,ee)}),V.push([H,ee])});let U=D.current;A().sort((H,Z)=>{var ee,ge;let le=H.getAttribute("id"),Oe=Z.getAttribute("id");return((ee=E.get(Oe))!=null?ee:0)-((ge=E.get(le))!=null?ge:0)}).forEach(H=>{let Z=H.closest(Ti);Z?Z.appendChild(H.parentElement===Z?H:H.closest(`${Ti} > *`)):U.appendChild(H.parentElement===U?H:H.closest(`${Ti} > *`))}),V.sort((H,Z)=>Z[1]-H[1]).forEach(H=>{var Z;let ee=(Z=D.current)==null?void 0:Z.querySelector(`${rn}[${Da}="${encodeURIComponent(H[0])}"]`);ee==null||ee.parentElement.appendChild(ee)})}function F(){let E=A().find(U=>U.getAttribute("aria-disabled")!=="true"),V=E==null?void 0:E.getAttribute(Da);R.setState("value",V||void 0)}function O(){var E,V,U,H;if(!a.current.search||o.current.shouldFilter===!1){a.current.filtered.count=n.current.size;return}a.current.filtered.groups=new Set;let Z=0;for(let ee of n.current){let ge=(V=(E=i.current.get(ee))==null?void 0:E.value)!=null?V:"",le=(H=(U=i.current.get(ee))==null?void 0:U.keywords)!=null?H:[],Oe=k(ge,le);a.current.filtered.items.set(ee,Oe),Oe>0&&Z++}for(let[ee,ge]of r.current)for(let le of ge)if(a.current.filtered.items.get(le)>0){a.current.filtered.groups.add(ee);break}a.current.filtered.count=Z}function q(){var E,V,U;let H=P();H&&(((E=H.parentElement)==null?void 0:E.firstChild)===H&&((U=(V=H.closest(rn))==null?void 0:V.querySelector(Nb))==null||U.scrollIntoView({block:"nearest"})),H.scrollIntoView({block:"nearest"}))}function P(){var E;return(E=D.current)==null?void 0:E.querySelector(`${rm}[aria-selected="true"]`)}function A(){var E;return Array.from(((E=D.current)==null?void 0:E.querySelectorAll(Jl))||[])}function $(E){let V=A()[E];V&&R.setState("value",V.getAttribute(Da))}function M(E){var V;let U=P(),H=A(),Z=H.findIndex(ge=>ge===U),ee=H[Z+E];(V=o.current)!=null&&V.loop&&(ee=Z+E<0?H[H.length-1]:Z+E===H.length?H[0]:H[Z+E]),ee&&R.setState("value",ee.getAttribute(Da))}function z(E){let V=P(),U=V==null?void 0:V.closest(rn),H;for(;U&&!H;)U=E>0?Ab(U,rn):Rb(U,rn),H=U==null?void 0:U.querySelector(Jl);H?R.setState("value",H.getAttribute(Da)):M(E)}let I=()=>$(A().length-1),C=E=>{E.preventDefault(),E.metaKey?I():E.altKey?z(1):M(1)},B=E=>{E.preventDefault(),E.metaKey?$(0):E.altKey?z(-1):M(-1)};return u.createElement(Ae.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:E=>{var V;(V=v.onKeyDown)==null||V.call(v,E);let U=E.nativeEvent.isComposing||E.keyCode===229;if(!(E.defaultPrevented||U))switch(E.key){case"n":case"j":{j&&E.ctrlKey&&C(E);break}case"ArrowDown":{C(E);break}case"p":case"k":{j&&E.ctrlKey&&B(E);break}case"ArrowUp":{B(E);break}case"Home":{E.preventDefault(),$(0);break}case"End":{E.preventDefault(),I();break}case"Enter":{E.preventDefault();let H=P();if(H){let Z=new Event(so);H.dispatchEvent(Z)}}}}},u.createElement("label",{"cmdk-label":"",htmlFor:b.inputId,id:b.labelId,style:Fb},c),Jr(s,E=>u.createElement(om.Provider,{value:R},u.createElement(im.Provider,{value:b},E))))}),Sb=u.forwardRef((s,t)=>{var a,n;let r=ys(),i=u.useRef(null),l=u.useContext(lm),o=zn(),c=dm(s),h=(n=(a=c.current)==null?void 0:a.forceMount)!=null?n:l==null?void 0:l.forceMount;ga(()=>{if(!h)return o.item(r,l==null?void 0:l.id)},[h]);let x=um(r,i,[s.value,s.children,i],s.keywords),d=Uo(),m=Qs(w=>w.value&&w.value===x.current),g=Qs(w=>h||o.filter()===!1?!0:w.search?w.filtered.items.get(r)>0:!0);u.useEffect(()=>{let w=i.current;if(!(!w||s.disabled))return w.addEventListener(so,y),()=>w.removeEventListener(so,y)},[g,s.onSelect,s.disabled]);function y(){var w,R;p(),(R=(w=c.current).onSelect)==null||R.call(w,x.current)}function p(){d.setState("value",x.current,!0)}if(!g)return null;let{disabled:j,value:v,onSelect:N,forceMount:f,keywords:S,...D}=s;return u.createElement(Ae.div,{ref:da(i,t),...D,id:r,"cmdk-item":"",role:"option","aria-disabled":!!j,"aria-selected":!!m,"data-disabled":!!j,"data-selected":!!m,onPointerMove:j||o.getDisablePointerSelection()?void 0:p,onClick:j?void 0:y},s.children)}),Cb=u.forwardRef((s,t)=>{let{heading:a,children:n,forceMount:r,...i}=s,l=ys(),o=u.useRef(null),c=u.useRef(null),h=ys(),x=zn(),d=Qs(g=>r||x.filter()===!1?!0:g.search?g.filtered.groups.has(l):!0);ga(()=>x.group(l),[]),um(l,o,[s.value,s.heading,c]);let m=u.useMemo(()=>({id:l,forceMount:r}),[r]);return u.createElement(Ae.div,{ref:da(o,t),...i,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},a&&u.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:h},a),Jr(s,g=>u.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":a?h:void 0},u.createElement(lm.Provider,{value:m},g))))}),kb=u.forwardRef((s,t)=>{let{alwaysRender:a,...n}=s,r=u.useRef(null),i=Qs(l=>!l.search);return!a&&!i?null:u.createElement(Ae.div,{ref:da(r,t),...n,"cmdk-separator":"",role:"separator"})}),Db=u.forwardRef((s,t)=>{let{onValueChange:a,...n}=s,r=s.value!=null,i=Uo(),l=Qs(h=>h.search),o=Qs(h=>h.selectedItemId),c=zn();return u.useEffect(()=>{s.value!=null&&i.setState("search",s.value)},[s.value]),u.createElement(Ae.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":o,id:c.inputId,type:"text",value:r?s.value:l,onChange:h=>{r||i.setState("search",h.target.value),a==null||a(h.target.value)}})}),Tb=u.forwardRef((s,t)=>{let{children:a,label:n="Suggestions",...r}=s,i=u.useRef(null),l=u.useRef(null),o=Qs(h=>h.selectedItemId),c=zn();return u.useEffect(()=>{if(l.current&&i.current){let h=l.current,x=i.current,d,m=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let g=h.offsetHeight;x.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return m.observe(h),()=>{cancelAnimationFrame(d),m.unobserve(h)}}},[]),u.createElement(Ae.div,{ref:da(i,t),...r,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":n,id:c.listId},Jr(s,h=>u.createElement("div",{ref:da(l,c.listInnerRef),"cmdk-list-sizer":""},h)))}),Eb=u.forwardRef((s,t)=>{let{open:a,onOpenChange:n,overlayClassName:r,contentClassName:i,container:l,...o}=s;return u.createElement(xo,{open:a,onOpenChange:n},u.createElement(go,{container:l},u.createElement(En,{"cmdk-overlay":"",className:r}),u.createElement(Mn,{"aria-label":s.label,"cmdk-dialog":"",className:i},u.createElement(cm,{ref:t,...o}))))}),Mb=u.forwardRef((s,t)=>Qs(a=>a.filtered.count===0)?u.createElement(Ae.div,{ref:t,...s,"cmdk-empty":"",role:"presentation"}):null),Pb=u.forwardRef((s,t)=>{let{progress:a,children:n,label:r="Loading...",...i}=s;return u.createElement(Ae.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,"aria-label":r},Jr(s,l=>u.createElement("div",{"aria-hidden":!0},l)))}),_t=Object.assign(cm,{List:Tb,Item:Sb,Input:Db,Group:Cb,Separator:kb,Dialog:Eb,Empty:Mb,Loading:Pb});function Ab(s,t){let a=s.nextElementSibling;for(;a;){if(a.matches(t))return a;a=a.nextElementSibling}}function Rb(s,t){let a=s.previousElementSibling;for(;a;){if(a.matches(t))return a;a=a.previousElementSibling}}function dm(s){let t=u.useRef(s);return ga(()=>{t.current=s}),t}var ga=typeof window>"u"?u.useEffect:u.useLayoutEffect;function Ta(s){let t=u.useRef();return t.current===void 0&&(t.current=s()),t}function Qs(s){let t=Uo(),a=()=>s(t.snapshot());return u.useSyncExternalStore(t.subscribe,a,a)}function um(s,t,a,n=[]){let r=u.useRef(),i=zn();return ga(()=>{var l;let o=(()=>{var h;for(let x of a){if(typeof x=="string")return x.trim();if(typeof x=="object"&&"current"in x)return x.current?(h=x.current.textContent)==null?void 0:h.trim():r.current}})(),c=n.map(h=>h.trim());i.value(s,o,c),(l=t.current)==null||l.setAttribute(Da,o),r.current=o}),r}var Ib=()=>{let[s,t]=u.useState(),a=Ta(()=>new Map);return ga(()=>{a.current.forEach(n=>n()),a.current=new Map},[s]),(n,r)=>{a.current.set(n,r),t({})}};function Ob(s){let t=s.type;return typeof t=="function"?t(s.props):"render"in t?t.render(s.props):s}function Jr({asChild:s,children:t},a){return s&&u.isValidElement(t)?u.cloneElement(Ob(t),{ref:t.ref},a(t.props.children)):a(t)}var Fb={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const mm=u.forwardRef(({className:s,...t},a)=>e.jsx(_t,{ref:a,className:G("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...t}));mm.displayName=_t.displayName;const _b=u.forwardRef(({className:s,...t},a)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(ca,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(_t.Input,{ref:a,className:G("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...t})]}));_b.displayName=_t.Input.displayName;const hm=u.forwardRef(({className:s,...t},a)=>e.jsx(_t.List,{ref:a,className:G("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...t}));hm.displayName=_t.List.displayName;const xm=u.forwardRef((s,t)=>e.jsx(_t.Empty,{ref:t,className:"py-6 text-center text-sm",...s}));xm.displayName=_t.Empty.displayName;const ao=u.forwardRef(({className:s,...t},a)=>e.jsx(_t.Group,{ref:a,className:G("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...t}));ao.displayName=_t.Group.displayName;const $b=u.forwardRef(({className:s,...t},a)=>e.jsx(_t.Separator,{ref:a,className:G("-mx-1 h-px bg-border",s),...t}));$b.displayName=_t.Separator.displayName;const no=u.forwardRef(({className:s,...t},a)=>e.jsx(_t.Item,{ref:a,className:G("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",s),...t}));no.displayName=_t.Item.displayName;const gm=(s="",t=300)=>{const[a,n]=u.useState(s),[r,i]=u.useState(s),l=u.useMemo(()=>mg(o=>{i(o)},t),[t]);return u.useEffect(()=>(l(a),()=>{l.cancel()}),[a,l]),{searchTerm:a,debouncedSearchTerm:r,setSearchTerm:n}},Lb=(s,t,a)=>{const[n,r]=u.useState(0),i=Math.ceil(a/t),l=s.length*t,o=Math.floor(n/t),c=Math.min(o+i+1,s.length),h=u.useMemo(()=>s.slice(o,c).map((d,m)=>({...d,index:o+m,top:(o+m)*t})),[s,o,c,t]),x=u.useCallback(d=>{r(d.currentTarget.scrollTop)},[]);return{visibleItems:h,totalHeight:l,handleScroll:x,startIndex:o,endIndex:c}},zb=({onSearch:s,onFilterChange:t,placeholder:a="Search transactions, amounts, categories..."})=>{const{transactions:n,recurringTransactions:r}=he(),{searchTerm:i,debouncedSearchTerm:l,setSearchTerm:o}=gm("",200),[c,h]=u.useState(!1),[x,d]=u.useState({categories:[],tags:[],amountRange:{min:0,max:1e4},dateRange:{from:null,to:null},transactionType:"all",recurring:null}),m=u.useMemo(()=>{if(!l||l.length<2)return[];const f=l.toLowerCase(),S=[];return["Earnings","Petrol","Food","Other"].forEach(b=>{b.toLowerCase().includes(f)&&S.push({type:"category",value:b,label:`Category: ${b}`,icon:fn,count:n.filter(k=>k.category===b).length})}),[...new Set(n.map(b=>Math.abs(b.amount)))].sort((b,k)=>k-b).slice(0,10).forEach(b=>{b.toString().includes(f)&&S.push({type:"amount",value:b,label:`Amount: £${b.toFixed(2)}`,icon:ht,count:n.filter(k=>Math.abs(k.amount)===b).length})}),[...new Set(n.map(b=>b.date))].slice(0,5).forEach(b=>{const k=ce(_e(b),"MMM dd, yyyy");k.toLowerCase().includes(f)&&S.push({type:"date",value:b,label:`Date: ${k}`,icon:Fe,count:n.filter(T=>T.date===b).length})}),r.forEach(b=>{b.name.toLowerCase().includes(f)&&S.push({type:"recurring",value:b.name,label:`Recurring: ${b.name}`,icon:Ct,count:1})}),"income".includes(f)&&S.push({type:"filter",value:"income",label:"Show only income",icon:de,count:n.filter(b=>b.category==="Earnings").length}),("expense".includes(f)||"spending".includes(f))&&S.push({type:"filter",value:"expense",label:"Show only expenses",icon:We,count:n.filter(b=>b.category!=="Earnings").length}),("recurring".includes(f)||"repeat".includes(f))&&S.push({type:"filter",value:"recurring",label:"Show recurring transactions",icon:Ct,count:r.length}),S.sort((b,k)=>k.count-b.count).slice(0,8)},[l,n,r]),g=u.useMemo(()=>{const f=[],S=l.toLowerCase(),D=S.match(/(\d+)\s*-\s*(\d+)/);D&&f.push({type:"amount-range",label:`£${D[1]} - £${D[2]}`,value:{min:parseInt(D[1]),max:parseInt(D[2])}});const w=S.match(/£?(\d+(?:\.\d{2})?)/);return w&&!D&&f.push({type:"amount",label:`£${w[1]}`,value:parseFloat(w[1])}),["earnings","petrol","food","other"].forEach(R=>{S.includes(R)&&f.push({type:"category",label:R.charAt(0).toUpperCase()+R.slice(1),value:R.charAt(0).toUpperCase()+R.slice(1)})}),f},[l]),y=u.useCallback(f=>{switch(f.type){case"category":const S=x.categories.includes(f.value)?x.categories:[...x.categories,f.value];d(D=>({...D,categories:S})),t({...x,categories:S});break;case"amount":d(D=>({...D,amountRange:{min:f.value,max:f.value+10}}));break;case"filter":if(f.value==="income"||f.value==="expense"||f.value==="recurring"){const D=f.value;d(w=>({...w,transactionType:D})),t({...x,transactionType:D})}break;case"recurring":d(D=>({...D,recurring:!0})),t({...x,recurring:!0});break}o(""),h(!1)},[x,t,o]),p=u.useCallback((f,S)=>{const D={...x};switch(f){case"category":D.categories=x.categories.filter(w=>w!==S);break;case"tag":D.tags=x.tags.filter(w=>w!==S);break;case"amount-range":D.amountRange={min:0,max:1e4};break;case"transaction-type":D.transactionType="all";break;case"recurring":D.recurring=null;break}d(D),t(D)},[x,t]),j=u.useCallback(()=>{const f={categories:[],tags:[],amountRange:{min:0,max:1e4},dateRange:{from:null,to:null},transactionType:"all",recurring:null};d(f),t(f),o("")},[t,o]),v=u.useCallback(f=>{o(f),s(f),h(f.length>0)},[o,s]),N=x.categories.length>0||x.tags.length>0||x.transactionType!=="all"||x.recurring!==null||x.amountRange.min>0||x.amountRange.max<1e4;return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"relative",children:e.jsxs(Es,{open:c,onOpenChange:h,children:[e.jsx(Ms,{asChild:!0,children:e.jsxs("div",{className:"relative",children:[e.jsx(ca,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(ae,{placeholder:a,value:i,onChange:f=>v(f.target.value),className:"pl-10 pr-10",onFocus:()=>h(i.length>0)}),N&&e.jsx(_,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 h-6 w-6 p-0 -translate-y-1/2",onClick:j,children:e.jsx(ut,{className:"h-3 w-3"})})]})}),e.jsx(bs,{className:"w-80 p-0",align:"start",onOpenAutoFocus:f=>f.preventDefault(),children:e.jsx(mm,{shouldFilter:!1,children:e.jsx(hm,{className:"max-h-80",children:m.length>0?e.jsxs(e.Fragment,{children:[e.jsx(ao,{heading:"Suggestions",children:m.map((f,S)=>{const D=f.icon;return e.jsxs(no,{onSelect:()=>y(f),className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:f.label})]}),e.jsx(K,{variant:"secondary",className:"text-xs",children:f.count})]},S)})}),g.length>0&&e.jsx(ao,{heading:"Auto-detected",children:g.map((f,S)=>e.jsxs(no,{onSelect:()=>{f.type==="category"&&y({type:"category",value:f.value})},className:"cursor-pointer",children:[e.jsx(Qg,{className:"h-4 w-4 text-primary mr-2"}),e.jsx("span",{children:f.label})]},S))})]}):e.jsx(xm,{children:"No suggestions found"})})})})]})}),N&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Filters:"}),x.categories.map(f=>e.jsxs(K,{variant:"secondary",className:"gap-1",children:[e.jsx(fn,{className:"h-3 w-3"}),f,e.jsx(_,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-1",onClick:()=>p("category",f),children:e.jsx(ut,{className:"h-3 w-3"})})]},f)),x.transactionType!=="all"&&e.jsxs(K,{variant:"secondary",className:"gap-1",children:[x.transactionType==="income"?e.jsx(de,{className:"h-3 w-3"}):x.transactionType==="expense"?e.jsx(We,{className:"h-3 w-3"}):e.jsx(Ct,{className:"h-3 w-3"}),x.transactionType,e.jsx(_,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-1",onClick:()=>p("transaction-type"),children:e.jsx(ut,{className:"h-3 w-3"})})]}),x.recurring===!0&&e.jsxs(K,{variant:"secondary",className:"gap-1",children:[e.jsx(Ct,{className:"h-3 w-3"}),"Recurring",e.jsx(_,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-1",onClick:()=>p("recurring"),children:e.jsx(ut,{className:"h-3 w-3"})})]}),(x.amountRange.min>0||x.amountRange.max<1e4)&&e.jsxs(K,{variant:"secondary",className:"gap-1",children:[e.jsx(ht,{className:"h-3 w-3"}),"£",x.amountRange.min," - £",x.amountRange.max,e.jsx(_,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-1",onClick:()=>p("amount-range"),children:e.jsx(ut,{className:"h-3 w-3"})})]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:j,className:"text-xs text-muted-foreground hover:text-foreground",children:"Clear all"})]})]})},pm=()=>e.jsx("div",{className:"text-sm text-muted-foreground",children:"Smart Transaction Entry Component"});var Zr="Checkbox",[Bb,bC]=ds(Zr),[qb,Wo]=Bb(Zr);function Vb(s){const{__scopeCheckbox:t,checked:a,children:n,defaultChecked:r,disabled:i,form:l,name:o,onCheckedChange:c,required:h,value:x="on",internal_do_not_use_render:d}=s,[m,g]=va({prop:a,defaultProp:r??!1,onChange:c,caller:Zr}),[y,p]=u.useState(null),[j,v]=u.useState(null),N=u.useRef(!1),f=y?!!l||!!y.closest("form"):!0,S={checked:m,disabled:i,setChecked:g,control:y,setControl:p,name:o,form:l,value:x,hasConsumerStoppedPropagationRef:N,required:h,defaultChecked:Gs(r)?!1:r,isFormControl:f,bubbleInput:j,setBubbleInput:v};return e.jsx(qb,{scope:t,...S,children:Ub(d)?d(S):n})}var fm="CheckboxTrigger",vm=u.forwardRef(({__scopeCheckbox:s,onKeyDown:t,onClick:a,...n},r)=>{const{control:i,value:l,disabled:o,checked:c,required:h,setControl:x,setChecked:d,hasConsumerStoppedPropagationRef:m,isFormControl:g,bubbleInput:y}=Wo(fm,s),p=He(r,x),j=u.useRef(c);return u.useEffect(()=>{const v=i==null?void 0:i.form;if(v){const N=()=>d(j.current);return v.addEventListener("reset",N),()=>v.removeEventListener("reset",N)}},[i,d]),e.jsx(Ae.button,{type:"button",role:"checkbox","aria-checked":Gs(c)?"mixed":c,"aria-required":h,"data-state":wm(c),"data-disabled":o?"":void 0,disabled:o,value:l,...n,ref:p,onKeyDown:me(t,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:me(a,v=>{d(N=>Gs(N)?!0:!N),y&&g&&(m.current=v.isPropagationStopped(),m.current||v.stopPropagation())})})});vm.displayName=fm;var Ho=u.forwardRef((s,t)=>{const{__scopeCheckbox:a,name:n,checked:r,defaultChecked:i,required:l,disabled:o,value:c,onCheckedChange:h,form:x,...d}=s;return e.jsx(Vb,{__scopeCheckbox:a,checked:r,defaultChecked:i,disabled:o,required:l,onCheckedChange:h,name:n,form:x,value:c,internal_do_not_use_render:({isFormControl:m})=>e.jsxs(e.Fragment,{children:[e.jsx(vm,{...d,ref:t,__scopeCheckbox:a}),m&&e.jsx(Nm,{__scopeCheckbox:a})]})})});Ho.displayName=Zr;var ym="CheckboxIndicator",jm=u.forwardRef((s,t)=>{const{__scopeCheckbox:a,forceMount:n,...r}=s,i=Wo(ym,a);return e.jsx(zt,{present:n||Gs(i.checked)||i.checked===!0,children:e.jsx(Ae.span,{"data-state":wm(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t,style:{pointerEvents:"none",...s.style}})})});jm.displayName=ym;var bm="CheckboxBubbleInput",Nm=u.forwardRef(({__scopeCheckbox:s,...t},a)=>{const{control:n,hasConsumerStoppedPropagationRef:r,checked:i,defaultChecked:l,required:o,disabled:c,name:h,value:x,form:d,bubbleInput:m,setBubbleInput:g}=Wo(bm,s),y=He(a,g),p=vo(i),j=fo(n);u.useEffect(()=>{const N=m;if(!N)return;const f=window.HTMLInputElement.prototype,D=Object.getOwnPropertyDescriptor(f,"checked").set,w=!r.current;if(p!==i&&D){const R=new Event("click",{bubbles:w});N.indeterminate=Gs(i),D.call(N,Gs(i)?!1:i),N.dispatchEvent(R)}},[m,p,i,r]);const v=u.useRef(Gs(i)?!1:i);return e.jsx(Ae.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??v.current,required:o,disabled:c,name:h,value:x,form:d,...t,tabIndex:-1,ref:y,style:{...t.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Nm.displayName=bm;function Ub(s){return typeof s=="function"}function Gs(s){return s==="indeterminate"}function wm(s){return Gs(s)?"indeterminate":s?"checked":"unchecked"}const pa=u.forwardRef(({className:s,...t},a)=>e.jsx(Ho,{ref:a,className:G("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:e.jsx(jm,{className:G("flex items-center justify-center text-current"),children:e.jsx(wo,{className:"h-4 w-4"})})}));pa.displayName=Ho.displayName;const Wb=({trigger:s})=>{const[t,a]=u.useState(!1),[n,r]=u.useState(null),[i,l]=u.useState([]),[o,c]=u.useState([]),[h,x]=u.useState([]),[d,m]=u.useState({date:"",description:"",amount:"",category:""}),[g,y]=u.useState(!1),[p,j]=u.useState("upload"),[v,N]=u.useState({skipDuplicates:!0,autoCategories:!0,validateAmounts:!0,dateFormat:"auto"}),f=u.useRef(null),{addTransaction:S}=he(),{toast:D}=Ue(),w=u.useCallback((P,A)=>{if(!P)return{category:"Other",confidence:.3};const $=P.toLowerCase();return A>0&&($.includes("salary")||$.includes("wage")||$.includes("payment")||$.includes("refund")||$.includes("bonus")||$.includes("income")||$.includes("transfer in")||$.includes("credit"))?{category:"Earnings",confidence:.9}:$.includes("petrol")||$.includes("fuel")||$.includes("gas")||$.includes("bp ")||$.includes("shell")||$.includes("esso")||$.includes("station")||/fuel.*\d/.test($)?{category:"Petrol",confidence:.95}:$.includes("food")||$.includes("restaurant")||$.includes("cafe")||$.includes("lunch")||$.includes("dinner")||$.includes("grocery")||$.includes("tesco")||$.includes("asda")||$.includes("sainsbury")||$.includes("mcdonalds")||$.includes("kfc")||$.includes("pizza")||$.includes("takeaway")||$.includes("delivery")?{category:"Food",confidence:.85}:{category:"Other",confidence:.4}},[]),R=u.useCallback(P=>{const A=P.split(`
`).filter(z=>z.trim());if(A.length<2)throw new Error("CSV must have at least a header and one data row");const $=A[0].split(",").map(z=>z.trim().replace(/"/g,"")),M=A.slice(1).map(z=>{const I=[];let C="",B=!1;for(let E=0;E<z.length;E++){const V=z[E];V==='"'&&(E===0||z[E-1]===",")?B=!B:V===","&&!B?(I.push(C.trim().replace(/"/g,"")),C=""):C+=V}return I.push(C.trim().replace(/"/g,"")),I});return{headers:$,data:M}},[]),b=u.useCallback(P=>{if(!P)return{date:null,confidence:0};let A=null,$=0;if(A=_e(P),Gn(A))return{date:A,confidence:.9};const M=P.split(/[\/\-\.]/);if(M.length===3){const[z,I,C]=M.map(B=>parseInt(B));z<=31&&I<=12&&C>1900&&(A=new Date(C,I-1,z),Gn(A)&&($=.8)),(!A||!Gn(A))&&I<=31&&z<=12&&C>1900&&(A=new Date(C,z-1,I),Gn(A)&&($=.7))}return{date:A,confidence:$}},[]),k=u.useCallback(async P=>{y(!0);try{const A=await P.text(),{headers:$,data:M}=R(A);c($),l(M);const z={date:"",description:"",amount:"",category:""};$.forEach(I=>{const C=I.toLowerCase();(C.includes("date")||C.includes("time"))&&(z.date=I),(C.includes("description")||C.includes("detail")||C.includes("memo")||C.includes("reference"))&&(z.description=I),(C.includes("amount")||C.includes("value")||C.includes("sum")||C.includes("debit")||C.includes("credit"))&&(z.amount=I),(C.includes("category")||C.includes("type")||C.includes("class"))&&(z.category=I)}),m(z),j("mapping"),D({title:"File Uploaded",description:`Parsed ${M.length} transactions from CSV`})}catch(A){D({title:"Parse Error",description:A instanceof Error?A.message:"Failed to parse CSV file",variant:"destructive"})}finally{y(!1)}},[R,D]),T=u.useCallback(()=>{if(!i.length||!o.length)return;y(!0);const P=o.indexOf(d.date),A=o.indexOf(d.description),$=o.indexOf(d.amount),M=d.category?o.indexOf(d.category):-1,z=i.map((I,C)=>{const B=[],E=b(I[P]||"");E.date||B.push("Invalid or missing date");const V=(I[$]||"").replace(/[£$,]/g,""),U=parseFloat(V);isNaN(U)&&B.push("Invalid amount");const H=I[A]||"";H.trim()||B.push("Missing description");let Z="Other",ee=.3;if(M>=0&&I[M])Z=I[M],ee=.9;else if(v.autoCategories&&H){const ge=w(H,U);Z=ge.category,ee=ge.confidence}return{id:`import-${C}`,date:E.date?ce(E.date,"yyyy-MM-dd"):"",description:H,amount:Math.abs(U),category:Z,confidence:ee,errors:B,isValid:B.length===0,originalRow:C+2}});x(z),j("preview"),y(!1)},[i,o,d,v.autoCategories,b,w]),F=u.useCallback(async()=>{const P=h.filter(A=>A.isValid);if(P.length===0){D({title:"No Valid Transactions",description:"Please fix the errors before importing",variant:"destructive"});return}j("importing"),y(!0);try{for(const A of P)await new Promise($=>setTimeout($,50)),S({date:A.date,category:A.category,amount:A.amount,week:"W4"});D({title:"Import Successful",description:`Imported ${P.length} transactions successfully`}),r(null),l([]),c([]),x([]),j("upload"),a(!1)}catch{D({title:"Import Error",description:"Failed to import some transactions",variant:"destructive"})}finally{y(!1)}},[h,S,D]),O=h.filter(P=>P.isValid),q=h.filter(P=>!P.isValid);return e.jsxs(dt,{open:t,onOpenChange:a,children:[e.jsx(Ft,{asChild:!0,children:s||e.jsxs(_,{variant:"outline",className:"gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),"Import CSV"]})}),e.jsxs(at,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[e.jsx(nt,{children:e.jsxs(rt,{className:"flex items-center gap-2",children:[e.jsx(Ts,{className:"h-5 w-5 text-primary"}),"Bulk Transaction Import"]})}),e.jsx("div",{className:"flex items-center gap-2 mb-6",children:["upload","mapping","preview","importing"].map((P,A)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${p===P?"bg-primary text-primary-foreground":["upload","mapping","preview"].indexOf(p)>A?"bg-success text-success-foreground":"bg-muted text-muted-foreground"}`,children:A+1}),A<3&&e.jsx("div",{className:`w-12 h-0.5 mx-2 ${["upload","mapping","preview"].indexOf(p)>A?"bg-success":"bg-muted"}`})]},P))}),p==="upload"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(L,{className:"p-8 border-dashed border-2 border-muted-foreground/25",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(js,{className:"h-12 w-12 text-muted-foreground mx-auto"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Upload CSV File"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Import transactions from your bank statements or expense tracking apps"})]}),e.jsx("input",{ref:f,type:"file",accept:".csv,.txt",onChange:P=>{var $;const A=($=P.target.files)==null?void 0:$[0];A&&(r(A),k(A))},className:"hidden"}),e.jsxs(_,{onClick:()=>{var P;return(P=f.current)==null?void 0:P.click()},disabled:g,className:"gap-2",children:[g?e.jsx(Pt,{className:"h-4 w-4 animate-spin"}):e.jsx(js,{className:"h-4 w-4"}),"Choose CSV File"]})]})}),e.jsxs(L,{className:"p-4",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4"}),"Expected CSV Format"]}),e.jsxs("div",{className:"text-sm font-mono bg-muted p-3 rounded overflow-x-auto",children:[e.jsx("div",{children:"Date,Description,Amount,Category"}),e.jsx("div",{children:'2024-01-15,"Tesco Groceries",45.67,Food'}),e.jsx("div",{children:'2024-01-16,"Shell Petrol",38.50,Petrol'}),e.jsx("div",{children:'2024-01-17,"Salary Payment",2500.00,Earnings'})]})]})]}),p==="mapping"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(As,{className:"h-4 w-4"}),"Map CSV Columns"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Map your CSV columns to transaction fields. We've auto-detected some mappings."})]}),e.jsx("div",{className:"grid gap-4",children:Object.entries(d).map(([P,A])=>e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[e.jsxs(W,{className:"capitalize font-medium",children:[P," ",P!=="category"&&"*"]}),e.jsxs(Re,{value:A,onValueChange:$=>m(M=>({...M,[P]:$})),children:[e.jsx(Me,{children:e.jsx(Ie,{placeholder:`Select ${P} column`})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"",children:"None"}),o.map($=>e.jsx(J,{value:$,children:$},$))]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[P==="date"&&"Transaction date",P==="description"&&"Transaction details",P==="amount"&&"Transaction amount",P==="category"&&"Optional - auto-predicted if empty"]})]},P))}),e.jsxs(L,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Import Options"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pa,{id:"skipDuplicates",checked:v.skipDuplicates,onCheckedChange:P=>N(A=>({...A,skipDuplicates:!!P}))}),e.jsx("label",{htmlFor:"skipDuplicates",className:"text-sm",children:"Skip duplicate transactions"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pa,{id:"autoCategories",checked:v.autoCategories,onCheckedChange:P=>N(A=>({...A,autoCategories:!!P}))}),e.jsxs("label",{htmlFor:"autoCategories",className:"text-sm flex items-center gap-1",children:["Auto-predict categories using AI",e.jsx(Yt,{className:"h-3 w-3 text-primary"})]})]})]})]}),i.length>0&&e.jsxs(L,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Data Preview"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Date"}),e.jsx("th",{className:"text-left p-2",children:"Description"}),e.jsx("th",{className:"text-left p-2",children:"Amount"}),e.jsx("th",{className:"text-left p-2",children:"Category"})]})}),e.jsx("tbody",{children:i.slice(0,3).map((P,A)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:P[o.indexOf(d.date)]||"-"}),e.jsx("td",{className:"p-2",children:P[o.indexOf(d.description)]||"-"}),e.jsx("td",{className:"p-2",children:P[o.indexOf(d.amount)]||"-"}),e.jsx("td",{className:"p-2",children:d.category&&P[o.indexOf(d.category)]||"Auto"})]},A))})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(_,{variant:"outline",onClick:()=>j("upload"),children:"Back"}),e.jsxs(_,{onClick:T,disabled:!d.date||!d.description||!d.amount,className:"gap-2",children:[e.jsx(Yt,{className:"h-4 w-4"}),"Process Transactions"]})]})]}),p==="preview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4"}),"Review Transactions"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[O.length," valid, ",q.length," errors"]})]}),O.length>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",onClick:()=>j("mapping"),children:"Back to Mapping"}),e.jsxs(_,{onClick:F,className:"gap-2",children:[e.jsx(er,{className:"h-4 w-4"}),"Import ",O.length," Transactions"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(L,{className:"p-4 text-center",children:[e.jsx(er,{className:"h-6 w-6 text-success mx-auto mb-2"}),e.jsx("p",{className:"font-bold text-success",children:O.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Valid"})]}),e.jsxs(L,{className:"p-4 text-center",children:[e.jsx(Ba,{className:"h-6 w-6 text-destructive mx-auto mb-2"}),e.jsx("p",{className:"font-bold text-destructive",children:q.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Errors"})]}),e.jsxs(L,{className:"p-4 text-center",children:[e.jsx(ht,{className:"h-6 w-6 text-primary mx-auto mb-2"}),e.jsxs("p",{className:"font-bold",children:["£",O.reduce((P,A)=>P+A.amount,0).toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Value"})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:h.map((P,A)=>e.jsxs(L,{className:G("p-4",P.isValid?"border-success/30 bg-success/5":"border-destructive/30 bg-destructive/5"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[P.isValid?e.jsx(er,{className:"h-5 w-5 text-success"}):e.jsx(Ba,{className:"h-5 w-5 text-destructive"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:P.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(K,{variant:"outline",className:"text-xs",children:P.category}),P.confidence<.8&&e.jsxs(K,{variant:"secondary",className:"text-xs",children:[Math.round(P.confidence*100),"% confident"]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold",children:["£",P.amount.toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:P.date})]})]}),P.errors.length>0&&e.jsx("div",{className:"mt-2 text-xs text-destructive",children:P.errors.join(", ")})]},A))})]}),p==="importing"&&e.jsxs("div",{className:"text-center py-12 space-y-4",children:[e.jsx(Pt,{className:"h-12 w-12 animate-spin text-primary mx-auto"}),e.jsx("h3",{className:"font-semibold",children:"Importing Transactions..."}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Processing ",O.length," transactions"]}),e.jsx(Te,{value:60,className:"w-64 mx-auto"})]})]})]})};var ro=["Enter"," "],Hb=["ArrowDown","PageUp","Home"],Sm=["ArrowUp","PageDown","End"],Gb=[...Hb,...Sm],Yb={ltr:[...ro,"ArrowRight"],rtl:[...ro,"ArrowLeft"]},Kb={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Bn="Menu",[Sn,Qb,Xb]=Ac(Bn),[ja,Cm]=ds(Bn,[Xb,Xs,Kc]),ei=Xs(),km=Kc(),[Jb,ba]=ja(Bn),[Zb,qn]=ja(Bn),Dm=s=>{const{__scopeMenu:t,open:a=!1,children:n,dir:r,onOpenChange:i,modal:l=!0}=s,o=ei(t),[c,h]=u.useState(null),x=u.useRef(!1),d=fs(i),m=po(r);return u.useEffect(()=>{const g=()=>{x.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>x.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),e.jsx(Mr,{...o,children:e.jsx(Jb,{scope:t,open:a,onOpenChange:d,content:c,onContentChange:h,children:e.jsx(Zb,{scope:t,onClose:u.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:x,dir:m,modal:l,children:n})})})};Dm.displayName=Bn;var eN="MenuAnchor",Go=u.forwardRef((s,t)=>{const{__scopeMenu:a,...n}=s,r=ei(a);return e.jsx(Tn,{...r,...n,ref:t})});Go.displayName=eN;var Yo="MenuPortal",[tN,Tm]=ja(Yo,{forceMount:void 0}),Em=s=>{const{__scopeMenu:t,forceMount:a,children:n,container:r}=s,i=ba(Yo,t);return e.jsx(tN,{scope:t,forceMount:a,children:e.jsx(zt,{present:a||i.open,children:e.jsx(Gc,{asChild:!0,container:r,children:n})})})};Em.displayName=Yo;var Kt="MenuContent",[sN,Ko]=ja(Kt),Mm=u.forwardRef((s,t)=>{const a=Tm(Kt,s.__scopeMenu),{forceMount:n=a.forceMount,...r}=s,i=ba(Kt,s.__scopeMenu),l=qn(Kt,s.__scopeMenu);return e.jsx(Sn.Provider,{scope:s.__scopeMenu,children:e.jsx(zt,{present:n||i.open,children:e.jsx(Sn.Slot,{scope:s.__scopeMenu,children:l.modal?e.jsx(aN,{...r,ref:t}):e.jsx(nN,{...r,ref:t})})})})}),aN=u.forwardRef((s,t)=>{const a=ba(Kt,s.__scopeMenu),n=u.useRef(null),r=He(t,n);return u.useEffect(()=>{const i=n.current;if(i)return Vc(i)},[]),e.jsx(Qo,{...s,ref:r,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:me(s.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)})}),nN=u.forwardRef((s,t)=>{const a=ba(Kt,s.__scopeMenu);return e.jsx(Qo,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>a.onOpenChange(!1)})}),rN=Yc("MenuContent.ScrollLock"),Qo=u.forwardRef((s,t)=>{const{__scopeMenu:a,loop:n=!1,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:o,onEntryFocus:c,onEscapeKeyDown:h,onPointerDownOutside:x,onFocusOutside:d,onInteractOutside:m,onDismiss:g,disableOutsideScroll:y,...p}=s,j=ba(Kt,a),v=qn(Kt,a),N=ei(a),f=km(a),S=Qb(a),[D,w]=u.useState(null),R=u.useRef(null),b=He(t,R,j.onContentChange),k=u.useRef(0),T=u.useRef(""),F=u.useRef(0),O=u.useRef(null),q=u.useRef("right"),P=u.useRef(0),A=y?Uc:u.Fragment,$=y?{as:rN,allowPinchZoom:!0}:void 0,M=I=>{var ee,ge;const C=T.current+I,B=S().filter(le=>!le.disabled),E=document.activeElement,V=(ee=B.find(le=>le.ref.current===E))==null?void 0:ee.textValue,U=B.map(le=>le.textValue),H=fN(U,C,V),Z=(ge=B.find(le=>le.textValue===H))==null?void 0:ge.ref.current;(function le(Oe){T.current=Oe,window.clearTimeout(k.current),Oe!==""&&(k.current=window.setTimeout(()=>le(""),1e3))})(C),Z&&setTimeout(()=>Z.focus())};u.useEffect(()=>()=>window.clearTimeout(k.current),[]),Wc();const z=u.useCallback(I=>{var B,E;return q.current===((B=O.current)==null?void 0:B.side)&&yN(I,(E=O.current)==null?void 0:E.area)},[]);return e.jsx(sN,{scope:a,searchRef:T,onItemEnter:u.useCallback(I=>{z(I)&&I.preventDefault()},[z]),onItemLeave:u.useCallback(I=>{var C;z(I)||((C=R.current)==null||C.focus(),w(null))},[z]),onTriggerLeave:u.useCallback(I=>{z(I)&&I.preventDefault()},[z]),pointerGraceTimerRef:F,onPointerGraceIntentChange:u.useCallback(I=>{O.current=I},[]),children:e.jsx(A,{...$,children:e.jsx(Hc,{asChild:!0,trapped:r,onMountAutoFocus:me(i,I=>{var C;I.preventDefault(),(C=R.current)==null||C.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:e.jsx(Dr,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:h,onPointerDownOutside:x,onFocusOutside:d,onInteractOutside:m,onDismiss:g,children:e.jsx(Bx,{asChild:!0,...f,dir:v.dir,orientation:"vertical",loop:n,currentTabStopId:D,onCurrentTabStopIdChange:w,onEntryFocus:me(c,I=>{v.isUsingKeyboardRef.current||I.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Tr,{role:"menu","aria-orientation":"vertical","data-state":Hm(j.open),"data-radix-menu-content":"",dir:v.dir,...N,...p,ref:b,style:{outline:"none",...p.style},onKeyDown:me(p.onKeyDown,I=>{const B=I.target.closest("[data-radix-menu-content]")===I.currentTarget,E=I.ctrlKey||I.altKey||I.metaKey,V=I.key.length===1;B&&(I.key==="Tab"&&I.preventDefault(),!E&&V&&M(I.key));const U=R.current;if(I.target!==U||!Gb.includes(I.key))return;I.preventDefault();const Z=S().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);Sm.includes(I.key)&&Z.reverse(),gN(Z)}),onBlur:me(s.onBlur,I=>{I.currentTarget.contains(I.target)||(window.clearTimeout(k.current),T.current="")}),onPointerMove:me(s.onPointerMove,Cn(I=>{const C=I.target,B=P.current!==I.clientX;if(I.currentTarget.contains(C)&&B){const E=I.clientX>P.current?"right":"left";q.current=E,P.current=I.clientX}}))})})})})})})});Mm.displayName=Kt;var iN="MenuGroup",Xo=u.forwardRef((s,t)=>{const{__scopeMenu:a,...n}=s;return e.jsx(Ae.div,{role:"group",...n,ref:t})});Xo.displayName=iN;var oN="MenuLabel",Pm=u.forwardRef((s,t)=>{const{__scopeMenu:a,...n}=s;return e.jsx(Ae.div,{...n,ref:t})});Pm.displayName=oN;var yr="MenuItem",Zl="menu.itemSelect",ti=u.forwardRef((s,t)=>{const{disabled:a=!1,onSelect:n,...r}=s,i=u.useRef(null),l=qn(yr,s.__scopeMenu),o=Ko(yr,s.__scopeMenu),c=He(t,i),h=u.useRef(!1),x=()=>{const d=i.current;if(!a&&d){const m=new CustomEvent(Zl,{bubbles:!0,cancelable:!0});d.addEventListener(Zl,g=>n==null?void 0:n(g),{once:!0}),Vx(d,m),m.defaultPrevented?h.current=!1:l.onClose()}};return e.jsx(Am,{...r,ref:c,disabled:a,onClick:me(s.onClick,x),onPointerDown:d=>{var m;(m=s.onPointerDown)==null||m.call(s,d),h.current=!0},onPointerUp:me(s.onPointerUp,d=>{var m;h.current||(m=d.currentTarget)==null||m.click()}),onKeyDown:me(s.onKeyDown,d=>{const m=o.searchRef.current!=="";a||m&&d.key===" "||ro.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});ti.displayName=yr;var Am=u.forwardRef((s,t)=>{const{__scopeMenu:a,disabled:n=!1,textValue:r,...i}=s,l=Ko(yr,a),o=km(a),c=u.useRef(null),h=He(t,c),[x,d]=u.useState(!1),[m,g]=u.useState("");return u.useEffect(()=>{const y=c.current;y&&g((y.textContent??"").trim())},[i.children]),e.jsx(Sn.ItemSlot,{scope:a,disabled:n,textValue:r??m,children:e.jsx(qx,{asChild:!0,...o,focusable:!n,children:e.jsx(Ae.div,{role:"menuitem","data-highlighted":x?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:h,onPointerMove:me(s.onPointerMove,Cn(y=>{n?l.onItemLeave(y):(l.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:me(s.onPointerLeave,Cn(y=>l.onItemLeave(y))),onFocus:me(s.onFocus,()=>d(!0)),onBlur:me(s.onBlur,()=>d(!1))})})})}),lN="MenuCheckboxItem",Rm=u.forwardRef((s,t)=>{const{checked:a=!1,onCheckedChange:n,...r}=s;return e.jsx($m,{scope:s.__scopeMenu,checked:a,children:e.jsx(ti,{role:"menuitemcheckbox","aria-checked":jr(a)?"mixed":a,...r,ref:t,"data-state":Zo(a),onSelect:me(r.onSelect,()=>n==null?void 0:n(jr(a)?!0:!a),{checkForDefaultPrevented:!1})})})});Rm.displayName=lN;var Im="MenuRadioGroup",[cN,dN]=ja(Im,{value:void 0,onValueChange:()=>{}}),Om=u.forwardRef((s,t)=>{const{value:a,onValueChange:n,...r}=s,i=fs(n);return e.jsx(cN,{scope:s.__scopeMenu,value:a,onValueChange:i,children:e.jsx(Xo,{...r,ref:t})})});Om.displayName=Im;var Fm="MenuRadioItem",_m=u.forwardRef((s,t)=>{const{value:a,...n}=s,r=dN(Fm,s.__scopeMenu),i=a===r.value;return e.jsx($m,{scope:s.__scopeMenu,checked:i,children:e.jsx(ti,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":Zo(i),onSelect:me(n.onSelect,()=>{var l;return(l=r.onValueChange)==null?void 0:l.call(r,a)},{checkForDefaultPrevented:!1})})})});_m.displayName=Fm;var Jo="MenuItemIndicator",[$m,uN]=ja(Jo,{checked:!1}),Lm=u.forwardRef((s,t)=>{const{__scopeMenu:a,forceMount:n,...r}=s,i=uN(Jo,a);return e.jsx(zt,{present:n||jr(i.checked)||i.checked===!0,children:e.jsx(Ae.span,{...r,ref:t,"data-state":Zo(i.checked)})})});Lm.displayName=Jo;var mN="MenuSeparator",zm=u.forwardRef((s,t)=>{const{__scopeMenu:a,...n}=s;return e.jsx(Ae.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});zm.displayName=mN;var hN="MenuArrow",Bm=u.forwardRef((s,t)=>{const{__scopeMenu:a,...n}=s,r=ei(a);return e.jsx(Er,{...r,...n,ref:t})});Bm.displayName=hN;var xN="MenuSub",[NC,qm]=ja(xN),on="MenuSubTrigger",Vm=u.forwardRef((s,t)=>{const a=ba(on,s.__scopeMenu),n=qn(on,s.__scopeMenu),r=qm(on,s.__scopeMenu),i=Ko(on,s.__scopeMenu),l=u.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:c}=i,h={__scopeMenu:s.__scopeMenu},x=u.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return u.useEffect(()=>x,[x]),u.useEffect(()=>{const d=o.current;return()=>{window.clearTimeout(d),c(null)}},[o,c]),e.jsx(Go,{asChild:!0,...h,children:e.jsx(Am,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":r.contentId,"data-state":Hm(a.open),...s,ref:da(t,r.onTriggerChange),onClick:d=>{var m;(m=s.onClick)==null||m.call(s,d),!(s.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:me(s.onPointerMove,Cn(d=>{i.onItemEnter(d),!d.defaultPrevented&&!s.disabled&&!a.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{a.onOpenChange(!0),x()},100))})),onPointerLeave:me(s.onPointerLeave,Cn(d=>{var g,y;x();const m=(g=a.content)==null?void 0:g.getBoundingClientRect();if(m){const p=(y=a.content)==null?void 0:y.dataset.side,j=p==="right",v=j?-5:5,N=m[j?"left":"right"],f=m[j?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:N,y:m.top},{x:f,y:m.top},{x:f,y:m.bottom},{x:N,y:m.bottom}],side:p}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:me(s.onKeyDown,d=>{var g;const m=i.searchRef.current!=="";s.disabled||m&&d.key===" "||Yb[n.dir].includes(d.key)&&(a.onOpenChange(!0),(g=a.content)==null||g.focus(),d.preventDefault())})})})});Vm.displayName=on;var Um="MenuSubContent",Wm=u.forwardRef((s,t)=>{const a=Tm(Kt,s.__scopeMenu),{forceMount:n=a.forceMount,...r}=s,i=ba(Kt,s.__scopeMenu),l=qn(Kt,s.__scopeMenu),o=qm(Um,s.__scopeMenu),c=u.useRef(null),h=He(t,c);return e.jsx(Sn.Provider,{scope:s.__scopeMenu,children:e.jsx(zt,{present:n||i.open,children:e.jsx(Sn.Slot,{scope:s.__scopeMenu,children:e.jsx(Qo,{id:o.contentId,"aria-labelledby":o.triggerId,...r,ref:h,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:x=>{var d;l.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),x.preventDefault()},onCloseAutoFocus:x=>x.preventDefault(),onFocusOutside:me(s.onFocusOutside,x=>{x.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:me(s.onEscapeKeyDown,x=>{l.onClose(),x.preventDefault()}),onKeyDown:me(s.onKeyDown,x=>{var g;const d=x.currentTarget.contains(x.target),m=Kb[l.dir].includes(x.key);d&&m&&(i.onOpenChange(!1),(g=o.trigger)==null||g.focus(),x.preventDefault())})})})})})});Wm.displayName=Um;function Hm(s){return s?"open":"closed"}function jr(s){return s==="indeterminate"}function Zo(s){return jr(s)?"indeterminate":s?"checked":"unchecked"}function gN(s){const t=document.activeElement;for(const a of s)if(a===t||(a.focus(),document.activeElement!==t))return}function pN(s,t){return s.map((a,n)=>s[(t+n)%s.length])}function fN(s,t,a){const r=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,i=a?s.indexOf(a):-1;let l=pN(s,Math.max(i,0));r.length===1&&(l=l.filter(h=>h!==a));const c=l.find(h=>h.toLowerCase().startsWith(r.toLowerCase()));return c!==a?c:void 0}function vN(s,t){const{x:a,y:n}=s;let r=!1;for(let i=0,l=t.length-1;i<t.length;l=i++){const o=t[i],c=t[l],h=o.x,x=o.y,d=c.x,m=c.y;x>n!=m>n&&a<(d-h)*(n-x)/(m-x)+h&&(r=!r)}return r}function yN(s,t){if(!t)return!1;const a={x:s.clientX,y:s.clientY};return vN(a,t)}function Cn(s){return t=>t.pointerType==="mouse"?s(t):void 0}var jN=Dm,bN=Go,NN=Em,wN=Mm,SN=Xo,CN=Pm,kN=ti,DN=Rm,TN=Om,EN=_m,MN=Lm,PN=zm,AN=Bm,RN=Vm,IN=Wm,si="DropdownMenu",[ON,wC]=ds(si,[Cm]),At=Cm(),[FN,Gm]=ON(si),Ym=s=>{const{__scopeDropdownMenu:t,children:a,dir:n,open:r,defaultOpen:i,onOpenChange:l,modal:o=!0}=s,c=At(t),h=u.useRef(null),[x,d]=va({prop:r,defaultProp:i??!1,onChange:l,caller:si});return e.jsx(FN,{scope:t,triggerId:ys(),triggerRef:h,contentId:ys(),open:x,onOpenChange:d,onOpenToggle:u.useCallback(()=>d(m=>!m),[d]),modal:o,children:e.jsx(jN,{...c,open:x,onOpenChange:d,dir:n,modal:o,children:a})})};Ym.displayName=si;var Km="DropdownMenuTrigger",Qm=u.forwardRef((s,t)=>{const{__scopeDropdownMenu:a,disabled:n=!1,...r}=s,i=Gm(Km,a),l=At(a);return e.jsx(bN,{asChild:!0,...l,children:e.jsx(Ae.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...r,ref:da(t,i.triggerRef),onPointerDown:me(s.onPointerDown,o=>{!n&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:me(s.onKeyDown,o=>{n||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});Qm.displayName=Km;var _N="DropdownMenuPortal",Xm=s=>{const{__scopeDropdownMenu:t,...a}=s,n=At(t);return e.jsx(NN,{...n,...a})};Xm.displayName=_N;var Jm="DropdownMenuContent",Zm=u.forwardRef((s,t)=>{const{__scopeDropdownMenu:a,...n}=s,r=Gm(Jm,a),i=At(a),l=u.useRef(!1);return e.jsx(wN,{id:r.contentId,"aria-labelledby":r.triggerId,...i,...n,ref:t,onCloseAutoFocus:me(s.onCloseAutoFocus,o=>{var c;l.current||(c=r.triggerRef.current)==null||c.focus(),l.current=!1,o.preventDefault()}),onInteractOutside:me(s.onInteractOutside,o=>{const c=o.detail.originalEvent,h=c.button===0&&c.ctrlKey===!0,x=c.button===2||h;(!r.modal||x)&&(l.current=!0)}),style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Zm.displayName=Jm;var $N="DropdownMenuGroup",LN=u.forwardRef((s,t)=>{const{__scopeDropdownMenu:a,...n}=s,r=At(a);return e.jsx(SN,{...r,...n,ref:t})});LN.displayName=$N;var zN="DropdownMenuLabel",eh=u.forwardRef((s,t)=>{const{__scopeDropdownMenu:a,...n}=s,r=At(a);return e.jsx(CN,{...r,...n,ref:t})});eh.displayName=zN;var BN="DropdownMenuItem",th=u.forwardRef((s,t)=>{const{__scopeDropdownMenu:a,...n}=s,r=At(a);return e.jsx(kN,{...r,...n,ref:t})});th.displayName=BN;var qN="DropdownMenuCheckboxItem",sh=u.forwardRef((s,t)=>{const{__scopeDropdownMenu:a,...n}=s,r=At(a);return e.jsx(DN,{...r,...n,ref:t})});sh.displayName=qN;var VN="DropdownMenuRadioGroup",UN=u.forwardRef((s,t)=>{const{__scopeDropdownMenu:a,...n}=s,r=At(a);return e.jsx(TN,{...r,...n,ref:t})});UN.displayName=VN;var WN="DropdownMenuRadioItem",ah=u.forwardRef((s,t)=>{const{__scopeDropdownMenu:a,...n}=s,r=At(a);return e.jsx(EN,{...r,...n,ref:t})});ah.displayName=WN;var HN="DropdownMenuItemIndicator",nh=u.forwardRef((s,t)=>{const{__scopeDropdownMenu:a,...n}=s,r=At(a);return e.jsx(MN,{...r,...n,ref:t})});nh.displayName=HN;var GN="DropdownMenuSeparator",rh=u.forwardRef((s,t)=>{const{__scopeDropdownMenu:a,...n}=s,r=At(a);return e.jsx(PN,{...r,...n,ref:t})});rh.displayName=GN;var YN="DropdownMenuArrow",KN=u.forwardRef((s,t)=>{const{__scopeDropdownMenu:a,...n}=s,r=At(a);return e.jsx(AN,{...r,...n,ref:t})});KN.displayName=YN;var QN="DropdownMenuSubTrigger",ih=u.forwardRef((s,t)=>{const{__scopeDropdownMenu:a,...n}=s,r=At(a);return e.jsx(RN,{...r,...n,ref:t})});ih.displayName=QN;var XN="DropdownMenuSubContent",oh=u.forwardRef((s,t)=>{const{__scopeDropdownMenu:a,...n}=s,r=At(a);return e.jsx(IN,{...r,...n,ref:t,style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oh.displayName=XN;var JN=Ym,ZN=Qm,ew=Xm,lh=Zm,ch=eh,dh=th,uh=sh,mh=ah,hh=nh,xh=rh,gh=ih,ph=oh;const io=JN,oo=ZN,tw=u.forwardRef(({className:s,inset:t,children:a,...n},r)=>e.jsxs(gh,{ref:r,className:G("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",s),...n,children:[a,e.jsx(Za,{className:"ml-auto h-4 w-4"})]}));tw.displayName=gh.displayName;const sw=u.forwardRef(({className:s,...t},a)=>e.jsx(ph,{ref:a,className:G("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));sw.displayName=ph.displayName;const br=u.forwardRef(({className:s,sideOffset:t=4,...a},n)=>e.jsx(ew,{children:e.jsx(lh,{ref:n,sideOffset:t,className:G("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}));br.displayName=lh.displayName;const Wt=u.forwardRef(({className:s,inset:t,...a},n)=>e.jsx(dh,{ref:n,className:G("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",s),...a}));Wt.displayName=dh.displayName;const aw=u.forwardRef(({className:s,children:t,checked:a,...n},r)=>e.jsxs(uh,{ref:r,className:G("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",s),checked:a,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(hh,{children:e.jsx(wo,{className:"h-4 w-4"})})}),t]}));aw.displayName=uh.displayName;const nw=u.forwardRef(({className:s,children:t,...a},n)=>e.jsxs(mh,{ref:n,className:G("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(hh,{children:e.jsx(id,{className:"h-2 w-2 fill-current"})})}),t]}));nw.displayName=mh.displayName;const rw=u.forwardRef(({className:s,inset:t,...a},n)=>e.jsx(ch,{ref:n,className:G("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...a}));rw.displayName=ch.displayName;const Nr=u.forwardRef(({className:s,...t},a)=>e.jsx(xh,{ref:a,className:G("-mx-1 my-1 h-px bg-muted",s),...t}));Nr.displayName=xh.displayName;const iw=({filteredTransactions:s,onFiltersChange:t})=>{const{deleteTransaction:a}=he(),{toast:n}=Ue(),{searchTerm:r,debouncedSearchTerm:i,setSearchTerm:l}=gm("",300),[o,c]=u.useState("all"),[h,x]=u.useState({min:"",max:""}),[d,m]=u.useState("all"),[g,y]=u.useState("date"),[p,j]=u.useState("desc"),[v,N]=u.useState("list"),[f,S]=u.useState(new Set),[D,w]=u.useState(!1),R=I=>{switch(I){case"Petrol":return Pn;case"Food":return Rn;case"Other":return Va;case"Earnings":return de;default:return Va}},b=I=>{switch(I){case"Petrol":return"text-warning bg-warning/10 border-warning/20";case"Food":return"text-destructive bg-destructive/10 border-destructive/20";case"Other":return"text-muted-foreground bg-muted/50 border-muted/50";case"Earnings":return"text-success bg-success/10 border-success/20";default:return"text-muted-foreground bg-muted/50 border-muted/50"}},k=u.useMemo(()=>{let I=s;if(i&&(I=I.filter(C=>C.category.toLowerCase().includes(i.toLowerCase())||C.amount.toString().includes(i))),o!=="all"&&(I=I.filter(C=>C.category===o)),(h.min||h.max)&&(I=I.filter(C=>{const B=Math.abs(C.amount),E=parseFloat(h.min)||0,V=parseFloat(h.max)||1/0;return B>=E&&B<=V})),d!=="all"){const C=new Date;let B,E;switch(d){case"today":B=Ks(C),E=Zc(C);break;case"week":B=Je(C,7),E=C;break;case"month":B=Je(C,30),E=C;break;default:B=new Date(0),E=C}I=I.filter(V=>{const U=_e(V.date);return ma(U,{start:B,end:E})})}return I=[...I].sort((C,B)=>{let E=0;switch(g){case"date":E=new Date(C.date).getTime()-new Date(B.date).getTime();break;case"amount":E=Math.abs(C.amount)-Math.abs(B.amount);break;case"category":E=C.category.localeCompare(B.category);break}return p==="asc"?E:-E}),I},[s,i,o,h,d,g,p]),{visibleItems:T,totalHeight:F,handleScroll:O}=Lb(k,70,400),q=u.useCallback(I=>{S(C=>{const B=new Set(C);return B.has(I)?B.delete(I):B.add(I),B})},[]),P=u.useCallback(()=>{f.size===k.length?S(new Set):S(new Set(k.map((I,C)=>C.toString())))},[k.length,f.size]),A=u.useCallback(()=>{f.forEach(I=>{const C=parseInt(I);k[C]&&a(k[C].dailyEntryId.toString())}),S(new Set),n({title:"Success",description:`${f.size} transactions deleted`})},[f,k,a,n]),$=I=>{g===I?j(p==="asc"?"desc":"asc"):(y(I),j("desc"))},M=I=>{const C=_e(I);return ce(C,"MMM dd, yyyy • EEE")},z=(I,C)=>{const B=R(I.category),E=I.category==="Earnings",V=f.has(C.toString());return v==="compact"?e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all hover:shadow-sm ${V?"bg-primary/5 border-primary/30":"hover:bg-muted/50 border-border"}`,children:[D&&e.jsx(pa,{checked:V,onCheckedChange:()=>q(C.toString())}),e.jsx("div",{className:`p-2 rounded-lg ${b(I.category)}`,children:e.jsx(B,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:I.category}),e.jsx("p",{className:"text-xs text-muted-foreground",children:ce(_e(I.date),"MMM dd")})]}),e.jsxs("span",{className:`font-semibold ${E?"text-success":"text-foreground"}`,children:[E?"+":"-","£",I.amount.toFixed(2)]}),e.jsxs(io,{children:[e.jsx(oo,{asChild:!0,children:e.jsx(_,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(dr,{className:"h-4 w-4"})})}),e.jsxs(br,{align:"end",children:[e.jsxs(Wt,{children:[e.jsx(xa,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(Wt,{children:[e.jsx(lr,{className:"h-4 w-4 mr-2"}),"Duplicate"]}),e.jsx(Nr,{}),e.jsxs(Wt,{className:"text-destructive",onClick:()=>a(I.dailyEntryId.toString()),children:[e.jsx(ft,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]},C):e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border transition-all hover:shadow-sm group ${V?"bg-primary/5 border-primary/30":"hover:bg-muted/50 border-border"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[D&&e.jsx(pa,{checked:V,onCheckedChange:()=>q(C.toString())}),e.jsx("div",{className:`p-3 rounded-lg border ${b(I.category)}`,children:e.jsx(B,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-semibold",children:I.category}),e.jsx(K,{variant:"outline",className:"text-xs",children:I.week})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:M(I.date)})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:`font-bold text-lg ${E?"text-success":"text-foreground"}`,children:[E?"+":"-","£",I.amount.toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:E?"Income":"Expense"})]}),e.jsxs(io,{children:[e.jsx(oo,{asChild:!0,children:e.jsx(_,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(dr,{className:"h-4 w-4"})})}),e.jsxs(br,{align:"end",children:[e.jsxs(Wt,{children:[e.jsx(xa,{className:"h-4 w-4 mr-2"}),"Edit Transaction"]}),e.jsxs(Wt,{children:[e.jsx(lr,{className:"h-4 w-4 mr-2"}),"Duplicate"]}),e.jsxs(Wt,{children:[e.jsx(wl,{className:"h-4 w-4 mr-2"}),"Archive"]}),e.jsx(Nr,{}),e.jsxs(Wt,{className:"text-destructive",onClick:()=>a(I.dailyEntryId.toString()),children:[e.jsx(ft,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]},C)};return e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Transactions (",k.length,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex bg-muted rounded-lg p-1",children:[{mode:"list",icon:ur},{mode:"compact",icon:id}].map(({mode:I,icon:C})=>e.jsx(_,{variant:v===I?"secondary":"ghost",size:"sm",onClick:()=>N(I),className:"h-8 w-8 p-0",children:e.jsx(C,{className:"h-4 w-4"})},I))}),e.jsxs(_,{variant:D?"secondary":"outline",size:"sm",onClick:()=>w(!D),children:[e.jsx(er,{className:"h-4 w-4 mr-2"}),"Select"]}),e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(ca,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(ae,{placeholder:"Search transactions...",value:r,onChange:I=>l(I.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(Re,{value:o,onValueChange:c,children:[e.jsxs(Me,{className:"w-40",children:[e.jsx(fn,{className:"h-4 w-4 mr-2"}),e.jsx(Ie,{placeholder:"Category"})]}),e.jsxs(Pe,{children:[e.jsx(J,{value:"all",children:"All Categories"}),e.jsx(J,{value:"Earnings",children:"Earnings"}),e.jsx(J,{value:"Petrol",children:"Petrol"}),e.jsx(J,{value:"Food",children:"Food"}),e.jsx(J,{value:"Other",children:"Other"})]})]}),e.jsxs(Re,{value:d,onValueChange:m,children:[e.jsxs(Me,{className:"w-32",children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),e.jsx(Ie,{placeholder:"Date"})]}),e.jsxs(Pe,{children:[e.jsx(J,{value:"all",children:"All Time"}),e.jsx(J,{value:"today",children:"Today"}),e.jsx(J,{value:"week",children:"Last Week"}),e.jsx(J,{value:"month",children:"Last Month"})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(ae,{type:"number",placeholder:"Min £",value:h.min,onChange:I=>x(C=>({...C,min:I.target.value})),className:"w-24"}),e.jsx(ae,{type:"number",placeholder:"Max £",value:h.max,onChange:I=>x(C=>({...C,max:I.target.value})),className:"w-24"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Sort by:"}),[{field:"date",label:"Date"},{field:"amount",label:"Amount"},{field:"category",label:"Category"}].map(({field:I,label:C})=>e.jsxs(_,{variant:g===I?"secondary":"ghost",size:"sm",onClick:()=>$(I),className:"text-xs",children:[C,e.jsx(Dg,{className:"h-3 w-3 ml-1"})]},I))]}),D&&f.size>0&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary/5 border border-primary/20 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-medium",children:[f.size," transaction",f.size>1?"s":""," selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:A,children:[e.jsx(ft,{className:"h-4 w-4 mr-2"}),"Delete Selected"]}),e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(wl,{className:"h-4 w-4 mr-2"}),"Archive Selected"]})]})]})]}),e.jsxs("div",{className:"space-y-3 max-h-96 overflow-auto",onScroll:O,children:[T.map((I,C)=>z(I,C)),k.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground",children:"No transactions found matching your filters"}),e.jsx(_,{variant:"outline",className:"mt-4",onClick:()=>{l(""),c("all"),x({min:"",max:""}),m("all")},children:"Clear Filters"})]})]}),D&&e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx(_,{variant:"ghost",size:"sm",onClick:P,children:f.size===k.length?"Deselect All":"Select All"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[k.length," total transactions"]})]})]})},ow=({filteredTransactions:s})=>{const{transactions:t}=he(),[a,n]=u.useState(!1),r=u.useMemo(()=>{if(!s.length)return null;const o=new Date,c={start:mt(o),end:Ys(o)},h={start:mt(Je(o,30)),end:Ys(Je(o,30))},x=t.filter(O=>ma(_e(O.date),c)),d=t.filter(O=>ma(_e(O.date),h)),m=x.filter(O=>O.category!=="Earnings").reduce((O,q)=>O+q.amount,0),g=d.filter(O=>O.category!=="Earnings").reduce((O,q)=>O+q.amount,0),y=g>0?(m-g)/g*100:0,p=x.filter(O=>O.category==="Earnings").reduce((O,q)=>O+q.amount,0),j=d.filter(O=>O.category==="Earnings").reduce((O,q)=>O+q.amount,0),v=j>0?(p-j)/j*100:0,N=x.filter(O=>O.category!=="Earnings").reduce((O,q)=>(O[q.category]=(O[q.category]||0)+q.amount,O),{}),f=Object.entries(N).sort(([,O],[,q])=>q-O)[0],S=x.length/30,D=7,R=t.filter(O=>or(o,_e(O.date))<=D).length/D,b=m/(x.length||1),k={Petrol:300,Food:400,Other:200,total:900},T={Petrol:(N.Petrol||0)/k.Petrol*100,Food:(N.Food||0)/k.Food*100,Other:(N.Other||0)/k.Other*100,total:m/k.total*100},F=[];return Math.abs(y)>10&&F.push({type:y>0?"warning":"success",icon:y>0?de:We,title:y>0?"Spending Increased":"Spending Decreased",message:`Your spending ${y>0?"increased":"decreased"} by ${Math.abs(y).toFixed(1)}% compared to last month`,value:`${y>0?"+":""}${y.toFixed(1)}%`,action:y>0?"Review expenses":"Keep it up!"}),Object.entries(T).forEach(([O,q])=>{q>80&&O!=="total"&&F.push({type:q>100?"danger":"warning",icon:Ze,title:`${O} Budget Alert`,message:`You've used ${q.toFixed(0)}% of your ${O.toLowerCase()} budget`,value:`${q.toFixed(0)}%`,action:q>100?"Over budget!":"Slow down spending"})}),f&&f[1]>200&&F.push({type:"info",icon:ht,title:"Top Spending Category",message:`${f[0]} is your highest expense category this month`,value:`£${f[1].toFixed(0)}`,action:"Consider optimization"}),R>S*1.5&&F.push({type:"warning",icon:Be,title:"High Transaction Activity",message:"You've been making more transactions than usual recently",value:`${R.toFixed(1)}/day`,action:"Review recent purchases"}),Math.abs(v)>15&&F.push({type:v>0?"success":"warning",icon:v>0?de:We,title:`Income ${v>0?"Increased":"Decreased"}`,message:`Your income ${v>0?"increased":"decreased"} by ${Math.abs(v).toFixed(1)}% this month`,value:`${v>0?"+":""}${v.toFixed(1)}%`,action:v>0?"Great progress!":"Monitor closely"}),{insights:F,spendingChange:y,incomeChange:v,budgetUsage:T,categorySpending:N,spendingVelocity:b,avgTransactionsPerDay:S,recentAvgPerDay:R,currentSpending:m,currentIncome:p}},[s,t]);if(!r)return null;const i=o=>{switch(o){case"success":return"border-success/20 bg-success/5 text-success";case"warning":return"border-warning/20 bg-warning/5 text-warning";case"danger":return"border-destructive/20 bg-destructive/5 text-destructive";default:return"border-primary/20 bg-primary/5 text-primary"}},l=o=>{switch(o){case"success":return"bg-success text-success-foreground";case"warning":return"bg-warning text-warning-foreground";case"danger":return"bg-destructive text-destructive-foreground";default:return"bg-primary text-primary-foreground"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(L,{className:"p-6 bg-gradient-to-r from-primary/5 to-accent/5 border-primary/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(Yt,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"AI Financial Insights"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Smart analysis of your spending patterns"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(K,{variant:"secondary",className:"text-xs",children:[r.insights.length," insights"]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>n(!a),children:a?e.jsx(qa,{className:"h-4 w-4"}):e.jsx(Qt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-background/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Monthly Spending"}),e.jsxs("p",{className:"text-lg font-bold",children:["£",r.currentSpending.toFixed(0)]}),e.jsxs("p",{className:`text-xs ${r.spendingChange>0?"text-destructive":"text-success"}`,children:[r.spendingChange>0?"+":"",r.spendingChange.toFixed(1),"%"]})]}),e.jsxs("div",{className:"text-center p-3 bg-background/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Monthly Income"}),e.jsxs("p",{className:"text-lg font-bold text-success",children:["£",r.currentIncome.toFixed(0)]}),e.jsxs("p",{className:`text-xs ${r.incomeChange>0?"text-success":"text-destructive"}`,children:[r.incomeChange>0?"+":"",r.incomeChange.toFixed(1),"%"]})]}),e.jsxs("div",{className:"text-center p-3 bg-background/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Budget Usage"}),e.jsxs("p",{className:"text-lg font-bold",children:[r.budgetUsage.total.toFixed(0),"%"]}),e.jsx(Te,{value:r.budgetUsage.total,className:"h-1 mt-1"})]}),e.jsxs("div",{className:"text-center p-3 bg-background/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Daily Avg"}),e.jsx("p",{className:"text-lg font-bold",children:r.recentAvgPerDay.toFixed(1)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"transactions/day"})]})]})]}),r.insights.length>0&&e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r.insights.slice(0,a?void 0:4).map((o,c)=>{const h=o.icon;return e.jsx(L,{className:`p-4 border-2 ${i(o.type)}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-background/50 rounded-lg",children:e.jsx(h,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:o.title}),e.jsx(K,{className:`text-xs ${l(o.type)}`,children:o.value})]}),e.jsx("p",{className:"text-sm text-foreground/80 mb-2",children:o.message}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gn,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs font-medium",children:o.action})]})]})]})},c)})}),a&&e.jsxs(L,{className:"p-6",children:[e.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"}),"Advanced Analytics"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-3",children:"Budget Performance"}),e.jsx("div",{className:"space-y-3",children:Object.entries(r.budgetUsage).map(([o,c])=>o==="total"?null:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:o}),e.jsxs("span",{className:c>100?"text-destructive":c>80?"text-warning":"text-success",children:[c.toFixed(0),"%"]})]}),e.jsx(Te,{value:Math.min(c,100),className:`h-2 ${c>100?"[&>div]:bg-destructive":c>80?"[&>div]:bg-warning":"[&>div]:bg-success"}`})]},o))})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg",children:[e.jsx("h6",{className:"font-medium mb-2",children:"Spending Velocity"}),e.jsxs("p",{className:"text-2xl font-bold",children:["£",r.spendingVelocity.toFixed(0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"per transaction"})]}),e.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg",children:[e.jsx("h6",{className:"font-medium mb-2",children:"Transaction Frequency"}),e.jsx("p",{className:"text-2xl font-bold",children:r.avgTransactionsPerDay.toFixed(1)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"per day average"})]})]})]})]}),r.insights.length===0&&e.jsxs(L,{className:"p-8 text-center",children:[e.jsx(Yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"No Notable Patterns Detected"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Your spending appears stable. Keep tracking to unlock more insights!"}),e.jsx(K,{variant:"outline",children:"All systems normal"})]})]})},lw=({type:s="card",title:t="Loading...",description:a,showSpinner:n=!0})=>s==="dashboard"?e.jsxs("div",{className:"space-y-6 animate-pulse",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(pe,{className:"h-8 w-80"}),e.jsx(pe,{className:"h-4 w-96"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(pe,{className:"h-10 w-32"}),e.jsx(pe,{className:"h-10 w-32"})]})]}),e.jsx(L,{className:"p-4",children:e.jsx("div",{className:"space-y-3",children:[1,2].map(r=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pe,{className:"h-8 w-8 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(pe,{className:"h-4 w-3/4"}),e.jsx(pe,{className:"h-3 w-1/2"})]})]},r))})}),e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(pe,{className:"h-6 w-32 mx-auto"}),e.jsx(pe,{className:"h-12 w-48 mx-auto"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(pe,{className:"h-8 w-20 mx-auto mb-2"}),e.jsx(pe,{className:"h-4 w-16 mx-auto"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(pe,{className:"h-8 w-20 mx-auto mb-2"}),e.jsx(pe,{className:"h-4 w-16 mx-auto"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(r=>e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(pe,{className:"h-4 w-16"}),e.jsx(pe,{className:"h-5 w-5 rounded"})]}),e.jsx(pe,{className:"h-7 w-20 mb-1"}),e.jsx(pe,{className:"h-3 w-24"})]},r))}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-4",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(L,{className:"p-6",children:[e.jsx(pe,{className:"h-6 w-32 mb-4"}),e.jsx(pe,{className:"h-48 w-full"})]}),e.jsxs(L,{className:"p-6",children:[e.jsx(pe,{className:"h-6 w-32 mb-4"}),e.jsx(pe,{className:"h-48 w-full"})]})]})}),e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(L,{className:"p-6",children:[e.jsx(pe,{className:"h-6 w-32 mb-4"}),e.jsx("div",{className:"space-y-3",children:[1,2,3,4].map(r=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pe,{className:"h-8 w-8 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(pe,{className:"h-4 w-3/4 mb-1"}),e.jsx(pe,{className:"h-3 w-1/2"})]}),e.jsx(pe,{className:"h-4 w-16"})]},r))})]}),e.jsxs(L,{className:"p-6",children:[e.jsx(pe,{className:"h-6 w-32 mb-4"}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(r=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pe,{className:"h-6 w-6 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(pe,{className:"h-4 w-full mb-1"}),e.jsx(pe,{className:"h-3 w-2/3"})]})]},r))})]})]})})]})]}):s==="chart"?e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(pe,{className:"h-6 w-48"}),e.jsx(pe,{className:"h-4 w-64"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(pe,{className:"h-8 w-24"}),e.jsx(pe,{className:"h-8 w-20"})]})]}),n&&e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(tt,{className:"h-12 w-12 text-muted-foreground"}),e.jsx(Pt,{className:"h-6 w-6 text-primary animate-spin absolute top-3 right-0"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-sm",children:"Processing chart data..."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This may take a moment"})]})]})}),!n&&e.jsx(pe,{className:"h-64 w-full"})]}):s==="table"?e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(pe,{className:"h-6 w-40"}),e.jsx(pe,{className:"h-8 w-32"})]}),e.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(r=>e.jsxs("div",{className:"flex items-center gap-4 p-3 border border-border rounded-lg",children:[e.jsx(pe,{className:"h-8 w-8 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(pe,{className:"h-4 w-3/4"}),e.jsx(pe,{className:"h-3 w-1/2"})]}),e.jsx(pe,{className:"h-4 w-20"}),e.jsx(pe,{className:"h-6 w-16"})]},r))})]})}):e.jsx(L,{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:n?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(Pt,{className:"h-8 w-8 text-primary animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-sm",children:t}),a&&e.jsx("p",{className:"text-xs text-muted-foreground",children:a})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(pe,{className:"h-6 w-48"}),e.jsx(pe,{className:"h-5 w-5 rounded"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(pe,{className:"h-4 w-full"}),e.jsx(pe,{className:"h-4 w-3/4"}),e.jsx(pe,{className:"h-4 w-1/2"})]})]})})}),cw=()=>{const{transactions:s}=he(),{toast:t}=Ue(),[a,n]=u.useState({timeRange:"30d",categories:[],amountRange:{min:0,max:1e4},transactionType:"all"}),[r,i]=u.useState({categories:[],tags:[],amountRange:{min:0,max:1e4},dateRange:{from:null,to:null},transactionType:"all",recurring:null}),[l,o]=u.useState(""),[c,h]=u.useState(!0),[x,d]=u.useState(!1),m=u.useMemo(()=>{let p=s;if(l.trim()){const j=l.toLowerCase();p=p.filter(v=>v.category.toLowerCase().includes(j)||Math.abs(v.amount).toString().includes(j)||v.date.includes(j))}if(r.categories.length>0&&(p=p.filter(j=>r.categories.includes(j.category))),r.transactionType!=="all"&&(r.transactionType==="income"?p=p.filter(j=>j.category==="Earnings"):r.transactionType==="expense"&&(p=p.filter(j=>j.category!=="Earnings"))),(r.amountRange.min>0||r.amountRange.max<1e4)&&(p=p.filter(j=>{const v=Math.abs(j.amount);return v>=r.amountRange.min&&v<=r.amountRange.max})),a.timeRange!=="all"){const j=new Date;let v;switch(a.timeRange){case"7d":v=Je(j,7);break;case"30d":v=Je(j,30);break;case"90d":v=Je(j,90);break;case"1y":v=Je(j,365);break;case"custom":return a.customStartDate&&a.customEndDate?p.filter(N=>ma(_e(N.date),{start:Ks(a.customStartDate),end:Zc(a.customEndDate)})):p;default:v=Je(j,30)}p=p.filter(N=>_e(N.date)>=v)}return a.categories.length>0&&(p=p.filter(j=>a.categories.includes(j.category))),a.transactionType!=="all"&&(a.transactionType==="income"?p=p.filter(j=>j.category==="Earnings"):a.transactionType==="expense"&&(p=p.filter(j=>j.category!=="Earnings"))),(a.amountRange.min>0||a.amountRange.max<1e4)&&(p=p.filter(j=>{const v=Math.abs(j.amount);return v>=a.amountRange.min&&v<=a.amountRange.max})),p.sort((j,v)=>new Date(v.date).getTime()-new Date(j.date).getTime())},[s,a,l,r]),g=p=>{n(p)},y=()=>{d(!0),setTimeout(()=>{d(!1),t({title:"Export Complete",description:"Transactions exported successfully"})},2e3)};return e.jsxs("div",{className:"space-y-4 animate-fade-in max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Transactions"}),e.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[m.length," of ",s.length," transactions"]}),e.jsxs("span",{className:"font-medium",children:["Total: £",m.reduce((p,j)=>p+Math.abs(j.amount),0).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(_,{variant:"outline",onClick:()=>h(!c),size:"sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),c?"Hide":"Show"," Analytics"]}),e.jsx(Wb,{}),e.jsxs(_,{variant:"outline",onClick:y,disabled:x,size:"sm",children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),x?"Exporting...":"Export"]}),e.jsx(pm,{}),e.jsx(Ga,{})]})]}),e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(zb,{onSearch:o,onFilterChange:i,placeholder:"Search transactions, amounts, categories..."}),e.jsx(sm,{onFiltersChange:g,showTimeRange:!0,showCategories:!0,showAmountRange:!0,compact:!0})]})}),c&&e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4",children:[e.jsx("div",{className:"xl:col-span-2",children:e.jsx(am,{filteredTransactions:m,timeRange:a.timeRange})}),e.jsx("div",{className:"xl:col-span-1",children:e.jsx(ow,{filteredTransactions:m})})]}),x?e.jsx(lw,{type:"table",title:"Loading transactions..."}):e.jsx(iw,{filteredTransactions:m,onFiltersChange:g})]})},dw=()=>{const{goals:s,addGoal:t,updateGoal:a,deleteGoal:n,currency:r}=he(),{toast:i}=Ue(),[l,o]=u.useState(!1),[c,h]=u.useState(null),[x,d]=u.useState({name:"",targetAmount:"",currentAmount:"",deadline:"",category:""}),m=b=>{if(b.preventDefault(),!x.name||!x.targetAmount||!x.deadline||!x.category){i({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}const k={title:x.name,name:x.name,targetAmount:parseFloat(x.targetAmount),currentAmount:parseFloat(x.currentAmount)||0,targetDate:x.deadline,category:x.category,isCompleted:!1};c?(a(c,k),i({title:"Success",description:"Goal updated successfully"})):(t(k),i({title:"Success",description:"Goal created successfully"})),d({name:"",targetAmount:"",currentAmount:"",deadline:"",category:""}),o(!1),h(null)},g=b=>{d({name:b.title,targetAmount:b.targetAmount.toString(),currentAmount:b.currentAmount.toString(),deadline:b.targetDate,category:b.category}),h(b.id),o(!0)},y=b=>{n(b),i({title:"Success",description:"Goal deleted successfully"})},p=(b,k)=>{const T=s.find(F=>F.id===b);if(T){const F=T.currentAmount+k,O=F>=T.targetAmount;a(b,{currentAmount:F,isCompleted:O}),O&&!T.isCompleted&&i({title:"🎉 Goal Completed!",description:`Congratulations! You've reached your goal: ${T.title}`})}},j=(b,k)=>Math.min(b/k*100,100),v=b=>{const k=new Date,F=new Date(b).getTime()-k.getTime();return Math.ceil(F/(1e3*60*60*24))},N=(b,k,T)=>{const F=v(T);if(F<=0)return 0;const O=k-b,q=F/30.44;return O/q},f=(b,k,T)=>{const F=v(T),O=k-b,q=N(b,k,T);return F<=0?"Goal deadline has passed":O<=0?"Goal completed! 🎉":`Save £${q.toFixed(2)}/month to reach goal`},S=(b,k)=>b>=100||b>=75?"text-success":b>=50?"text-warning":k<30&&b<75?"text-destructive":"text-primary",D=b=>{const T=2*Math.PI*40,F=T,O=T-b/100*T;return{strokeDasharray:F,strokeDashoffset:O}},w=s.filter(b=>!b.isCompleted),R=s.filter(b=>b.isCompleted);return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Financial Goals"}),e.jsx("p",{className:"text-muted-foreground",children:"Set and track your savings targets"})]}),e.jsxs(dt,{open:l,onOpenChange:o,children:[e.jsx(Ft,{asChild:!0,children:e.jsxs(_,{className:"gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Add Goal"]})}),e.jsxs(at,{className:"sm:max-w-[425px]",children:[e.jsx(nt,{children:e.jsx(rt,{children:c?"Edit Goal":"Create New Goal"})}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"goal-name",children:"Goal Name *"}),e.jsx(ae,{id:"goal-name",value:x.name,onChange:b=>d(k=>({...k,name:b.target.value})),placeholder:"e.g., Emergency Fund, New Car",required:!0})]}),e.jsxs("div",{children:[e.jsxs(W,{htmlFor:"target-amount",children:["Target Amount (",r,") *"]}),e.jsx(ae,{id:"target-amount",type:"number",step:"0.01",value:x.targetAmount,onChange:b=>d(k=>({...k,targetAmount:b.target.value})),placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsxs(W,{htmlFor:"current-amount",children:["Current Amount (",r,")"]}),e.jsx(ae,{id:"current-amount",type:"number",step:"0.01",value:x.currentAmount,onChange:b=>d(k=>({...k,currentAmount:b.target.value})),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"deadline",children:"Deadline *"}),e.jsx(ae,{id:"deadline",type:"date",value:x.deadline,onChange:b=>d(k=>({...k,deadline:b.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"category",children:"Category *"}),e.jsxs(Re,{value:x.category,onValueChange:b=>d(k=>({...k,category:b})),children:[e.jsx(Me,{children:e.jsx(Ie,{placeholder:"Select category"})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"Emergency Fund",children:"Emergency Fund"}),e.jsx(J,{value:"Vacation",children:"Vacation"}),e.jsx(J,{value:"Car",children:"Car"}),e.jsx(J,{value:"House",children:"House"}),e.jsx(J,{value:"Education",children:"Education"}),e.jsx(J,{value:"Investment",children:"Investment"}),e.jsx(J,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(_,{type:"submit",children:c?"Update Goal":"Create Goal"})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsx(L,{className:"p-6 bg-gradient-to-r from-primary to-primary/80 text-primary-foreground hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-full",children:e.jsx(je,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Active Goals"}),e.jsx("p",{className:"text-3xl font-bold",children:w.length})]})]})}),e.jsx(L,{className:"p-6 hover:shadow-lg transition-all duration-300 border-success/20",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-success/10 rounded-full",children:e.jsx(ht,{className:"h-6 w-6 text-success"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Saved"}),e.jsxs("p",{className:"text-3xl font-bold text-success",children:["£",w.reduce((b,k)=>b+k.currentAmount,0).toFixed(2)]})]})]})}),e.jsx(L,{className:"p-6 hover:shadow-lg transition-all duration-300 border-primary/20",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:e.jsx(de,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Target"}),e.jsxs("p",{className:"text-3xl font-bold",children:["£",w.reduce((b,k)=>b+k.targetAmount,0).toFixed(2)]})]})]})}),e.jsx(L,{className:"p-6 hover:shadow-lg transition-all duration-300 border-warning/20",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-warning/10 rounded-full",children:e.jsx(Fe,{className:"h-6 w-6 text-warning"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold text-warning",children:R.length})]})]})})]}),w.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center gap-2",children:[e.jsx(je,{className:"h-6 w-6 text-primary"}),"Active Goals"]}),e.jsx("div",{className:"grid gap-6 lg:grid-cols-2",children:w.map(b=>{const k=j(b.currentAmount,b.targetAmount),T=v(b.deadline),F=T<0,O=T<30&&k<75;N(b.currentAmount,b.targetAmount,b.deadline);const{strokeDasharray:q,strokeDashoffset:P}=D(k);return e.jsx(L,{className:`p-6 hover:shadow-xl transition-all duration-300 hover:scale-[1.02] ${F?"border-destructive/50 bg-destructive/5":O?"border-warning/50 bg-warning/5":"border-border hover:border-primary/30"}`,children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:b.title}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(K,{variant:"outline",className:"text-xs",children:b.category}),F&&e.jsx(K,{variant:"destructive",className:"text-xs",children:"Overdue"}),O&&!F&&e.jsx(K,{variant:"secondary",className:"text-xs bg-warning/20 text-warning",children:"Urgent"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>g(b),className:"hover:bg-primary/10",children:e.jsx(xa,{className:"h-4 w-4"})}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>y(b.id),className:"text-destructive hover:bg-destructive/10",children:e.jsx(ft,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{className:"w-24 h-24 transform -rotate-90",viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"40",stroke:"hsl(var(--muted))",strokeWidth:"8",fill:"none",className:"opacity-20"}),e.jsx("circle",{cx:"50",cy:"50",r:"40",stroke:k>=100||k>=75?"hsl(var(--success))":k>=50?"hsl(var(--warning))":O?"hsl(var(--destructive))":"hsl(var(--primary))",strokeWidth:"8",fill:"none",strokeLinecap:"round",strokeDasharray:q,strokeDashoffset:P,className:"transition-all duration-1000 ease-out"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:`text-lg font-bold ${S(k,T)}`,children:[k.toFixed(0),"%"]})})]}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Current"}),e.jsxs("span",{className:"font-semibold text-lg",children:["£",b.currentAmount.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Target"}),e.jsxs("span",{className:"font-semibold text-lg",children:["£",b.targetAmount.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Remaining"}),e.jsxs("span",{className:"font-semibold text-lg text-primary",children:["£",(b.targetAmount-b.currentAmount).toFixed(2)]})]})]})]}),e.jsx(us,{className:`${F?"border-destructive bg-destructive/5":O?"border-warning bg-warning/5":"border-primary/20 bg-primary/5"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[F?e.jsx(Ze,{className:"h-4 w-4 text-destructive"}):O?e.jsx(xn,{className:"h-4 w-4 text-warning"}):e.jsx(de,{className:"h-4 w-4 text-primary"}),e.jsx(ms,{className:"text-sm font-medium",children:F?`Goal is ${Math.abs(T)} days overdue`:`${T} days left • ${f(b.currentAmount,b.targetAmount,b.deadline)}`})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Te,{value:k,className:`h-3 transition-all duration-700 ${k>=100||k>=75?"[&>div]:bg-success":k>=50?"[&>div]:bg-warning":O?"[&>div]:bg-destructive":"[&>div]:bg-primary"}`}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-muted-foreground",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"25%"}),e.jsx("span",{children:"50%"}),e.jsx("span",{children:"75%"}),e.jsx("span",{children:"100%"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-border",children:[e.jsx(ae,{type:"number",step:"0.01",placeholder:"Add £",className:"flex-1",onKeyDown:A=>{if(A.key==="Enter"){const $=parseFloat(A.target.value);$>0&&(p(b.id,$),A.target.value="")}}}),e.jsx(_,{size:"sm",onClick:A=>{const $=A.currentTarget.parentNode.querySelector("input"),M=parseFloat(($==null?void 0:$.value)||"0");M>0&&(p(b.id,M),$&&($.value=""))},className:"px-6",children:"Add"})]})]})},b.id)})})]}),R.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Completed Goals 🎉"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:R.map(b=>e.jsxs(L,{className:"p-6 opacity-75 border-success",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:b.name}),e.jsxs(K,{variant:"secondary",className:"mt-1 bg-success/20 text-success",children:[b.category," - Completed"]})]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>y(b.id),className:"text-destructive",children:e.jsx(ft,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Achieved: ",r,b.currentAmount.toFixed(2)]}),e.jsxs("span",{children:["Target: ",r,b.targetAmount.toFixed(2)]})]}),e.jsx(Te,{value:100,className:"h-3"}),e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"text-sm font-medium text-success",children:"🎉 Goal Completed!"})})]})]},b.id))})]}),s.length===0&&e.jsxs(L,{className:"p-12 text-center",children:[e.jsx(je,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Goals Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Set your first financial goal and start saving towards it!"}),e.jsxs(_,{onClick:()=>o(!0),className:"gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Create Your First Goal"]})]})]})};function uw(){const{debts:s}=he(),{toast:t}=Ue(),[a,n]=u.useState(0),[r,i]=u.useState("snowball"),[l,o]=u.useState(!0),[c,h]=u.useState(null),[x,d]=u.useState(!1),[m,g]=u.useState(1),[y,p]=u.useState(0),j=s.filter(b=>b.remainingAmount>0),v=()=>{if(a<=0||j.length===0){t({title:"Invalid Input",description:"Please enter a monthly budget and ensure you have active debts.",variant:"destructive"});return}d(!0),setTimeout(()=>{try{const b=[...j].map(A=>({...A,currentBalance:A.remainingAmount,interestRate:A.interestRate||0})).sort((A,$)=>r==="snowball"?A.currentBalance-$.currentBalance:($.interestRate||0)-(A.interestRate||0));let k=a;const T=[];let F=0,O=0;for(let A=0;A<b.length;A++){const $=b[A],M=$.minimumPayment||0;let z=M,I=0;k>M?(I=k-M,z=k,k=0):(z=k,k=0);let C=$.currentBalance,B=0,E=0;for(;C>0&&B<600;){const V=l?C*($.interestRate/100)/12:0,U=Math.min(C,z-V);if(C-=U,E+=V,B++,C<=0)break}T.push({id:$.id,name:$.name,currentBalance:$.currentBalance,interestRate:$.interestRate,minimumPayment:$.minimumPayment,payoffOrder:A+1,monthsToPayoff:B,totalInterest:E,monthlyPayment:z,extraPayment:I}),F=Math.max(F,B),O+=E}const q=a*F,P=j.reduce((A,$)=>{const M=Math.ceil($.remainingAmount/($.minimumPayment||1)),z=l?$.remainingAmount*($.interestRate/100)*M/12:0;return A+z},0)-O;h({debts:T,totalMonths:F,totalInterest:O,totalPayments:q,monthlyBudget:a,strategy:r,savings:Math.max(0,P)}),p(0),t({title:"Plan Calculated!",description:`Your debt-free journey will take ${F} months.`})}catch(b){console.error("Error calculating debt snowball:",b),t({title:"Calculation Error",description:"There was an error calculating your debt snowball plan.",variant:"destructive"})}finally{d(!1)}},500)},N=()=>{!c||y>=c.totalMonths||p(b=>Math.min(b+m,c.totalMonths))},f=()=>{p(0)},S=(b,k)=>{const T=(c==null?void 0:c.debts.slice(0,b.payoffOrder-1).reduce(($,M)=>$+M.monthsToPayoff,0))||0;if(k<T)return{paid:0,remaining:b.currentBalance,status:"pending"};const F=k-T;if(F>=b.monthsToPayoff)return{paid:b.currentBalance,remaining:0,status:"paid"};const O=l?b.currentBalance*(b.interestRate/100)/12:0,q=b.monthlyPayment-O,P=Math.min(b.currentBalance,q*F),A=Math.max(0,b.currentBalance-P);return{paid:P,remaining:A,status:F>0?"paying":"pending"}},D=b=>c?c.debts.reduce((k,T)=>{const F=S(T,b);return k+F.paid},0):0,w=()=>r==="snowball"?"Pay off smallest debts first for quick wins and motivation.":"Pay off highest interest debts first to save money on interest.",R=()=>r==="snowball"?e.jsx(Cl,{className:"h-4 w-4"}):e.jsx(Be,{className:"h-4 w-4"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(L,{className:"p-6 bg-gradient-to-r from-primary/5 to-primary/10 border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(vs,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Debt Snowball Calculator"}),e.jsx("p",{className:"text-muted-foreground",children:"Optimize your debt repayment strategy and become debt-free faster"})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"monthly-budget",children:"Monthly Debt Budget (£)"}),e.jsx(ae,{id:"monthly-budget",type:"number",value:a||"",onChange:b=>n(parseFloat(b.target.value)||0),placeholder:"500",min:"0",step:"10"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Repayment Strategy"}),e.jsxs(Re,{value:r,onValueChange:b=>i(b),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"snowball",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cl,{className:"h-4 w-4"}),"Snowball Method"]})}),e.jsx(J,{value:"avalanche",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Avalanche Method"]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Simulation Speed"}),e.jsxs(Re,{value:m.toString(),onValueChange:b=>g(parseInt(b)),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"1",children:"1x Speed"}),e.jsx(J,{value:"3",children:"3x Speed"}),e.jsx(J,{value:"6",children:"6x Speed"}),e.jsx(J,{value:"12",children:"12x Speed"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(_,{onClick:v,disabled:x||j.length===0,className:"w-full gap-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Calculating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4"}),"Calculate Plan"]})})})]}),e.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[R(),e.jsx("span",{className:"font-medium",children:r==="snowball"?"Snowball Method":"Avalanche Method"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:w()})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsx(ot,{checked:l,onCheckedChange:o}),e.jsx(W,{htmlFor:"include-interest",children:"Include interest calculations"})]})]}),c&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-semibold",children:"Timeline"})]}),e.jsxs("p",{className:"text-2xl font-bold text-primary",children:[c.totalMonths," months"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[Math.floor(c.totalMonths/12)," years ",c.totalMonths%12," months"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(ht,{className:"h-5 w-5 text-destructive"}),e.jsx("span",{className:"font-semibold",children:"Total Interest"})]}),e.jsxs("p",{className:"text-2xl font-bold text-destructive",children:["£",c.totalInterest.toFixed(0)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l?"With interest":"Interest excluded"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(We,{className:"h-5 w-5 text-success"}),e.jsx("span",{className:"font-semibold",children:"Total Payments"})]}),e.jsxs("p",{className:"text-2xl font-bold text-success",children:["£",c.totalPayments.toFixed(0)]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["£",c.monthlyBudget.toFixed(0),"/month"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(It,{className:"h-5 w-5 text-warning"}),e.jsx("span",{className:"font-semibold",children:"Savings"})]}),e.jsxs("p",{className:"text-2xl font-bold text-warning",children:["£",c.savings.toFixed(0)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"vs minimum payments"})]})]})}),e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:N,disabled:y>=c.totalMonths,className:"gap-2",children:[e.jsx(ls,{className:"h-4 w-4"}),"Simulate ",m," Month",m>1?"s":""]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:f,className:"gap-2",children:[e.jsx(ap,{className:"h-4 w-4"}),"Reset"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs(K,{variant:"secondary",className:"text-sm",children:["Month ",y," of ",c.totalMonths]}),e.jsx(Te,{value:y/c.totalMonths*100,className:"w-32 mt-1"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Paid"}),e.jsxs("p",{className:"text-lg font-bold",children:["£",D(y).toFixed(0)]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"}),"Payoff Timeline"]}),c.debts.map(b=>{const k=S(b,y),T=k.paid/b.currentBalance*100;return e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(K,{variant:"outline",className:"text-xs",children:["#",b.payoffOrder]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:b.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[b.interestRate,"% APR"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Min: £",b.minimumPayment,"/mo"]}),b.extraPayment>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{className:"text-success",children:["+£",b.extraPayment,"/mo"]})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:G("text-sm font-medium",k.status==="paid"?"text-success":k.status==="paying"?"text-warning":"text-muted-foreground"),children:k.status==="paid"?"Paid Off":k.status==="paying"?"Paying Off":"Pending"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["£",k.paid.toFixed(0)," / £",b.currentBalance.toFixed(0)]})]})]}),e.jsx(Te,{value:T,className:"h-2 mb-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Paid: £",k.paid.toFixed(0)]}),e.jsxs("span",{children:["Remaining: £",k.remaining.toFixed(0)]})]}),k.status==="paying"&&e.jsxs("div",{className:"mt-2 text-xs text-center text-warning",children:[e.jsx(Ee,{className:"h-3 w-3 inline mr-1"}),"Paying off - ",b.monthsToPayoff-(y-c.debts.slice(0,b.payoffOrder-1).reduce((F,O)=>F+O.monthsToPayoff,0))," months remaining"]}),k.status==="paid"&&e.jsxs("div",{className:"mt-2 text-xs text-center text-success",children:[e.jsx(Ee,{className:"h-3 w-3 inline mr-1"}),"Debt Free! 🎉"]})]},b.id)})]})]}),j.length===0&&e.jsxs(L,{className:"p-8 text-center",children:[e.jsx(je,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Active Debts"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add some debts to start using the debt snowball calculator!"})]})]})}const mw=()=>{const{debts:s,addDebt:t,updateDebt:a,deleteDebt:n,addDebtPayment:r,currency:i}=he(),{toast:l}=Ue(),[o,c]=u.useState(!1),[h,x]=u.useState(null),[d,m]=u.useState({name:"",totalAmount:"",remainingAmount:"",interestRate:"",minimumPayment:"",dueDate:"",category:""}),g=T=>{if(T.preventDefault(),!d.name||!d.totalAmount||!d.remainingAmount||!d.minimumPayment||!d.dueDate||!d.category){l({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}const F={name:d.name,totalAmount:parseFloat(d.totalAmount),remainingAmount:parseFloat(d.remainingAmount),interestRate:parseFloat(d.interestRate)||0,minimumPayment:parseFloat(d.minimumPayment),dueDate:d.dueDate,category:d.category,isActive:parseFloat(d.remainingAmount)>0};h?(a(h,F),l({title:"Success",description:"Debt updated successfully"})):(t(F),l({title:"Success",description:"Debt added successfully"})),m({name:"",totalAmount:"",remainingAmount:"",interestRate:"",minimumPayment:"",dueDate:"",category:""}),c(!1),x(null)},y=T=>{m({name:T.name,totalAmount:T.totalAmount.toString(),remainingAmount:T.remainingAmount.toString(),interestRate:T.interestRate.toString(),minimumPayment:T.minimumPayment.toString(),dueDate:T.dueDate,category:T.category}),x(T.id),c(!0)},p=T=>{n(T),l({title:"Success",description:"Debt deleted successfully"})},j=(T,F,O)=>{const q=new Date().toISOString().split("T")[0];r(T,{amount:F,date:q,notes:`Payment of £${F.toFixed(2)}`}),l({title:"Payment Recorded!",description:`£${F.toFixed(2)} payment added to debt`})},v=(T,F)=>Math.max(0,(F-T)/F*100),N=T=>{const F=new Date,q=new Date(T).getTime()-F.getTime();return Math.ceil(q/(1e3*60*60*24))},f=(T,F)=>F<=0?1/0:Math.ceil(T/F),S=T=>{const O=2*Math.PI*35,q=O,P=O-T/100*O;return{strokeDasharray:q,strokeDashoffset:P}},D=s.filter(T=>T.remainingAmount>0),w=s.filter(T=>T.remainingAmount<=0),R=D.reduce((T,F)=>T+F.remainingAmount,0),k=s.reduce((T,F)=>T+F.totalAmount,0)-R;return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Debt Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your debts and progress toward financial freedom"})]}),e.jsxs(dt,{open:o,onOpenChange:c,children:[e.jsx(Ft,{asChild:!0,children:e.jsxs(_,{className:"gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Add Debt"]})}),e.jsxs(at,{className:"sm:max-w-[500px]",children:[e.jsx(nt,{children:e.jsx(rt,{children:h?"Edit Debt":"Add New Debt"})}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"debt-name",children:"Debt Name *"}),e.jsx(ae,{id:"debt-name",value:d.name,onChange:T=>m(F=>({...F,name:T.target.value})),placeholder:"e.g., Credit Card, Student Loan",required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"category",children:"Category *"}),e.jsxs(Re,{value:d.category,onValueChange:T=>m(F=>({...F,category:T})),children:[e.jsx(Me,{children:e.jsx(Ie,{placeholder:"Select category"})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"Credit Card",children:"Credit Card"}),e.jsx(J,{value:"Student Loan",children:"Student Loan"}),e.jsx(J,{value:"Mortgage",children:"Mortgage"}),e.jsx(J,{value:"Car Loan",children:"Car Loan"}),e.jsx(J,{value:"Personal Loan",children:"Personal Loan"}),e.jsx(J,{value:"Medical Debt",children:"Medical Debt"}),e.jsx(J,{value:"Other",children:"Other"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"total-amount",children:"Original Amount (£) *"}),e.jsx(ae,{id:"total-amount",type:"number",step:"0.01",value:d.totalAmount,onChange:T=>m(F=>({...F,totalAmount:T.target.value})),placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"remaining-amount",children:"Current Balance (£) *"}),e.jsx(ae,{id:"remaining-amount",type:"number",step:"0.01",value:d.remainingAmount,onChange:T=>m(F=>({...F,remainingAmount:T.target.value})),placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"interest-rate",children:"Interest Rate (%)"}),e.jsx(ae,{id:"interest-rate",type:"number",step:"0.01",value:d.interestRate,onChange:T=>m(F=>({...F,interestRate:T.target.value})),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"minimum-payment",children:"Minimum Payment (£) *"}),e.jsx(ae,{id:"minimum-payment",type:"number",step:"0.01",value:d.minimumPayment,onChange:T=>m(F=>({...F,minimumPayment:T.target.value})),placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"due-date",children:"Next Due Date *"}),e.jsx(ae,{id:"due-date",type:"date",value:d.dueDate,onChange:T=>m(F=>({...F,dueDate:T.target.value})),required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(_,{type:"submit",children:h?"Update Debt":"Add Debt"})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsx(L,{className:"p-6 bg-gradient-to-r from-destructive to-destructive/80 text-destructive-foreground hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-full",children:e.jsx(Mt,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Total Debt"}),e.jsxs("p",{className:"text-3xl font-bold",children:["£",R.toFixed(2)]})]})]})}),e.jsx(L,{className:"p-6 hover:shadow-lg transition-all duration-300 border-success/20",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-success/10 rounded-full",children:e.jsx(Ee,{className:"h-6 w-6 text-success"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Paid Off"}),e.jsxs("p",{className:"text-3xl font-bold text-success",children:["£",k.toFixed(2)]})]})]})}),e.jsx(L,{className:"p-6 hover:shadow-lg transition-all duration-300 border-primary/20",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:e.jsx(We,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Debts"}),e.jsx("p",{className:"text-3xl font-bold",children:D.length})]})]})}),e.jsx(L,{className:"p-6 hover:shadow-lg transition-all duration-300 border-warning/20",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-warning/10 rounded-full",children:e.jsx(ht,{className:"h-6 w-6 text-warning"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Min Payments"}),e.jsxs("p",{className:"text-3xl font-bold text-warning",children:["£",D.reduce((T,F)=>T+F.minimumPayment,0).toFixed(2)]})]})]})})]}),e.jsxs(Xt,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(Bt,{className:"grid w-full grid-cols-2",children:[e.jsxs($e,{value:"overview",className:"gap-2",children:[e.jsx(Mt,{className:"h-4 w-4"}),"Debt Overview"]}),e.jsxs($e,{value:"snowball",className:"gap-2",children:[e.jsx(vs,{className:"h-4 w-4"}),"Snowball Calculator"]})]}),e.jsxs(Le,{value:"overview",className:"space-y-6",children:[D.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center gap-2",children:[e.jsx(Mt,{className:"h-6 w-6 text-destructive"}),"Active Debts"]}),e.jsx("div",{className:"grid gap-6 lg:grid-cols-2",children:D.map(T=>{const F=v(T.remainingAmount,T.totalAmount),O=N(T.dueDate),q=O<0,P=O<7,A=f(T.remainingAmount,T.minimumPayment),{strokeDasharray:$,strokeDashoffset:M}=S(F);return e.jsx(L,{className:`p-6 hover:shadow-xl transition-all duration-300 hover:scale-[1.02] ${q?"border-destructive/50 bg-destructive/5":P?"border-warning/50 bg-warning/5":"border-border hover:border-destructive/30"}`,children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:T.name}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(K,{variant:"outline",className:"text-xs",children:"Debt"}),q&&e.jsx(K,{variant:"destructive",className:"text-xs",children:"Overdue"}),P&&!q&&e.jsx(K,{variant:"secondary",className:"text-xs bg-warning/20 text-warning",children:"Due Soon"}),T.interestRate>0&&e.jsxs(K,{variant:"secondary",className:"text-xs",children:[T.interestRate,"% APR"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>y(T),className:"hover:bg-primary/10",children:e.jsx(xa,{className:"h-4 w-4"})}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>p(T.id),className:"text-destructive hover:bg-destructive/10",children:e.jsx(ft,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",viewBox:"0 0 80 80",children:[e.jsx("circle",{cx:"40",cy:"40",r:"35",stroke:"hsl(var(--muted))",strokeWidth:"6",fill:"none",className:"opacity-20"}),e.jsx("circle",{cx:"40",cy:"40",r:"35",stroke:"hsl(var(--success))",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeDasharray:$,strokeDashoffset:M,className:"transition-all duration-1000 ease-out"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-bold text-success",children:[F.toFixed(0),"%"]})})]}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Remaining"}),e.jsxs("span",{className:"font-semibold text-lg text-destructive",children:["£",(T.remainingAmount||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Original"}),e.jsxs("span",{className:"font-semibold text-lg",children:["£",(T.totalAmount||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Min Payment"}),e.jsxs("span",{className:"font-semibold text-lg",children:["£",(T.minimumPayment||0).toFixed(2)]})]})]})]}),e.jsx(us,{className:`${q?"border-destructive bg-destructive/5":P?"border-warning bg-warning/5":"border-primary/20 bg-primary/5"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[q?e.jsx(Ze,{className:"h-4 w-4 text-destructive"}):P?e.jsx(Fe,{className:"h-4 w-4 text-warning"}):e.jsx(Be,{className:"h-4 w-4 text-primary"}),e.jsx(ms,{className:"text-sm font-medium",children:q?`Payment is ${Math.abs(O)} days overdue`:`Due in ${O} days • ${A===1/0?"Never paid off at current rate":`${A} months to pay off`}`})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Te,{value:F,className:"h-3 transition-all duration-700 [&>div]:bg-success"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Paid: £",((T.totalAmount||0)-(T.remainingAmount||0)).toFixed(0)]}),e.jsxs("span",{children:["Remaining: £",(T.remainingAmount||0).toFixed(0)]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-border",children:[e.jsx(ae,{type:"number",step:"0.01",placeholder:"Payment amount",className:"flex-1",onKeyDown:z=>{if(z.key==="Enter"){const I=parseFloat(z.target.value);I>0&&(j(T.id,I,I>=T.minimumPayment?"extra":"minimum"),z.target.value="")}}}),e.jsx(_,{variant:"outline",size:"sm",onClick:z=>{const I=z.currentTarget.parentNode.querySelector("input");I&&(I.value=T.minimumPayment.toString(),j(T.id,T.minimumPayment),I.value="")},children:"Min"}),e.jsx(_,{size:"sm",onClick:z=>{const I=z.currentTarget.parentNode.querySelector("input"),C=parseFloat((I==null?void 0:I.value)||"0");C>0&&(j(T.id,C,C>=T.minimumPayment?"extra":"minimum"),I&&(I.value=""))},className:"px-6",children:"Pay"})]})]})},T.id)})})]}),w.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center gap-2",children:[e.jsx(Ee,{className:"h-6 w-6 text-success"}),"Paid Off Debts 🎉"]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:w.map(T=>e.jsxs(L,{className:"p-4 opacity-75 border-success bg-success/5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:T.name}),e.jsx(K,{variant:"secondary",className:"mt-1 bg-success/20 text-success text-xs",children:"Paid Off"})]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>p(T.id),className:"text-destructive",children:e.jsx(ft,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Original Amount"}),e.jsxs("p",{className:"text-lg font-bold",children:["£",T.totalAmount.toFixed(2)]})]}),e.jsx(Te,{value:100,className:"h-2 [&>div]:bg-success"}),e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"text-xs font-medium text-success",children:"🎉 Debt Free!"})})]})]},T.id))})]}),s.length===0&&e.jsxs(L,{className:"p-12 text-center",children:[e.jsx(Mt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Debts Tracked"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add your debts to track payments and progress toward financial freedom!"}),e.jsxs(_,{onClick:()=>c(!0),className:"gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Add Your First Debt"]})]})]}),e.jsx(Le,{value:"snowball",children:e.jsx(uw,{})})]})]})};function hw(s,t){return u.useReducer((a,n)=>t[a][n]??a,s)}var el="ScrollArea",[fh,SC]=ds(el),[xw,Jt]=fh(el),vh=u.forwardRef((s,t)=>{const{__scopeScrollArea:a,type:n="hover",dir:r,scrollHideDelay:i=600,...l}=s,[o,c]=u.useState(null),[h,x]=u.useState(null),[d,m]=u.useState(null),[g,y]=u.useState(null),[p,j]=u.useState(null),[v,N]=u.useState(0),[f,S]=u.useState(0),[D,w]=u.useState(!1),[R,b]=u.useState(!1),k=He(t,F=>c(F)),T=po(r);return e.jsx(xw,{scope:a,type:n,dir:T,scrollHideDelay:i,scrollArea:o,viewport:h,onViewportChange:x,content:d,onContentChange:m,scrollbarX:g,onScrollbarXChange:y,scrollbarXEnabled:D,onScrollbarXEnabledChange:w,scrollbarY:p,onScrollbarYChange:j,scrollbarYEnabled:R,onScrollbarYEnabledChange:b,onCornerWidthChange:N,onCornerHeightChange:S,children:e.jsx(Ae.div,{dir:T,...l,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":f+"px",...s.style}})})});vh.displayName=el;var yh="ScrollAreaViewport",jh=u.forwardRef((s,t)=>{const{__scopeScrollArea:a,children:n,nonce:r,...i}=s,l=Jt(yh,a),o=u.useRef(null),c=He(t,o,l.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(Ae.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...s.style},children:e.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});jh.displayName=yh;var Ns="ScrollAreaScrollbar",tl=u.forwardRef((s,t)=>{const{forceMount:a,...n}=s,r=Jt(Ns,s.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=r,o=s.orientation==="horizontal";return u.useEffect(()=>(o?i(!0):l(!0),()=>{o?i(!1):l(!1)}),[o,i,l]),r.type==="hover"?e.jsx(gw,{...n,ref:t,forceMount:a}):r.type==="scroll"?e.jsx(pw,{...n,ref:t,forceMount:a}):r.type==="auto"?e.jsx(bh,{...n,ref:t,forceMount:a}):r.type==="always"?e.jsx(sl,{...n,ref:t}):null});tl.displayName=Ns;var gw=u.forwardRef((s,t)=>{const{forceMount:a,...n}=s,r=Jt(Ns,s.__scopeScrollArea),[i,l]=u.useState(!1);return u.useEffect(()=>{const o=r.scrollArea;let c=0;if(o){const h=()=>{window.clearTimeout(c),l(!0)},x=()=>{c=window.setTimeout(()=>l(!1),r.scrollHideDelay)};return o.addEventListener("pointerenter",h),o.addEventListener("pointerleave",x),()=>{window.clearTimeout(c),o.removeEventListener("pointerenter",h),o.removeEventListener("pointerleave",x)}}},[r.scrollArea,r.scrollHideDelay]),e.jsx(zt,{present:a||i,children:e.jsx(bh,{"data-state":i?"visible":"hidden",...n,ref:t})})}),pw=u.forwardRef((s,t)=>{const{forceMount:a,...n}=s,r=Jt(Ns,s.__scopeScrollArea),i=s.orientation==="horizontal",l=ni(()=>c("SCROLL_END"),100),[o,c]=hw("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return u.useEffect(()=>{if(o==="idle"){const h=window.setTimeout(()=>c("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(h)}},[o,r.scrollHideDelay,c]),u.useEffect(()=>{const h=r.viewport,x=i?"scrollLeft":"scrollTop";if(h){let d=h[x];const m=()=>{const g=h[x];d!==g&&(c("SCROLL"),l()),d=g};return h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[r.viewport,i,c,l]),e.jsx(zt,{present:a||o!=="hidden",children:e.jsx(sl,{"data-state":o==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:me(s.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:me(s.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),bh=u.forwardRef((s,t)=>{const a=Jt(Ns,s.__scopeScrollArea),{forceMount:n,...r}=s,[i,l]=u.useState(!1),o=s.orientation==="horizontal",c=ni(()=>{if(a.viewport){const h=a.viewport.offsetWidth<a.viewport.scrollWidth,x=a.viewport.offsetHeight<a.viewport.scrollHeight;l(o?h:x)}},10);return Ya(a.viewport,c),Ya(a.content,c),e.jsx(zt,{present:n||i,children:e.jsx(sl,{"data-state":i?"visible":"hidden",...r,ref:t})})}),sl=u.forwardRef((s,t)=>{const{orientation:a="vertical",...n}=s,r=Jt(Ns,s.__scopeScrollArea),i=u.useRef(null),l=u.useRef(0),[o,c]=u.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=kh(o.viewport,o.content),x={...n,sizes:o,onSizesChange:c,hasThumb:h>0&&h<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:m=>l.current=m};function d(m,g){return Nw(m,l.current,o,g)}return a==="horizontal"?e.jsx(fw,{...x,ref:t,onThumbPositionChange:()=>{if(r.viewport&&i.current){const m=r.viewport.scrollLeft,g=ec(m,o,r.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollLeft=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollLeft=d(m,r.dir))}}):a==="vertical"?e.jsx(vw,{...x,ref:t,onThumbPositionChange:()=>{if(r.viewport&&i.current){const m=r.viewport.scrollTop,g=ec(m,o);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollTop=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollTop=d(m))}}):null}),fw=u.forwardRef((s,t)=>{const{sizes:a,onSizesChange:n,...r}=s,i=Jt(Ns,s.__scopeScrollArea),[l,o]=u.useState(),c=u.useRef(null),h=He(t,c,i.onScrollbarXChange);return u.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),e.jsx(wh,{"data-orientation":"horizontal",...r,ref:h,sizes:a,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ai(a)+"px",...s.style},onThumbPointerDown:x=>s.onThumbPointerDown(x.x),onDragScroll:x=>s.onDragScroll(x.x),onWheelScroll:(x,d)=>{if(i.viewport){const m=i.viewport.scrollLeft+x.deltaX;s.onWheelScroll(m),Th(m,d)&&x.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Sr(l.paddingLeft),paddingEnd:Sr(l.paddingRight)}})}})}),vw=u.forwardRef((s,t)=>{const{sizes:a,onSizesChange:n,...r}=s,i=Jt(Ns,s.__scopeScrollArea),[l,o]=u.useState(),c=u.useRef(null),h=He(t,c,i.onScrollbarYChange);return u.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),e.jsx(wh,{"data-orientation":"vertical",...r,ref:h,sizes:a,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ai(a)+"px",...s.style},onThumbPointerDown:x=>s.onThumbPointerDown(x.y),onDragScroll:x=>s.onDragScroll(x.y),onWheelScroll:(x,d)=>{if(i.viewport){const m=i.viewport.scrollTop+x.deltaY;s.onWheelScroll(m),Th(m,d)&&x.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Sr(l.paddingTop),paddingEnd:Sr(l.paddingBottom)}})}})}),[yw,Nh]=fh(Ns),wh=u.forwardRef((s,t)=>{const{__scopeScrollArea:a,sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:o,onThumbPositionChange:c,onDragScroll:h,onWheelScroll:x,onResize:d,...m}=s,g=Jt(Ns,a),[y,p]=u.useState(null),j=He(t,k=>p(k)),v=u.useRef(null),N=u.useRef(""),f=g.viewport,S=n.content-n.viewport,D=fs(x),w=fs(c),R=ni(d,10);function b(k){if(v.current){const T=k.clientX-v.current.left,F=k.clientY-v.current.top;h({x:T,y:F})}}return u.useEffect(()=>{const k=T=>{const F=T.target;(y==null?void 0:y.contains(F))&&D(T,S)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[f,y,S,D]),u.useEffect(w,[n,w]),Ya(y,R),Ya(g.content,R),e.jsx(yw,{scope:a,scrollbar:y,hasThumb:r,onThumbChange:fs(i),onThumbPointerUp:fs(l),onThumbPositionChange:w,onThumbPointerDown:fs(o),children:e.jsx(Ae.div,{...m,ref:j,style:{position:"absolute",...m.style},onPointerDown:me(s.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),v.current=y.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),b(k))}),onPointerMove:me(s.onPointerMove,b),onPointerUp:me(s.onPointerUp,k=>{const T=k.target;T.hasPointerCapture(k.pointerId)&&T.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=N.current,g.viewport&&(g.viewport.style.scrollBehavior=""),v.current=null})})})}),wr="ScrollAreaThumb",Sh=u.forwardRef((s,t)=>{const{forceMount:a,...n}=s,r=Nh(wr,s.__scopeScrollArea);return e.jsx(zt,{present:a||r.hasThumb,children:e.jsx(jw,{ref:t,...n})})}),jw=u.forwardRef((s,t)=>{const{__scopeScrollArea:a,style:n,...r}=s,i=Jt(wr,a),l=Nh(wr,a),{onThumbPositionChange:o}=l,c=He(t,d=>l.onThumbChange(d)),h=u.useRef(void 0),x=ni(()=>{h.current&&(h.current(),h.current=void 0)},100);return u.useEffect(()=>{const d=i.viewport;if(d){const m=()=>{if(x(),!h.current){const g=ww(d,o);h.current=g,o()}};return o(),d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[i.viewport,x,o]),e.jsx(Ae.div,{"data-state":l.hasThumb?"visible":"hidden",...r,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:me(s.onPointerDownCapture,d=>{const g=d.target.getBoundingClientRect(),y=d.clientX-g.left,p=d.clientY-g.top;l.onThumbPointerDown({x:y,y:p})}),onPointerUp:me(s.onPointerUp,l.onThumbPointerUp)})});Sh.displayName=wr;var al="ScrollAreaCorner",Ch=u.forwardRef((s,t)=>{const a=Jt(al,s.__scopeScrollArea),n=!!(a.scrollbarX&&a.scrollbarY);return a.type!=="scroll"&&n?e.jsx(bw,{...s,ref:t}):null});Ch.displayName=al;var bw=u.forwardRef((s,t)=>{const{__scopeScrollArea:a,...n}=s,r=Jt(al,a),[i,l]=u.useState(0),[o,c]=u.useState(0),h=!!(i&&o);return Ya(r.scrollbarX,()=>{var d;const x=((d=r.scrollbarX)==null?void 0:d.offsetHeight)||0;r.onCornerHeightChange(x),c(x)}),Ya(r.scrollbarY,()=>{var d;const x=((d=r.scrollbarY)==null?void 0:d.offsetWidth)||0;r.onCornerWidthChange(x),l(x)}),h?e.jsx(Ae.div,{...n,ref:t,style:{width:i,height:o,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...s.style}}):null});function Sr(s){return s?parseInt(s,10):0}function kh(s,t){const a=s/t;return isNaN(a)?0:a}function ai(s){const t=kh(s.viewport,s.content),a=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,n=(s.scrollbar.size-a)*t;return Math.max(n,18)}function Nw(s,t,a,n="ltr"){const r=ai(a),i=r/2,l=t||i,o=r-l,c=a.scrollbar.paddingStart+l,h=a.scrollbar.size-a.scrollbar.paddingEnd-o,x=a.content-a.viewport,d=n==="ltr"?[0,x]:[x*-1,0];return Dh([c,h],d)(s)}function ec(s,t,a="ltr"){const n=ai(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-r,l=t.content-t.viewport,o=i-n,c=a==="ltr"?[0,l]:[l*-1,0],h=yo(s,c);return Dh([0,l],[0,o])(h)}function Dh(s,t){return a=>{if(s[0]===s[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(s[1]-s[0]);return t[0]+n*(a-s[0])}}function Th(s,t){return s>0&&s<t}var ww=(s,t=()=>{})=>{let a={left:s.scrollLeft,top:s.scrollTop},n=0;return function r(){const i={left:s.scrollLeft,top:s.scrollTop},l=a.left!==i.left,o=a.top!==i.top;(l||o)&&t(),a=i,n=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(n)};function ni(s,t){const a=fs(s),n=u.useRef(0);return u.useEffect(()=>()=>window.clearTimeout(n.current),[]),u.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(a,t)},[a,t])}function Ya(s,t){const a=fs(t);nr(()=>{let n=0;if(s){const r=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(a)});return r.observe(s),()=>{window.cancelAnimationFrame(n),r.unobserve(s)}}},[s,a])}var Eh=vh,Sw=jh,Cw=Ch;const Ka=u.forwardRef(({className:s,children:t,...a},n)=>e.jsxs(Eh,{ref:n,className:G("relative overflow-hidden",s),...a,children:[e.jsx(Sw,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(Mh,{}),e.jsx(Cw,{})]}));Ka.displayName=Eh.displayName;const Mh=u.forwardRef(({className:s,orientation:t="vertical",...a},n)=>e.jsx(tl,{ref:n,orientation:t,className:G("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...a,children:e.jsx(Sh,{className:"relative flex-1 rounded-full bg-border"})}));Mh.displayName=tl.displayName;const kw=[{id:"1",name:"Monthly Salary",category:"Earnings",amount:3500,frequency:"monthly",isPopular:!0},{id:"2",name:"Rent Payment",category:"Other",amount:1200,frequency:"monthly",isPopular:!0},{id:"3",name:"Weekly Groceries",category:"Food",amount:80,frequency:"weekly",isPopular:!0},{id:"4",name:"Daily Coffee",category:"Food",amount:4.5,frequency:"daily",isPopular:!1},{id:"5",name:"Car Insurance",category:"Other",amount:120,frequency:"monthly",isPopular:!1},{id:"6",name:"Netflix Subscription",category:"Other",amount:15.99,frequency:"monthly",isPopular:!1}],Dw=()=>{const{recurringTransactions:s,addRecurringTransaction:t,updateRecurringTransaction:a,deleteRecurringTransaction:n,addTransaction:r,currency:i}=he(),{toast:l}=Ue(),[o,c]=u.useState(!1),[h,x]=u.useState(!1),[d,m]=u.useState(null),[g,y]=u.useState([]),[p,j]=u.useState("all"),[v,N]=u.useState(null),[f,S]=u.useState("nextDate"),[D,w]=u.useState({name:"",category:"",amount:"",frequency:"",nextDate:"",endDate:"",maxOccurrences:"",notes:""}),R=u.useMemo(()=>{const C=s.filter(Z=>Z.isActive),B=s.filter(Z=>!Z.isActive),E=C.filter(Z=>{const ee=new Date(Z.nextDate);return Ws(ee,new Date)}),V=C.filter(Z=>Z.category==="Earnings").reduce((Z,ee)=>{const ge=ee.frequency==="daily"?30.44:ee.frequency==="weekly"?4.33:ee.frequency==="yearly"?.08333333333333333:1;return Z+ee.amount*ge},0),U=C.filter(Z=>Z.category!=="Earnings").reduce((Z,ee)=>{const ge=ee.frequency==="daily"?30.44:ee.frequency==="weekly"?4.33:ee.frequency==="yearly"?.08333333333333333:1;return Z+ee.amount*ge},0),H=C.filter(Z=>{const ee=new Date(Z.nextDate),ge=qe(new Date,7);return mn(ee,new Date)&&Ws(ee,ge)});return{total:s.length,active:C.length,paused:B.length,overdue:E.length,monthlyIncome:V,monthlyExpenses:U,netMonthly:V-U,upcomingWeek:H.length}},[s]),b=u.useMemo(()=>{let C=s;switch(p){case"active":C=C.filter(B=>B.isActive);break;case"paused":C=C.filter(B=>!B.isActive);break;case"overdue":C=C.filter(B=>B.isActive&&Ws(new Date(B.nextDate),new Date));break}return v&&(C=C.filter(B=>B.category===v)),[...C].sort((B,E)=>{switch(f){case"name":return B.name.localeCompare(E.name);case"amount":return E.amount-B.amount;case"nextDate":return new Date(B.nextDate).getTime()-new Date(E.nextDate).getTime();case"frequency":return B.frequency.localeCompare(E.frequency);default:return 0}})},[s,p,v,f]),k=C=>{if(C.preventDefault(),!D.name||!D.category||!D.amount||!D.frequency||!D.nextDate){l({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}const B={name:D.name,category:D.category,amount:parseFloat(D.amount),frequency:D.frequency,nextDate:D.nextDate,isActive:!0};d?(a(d,B),l({title:"Success",description:"Recurring transaction updated successfully"})):(t(B),l({title:"Success",description:"Recurring transaction created successfully"})),T()},T=()=>{w({name:"",category:"",amount:"",frequency:"",nextDate:"",endDate:"",maxOccurrences:"",notes:""}),c(!1),m(null)},F=C=>{w({name:C.name,category:C.category,amount:C.amount.toString(),frequency:C.frequency,nextDate:C.nextDate,endDate:"",maxOccurrences:"",notes:""}),m(C.id),c(!0)},O=C=>{n(C),l({title:"Success",description:"Recurring transaction deleted successfully"})},q=C=>{w({name:`${C.name} (Copy)`,category:C.category,amount:C.amount.toString(),frequency:C.frequency,nextDate:ce(new Date,"yyyy-MM-dd"),endDate:"",maxOccurrences:"",notes:""}),m(null),c(!0)},P=(C,B)=>{a(C,{isActive:!B}),l({title:"Success",description:`Transaction ${B?"paused":"activated"}`})},A=C=>{r({date:new Date().toISOString().split("T")[0],category:C.category,amount:C.amount,week:"W4"});const B=new Date(C.nextDate);let E;switch(C.frequency){case"daily":E=qe(B,1);break;case"weekly":E=za(B,1);break;case"monthly":E=Ot(B,1);break;case"yearly":E=ir(B,1);break;default:E=qe(B,1)}a(C.id,{nextDate:ce(E,"yyyy-MM-dd")}),l({title:"Success",description:`${C.name} executed and next date updated`})},$=C=>{if(g.length===0){l({title:"No Selection",description:"Please select items to perform bulk action",variant:"destructive"});return}g.forEach(B=>{switch(C){case"activate":a(B,{isActive:!0});break;case"pause":a(B,{isActive:!1});break;case"delete":n(B);break}}),y([]),x(!1),l({title:"Success",description:`Bulk ${C} completed for ${g.length} items`})},M=C=>{w({name:C.name,category:C.category,amount:C.amount.toString(),frequency:C.frequency,nextDate:ce(new Date,"yyyy-MM-dd"),endDate:"",maxOccurrences:"",notes:""}),m(null),c(!0)},z=C=>{if(!C.isActive)return"muted";const B=new Date(C.nextDate),E=or(B,new Date);return E<0?"destructive":E===0?"warning":"success"},I=C=>{if(!C.isActive)return"Paused";const B=new Date(C.nextDate),E=or(B,new Date);return E<0?`${Math.abs(E)} days overdue`:E===0?"Due today":E===1?"Due tomorrow":`Due in ${E} days`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(L,{className:"p-4 bg-gradient-primary text-primary-foreground",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ct,{className:"h-6 w-6"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Active"}),e.jsx("p",{className:"text-xl font-bold",children:R.active}),R.overdue>0&&e.jsxs("p",{className:"text-xs opacity-80",children:[R.overdue," overdue"]})]})]})}),e.jsx(L,{className:"p-4 bg-gradient-success text-success-foreground",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(de,{className:"h-6 w-6"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Monthly Income"}),e.jsxs("p",{className:"text-xl font-bold",children:[i,R.monthlyIncome.toFixed(0)]})]})]})}),e.jsx(L,{className:"p-4 border-destructive/20 bg-destructive/5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"h-6 w-6 text-destructive"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Expenses"}),e.jsxs("p",{className:"text-xl font-bold text-destructive",children:[i,R.monthlyExpenses.toFixed(0)]})]})]})}),e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(je,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Net Monthly"}),e.jsxs("p",{className:`text-xl font-bold ${R.netMonthly>=0?"text-success":"text-destructive"}`,children:[R.netMonthly>=0?"+":"",i,R.netMonthly.toFixed(0)]})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(Re,{value:p,onValueChange:C=>j(C),children:[e.jsx(Me,{className:"w-32",children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsxs(J,{value:"all",children:["All (",R.total,")"]}),e.jsxs(J,{value:"active",children:["Active (",R.active,")"]}),e.jsxs(J,{value:"paused",children:["Paused (",R.paused,")"]}),e.jsxs(J,{value:"overdue",children:["Overdue (",R.overdue,")"]})]})]}),e.jsxs(Re,{value:v||"all",onValueChange:C=>N(C==="all"?null:C),children:[e.jsx(Me,{className:"w-32",children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"all",children:"All Categories"}),e.jsx(J,{value:"Earnings",children:"Earnings"}),e.jsx(J,{value:"Food",children:"Food"}),e.jsx(J,{value:"Petrol",children:"Petrol"}),e.jsx(J,{value:"Other",children:"Other"})]})]}),e.jsxs(Re,{value:f,onValueChange:C=>S(C),children:[e.jsx(Me,{className:"w-32",children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"nextDate",children:"Due Date"}),e.jsx(J,{value:"name",children:"Name"}),e.jsx(J,{value:"amount",children:"Amount"}),e.jsx(J,{value:"frequency",children:"Frequency"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[g.length>0&&e.jsxs(Es,{open:h,onOpenChange:x,children:[e.jsx(Ms,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(As,{className:"h-4 w-4 mr-1"}),"Bulk (",g.length,")"]})}),e.jsx(bs,{className:"w-48",align:"end",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>$("activate"),children:[e.jsx(ls,{className:"h-4 w-4 mr-2"}),"Activate All"]}),e.jsxs(_,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>$("pause"),children:[e.jsx(zi,{className:"h-4 w-4 mr-2"}),"Pause All"]}),e.jsx(os,{}),e.jsxs(_,{variant:"outline",size:"sm",className:"w-full justify-start text-destructive",onClick:()=>$("delete"),children:[e.jsx(ft,{className:"h-4 w-4 mr-2"}),"Delete All"]})]})})]}),e.jsxs(dt,{open:o,onOpenChange:c,children:[e.jsx(Ft,{asChild:!0,children:e.jsxs(_,{children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Add Recurring"]})}),e.jsxs(at,{className:"sm:max-w-[600px]",children:[e.jsx(nt,{children:e.jsx(rt,{children:d?"Edit Recurring Transaction":"Create Recurring Transaction"})}),e.jsxs(Xt,{defaultValue:"form",className:"w-full",children:[e.jsxs(Bt,{className:"grid w-full grid-cols-2",children:[e.jsx($e,{value:"form",children:"Manual Entry"}),e.jsx($e,{value:"templates",children:"Templates"})]}),e.jsx(Le,{value:"form",className:"space-y-4 mt-4",children:e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"name",children:"Name *"}),e.jsx(ae,{id:"name",value:D.name,onChange:C=>w(B=>({...B,name:C.target.value})),placeholder:"e.g., Monthly Salary",required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"category",children:"Category *"}),e.jsxs(Re,{value:D.category,onValueChange:C=>w(B=>({...B,category:C})),children:[e.jsx(Me,{children:e.jsx(Ie,{placeholder:"Select category"})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"Earnings",children:"Earnings"}),e.jsx(J,{value:"Food",children:"Food"}),e.jsx(J,{value:"Petrol",children:"Petrol"}),e.jsx(J,{value:"Other",children:"Other"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(W,{htmlFor:"amount",children:["Amount (",i,") *"]}),e.jsx(ae,{id:"amount",type:"number",step:"0.01",value:D.amount,onChange:C=>w(B=>({...B,amount:C.target.value})),placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"frequency",children:"Frequency *"}),e.jsxs(Re,{value:D.frequency,onValueChange:C=>w(B=>({...B,frequency:C})),children:[e.jsx(Me,{children:e.jsx(Ie,{placeholder:"Select frequency"})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"daily",children:"Daily"}),e.jsx(J,{value:"weekly",children:"Weekly"}),e.jsx(J,{value:"monthly",children:"Monthly"}),e.jsx(J,{value:"yearly",children:"Yearly"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"nextDate",children:"Next Date *"}),e.jsx(ae,{id:"nextDate",type:"date",value:D.nextDate,onChange:C=>w(B=>({...B,nextDate:C.target.value})),required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:T,children:"Cancel"}),e.jsx(_,{type:"submit",children:d?"Update":"Create"})]})]})}),e.jsx(Le,{value:"templates",className:"mt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(pn,{className:"h-4 w-4 text-warning"}),e.jsx("span",{className:"text-sm font-medium",children:"Popular Templates"})]}),e.jsx(Ka,{className:"h-80",children:e.jsx("div",{className:"space-y-3",children:kw.map(C=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>M(C),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[C.isPopular&&e.jsx(pn,{className:"h-4 w-4 text-warning"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:C.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",children:C.category}),e.jsx(K,{variant:"secondary",children:C.frequency})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold",children:[i,C.amount]})})]},C.id))})})]})})]})]})]})]})]}),e.jsx("div",{className:"space-y-3",children:b.length===0?e.jsxs(L,{className:"p-8 text-center",children:[e.jsx(Ct,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"font-medium mb-2",children:"No Recurring Transactions"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create your first recurring transaction to automate your finances"}),e.jsxs(_,{onClick:()=>c(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Add Recurring Transaction"]})]}):b.map(C=>{const B=z(C),E=I(C),V=g.includes(C.id);return e.jsx(L,{className:`p-4 transition-all duration-200 hover:shadow-card-hover ${V?"ring-2 ring-primary":""}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:V,onChange:U=>{U.target.checked?y(H=>[...H,C.id]):y(H=>H.filter(Z=>Z!==C.id))},className:"rounded"}),e.jsx("div",{className:`w-3 h-3 rounded-full ${C.category==="Earnings"?"bg-success":C.category==="Food"?"bg-orange-500":C.category==="Petrol"?"bg-blue-500":"bg-gray-500"}`}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:C.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",children:C.category}),e.jsx(K,{variant:"secondary",children:C.frequency}),e.jsx(K,{variant:B==="destructive"?"destructive":"outline",children:E})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 ml-auto",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold font-mono ${C.category==="Earnings"?"text-success":"text-destructive"}`,children:[C.category==="Earnings"?"+":"-",i,C.amount.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Next: ",ce(new Date(C.nextDate),"MMM dd, yyyy")]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[C.isActive&&e.jsx(_,{variant:"outline",size:"sm",onClick:()=>A(C),className:"h-8 px-2",children:e.jsx(Be,{className:"h-3 w-3"})}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>P(C.id,C.isActive),className:"h-8 px-2",children:C.isActive?e.jsx(zi,{className:"h-3 w-3"}):e.jsx(ls,{className:"h-3 w-3"})}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>q(C),className:"h-8 px-2",children:e.jsx(lr,{className:"h-3 w-3"})}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>F(C),className:"h-8 px-2",children:e.jsx(xa,{className:"h-3 w-3"})}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>O(C.id),className:"h-8 px-2 text-destructive hover:text-destructive",children:e.jsx(ft,{className:"h-3 w-3"})})]})]})]})},C.id)})})]})},Tw=()=>{const{recurringTransactions:s,addTransaction:t,updateRecurringTransaction:a,currency:n}=he(),r=u.useMemo(()=>{const d=new Date,m=qe(d,30),g=[];return s.filter(y=>y.isActive).forEach(y=>{const p=_e(y.nextDate);let j=new Date(p);for(;Ws(j,m);){if(!Ws(j,d)||Ws(j,d)){const v=or(j,d);g.push({id:`${y.id}-${j.toISOString()}`,name:y.name,category:y.category,amount:y.amount,nextDate:j.toISOString().split("T")[0],frequency:y.frequency,daysUntil:v,isOverdue:v<0,isEarning:y.category==="Earnings"})}switch(y.frequency){case"daily":j=qe(j,1);break;case"weekly":j=za(j,1);break;case"monthly":j=Ot(j,1);break;case"yearly":j=ir(j,1);break;default:j=m}}}),g.sort((y,p)=>y.daysUntil-p.daysUntil).slice(0,10)},[s]),i=d=>{const m=s.find(p=>d.id.startsWith(p.id));if(!m)return;t({date:d.nextDate,category:d.category,amount:d.amount,week:"W1"});const g=_e(d.nextDate);let y;switch(m.frequency){case"daily":y=qe(g,1);break;case"weekly":y=za(g,1);break;case"monthly":y=Ot(g,1);break;case"yearly":y=ir(g,1);break;default:y=qe(g,1)}a(m.id,{nextDate:y.toISOString().split("T")[0]})},l=d=>d<0?`${Math.abs(d)} days overdue`:d===0?"Today":d===1?"Tomorrow":d<=7?`In ${d} days`:`In ${Math.ceil(d/7)} weeks`,o=d=>d<0?"bg-destructive/10 text-destructive border-destructive/20":d===0?"bg-warning/10 text-warning border-warning/20":d<=3?"bg-primary/10 text-primary border-primary/20":"bg-muted/50 text-muted-foreground border-muted/20",c=r.filter(d=>d.isOverdue),h=r.filter(d=>d.daysUntil===0),x=r.filter(d=>d.daysUntil>0&&d.daysUntil<=7);return r.length===0?e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Fe,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Upcoming Recurring"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No upcoming recurring transactions in the next 30 days."})]}):e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fe,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Upcoming Recurring"})]}),e.jsxs(K,{variant:"secondary",children:[r.length," upcoming"]})]}),c.length>0&&e.jsx("div",{className:"mb-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm font-medium",children:[c.length," overdue transaction",c.length>1?"s":""]})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-destructive",children:c.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Overdue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-warning",children:h.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Today"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:x.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This Week"})]})]}),e.jsx("div",{className:"space-y-3",children:r.map(d=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:`p-1.5 rounded-full ${d.isEarning?"bg-success/20":"bg-destructive/20"}`,children:d.isEarning?e.jsx(de,{className:"h-3 w-3 text-success"}):e.jsx(We,{className:"h-3 w-3 text-destructive"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:d.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(K,{variant:"outline",className:"text-xs",children:d.category}),e.jsx(K,{variant:"outline",className:"text-xs",children:d.frequency})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold ${d.isEarning?"text-success":"text-destructive"}`,children:[d.isEarning?"+":"-",n,d.amount.toFixed(2)]}),e.jsx(K,{variant:"secondary",className:`text-xs ${o(d.daysUntil)}`,children:l(d.daysUntil)})]}),e.jsxs(_,{variant:"ghost",size:"sm",onClick:()=>i(d),className:"gap-1",children:[e.jsx(ls,{className:"h-3 w-3"}),"Execute"]})]})]},d.id))}),r.length===10&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Showing next 10 upcoming transactions"})})]})},Ew=()=>{const{recurringTransactions:s,currency:t}=he(),a=s.filter(i=>i.isActive),n=a.filter(i=>i.category==="Earnings").reduce((i,l)=>{const o=l.frequency==="daily"?30.44:l.frequency==="weekly"?4.33:l.frequency==="yearly"?.08333333333333333:1;return i+l.amount*o},0),r=a.filter(i=>i.category!=="Earnings").reduce((i,l)=>{const o=l.frequency==="daily"?30.44:l.frequency==="weekly"?4.33:l.frequency==="yearly"?.08333333333333333:1;return i+l.amount*o},0);return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Recurring Transactions"}),e.jsx("p",{className:"text-muted-foreground",children:"Automate and optimize your regular financial activities"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Net"}),e.jsxs("p",{className:`text-lg font-bold ${n-r>=0?"text-success":"text-destructive"}`,children:[t,(n-r).toFixed(0)]})]})})]}),e.jsx(Tw,{}),e.jsx(Dw,{})]})},Mw=()=>{const[s,t]=u.useState([]),[a,n]=u.useState(!0),{toast:r}=Ue();u.useEffect(()=>{i()},[]);const i=async()=>{try{const{data:o,error:c}=await ue.from("tags").select("*").order("created_at",{ascending:!1});if(c)throw c;t(o||[])}catch(o){console.error("Error loading categories:",o)}finally{n(!1)}},l=async(o,c)=>{try{const{error:h}=await ue.from("tags").delete().eq("id",o);if(h)throw h;t(x=>x.filter(d=>d.id!==o)),r({title:"Success",description:`${c} category deleted`})}catch(h){console.error("Error deleting category:",h),r({title:"Error",description:"Failed to delete category"})}};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Categories"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your spending categories and quickly add from our predefined list"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(wn,{showCreateNew:!0})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/20 flex items-center justify-center",children:e.jsx(md,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your Categories"}),e.jsx("p",{className:"text-2xl font-bold",children:s.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Custom categories created"})]})]})}),e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-success/20 flex items-center justify-center",children:e.jsx(Ke,{className:"h-6 w-6 text-success"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Quick Add Available"}),e.jsx("p",{className:"text-2xl font-bold",children:"30+"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Predefined categories ready"})]})]})}),e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-secondary/20 flex items-center justify-center",children:e.jsx("span",{className:"text-secondary-foreground font-bold text-lg",children:"✨"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ready to Use"}),e.jsx("p",{className:"text-2xl font-bold",children:"Everywhere"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available across the app"})]})]})})]}),e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Your Categories"}),e.jsxs(K,{variant:"outline",children:[s.length," categories"]})]}),a?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"h-24 w-24 rounded-full bg-muted/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(Ke,{className:"h-12 w-12 text-muted-foreground/50"})}),e.jsx("h4",{className:"text-lg font-medium mb-2",children:"No categories yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by adding categories from our quick-add collection or create your own"}),e.jsx(wn,{showCreateNew:!0})]}):e.jsx("div",{className:"grid gap-3",children:s.map(o=>e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg border hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-primary/20 shadow-sm",style:{backgroundColor:o.color}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:o.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created ",new Date(o.created_at).toLocaleDateString()]})]}),e.jsx(K,{variant:"secondary",className:"text-xs",children:"Custom"}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>l(o.id,o.name),className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:e.jsx(ft,{className:"h-4 w-4"})})]},o.id))})]}),e.jsxs(L,{className:"p-6 bg-muted/20",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Guide"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"🚀 Quick Add Categories"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Click the "+" button to browse 30+ predefined categories organized by type: Income, Housing, Food, Transportation, Health, Entertainment, and more.'})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"📊 Use Everywhere"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your categories automatically appear in transaction forms, analytics, budgets, and throughout the app for consistent categorization."})]})]})]})]})};var Ei,ri="HoverCard",[Ph,CC]=ds(ri,[Xs]),ii=Xs(),[Pw,nl]=Ph(ri),Ah=s=>{const{__scopeHoverCard:t,children:a,open:n,defaultOpen:r,onOpenChange:i,openDelay:l=700,closeDelay:o=300}=s,c=ii(t),h=u.useRef(0),x=u.useRef(0),d=u.useRef(!1),m=u.useRef(!1),[g,y]=va({prop:n,defaultProp:r??!1,onChange:i,caller:ri}),p=u.useCallback(()=>{clearTimeout(x.current),h.current=window.setTimeout(()=>y(!0),l)},[l,y]),j=u.useCallback(()=>{clearTimeout(h.current),!d.current&&!m.current&&(x.current=window.setTimeout(()=>y(!1),o))},[o,y]),v=u.useCallback(()=>y(!1),[y]);return u.useEffect(()=>()=>{clearTimeout(h.current),clearTimeout(x.current)},[]),e.jsx(Pw,{scope:t,open:g,onOpenChange:y,onOpen:p,onClose:j,onDismiss:v,hasSelectionRef:d,isPointerDownOnContentRef:m,children:e.jsx(Mr,{...c,children:a})})};Ah.displayName=ri;var Rh="HoverCardTrigger",Ih=u.forwardRef((s,t)=>{const{__scopeHoverCard:a,...n}=s,r=nl(Rh,a),i=ii(a);return e.jsx(Tn,{asChild:!0,...i,children:e.jsx(Ae.a,{"data-state":r.open?"open":"closed",...n,ref:t,onPointerEnter:me(s.onPointerEnter,kr(r.onOpen)),onPointerLeave:me(s.onPointerLeave,kr(r.onClose)),onFocus:me(s.onFocus,r.onOpen),onBlur:me(s.onBlur,r.onClose),onTouchStart:me(s.onTouchStart,l=>l.preventDefault())})})});Ih.displayName=Rh;var Aw="HoverCardPortal",[kC,Rw]=Ph(Aw,{forceMount:void 0}),Cr="HoverCardContent",Oh=u.forwardRef((s,t)=>{const a=Rw(Cr,s.__scopeHoverCard),{forceMount:n=a.forceMount,...r}=s,i=nl(Cr,s.__scopeHoverCard);return e.jsx(zt,{present:n||i.open,children:e.jsx(Iw,{"data-state":i.open?"open":"closed",...r,onPointerEnter:me(s.onPointerEnter,kr(i.onOpen)),onPointerLeave:me(s.onPointerLeave,kr(i.onClose)),ref:t})})});Oh.displayName=Cr;var Iw=u.forwardRef((s,t)=>{const{__scopeHoverCard:a,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:l,...o}=s,c=nl(Cr,a),h=ii(a),x=u.useRef(null),d=He(t,x),[m,g]=u.useState(!1);return u.useEffect(()=>{if(m){const y=document.body;return Ei=y.style.userSelect||y.style.webkitUserSelect,y.style.userSelect="none",y.style.webkitUserSelect="none",()=>{y.style.userSelect=Ei,y.style.webkitUserSelect=Ei}}},[m]),u.useEffect(()=>{if(x.current){const y=()=>{g(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var j;((j=document.getSelection())==null?void 0:j.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",y),()=>{document.removeEventListener("pointerup",y),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),u.useEffect(()=>{x.current&&_w(x.current).forEach(p=>p.setAttribute("tabindex","-1"))}),e.jsx(Dr,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:l,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:me(i,y=>{y.preventDefault()}),onDismiss:c.onDismiss,children:e.jsx(Tr,{...h,...o,onPointerDown:me(o.onPointerDown,y=>{y.currentTarget.contains(y.target)&&g(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:d,style:{...o.style,userSelect:m?"text":void 0,WebkitUserSelect:m?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),Ow="HoverCardArrow",Fw=u.forwardRef((s,t)=>{const{__scopeHoverCard:a,...n}=s,r=ii(a);return e.jsx(Er,{...r,...n,ref:t})});Fw.displayName=Ow;function kr(s){return t=>t.pointerType==="touch"?void 0:s()}function _w(s){const t=[],a=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;a.nextNode();)t.push(a.currentNode);return t}var $w=Ah,Lw=Ih,Fh=Oh;const zw=$w,Bw=Lw,_h=u.forwardRef(({className:s,align:t="center",sideOffset:a=4,...n},r)=>e.jsx(Fh,{ref:r,align:t,sideOffset:a,className:G("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n}));_h.displayName=Fh.displayName;const $h=({transaction:s,onEdit:t,onDelete:a,onDuplicate:n,onView:r,size:i="sm"})=>{const l=()=>{t==null||t(s)},o=()=>{window.confirm("Are you sure you want to delete this transaction?")&&(a==null||a(s.id))},c=()=>{n==null||n(s)},h=()=>{r==null||r(s)};return e.jsxs(io,{children:[e.jsx(oo,{asChild:!0,children:e.jsx(_,{variant:"ghost",className:"h-5 w-5 p-0 opacity-0 group-hover:opacity-75 transition-all duration-150 hover:bg-accent/30 rounded-sm",onClick:m=>m.stopPropagation(),children:e.jsx(dr,{className:"h-3 w-3"})})}),e.jsxs(br,{align:"end",className:"w-40 text-xs",children:[r&&e.jsxs(Wt,{onClick:h,className:"cursor-pointer",children:[e.jsx(Qt,{className:"mr-2 h-4 w-4"}),"View Details"]}),t&&e.jsxs(Wt,{onClick:l,className:"cursor-pointer",children:[e.jsx(xa,{className:"mr-2 h-4 w-4"}),"Edit Transaction"]}),n&&e.jsxs(Wt,{onClick:c,className:"cursor-pointer",children:[e.jsx(lr,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),(t||n)&&a&&e.jsx(Nr,{}),a&&e.jsxs(Wt,{onClick:o,className:"cursor-pointer text-destructive focus:text-destructive",children:[e.jsx(ft,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})},qw=({selectedDate:s,onDateChange:t,onBack:a})=>{const{dailyData:n,transactions:r,recurringTransactions:i,updateTransaction:l,deleteTransaction:o}=he(),[c,h]=u.useState("all"),x=ce(s,"yyyy-MM-dd");n.find(O=>O.date===x);const d=r.filter(O=>O.date===x),m=i.filter(O=>{if(!O.isActive)return!1;const q=new Date(O.nextDate);switch(O.frequency){case"daily":return!0;case"weekly":return s.getDay()===q.getDay();case"monthly":return s.getDate()===q.getDate();case"yearly":return s.getDate()===q.getDate()&&s.getMonth()===q.getMonth();default:return!1}}),g=d.filter(O=>{if(c==="all")return!0;const q=new Date().getHours();switch(c){case"morning":return q>=6&&q<12;case"afternoon":return q>=12&&q<18;case"evening":return q>=18||q<6;default:return!0}}),y=d.filter(O=>O.category==="Earnings").reduce((O,q)=>O+q.amount,0),p=d.filter(O=>O.category!=="Earnings").reduce((O,q)=>O+q.amount,0),j=m.filter(O=>O.category==="Earnings").reduce((O,q)=>O+q.amount,0),v=m.filter(O=>O.category!=="Earnings").reduce((O,q)=>O+q.amount,0),N=y+j,f=p+v,S=N-f,D=O=>{const q=O==="prev"?Je(s,1):qe(s,1);t(q)},w=lt(s,new Date),R=O=>{console.log("Edit transaction:",O)},b=O=>{o(O)},k=O=>{console.log("Duplicate transaction:",O)},T=O=>{switch(O){case"Earnings":return e.jsx(de,{className:"h-4 w-4 text-success"});case"Food":return e.jsx("div",{className:"h-4 w-4 rounded-full bg-orange-500"});case"Petrol":return e.jsx("div",{className:"h-4 w-4 rounded-full bg-blue-500"});default:return e.jsx("div",{className:"h-4 w-4 rounded-full bg-gray-500"})}},F=O=>{switch(O){case"Earnings":return"border-success/30 bg-success/5 text-success";case"Food":return"border-orange-500/30 bg-orange-500/5 text-orange-600";case"Petrol":return"border-blue-500/30 bg-blue-500/5 text-blue-600";default:return"border-muted bg-muted/5 text-muted-foreground"}};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:a,children:[e.jsx(hn,{className:"h-4 w-4"}),"Back to Calendar"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:ce(s,"EEEE, MMMM dd, yyyy")}),e.jsxs("p",{className:"text-muted-foreground",children:[w?"Today":ce(s,"EEEE")," • Day View"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>D("prev"),children:e.jsx(hn,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>D("next"),children:e.jsx(Za,{className:"h-4 w-4"})}),e.jsx(Ga,{})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(L,{className:"p-4 bg-gradient-success text-success-foreground",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(de,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Earnings"}),e.jsxs("p",{className:"text-lg font-bold",children:["£",N.toFixed(2)]})]})]})}),e.jsx(L,{className:"p-4 border-destructive/20 bg-destructive/5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"h-5 w-5 text-destructive"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expenses"}),e.jsxs("p",{className:"text-lg font-bold text-destructive",children:["£",f.toFixed(2)]})]})]})}),e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(je,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Net Amount"}),e.jsxs("p",{className:`text-lg font-bold ${S>=0?"text-success":"text-destructive"}`,children:[S>=0?"+":"","£",S.toFixed(2)]})]})]})}),e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{className:"h-5 w-5 text-accent"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Transactions"}),e.jsx("p",{className:"text-lg font-bold",children:d.length+m.length})]})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xn,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter by time:"}),e.jsx("div",{className:"flex gap-1",children:[{key:"all",label:"All Day"},{key:"morning",label:"Morning"},{key:"afternoon",label:"Afternoon"},{key:"evening",label:"Evening"}].map(({key:O,label:q})=>e.jsx(_,{variant:c===O?"default":"outline",size:"sm",onClick:()=>h(O),className:"h-7 px-3 text-xs",children:q},O))})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(L,{children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"}),"Transactions (",g.length,")"]})}),e.jsx(Ka,{className:"max-h-96",children:e.jsx("div",{className:"p-4 space-y-3",children:g.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-muted/50 mx-auto mb-3 flex items-center justify-center",children:e.jsx(Ke,{className:"h-6 w-6"})}),e.jsxs("p",{children:["No transactions for this ",c==="all"?"day":c]}),e.jsx(Ga,{})]}):g.map((O,q)=>e.jsxs("div",{className:`group flex items-center justify-between p-3 rounded-lg border transition-all duration-200 hover:shadow-card-hover ${F(O.category)}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[T(O.category),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:O.category}),e.jsx("p",{className:"text-xs text-muted-foreground",children:ce(new Date,"HH:mm")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(K,{variant:"outline",className:"font-mono",children:[O.category==="Earnings"?"+":"-","£",O.amount.toFixed(2)]}),e.jsx($h,{transaction:O,onEdit:R,onDelete:b,onDuplicate:k,size:"sm"})]})]},q))})})]}),e.jsxs(L,{children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Ct,{className:"h-4 w-4 text-primary"}),"Recurring (",m.length,")"]})}),e.jsx(Ka,{className:"max-h-96",children:e.jsx("div",{className:"p-4 space-y-3",children:m.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-muted/50 mx-auto mb-3 flex items-center justify-center",children:e.jsx(Ct,{className:"h-6 w-6"})}),e.jsx("p",{children:"No recurring transactions"})]}):m.map((O,q)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border-dashed border transition-all duration-200 hover:shadow-card-hover ${F(O.category)}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[T(O.category),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:O.name}),e.jsxs("p",{className:"text-xs text-muted-foreground capitalize",children:[O.frequency," • ",O.category]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(K,{variant:"outline",className:"font-mono border-dashed",children:[O.category==="Earnings"?"+":"-","£",O.amount.toFixed(2)]})})]},q))})})]})]})]})},Vw=()=>{const{transactions:s,recurringTransactions:t}=he(),a=u.useMemo(()=>{const l={},o=Je(new Date,30);return s.filter(h=>new Date(h.date)>=o&&h.category!=="Earnings").forEach(h=>{l[h.category]||(l[h.category]={total:0,count:0,days:[]}),l[h.category].total+=h.amount,l[h.category].count+=1,l[h.category].days.includes(h.date)||l[h.category].days.push(h.date)}),Object.entries(l).map(([h,x])=>({category:h,averageDaily:x.total/30,trend:Math.random()>.5?"increasing":"stable",peak:"weekends",total:x.total,frequency:x.count}))},[s]),n=u.useMemo(()=>{const l=[];a.forEach(c=>{if(c.averageDaily>10){const h=c.averageDaily*30;l.push({type:"spending",category:c.category,amount:h,confidence:c.frequency>10?85:65,description:`Based on recent patterns, you're likely to spend £${h.toFixed(0)} on ${c.category} this month`,recommendation:c.trend==="increasing"?`Consider setting a budget limit for ${c.category}`:void 0,urgency:c.trend==="increasing"?"medium":"low"})}}),t.forEach(c=>{if(c.isActive){const h=c.frequency==="monthly"?c.amount:c.frequency==="weekly"?c.amount*4.33:c.frequency==="daily"?c.amount*30:c.amount/12;l.push({type:"pattern",category:c.category,amount:h,confidence:95,description:`Guaranteed ${c.frequency} ${c.name}: £${h.toFixed(0)}/month`,urgency:"low"})}});const o=l.filter(c=>c.type==="spending").reduce((c,h)=>c+h.amount,0);return o>1e3&&l.push({type:"budget",category:"Overall",amount:o,confidence:70,description:`High spending predicted: £${o.toFixed(0)} this month`,recommendation:"Consider reviewing your budget categories",urgency:"high"}),l.sort((c,h)=>h.confidence-c.confidence)},[a,t]),r=l=>{switch(l){case"high":return"border-destructive/30 bg-destructive/5 text-destructive";case"medium":return"border-warning/30 bg-warning/5 text-warning";default:return"border-success/30 bg-success/5 text-success"}},i=l=>{switch(l){case"spending":return e.jsx(We,{className:"h-4 w-4"});case"earning":return e.jsx(de,{className:"h-4 w-4"});case"pattern":return e.jsx(tt,{className:"h-4 w-4"});case"budget":return e.jsx(Ze,{className:"h-4 w-4"});default:return e.jsx(Yt,{className:"h-4 w-4"})}};return n.length===0?e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),e.jsx("h3",{className:"font-medium mb-2",children:"Building Intelligence"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add more transactions to see AI-powered insights and predictions"})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Smart Insights & Predictions"}),e.jsx(K,{variant:"secondary",className:"ml-auto",children:"AI Powered"})]}),e.jsx("div",{className:"space-y-3",children:n.slice(0,5).map((l,o)=>e.jsx(L,{className:`p-4 transition-all duration-200 hover:shadow-card-hover ${r(l.urgency)}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:i(l.type)}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium",children:l.description}),e.jsxs(K,{variant:"outline",className:"text-xs",children:[l.confidence,"% confidence"]})]}),e.jsx(Te,{value:l.confidence,className:"h-1"}),l.recommendation&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(je,{className:"h-3 w-3 text-primary"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:l.recommendation})]})]})]})},o))}),n.length>5&&e.jsxs(_,{variant:"outline",size:"sm",className:"w-full",children:["View All ",n.length," Insights"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-4 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:a.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Patterns Detected"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-success",children:n.filter(l=>l.confidence>80).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"High Confidence"})]})]})]})},Lh=u.createContext({dragDropManager:void 0});function Vt(s){return"Minified Redux error #"+s+"; visit https://redux.js.org/Errors?code="+s+" for the full message or use the non-minified dev environment for full errors. "}var tc=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Mi=function(){return Math.random().toString(36).substring(7).split("").join(".")},sc={INIT:"@@redux/INIT"+Mi(),REPLACE:"@@redux/REPLACE"+Mi(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Mi()}};function Uw(s){if(typeof s!="object"||s===null)return!1;for(var t=s;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(s)===t}function zh(s,t,a){var n;if(typeof t=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(Vt(0));if(typeof t=="function"&&typeof a>"u"&&(a=t,t=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(Vt(1));return a(zh)(s,t)}if(typeof s!="function")throw new Error(Vt(2));var r=s,i=t,l=[],o=l,c=!1;function h(){o===l&&(o=l.slice())}function x(){if(c)throw new Error(Vt(3));return i}function d(p){if(typeof p!="function")throw new Error(Vt(4));if(c)throw new Error(Vt(5));var j=!0;return h(),o.push(p),function(){if(j){if(c)throw new Error(Vt(6));j=!1,h();var N=o.indexOf(p);o.splice(N,1),l=null}}}function m(p){if(!Uw(p))throw new Error(Vt(7));if(typeof p.type>"u")throw new Error(Vt(8));if(c)throw new Error(Vt(9));try{c=!0,i=r(i,p)}finally{c=!1}for(var j=l=o,v=0;v<j.length;v++){var N=j[v];N()}return p}function g(p){if(typeof p!="function")throw new Error(Vt(10));r=p,m({type:sc.REPLACE})}function y(){var p,j=d;return p={subscribe:function(N){if(typeof N!="object"||N===null)throw new Error(Vt(11));function f(){N.next&&N.next(x())}f();var S=j(f);return{unsubscribe:S}}},p[tc]=function(){return this},p}return m({type:sc.INIT}),n={dispatch:m,subscribe:d,getState:x,replaceReducer:g},n[tc]=y,n}function Se(s,t,...a){if(Ww()&&t===void 0)throw new Error("invariant requires an error message argument");if(!s){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let r=0;n=new Error(t.replace(/%s/g,function(){return a[r++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function Ww(){return typeof process<"u"&&!0}function Hw(s,t,a){return t.split(".").reduce((n,r)=>n&&n[r]?n[r]:a||null,s)}function Gw(s,t){return s.filter(a=>a!==t)}function Bh(s){return typeof s=="object"}function Yw(s,t){const a=new Map,n=i=>{a.set(i,a.has(i)?a.get(i)+1:1)};s.forEach(n),t.forEach(n);const r=[];return a.forEach((i,l)=>{i===1&&r.push(l)}),r}function Kw(s,t){return s.filter(a=>t.indexOf(a)>-1)}const rl="dnd-core/INIT_COORDS",oi="dnd-core/BEGIN_DRAG",il="dnd-core/PUBLISH_DRAG_SOURCE",li="dnd-core/HOVER",ci="dnd-core/DROP",di="dnd-core/END_DRAG";function ac(s,t){return{type:rl,payload:{sourceClientOffset:t||null,clientOffset:s||null}}}const Qw={type:rl,payload:{clientOffset:null,sourceClientOffset:null}};function Xw(s){return function(a=[],n={publishSource:!0}){const{publishSource:r=!0,clientOffset:i,getSourceClientOffset:l}=n,o=s.getMonitor(),c=s.getRegistry();s.dispatch(ac(i)),Jw(a,o,c);const h=t1(a,o);if(h==null){s.dispatch(Qw);return}let x=null;if(i){if(!l)throw new Error("getSourceClientOffset must be defined");Zw(l),x=l(h)}s.dispatch(ac(i,x));const m=c.getSource(h).beginDrag(o,h);if(m==null)return;e1(m),c.pinSource(h);const g=c.getSourceType(h);return{type:oi,payload:{itemType:g,item:m,sourceId:h,clientOffset:i||null,sourceClientOffset:x||null,isSourcePublic:!!r}}}}function Jw(s,t,a){Se(!t.isDragging(),"Cannot call beginDrag while dragging."),s.forEach(function(n){Se(a.getSource(n),"Expected sourceIds to be registered.")})}function Zw(s){Se(typeof s=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function e1(s){Se(Bh(s),"Item must be an object.")}function t1(s,t){let a=null;for(let n=s.length-1;n>=0;n--)if(t.canDragSource(s[n])){a=s[n];break}return a}function s1(s,t,a){return t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}function a1(s){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{},n=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable}))),n.forEach(function(r){s1(s,r,a[r])})}return s}function n1(s){return function(a={}){const n=s.getMonitor(),r=s.getRegistry();r1(n),l1(n).forEach((l,o)=>{const c=i1(l,o,r,n),h={type:ci,payload:{dropResult:a1({},a,c)}};s.dispatch(h)})}}function r1(s){Se(s.isDragging(),"Cannot call drop while not dragging."),Se(!s.didDrop(),"Cannot call drop twice during one drag operation.")}function i1(s,t,a,n){const r=a.getTarget(s);let i=r?r.drop(n,s):void 0;return o1(i),typeof i>"u"&&(i=t===0?{}:n.getDropResult()),i}function o1(s){Se(typeof s>"u"||Bh(s),"Drop result must either be an object or undefined.")}function l1(s){const t=s.getTargetIds().filter(s.canDropOnTarget,s);return t.reverse(),t}function c1(s){return function(){const a=s.getMonitor(),n=s.getRegistry();d1(a);const r=a.getSourceId();return r!=null&&(n.getSource(r,!0).endDrag(a,r),n.unpinSource()),{type:di}}}function d1(s){Se(s.isDragging(),"Cannot call endDrag while not dragging.")}function lo(s,t){return t===null?s===null:Array.isArray(s)?s.some(a=>a===t):s===t}function u1(s){return function(a,{clientOffset:n}={}){m1(a);const r=a.slice(0),i=s.getMonitor(),l=s.getRegistry(),o=i.getItemType();return x1(r,l,o),h1(r,i,l),g1(r,i,l),{type:li,payload:{targetIds:r,clientOffset:n||null}}}}function m1(s){Se(Array.isArray(s),"Expected targetIds to be an array.")}function h1(s,t,a){Se(t.isDragging(),"Cannot call hover while not dragging."),Se(!t.didDrop(),"Cannot call hover after drop.");for(let n=0;n<s.length;n++){const r=s[n];Se(s.lastIndexOf(r)===n,"Expected targetIds to be unique in the passed array.");const i=a.getTarget(r);Se(i,"Expected targetIds to be registered.")}}function x1(s,t,a){for(let n=s.length-1;n>=0;n--){const r=s[n],i=t.getTargetType(r);lo(i,a)||s.splice(n,1)}}function g1(s,t,a){s.forEach(function(n){a.getTarget(n).hover(t,n)})}function p1(s){return function(){if(s.getMonitor().isDragging())return{type:il}}}function f1(s){return{beginDrag:Xw(s),publishDragSource:p1(s),hover:u1(s),drop:n1(s),endDrag:c1(s)}}class v1{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const t=this,{dispatch:a}=this.store;function n(i){return(...l)=>{const o=i.apply(t,l);typeof o<"u"&&a(o)}}const r=f1(this);return Object.keys(r).reduce((i,l)=>{const o=r[l];return i[l]=n(o),i},{})}dispatch(t){this.store.dispatch(t)}constructor(t,a){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=a,t.subscribe(this.handleRefCountChange)}}function y1(s,t){return{x:s.x+t.x,y:s.y+t.y}}function qh(s,t){return{x:s.x-t.x,y:s.y-t.y}}function j1(s){const{clientOffset:t,initialClientOffset:a,initialSourceClientOffset:n}=s;return!t||!a||!n?null:qh(y1(t,n),a)}function b1(s){const{clientOffset:t,initialClientOffset:a}=s;return!t||!a?null:qh(t,a)}const cn=[],ol=[];cn.__IS_NONE__=!0;ol.__IS_ALL__=!0;function N1(s,t){return s===cn?!1:s===ol||typeof t>"u"?!0:Kw(t,s).length>0}class w1{subscribeToStateChange(t,a={}){const{handlerIds:n}=a;Se(typeof t=="function","listener must be a function."),Se(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let r=this.store.getState().stateId;const i=()=>{const l=this.store.getState(),o=l.stateId;try{o===r||o===r+1&&!N1(l.dirtyHandlerIds,n)||t()}finally{r=o}};return this.store.subscribe(i)}subscribeToOffsetChange(t){Se(typeof t=="function","listener must be a function.");let a=this.store.getState().dragOffset;const n=()=>{const r=this.store.getState().dragOffset;r!==a&&(a=r,t())};return this.store.subscribe(n)}canDragSource(t){if(!t)return!1;const a=this.registry.getSource(t);return Se(a,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:a.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;const a=this.registry.getTarget(t);if(Se(a,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(t),r=this.getItemType();return lo(n,r)&&a.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;const a=this.registry.getSource(t,!0);if(Se(a,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(t),r=this.getItemType();return n!==r?!1:a.isDragging(this,t)}isOverTarget(t,a={shallow:!1}){if(!t)return!1;const{shallow:n}=a;if(!this.isDragging())return!1;const r=this.registry.getTargetType(t),i=this.getItemType();if(i&&!lo(r,i))return!1;const l=this.getTargetIds();if(!l.length)return!1;const o=l.indexOf(t);return n?o===l.length-1:o>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return j1(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return b1(this.store.getState().dragOffset)}constructor(t,a){this.store=t,this.registry=a}}const nc=typeof global<"u"?global:self,Vh=nc.MutationObserver||nc.WebKitMutationObserver;function Uh(s){return function(){const a=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(a),clearInterval(n),s()}}}function S1(s){let t=1;const a=new Vh(s),n=document.createTextNode("");return a.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}const C1=typeof Vh=="function"?S1:Uh;class k1{enqueueTask(t){const{queue:a,requestFlush:n}=this;a.length||(n(),this.flushing=!0),a[a.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:t}=this;for(;this.index<t.length;){const a=this.index;if(this.index++,t[a].call(),this.index>this.capacity){for(let n=0,r=t.length-this.index;n<r;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=C1(this.flush),this.requestErrorThrow=Uh(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class D1{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,a){this.onError=t,this.release=a,this.task=null}}class T1{create(t){const a=this.freeTasks,n=a.length?a.pop():new D1(this.onError,r=>a[a.length]=r);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}}const Wh=new k1,E1=new T1(Wh.registerPendingError);function M1(s){Wh.enqueueTask(E1.create(s))}const ll="dnd-core/ADD_SOURCE",cl="dnd-core/ADD_TARGET",dl="dnd-core/REMOVE_SOURCE",ui="dnd-core/REMOVE_TARGET";function P1(s){return{type:ll,payload:{sourceId:s}}}function A1(s){return{type:cl,payload:{targetId:s}}}function R1(s){return{type:dl,payload:{sourceId:s}}}function I1(s){return{type:ui,payload:{targetId:s}}}function O1(s){Se(typeof s.canDrag=="function","Expected canDrag to be a function."),Se(typeof s.beginDrag=="function","Expected beginDrag to be a function."),Se(typeof s.endDrag=="function","Expected endDrag to be a function.")}function F1(s){Se(typeof s.canDrop=="function","Expected canDrop to be a function."),Se(typeof s.hover=="function","Expected hover to be a function."),Se(typeof s.drop=="function","Expected beginDrag to be a function.")}function co(s,t){if(t&&Array.isArray(s)){s.forEach(a=>co(a,!1));return}Se(typeof s=="string"||typeof s=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Ht;(function(s){s.SOURCE="SOURCE",s.TARGET="TARGET"})(Ht||(Ht={}));let _1=0;function $1(){return _1++}function L1(s){const t=$1().toString();switch(s){case Ht.SOURCE:return`S${t}`;case Ht.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${s}`)}}function rc(s){switch(s[0]){case"S":return Ht.SOURCE;case"T":return Ht.TARGET;default:throw new Error(`Cannot parse handler ID: ${s}`)}}function ic(s,t){const a=s.entries();let n=!1;do{const{done:r,value:[,i]}=a.next();if(i===t)return!0;n=!!r}while(!n);return!1}class z1{addSource(t,a){co(t),O1(a);const n=this.addHandler(Ht.SOURCE,t,a);return this.store.dispatch(P1(n)),n}addTarget(t,a){co(t,!0),F1(a);const n=this.addHandler(Ht.TARGET,t,a);return this.store.dispatch(A1(n)),n}containsHandler(t){return ic(this.dragSources,t)||ic(this.dropTargets,t)}getSource(t,a=!1){return Se(this.isSourceId(t),"Expected a valid source ID."),a&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return Se(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return Se(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return Se(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return rc(t)===Ht.SOURCE}isTargetId(t){return rc(t)===Ht.TARGET}removeSource(t){Se(this.getSource(t),"Expected an existing source."),this.store.dispatch(R1(t)),M1(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){Se(this.getTarget(t),"Expected an existing target."),this.store.dispatch(I1(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){const a=this.getSource(t);Se(a,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=a}unpinSource(){Se(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,a,n){const r=L1(t);return this.types.set(r,a),t===Ht.SOURCE?this.dragSources.set(r,n):t===Ht.TARGET&&this.dropTargets.set(r,n),r}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}}const B1=(s,t)=>s===t;function q1(s,t){return!s&&!t?!0:!s||!t?!1:s.x===t.x&&s.y===t.y}function V1(s,t,a=B1){if(s.length!==t.length)return!1;for(let n=0;n<s.length;++n)if(!a(s[n],t[n]))return!1;return!0}function U1(s=cn,t){switch(t.type){case li:break;case ll:case cl:case ui:case dl:return cn;case oi:case il:case di:case ci:default:return ol}const{targetIds:a=[],prevTargetIds:n=[]}=t.payload,r=Yw(a,n);if(!(r.length>0||!V1(a,n)))return cn;const l=n[n.length-1],o=a[a.length-1];return l!==o&&(l&&r.push(l),o&&r.push(o)),r}function W1(s,t,a){return t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}function H1(s){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{},n=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable}))),n.forEach(function(r){W1(s,r,a[r])})}return s}const oc={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function G1(s=oc,t){const{payload:a}=t;switch(t.type){case rl:case oi:return{initialSourceClientOffset:a.sourceClientOffset,initialClientOffset:a.clientOffset,clientOffset:a.clientOffset};case li:return q1(s.clientOffset,a.clientOffset)?s:H1({},s,{clientOffset:a.clientOffset});case di:case ci:return oc;default:return s}}function Y1(s,t,a){return t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}function ka(s){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{},n=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable}))),n.forEach(function(r){Y1(s,r,a[r])})}return s}const K1={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Q1(s=K1,t){const{payload:a}=t;switch(t.type){case oi:return ka({},s,{itemType:a.itemType,item:a.item,sourceId:a.sourceId,isSourcePublic:a.isSourcePublic,dropResult:null,didDrop:!1});case il:return ka({},s,{isSourcePublic:!0});case li:return ka({},s,{targetIds:a.targetIds});case ui:return s.targetIds.indexOf(a.targetId)===-1?s:ka({},s,{targetIds:Gw(s.targetIds,a.targetId)});case ci:return ka({},s,{dropResult:a.dropResult,didDrop:!0,targetIds:[]});case di:return ka({},s,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return s}}function X1(s=0,t){switch(t.type){case ll:case cl:return s+1;case dl:case ui:return s-1;default:return s}}function J1(s=0){return s+1}function Z1(s,t,a){return t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}function e2(s){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{},n=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable}))),n.forEach(function(r){Z1(s,r,a[r])})}return s}function t2(s={},t){return{dirtyHandlerIds:U1(s.dirtyHandlerIds,{type:t.type,payload:e2({},t.payload,{prevTargetIds:Hw(s,"dragOperation.targetIds",[])})}),dragOffset:G1(s.dragOffset,t),refCount:X1(s.refCount,t),dragOperation:Q1(s.dragOperation,t),stateId:J1(s.stateId)}}function s2(s,t=void 0,a={},n=!1){const r=a2(n),i=new w1(r,new z1(r)),l=new v1(r,i),o=s(l,t,a);return l.receiveBackend(o),l}function a2(s){const t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return zh(t2,s&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}function n2(s,t){if(s==null)return{};var a=r2(s,t),n,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(s,n)&&(a[n]=s[n])}return a}function r2(s,t){if(s==null)return{};var a={},n=Object.keys(s),r,i;for(i=0;i<n.length;i++)r=n[i],!(t.indexOf(r)>=0)&&(a[r]=s[r]);return a}let lc=0;const sr=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var i2=u.memo(function(t){var{children:a}=t,n=n2(t,["children"]);const[r,i]=o2(n);return u.useEffect(()=>{if(i){const l=Hh();return++lc,()=>{--lc===0&&(l[sr]=null)}}},[]),e.jsx(Lh.Provider,{value:r,children:a})});function o2(s){if("manager"in s)return[{dragDropManager:s.manager},!1];const t=l2(s.backend,s.context,s.options,s.debugMode),a=!s.context;return[t,a]}function l2(s,t=Hh(),a,n){const r=t;return r[sr]||(r[sr]={dragDropManager:s2(s,t,a,n)}),r[sr]}function Hh(){return typeof global<"u"?global:window}var c2=function s(t,a){if(t===a)return!0;if(t&&a&&typeof t=="object"&&typeof a=="object"){if(t.constructor!==a.constructor)return!1;var n,r,i;if(Array.isArray(t)){if(n=t.length,n!=a.length)return!1;for(r=n;r--!==0;)if(!s(t[r],a[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(a).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(a,i[r]))return!1;for(r=n;r--!==0;){var l=i[r];if(!s(t[l],a[l]))return!1}return!0}return t!==t&&a!==a};const d2=Hx(c2),fa=typeof window<"u"?u.useLayoutEffect:u.useEffect;function u2(s,t,a){const[n,r]=u.useState(()=>t(s)),i=u.useCallback(()=>{const l=t(s);d2(n,l)||(r(l),a&&a())},[n,s,a]);return fa(i),[n,i]}function m2(s,t,a){const[n,r]=u2(s,t,a);return fa(function(){const l=s.getHandlerId();if(l!=null)return s.subscribeToStateChange(r,{handlerIds:[l]})},[s,r]),n}function Gh(s,t,a){return m2(t,s||(()=>({})),()=>a.reconnect())}function Yh(s,t){const a=[];return typeof s!="function"&&a.push(s),u.useMemo(()=>typeof s=="function"?s():s,a)}function h2(s){return u.useMemo(()=>s.hooks.dragSource(),[s])}function x2(s){return u.useMemo(()=>s.hooks.dragPreview(),[s])}let Pi=!1,Ai=!1;class g2{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){Se(!Pi,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Pi=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Pi=!1}}isDragging(){if(!this.sourceId)return!1;Se(!Ai,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Ai=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Ai=!1}}subscribeToStateChange(t,a){return this.internalMonitor.subscribeToStateChange(t,a)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,a){return this.internalMonitor.isOverTarget(t,a)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}}let Ri=!1;class p2{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,a){return this.internalMonitor.subscribeToStateChange(t,a)}canDrop(){if(!this.targetId)return!1;Se(!Ri,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Ri=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Ri=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}}function f2(s,t,a){const n=a.getRegistry(),r=n.addTarget(s,t);return[r,()=>n.removeTarget(r)]}function v2(s,t,a){const n=a.getRegistry(),r=n.addSource(s,t);return[r,()=>n.removeSource(r)]}function uo(s,t,a,n){let r;if(r!==void 0)return!!r;if(s===t)return!0;if(typeof s!="object"||!s||typeof t!="object"||!t)return!1;const i=Object.keys(s),l=Object.keys(t);if(i.length!==l.length)return!1;const o=Object.prototype.hasOwnProperty.bind(t);for(let c=0;c<i.length;c++){const h=i[c];if(!o(h))return!1;const x=s[h],d=t[h];if(r=void 0,r===!1||r===void 0&&x!==d)return!1}return!0}function mo(s){return s!==null&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function y2(s){if(typeof s.type=="string")return;const t=s.type.displayName||s.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function j2(s){return(t=null,a=null)=>{if(!u.isValidElement(t)){const i=t;return s(i,a),i}const n=t;return y2(n),b2(n,a?i=>s(i,a):s)}}function Kh(s){const t={};return Object.keys(s).forEach(a=>{const n=s[a];if(a.endsWith("Ref"))t[a]=s[a];else{const r=j2(n);t[a]=()=>r}}),t}function cc(s,t){typeof s=="function"?s(t):s.current=t}function b2(s,t){const a=s.ref;return Se(typeof a!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),a?u.cloneElement(s,{ref:n=>{cc(a,n),cc(t,n)}}):u.cloneElement(s,{ref:t})}class N2{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){const t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){const t=this.dragSource,a=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return a&&this.disconnectDragSource(),this.handlerId?t?(a&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),a):(this.lastConnectedDragSource=t,a):a}reconnectDragPreview(t=!1){const a=this.dragPreview,n=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!a){this.lastConnectedDragPreview=a;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=a,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,a,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!uo(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!uo(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=Kh({dragSource:(a,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,mo(a)?this.dragSourceRef=a:this.dragSourceNode=a,this.reconnectDragSource()},dragPreview:(a,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,mo(a)?this.dragPreviewRef=a:this.dragPreviewNode=a,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}}class w2{get connectTarget(){return this.dropTarget}reconnect(){const t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();const a=this.dropTarget;if(this.handlerId){if(!a){this.lastConnectedDropTarget=a;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=a,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,a,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!uo(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=Kh({dropTarget:(a,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,mo(a)?this.dropTargetRef=a:this.dropTargetNode=a,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}}function sn(){const{dragDropManager:s}=u.useContext(Lh);return Se(s!=null,"Expected drag drop context"),s}function S2(s,t){const a=sn(),n=u.useMemo(()=>new N2(a.getBackend()),[a]);return fa(()=>(n.dragSourceOptions=s||null,n.reconnect(),()=>n.disconnectDragSource()),[n,s]),fa(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}function C2(){const s=sn();return u.useMemo(()=>new g2(s),[s])}class k2{beginDrag(){const t=this.spec,a=this.monitor;let n=null;return typeof t.item=="object"?n=t.item:typeof t.item=="function"?n=t.item(a):n={},n??null}canDrag(){const t=this.spec,a=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(a):!0}isDragging(t,a){const n=this.spec,r=this.monitor,{isDragging:i}=n;return i?i(r):a===t.getSourceId()}endDrag(){const t=this.spec,a=this.monitor,n=this.connector,{end:r}=t;r&&r(a.getItem(),a),n.reconnect()}constructor(t,a,n){this.spec=t,this.monitor=a,this.connector=n}}function D2(s,t,a){const n=u.useMemo(()=>new k2(s,t,a),[t,a]);return u.useEffect(()=>{n.spec=s},[s]),n}function T2(s){return u.useMemo(()=>{const t=s.type;return Se(t!=null,"spec.type must be defined"),t},[s])}function E2(s,t,a){const n=sn(),r=D2(s,t,a),i=T2(s);fa(function(){if(i!=null){const[o,c]=v2(i,r,n);return t.receiveHandlerId(o),a.receiveHandlerId(o),c}},[n,t,a,r,i])}function M2(s,t){const a=Yh(s);Se(!a.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=C2(),r=S2(a.options,a.previewOptions);return E2(a,n,r),[Gh(a.collect,n,r),h2(r),x2(r)]}function P2(s){return u.useMemo(()=>s.hooks.dropTarget(),[s])}function A2(s){const t=sn(),a=u.useMemo(()=>new w2(t.getBackend()),[t]);return fa(()=>(a.dropTargetOptions=s||null,a.reconnect(),()=>a.disconnectDropTarget()),[s]),a}function R2(){const s=sn();return u.useMemo(()=>new p2(s),[s])}function I2(s){const{accept:t}=s;return u.useMemo(()=>(Se(s.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}class O2{canDrop(){const t=this.spec,a=this.monitor;return t.canDrop?t.canDrop(a.getItem(),a):!0}hover(){const t=this.spec,a=this.monitor;t.hover&&t.hover(a.getItem(),a)}drop(){const t=this.spec,a=this.monitor;if(t.drop)return t.drop(a.getItem(),a)}constructor(t,a){this.spec=t,this.monitor=a}}function F2(s,t){const a=u.useMemo(()=>new O2(s,t),[t]);return u.useEffect(()=>{a.spec=s},[s]),a}function _2(s,t,a){const n=sn(),r=F2(s,t),i=I2(s);fa(function(){const[o,c]=f2(i,r,n);return t.receiveHandlerId(o),a.receiveHandlerId(o),c},[n,t,r,a,i.map(l=>l.toString()).join("|")])}function $2(s,t){const a=Yh(s),n=R2(),r=A2(a.options);return _2(a,n,r),[Gh(a.collect,n,r),P2(r)]}function Qh(s){let t=null;return()=>(t==null&&(t=s()),t)}function L2(s,t){return s.filter(a=>a!==t)}function z2(s,t){const a=new Set,n=i=>a.add(i);s.forEach(n),t.forEach(n);const r=[];return a.forEach(i=>r.push(i)),r}class B2{enter(t){const a=this.entered.length,n=r=>this.isNodeInDocument(r)&&(!r.contains||r.contains(t));return this.entered=z2(this.entered.filter(n),[t]),a===0&&this.entered.length>0}leave(t){const a=this.entered.length;return this.entered=L2(this.entered.filter(this.isNodeInDocument),t),a>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}}class q2{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${t}" until the drop event.`),null}})})}loadDataTransfer(t){if(t){const a={};Object.keys(this.config.exposeProperties).forEach(n=>{const r=this.config.exposeProperties[n];r!=null&&(a[n]={value:r(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,a)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,a){return a===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}}const Xh="__NATIVE_FILE__",Jh="__NATIVE_URL__",Zh="__NATIVE_TEXT__",ex="__NATIVE_HTML__",dc=Object.freeze(Object.defineProperty({__proto__:null,FILE:Xh,HTML:ex,TEXT:Zh,URL:Jh},Symbol.toStringTag,{value:"Module"}));function Ii(s,t,a){const n=t.reduce((r,i)=>r||s.getData(i),"");return n??a}const ho={[Xh]:{exposeProperties:{files:s=>Array.prototype.slice.call(s.files),items:s=>s.items,dataTransfer:s=>s},matchesTypes:["Files"]},[ex]:{exposeProperties:{html:(s,t)=>Ii(s,t,""),dataTransfer:s=>s},matchesTypes:["Html","text/html"]},[Jh]:{exposeProperties:{urls:(s,t)=>Ii(s,t,"").split(`
`),dataTransfer:s=>s},matchesTypes:["Url","text/uri-list"]},[Zh]:{exposeProperties:{text:(s,t)=>Ii(s,t,""),dataTransfer:s=>s},matchesTypes:["Text","text/plain"]}};function V2(s,t){const a=ho[s];if(!a)throw new Error(`native type ${s} has no configuration`);const n=new q2(a);return n.loadDataTransfer(t),n}function Oi(s){if(!s)return null;const t=Array.prototype.slice.call(s.types||[]);return Object.keys(ho).filter(a=>{const n=ho[a];return n!=null&&n.matchesTypes?n.matchesTypes.some(r=>t.indexOf(r)>-1):!1})[0]||null}const U2=Qh(()=>/firefox/i.test(navigator.userAgent)),tx=Qh(()=>!!window.safari);class uc{interpolate(t){const{xs:a,ys:n,c1s:r,c2s:i,c3s:l}=this;let o=a.length-1;if(t===a[o])return n[o];let c=0,h=l.length-1,x;for(;c<=h;){x=Math.floor(.5*(c+h));const g=a[x];if(g<t)c=x+1;else if(g>t)h=x-1;else return n[x]}o=Math.max(0,h);const d=t-a[o],m=d*d;return n[o]+r[o]*d+i[o]*m+l[o]*d*m}constructor(t,a){const{length:n}=t,r=[];for(let g=0;g<n;g++)r.push(g);r.sort((g,y)=>t[g]<t[y]?-1:1);const i=[],l=[];let o,c;for(let g=0;g<n-1;g++)o=t[g+1]-t[g],c=a[g+1]-a[g],i.push(o),l.push(c/o);const h=[l[0]];for(let g=0;g<i.length-1;g++){const y=l[g],p=l[g+1];if(y*p<=0)h.push(0);else{o=i[g];const j=i[g+1],v=o+j;h.push(3*v/((v+j)/y+(v+o)/p))}}h.push(l[l.length-1]);const x=[],d=[];let m;for(let g=0;g<h.length-1;g++){m=l[g];const y=h[g],p=1/i[g],j=y+h[g+1]-m-m;x.push((m-y-j)*p),d.push(j*p*p)}this.xs=t,this.ys=a,this.c1s=h,this.c2s=x,this.c3s=d}}const W2=1;function sx(s){const t=s.nodeType===W2?s:s.parentElement;if(!t)return null;const{top:a,left:n}=t.getBoundingClientRect();return{x:n,y:a}}function Qn(s){return{x:s.clientX,y:s.clientY}}function H2(s){var t;return s.nodeName==="IMG"&&(U2()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(s)))}function G2(s,t,a,n){let r=s?t.width:a,i=s?t.height:n;return tx()&&s&&(i/=window.devicePixelRatio,r/=window.devicePixelRatio),{dragPreviewWidth:r,dragPreviewHeight:i}}function Y2(s,t,a,n,r){const i=H2(t),o=sx(i?s:t),c={x:a.x-o.x,y:a.y-o.y},{offsetWidth:h,offsetHeight:x}=s,{anchorX:d,anchorY:m}=n,{dragPreviewWidth:g,dragPreviewHeight:y}=G2(i,t,h,x),p=()=>{let w=new uc([0,.5,1],[c.y,c.y/x*y,c.y+y-x]).interpolate(m);return tx()&&i&&(w+=(window.devicePixelRatio-1)*y),w},j=()=>new uc([0,.5,1],[c.x,c.x/h*g,c.x+g-h]).interpolate(d),{offsetX:v,offsetY:N}=r,f=v===0||v,S=N===0||N;return{x:f?v:j(),y:S?N:p()}}class K2{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,a){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=a}}function Q2(s,t,a){return t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}function mc(s){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{},n=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable}))),n.forEach(function(r){Q2(s,r,a[r])})}return s}class X2{profile(){var t,a;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((a=this.dragOverTargetIds)===null||a===void 0?void 0:a.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){const t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var a;(a=this.window)===null||a===void 0||a.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,a,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,a),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,a,n){this.sourceNodes.set(t,a),this.sourceNodeOptions.set(t,n);const r=l=>this.handleDragStart(l,t),i=l=>this.handleSelectStart(l);return a.setAttribute("draggable","true"),a.addEventListener("dragstart",r),a.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),a.removeEventListener("dragstart",r),a.removeEventListener("selectstart",i),a.setAttribute("draggable","false")}}connectDropTarget(t,a){const n=l=>this.handleDragEnter(l,t),r=l=>this.handleDragOver(l,t),i=l=>this.handleDrop(l,t);return a.addEventListener("dragenter",n),a.addEventListener("dragover",r),a.addEventListener("drop",i),()=>{a.removeEventListener("dragenter",n),a.removeEventListener("dragover",r),a.removeEventListener("drop",i)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const t=this.monitor.getSourceId(),a=this.sourceNodeOptions.get(t);return mc({dropEffect:this.altKeyPressed?"copy":"move"},a||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const t=this.monitor.getSourceId(),a=this.sourcePreviewNodeOptions.get(t);return mc({anchorX:.5,anchorY:.5,captureDraggingState:!1},a||{})}isDraggingNativeItem(){const t=this.monitor.getItemType();return Object.keys(dc).some(a=>dc[a]===t)}beginDragNativeItem(t,a){this.clearCurrentDragSourceNode(),this.currentNativeSource=V2(t,a),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;const a=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},a)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,a){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(a))}handleDragEnter(t,a){this.dragEnterTargetIds.unshift(a)}handleDragOver(t,a){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(a)}handleDrop(t,a){this.dropTargetIds.unshift(a)}constructor(t,a,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=r=>{const i=this.sourceNodes.get(r);return i&&sx(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=r=>!!(r&&this.document&&this.document.body&&this.document.body.contains(r)),this.endDragIfSourceWasRemovedFromDOM=()=>{const r=this.currentDragSourceNode;r==null||this.isNodeInDocument(r)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=r=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(r||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=r=>{if(r.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const l=Qn(r);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:l});const{dataTransfer:o}=r,c=Oi(o);if(this.monitor.isDragging()){if(o&&typeof o.setDragImage=="function"){const x=this.monitor.getSourceId(),d=this.sourceNodes.get(x),m=this.sourcePreviewNodes.get(x)||d;if(m){const{anchorX:g,anchorY:y,offsetX:p,offsetY:j}=this.getCurrentSourcePreviewNodeOptions(),f=Y2(d,m,l,{anchorX:g,anchorY:y},{offsetX:p,offsetY:j});o.setDragImage(m,f.x,f.y)}}try{o==null||o.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(r.target);const{captureDraggingState:h}=this.getCurrentSourcePreviewNodeOptions();h?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(o&&!o.types&&(r.target&&!r.target.hasAttribute||!r.target.hasAttribute("draggable")))return;r.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=r=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(r.dataTransfer)}if(!this.enterLeaveCounter.enter(r.target)||this.monitor.isDragging())return;const{dataTransfer:o}=r,c=Oi(o);c&&this.beginDragNativeItem(c,o)},this.handleTopDragEnter=r=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=r.altKey,i.length>0&&this.actions.hover(i,{clientOffset:Qn(r)}),i.some(o=>this.monitor.canDropOnTarget(o))&&(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=r=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(r.dataTransfer)}},this.handleTopDragOver=r=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="none");return}this.altKeyPressed=r.altKey,this.lastClientOffset=Qn(r),this.scheduleHover(i),(i||[]).some(o=>this.monitor.canDropOnTarget(o))?(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?r.preventDefault():(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=r=>{this.isDraggingNativeItem()&&r.preventDefault(),this.enterLeaveCounter.leave(r.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=r=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;r.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(r.dataTransfer)}else Oi(r.dataTransfer)&&r.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=r=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:Qn(r)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=r=>{const i=r.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(r.preventDefault(),i.dragDrop()))},this.options=new K2(a,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new B2(this.isNodeInDocument)}}const J2=function(t,a,n){return new X2(t,a,n)},Z2=({view:s="month",showRecurring:t=!0,enableDragDrop:a=!0})=>{const{dailyData:n,transactions:r,recurringTransactions:i,updateTransaction:l,deleteTransaction:o}=he(),[c,h]=u.useState(new Date),[x,d]=u.useState(null),[m,g]=u.useState(s),[y,p]=u.useState(null),[j,v]=u.useState(null),[N,f]=u.useState(!1),[S,D]=u.useState(null),w=["January","February","March","April","May","June","July","August","September","October","November","December"],R=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],b=u.useMemo(()=>{if(m==="week"){const ee=Ja(c),ge=[];for(let le=0;le<7;le++)ge.push(qe(ee,le));return ge}const C=c.getFullYear(),B=c.getMonth(),E=new Date(C,B,1),U=new Date(C,B+1,0).getDate(),H=E.getDay(),Z=[];for(let ee=0;ee<H;ee++)Z.push(null);for(let ee=1;ee<=U;ee++)Z.push(new Date(C,B,ee));return Z},[c,m]),k=u.useCallback(C=>{if(!C)return null;const B=ce(C,"yyyy-MM-dd");n.find(le=>le.date===B);const E=r.filter(le=>le.date===B),V=j?E.filter(le=>le.category===j):E,U=t?i.filter(le=>{if(!le.isActive)return!1;const Oe=new Date(le.nextDate);switch(le.frequency){case"daily":return!0;case"weekly":return C.getDay()===Oe.getDay();case"monthly":return C.getDate()===Oe.getDate();case"yearly":return C.getDate()===Oe.getDate()&&C.getMonth()===Oe.getMonth();default:return!1}}):[],H=U.filter(le=>le.category==="Earnings").reduce((le,Oe)=>le+Oe.amount,0),Z=U.filter(le=>le.category!=="Earnings").reduce((le,Oe)=>le+Oe.amount,0),ee=V.filter(le=>le.category==="Earnings").reduce((le,Oe)=>le+Oe.amount,0)+H,ge=V.filter(le=>le.category!=="Earnings").reduce((le,Oe)=>le+Oe.amount,0)+Z;return{date:B,transactions:V,recurringTransactions:U,earnings:ee,expenses:ge,netAmount:ee-ge,hasData:ee>0||ge>0||V.length>0||U.length>0}},[n,r,i,t,j]),T=C=>{h(B=>{const E=new Date(B);return m==="week"?C==="prev"?Je(E,7):qe(E,7):(C==="prev"?E.setMonth(B.getMonth()-1):E.setMonth(B.getMonth()+1),E)})},F=()=>{h(new Date),d(new Date)},O=C=>C?lt(C,new Date):!1,q=C=>!C||!x?!1:lt(C,x),P=({transaction:C,date:B})=>{const[{isDragging:E},V]=M2(()=>({type:"transaction",item:{...C,originalDate:B},collect:ee=>({isDragging:ee.isDragging()})})),U=()=>{console.log("Edit transaction:",C)},H=()=>{C.type==="transaction"&&o(C.id)},Z=()=>{console.log("Duplicate transaction:",C)};return e.jsx("div",{ref:a?V:void 0,className:`group relative p-1 rounded text-xs cursor-move transition-all duration-200 ${E?"drag-preview":"transaction-item"}`,children:e.jsxs(K,{variant:"secondary",className:`text-xs w-full justify-between ${C.type==="recurring"?"border-dashed":""} ${C.category==="Earnings"?"bg-success/10 text-success border-success/20 hover:bg-success/20":C.category==="Petrol"?"bg-blue-500/10 text-blue-600 border-blue-500/20 hover:bg-blue-500/20":C.category==="Food"?"bg-orange-500/10 text-orange-600 border-orange-500/20 hover:bg-orange-500/20":"bg-muted text-muted-foreground hover:bg-muted/70"}`,children:[e.jsxs("span",{className:"flex items-center gap-1",children:[C.category==="Earnings"?"+":"-","£",C.amount.toFixed(0),a&&e.jsx(Yg,{className:"h-3 w-3 opacity-50"})]}),C.type==="transaction"&&e.jsx($h,{transaction:C,onEdit:U,onDelete:H,onDuplicate:Z,size:"sm"})]})})},A=({date:C,children:B})=>{const[{isOver:E,canDrop:V},U]=$2(()=>({accept:"transaction",drop:H=>{if(C&&H.originalDate!==ce(C,"yyyy-MM-dd")){const Z=ce(C,"yyyy-MM-dd");l(H.id,{date:Z})}},collect:H=>({isOver:H.isOver(),canDrop:H.canDrop()})}));return e.jsx("div",{ref:a?U:void 0,className:`${E&&V?"drop-zone-active":""}`,children:B})},$=({dayData:C})=>e.jsxs("div",{className:"space-y-3 min-w-80",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-semibold",children:ce(_e(C.date),"EEEE, MMM dd")}),e.jsxs(K,{variant:C.netAmount>=0?"default":"destructive",className:"font-mono",children:[C.netAmount>=0?"+":"","£",C.netAmount.toFixed(2)]})]}),C.earnings>0&&e.jsxs("div",{className:"flex justify-between text-sm p-2 rounded-md bg-success/10",children:[e.jsxs("span",{className:"text-success font-medium flex items-center gap-1",children:[e.jsx(de,{className:"h-3 w-3"}),"Income:"]}),e.jsxs("span",{className:"text-success font-bold",children:["+£",C.earnings.toFixed(2)]})]}),C.expenses>0&&e.jsxs("div",{className:"flex justify-between text-sm p-2 rounded-md bg-destructive/10",children:[e.jsxs("span",{className:"text-destructive font-medium flex items-center gap-1",children:[e.jsx(We,{className:"h-3 w-3"}),"Expenses:"]}),e.jsxs("span",{className:"text-destructive font-bold",children:["-£",C.expenses.toFixed(2)]})]}),C.transactions.length>0&&e.jsxs("div",{className:"border-t pt-3",children:[e.jsxs("p",{className:"text-xs font-medium mb-2 flex items-center gap-1",children:[e.jsx(tt,{className:"h-3 w-3"}),"Transactions (",C.transactions.length,"):"]}),e.jsx(Ka,{className:"max-h-32",children:e.jsx("div",{className:"space-y-1",children:C.transactions.map((B,E)=>e.jsxs("div",{className:"flex justify-between text-xs p-1 rounded hover:bg-muted/50",children:[e.jsx("span",{className:"truncate font-medium",children:B.category}),e.jsxs("span",{className:`font-mono ${B.category==="Earnings"?"text-success":"text-destructive"}`,children:[B.category==="Earnings"?"+":"-","£",B.amount.toFixed(2)]})]},E))})})]}),C.recurringTransactions.length>0&&e.jsxs("div",{className:"border-t pt-3",children:[e.jsxs("p",{className:"text-xs font-medium mb-2 flex items-center gap-1",children:[e.jsx(Ct,{className:"h-3 w-3"}),"Recurring (",C.recurringTransactions.length,"):"]}),e.jsx("div",{className:"space-y-1",children:C.recurringTransactions.map((B,E)=>e.jsxs("div",{className:"flex justify-between text-xs p-1 rounded border-dashed border hover:bg-muted/50",children:[e.jsx("span",{className:"truncate font-medium",children:B.name}),e.jsxs("span",{className:`font-mono ${B.category==="Earnings"?"text-success":"text-destructive"}`,children:[B.category==="Earnings"?"+":"-","£",B.amount.toFixed(2)]})]},E))})]}),e.jsxs(_,{size:"sm",variant:"outline",className:"w-full mt-3",onClick:()=>d(_e(C.date)),children:[e.jsx(hr,{className:"h-3 w-3 mr-1"}),"View Day Details"]})]}),M=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid gap-2 grid-cols-7",children:R.map(C=>e.jsx("div",{className:"p-3 text-center text-sm font-medium text-muted-foreground",children:m==="week"?C:C.slice(0,3)},C))}),e.jsx("div",{className:"grid gap-2 grid-cols-7",children:b.map((C,B)=>{const E=k(C),V=O(C),U=q(C);return e.jsx(A,{date:C,children:e.jsxs(zw,{openDelay:300,closeDelay:100,children:[e.jsx(Bw,{asChild:!0,children:e.jsx("div",{className:`
                      calendar-grid-day min-h-28 p-3 rounded-xl border
                      ${C?"calendar-day-hover":"border-transparent"}
                      ${V?"border-primary bg-gradient-primary text-primary-foreground shadow-glow ring-2 ring-primary/20":""}
                      ${U?"border-accent bg-gradient-accent text-accent-foreground shadow-elevated":""}
                      ${E!=null&&E.hasData?"border-primary/30 bg-gradient-calendar shadow-calendar-day":"border-border hover:border-primary/20"}
                      ${m==="week"?"min-h-36":"min-h-28"}
                      ${S?"hover:border-primary hover:bg-primary/5":""}
                    `,onClick:()=>C&&d(C),onMouseEnter:()=>C&&p(ce(C,"yyyy-MM-dd")),onMouseLeave:()=>p(null),children:C&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`text-sm font-semibold ${V?"text-primary-foreground":U?"text-accent-foreground":""}`,children:C.getDate()}),(E==null?void 0:E.hasData)&&e.jsxs("div",{className:"flex gap-1",children:[E.earnings>0&&e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-success shadow-sm"}),E.expenses>0&&e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-destructive shadow-sm"}),E.recurringTransactions.length>0&&e.jsx(Ct,{className:"h-2.5 w-2.5 text-primary"})]})]}),E&&e.jsxs("div",{className:"space-y-1.5",children:[(E.earnings>0||E.expenses>0)&&e.jsx("div",{className:"text-center",children:e.jsxs(K,{variant:"outline",className:`text-xs px-2 py-0.5 font-mono transition-all duration-200 ${E.netAmount>=0?"border-success/40 text-success bg-success/10 hover:bg-success/20":"border-destructive/40 text-destructive bg-destructive/10 hover:bg-destructive/20"}`,children:[E.netAmount>=0?"+":"","£",Math.abs(E.netAmount).toFixed(0)]})}),e.jsx(Ka,{className:"max-h-20",children:e.jsxs("div",{className:"space-y-1",children:[E.transactions.slice(0,2).map((H,Z)=>e.jsx(P,{transaction:{id:`t-${Z}`,date:E.date,category:H.category,amount:H.amount,type:"transaction"},date:E.date},Z)),t&&E.recurringTransactions.slice(0,1).map((H,Z)=>e.jsx(P,{transaction:{id:H.id,date:E.date,category:H.category,amount:H.amount,type:"recurring"},date:E.date},`r-${Z}`)),E.transactions.length+E.recurringTransactions.length>3&&e.jsxs("div",{className:"text-xs text-muted-foreground text-center py-1",children:["+",E.transactions.length+E.recurringTransactions.length-3," more"]})]})})]})]})})}),E&&E.hasData&&e.jsx(_h,{className:"w-auto",children:e.jsx($,{dayData:E})})]})},B)})})]}),z=()=>{var B;const C=((B=b==null?void 0:b.filter(E=>{var V;return E&&((V=k(E))==null?void 0:V.hasData)}))==null?void 0:B.sort((E,V)=>E&&V?new Date(E).getTime()-new Date(V).getTime():0))||[];return C.length===0?e.jsxs(L,{className:"p-8 text-center",children:[e.jsx(Fe,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"font-medium mb-2",children:"No Financial Activity"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["No transactions found for ",w[c.getMonth()]," ",c.getFullYear()]}),e.jsx(Ga,{})]}):e.jsx("div",{className:"space-y-4",children:C.map((E,V)=>{const U=k(E);return!U||!E?null:e.jsxs(L,{className:"interactive-card",children:[e.jsx("div",{className:"p-4 border-b bg-gradient-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${U.netAmount>=0?"bg-success":"bg-destructive"}`}),e.jsx("h3",{className:"font-semibold",children:ce(E,"EEEE, MMMM dd, yyyy")}),O(E)&&e.jsx(K,{variant:"default",children:"Today"})]}),e.jsxs(K,{variant:U.netAmount>=0?"default":"destructive",className:"font-mono",children:[U.netAmount>=0?"+":"","£",U.netAmount.toFixed(2)]})]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Transactions"}),U.transactions.map((H,Z)=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/30",children:[e.jsx("span",{className:"text-sm",children:H.category}),e.jsxs(K,{variant:"outline",className:"font-mono",children:[H.category==="Earnings"?"+":"-","£",H.amount.toFixed(2)]})]},Z))]}),U.recurringTransactions.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Recurring"}),U.recurringTransactions.map((H,Z)=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border-dashed border bg-muted/10",children:[e.jsx("span",{className:"text-sm",children:H.name}),e.jsxs(K,{variant:"outline",className:"font-mono border-dashed",children:[H.category==="Earnings"?"+":"-","£",H.amount.toFixed(2)]})]},Z))]})]})})]},V)})})},I=()=>{const C=[];for(let B=0;B<14;B++){const E=qe(new Date,B),V=k(E);V!=null&&V.hasData&&C.push({date:E,dayData:V})}return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xn,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Upcoming Financial Activity"})]}),C.length===0?e.jsxs(L,{className:"p-8 text-center",children:[e.jsx(je,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"font-medium mb-2",children:"All Clear"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No upcoming transactions in the next 14 days"})]}):e.jsx("div",{className:"space-y-3",children:C.map(({date:B,dayData:E},V)=>e.jsx(L,{className:"p-4 hover:shadow-card-hover transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:ce(B,"MMM")}),e.jsx("div",{className:"text-lg font-bold",children:ce(B,"dd")}),e.jsx("div",{className:"text-xs text-muted-foreground",children:ce(B,"EEE")})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:ce(B,"EEEE, MMMM dd")}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[E.transactions.length," transactions",E.recurringTransactions.length>0&&` • ${E.recurringTransactions.length} recurring`]})]})]}),e.jsxs(K,{variant:E.netAmount>=0?"default":"destructive",className:"font-mono",children:[E.netAmount>=0?"+":"","£",E.netAmount.toFixed(2)]})]})},V))})]})};return m==="day"&&x?e.jsx(qw,{selectedDate:x,onDateChange:d,onBack:()=>g("month")}):e.jsx(i2,{backend:J2,children:e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:m==="agenda"?"Financial Agenda":m==="list"?"Activity List":`${w[c.getMonth()]} ${c.getFullYear()}`}),e.jsx("p",{className:"text-muted-foreground",children:m==="agenda"?"Upcoming financial activity":m==="list"?"All transactions and recurring items":"Interactive financial calendar with drag-and-drop"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"flex rounded-lg border p-1",children:[{key:"month",label:"Month",icon:Gg},{key:"week",label:"Week",icon:Fe},{key:"day",label:"Day",icon:Qt},{key:"list",label:"List",icon:Xg},{key:"agenda",label:"Agenda",icon:xn}].map(({key:C,label:B,icon:E})=>e.jsxs(_,{variant:m===C?"default":"ghost",size:"sm",onClick:()=>g(C),className:"h-8 px-2",children:[e.jsx(E,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:B})]},C))}),e.jsxs(_,{variant:N?"default":"outline",size:"sm",onClick:()=>f(!N),className:"h-8",children:[e.jsx(Yt,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"AI Insights"})]}),e.jsx(pm,{})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>T("prev"),children:e.jsx(hn,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>T("next"),children:e.jsx(Za,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"sm",onClick:F,children:"Today"})]}),e.jsxs(Es,{children:[e.jsx(Ms,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(ur,{className:"h-4 w-4 mr-1"}),j||"All Categories"]})}),e.jsx(bs,{className:"w-48",align:"end",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(_,{variant:j?"ghost":"default",size:"sm",className:"w-full justify-start",onClick:()=>v(null),children:"All Categories"}),["Earnings","Food","Petrol","Other"].map(C=>e.jsx(_,{variant:j===C?"default":"ghost",size:"sm",className:"w-full justify-start",onClick:()=>v(C),children:C},C))]})})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-4",children:[e.jsx("div",{className:"lg:col-span-3",children:m==="list"?z():m==="agenda"?I():M()}),e.jsxs("div",{className:"space-y-6",children:[N&&e.jsx(Vw,{}),x&&e.jsxs(L,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4"}),ce(x,"MMM dd, yyyy")]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(_,{size:"sm",variant:"outline",className:"w-full",onClick:()=>g("day"),children:[e.jsx(hr,{className:"h-3 w-3 mr-1"}),"View Day Details"]}),e.jsx(Ga,{})]})]})]})]})]})})},eS=()=>{const{dailyData:s,transactions:t,recurringTransactions:a}=he(),[n,r]=u.useState(new Date),i=t.filter(d=>{const m=new Date(d.date);return m.getMonth()===n.getMonth()&&m.getFullYear()===n.getFullYear()&&d.category==="Earnings"}).reduce((d,m)=>d+m.amount,0),l=t.filter(d=>{const m=new Date(d.date);return m.getMonth()===n.getMonth()&&m.getFullYear()===n.getFullYear()&&d.category!=="Earnings"}).reduce((d,m)=>d+m.amount,0),o=a.filter(d=>d.isActive&&d.category==="Earnings").reduce((d,m)=>{const g=m.frequency==="daily"?30.44:m.frequency==="weekly"?4.33:m.frequency==="yearly"?.08333333333333333:1;return d+m.amount*g},0),c=a.filter(d=>d.isActive&&d.category!=="Earnings").reduce((d,m)=>{const g=m.frequency==="daily"?30.44:m.frequency==="weekly"?4.33:m.frequency==="yearly"?.08333333333333333:1;return d+m.amount*g},0),h=i+o,x=l+c;return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Enhanced Calendar"}),e.jsx("p",{className:"text-muted-foreground",children:"Interactive financial calendar with drag-and-drop"})]}),e.jsx(Ga,{})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(L,{className:"p-6 bg-gradient-success text-success-foreground",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(de,{className:"h-6 w-6"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Monthly Earnings"}),e.jsxs("p",{className:"text-xl font-bold",children:["£",h.toFixed(2)]})]})]})}),e.jsx(L,{className:"p-6 hover:shadow-card-hover transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(We,{className:"h-6 w-6 text-destructive"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Expenses"}),e.jsxs("p",{className:"text-xl font-bold text-destructive",children:["£",x.toFixed(2)]})]})]})}),e.jsx(L,{className:"p-6 hover:shadow-card-hover transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Fe,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Net Total"}),e.jsxs("p",{className:`text-xl font-bold ${h-x>=0?"text-success":"text-destructive"}`,children:["£",(h-x).toFixed(2)]})]})]})})]}),e.jsx(Z2,{})]})},tS=()=>{const{isDarkMode:s,toggleDarkMode:t}=he();return e.jsx(_,{variant:"outline",size:"sm",onClick:t,className:"gap-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx(cp,{className:"h-4 w-4"}),"Light"]}):e.jsxs(e.Fragment,{children:[e.jsx(Zg,{className:"h-4 w-4"}),"Dark"]})})},sS=[{symbol:"£",name:"British Pound",code:"GBP"},{symbol:"$",name:"US Dollar",code:"USD"},{symbol:"€",name:"Euro",code:"EUR"},{symbol:"¥",name:"Japanese Yen",code:"JPY"},{symbol:"C$",name:"Canadian Dollar",code:"CAD"},{symbol:"A$",name:"Australian Dollar",code:"AUD"},{symbol:"₹",name:"Indian Rupee",code:"INR"}],aS=()=>{const{currency:s,setCurrency:t}=he();return e.jsxs(Re,{value:s,onValueChange:t,children:[e.jsx(Me,{className:"w-[180px]",children:e.jsx(Ie,{placeholder:"Select currency"})}),e.jsx(Pe,{children:sS.map(a=>e.jsx(J,{value:a.symbol,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:a.symbol}),e.jsx("span",{children:a.name})]})},a.code))})]})},nS=()=>{const{toast:s}=Ue(),{isDarkMode:t,toggleDarkMode:a}=he(),[n,r]=u.useState({appTheme:"auto",colorScheme:"professional",defaultChartType:"bar",animationsEnabled:!0,animationSpeed:500,gridLines:!0,dataLabels:!0,tooltipStyle:"detailed",chartHeight:400,showTrends:!0,comparisonMode:"previous-period"}),i=[{name:"professional",description:"Clean and professional",colors:{primary:"210 14% 24%",secondary:"0 0% 98%",accent:"0 0% 100%",success:"142 69% 58%",warning:"43 96% 56%",destructive:"0 72% 51%",chart1:"210 14% 24%",chart2:"197 71% 52%",chart3:"142 69% 58%",chart4:"43 96% 56%",chart5:"0 72% 51%"}},{name:"vibrant",description:"Bold and energetic",colors:{primary:"217 91% 60%",secondary:"0 0% 96%",accent:"262 83% 58%",success:"142 71% 45%",warning:"38 92% 50%",destructive:"0 84% 60%",chart1:"217 91% 60%",chart2:"0 84% 60%",chart3:"262 83% 58%",chart4:"38 92% 50%",chart5:"142 71% 45%"}},{name:"pastel",description:"Soft and calming",colors:{primary:"210 20% 65%",secondary:"0 0% 98%",accent:"300 20% 85%",success:"150 30% 70%",warning:"45 80% 75%",destructive:"0 50% 75%",chart1:"210 40% 70%",chart2:"150 40% 70%",chart3:"300 40% 70%",chart4:"45 60% 70%",chart5:"0 40% 70%"}},{name:"monochrome",description:"Elegant grayscale",colors:{primary:"0 0% 20%",secondary:"0 0% 96%",accent:"0 0% 100%",success:"0 0% 40%",warning:"0 0% 50%",destructive:"0 0% 30%",chart1:"0 0% 20%",chart2:"0 0% 35%",chart3:"0 0% 50%",chart4:"0 0% 65%",chart5:"0 0% 80%"}},{name:"ocean",description:"Cool blues and greens",colors:{primary:"200 70% 40%",secondary:"0 0% 96%",accent:"180 50% 80%",success:"160 60% 50%",warning:"190 60% 60%",destructive:"200 60% 45%",chart1:"200 70% 40%",chart2:"180 60% 50%",chart3:"160 60% 50%",chart4:"220 50% 60%",chart5:"140 50% 60%"}},{name:"sunset",description:"Warm oranges and purples",colors:{primary:"25 85% 53%",secondary:"0 0% 96%",accent:"280 60% 70%",success:"45 90% 60%",warning:"35 85% 60%",destructive:"15 85% 60%",chart1:"25 85% 53%",chart2:"35 85% 60%",chart3:"280 60% 70%",chart4:"45 90% 60%",chart5:"320 50% 65%"}}];u.useEffect(()=>{const m=localStorage.getItem("theme-preferences");if(m)try{r(JSON.parse(m))}catch(g){console.error("Failed to load theme preferences:",g)}},[]),u.useEffect(()=>{localStorage.setItem("theme-preferences",JSON.stringify(n)),l()},[n]);const l=()=>{const m=document.documentElement,g=i.find(y=>y.name===n.colorScheme);g&&Object.entries(g.colors).forEach(([y,p])=>{y.startsWith("chart")?m.style.setProperty(`--${y}`,p):m.style.setProperty(`--${y}`,p)}),m.style.setProperty("--chart-animation-duration",`${n.animationSpeed}ms`),m.style.setProperty("--chart-height",`${n.chartHeight}px`),m.style.setProperty("--chart-grid-opacity",n.gridLines?"0.2":"0"),m.style.setProperty("--chart-labels-display",n.dataLabels?"block":"none"),(n.appTheme==="light"&&t||n.appTheme==="dark"&&!t)&&a()},o=(m,g)=>{r(y=>({...y,[m]:g}))},c=()=>{r({appTheme:"auto",colorScheme:"professional",defaultChartType:"bar",animationsEnabled:!0,animationSpeed:500,gridLines:!0,dataLabels:!0,tooltipStyle:"detailed",chartHeight:400,showTrends:!0,comparisonMode:"previous-period"}),s({title:"Theme Reset",description:"All theme preferences have been reset to defaults"})},h=()=>{const m=JSON.stringify(n,null,2),g=new Blob([m],{type:"application/json"}),y=URL.createObjectURL(g),p=document.createElement("a");p.href=y,p.download=`moneylens-theme-preferences-${new Date().toISOString().split("T")[0]}.json`,p.click(),URL.revokeObjectURL(y),s({title:"Theme Exported",description:"Your theme preferences have been saved to a file"})},x=m=>{var p;const g=(p=m.target.files)==null?void 0:p[0];if(!g)return;const y=new FileReader;y.onload=j=>{var v;try{const N=JSON.parse((v=j.target)==null?void 0:v.result);r(N),s({title:"Theme Imported",description:"Your theme preferences have been imported successfully"})}catch{s({title:"Import Failed",description:"The theme file is invalid or corrupted",variant:"destructive"})}},y.readAsText(g)},d=i.find(m=>m.name===n.colorScheme);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(ud,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-xl font-semibold",children:"Application Theme"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-sm mb-2 block",children:"Color Scheme"}),e.jsxs(Re,{value:n.colorScheme,onValueChange:m=>o("colorScheme",m),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsx(Pe,{children:i.map(m=>e.jsx(J,{value:m.name,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex gap-1",children:Object.values(m.colors).slice(0,3).map((g,y)=>e.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:`hsl(${g})`}},y))}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium capitalize",children:m.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:m.description})]})]})},m.name))})]})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm mb-2 block",children:"Theme Mode"}),e.jsxs(Re,{value:n.appTheme,onValueChange:m=>o("appTheme",m),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"light",children:"Light"}),e.jsx(J,{value:"dark",children:"Dark"}),e.jsx(J,{value:"auto",children:"Auto (System)"})]})]})]})]}),d&&e.jsxs("div",{className:"mt-6",children:[e.jsx(W,{className:"text-sm mb-3 block",children:"Color Preview"}),e.jsx("div",{className:"grid grid-cols-5 gap-3",children:Object.entries(d.colors).slice(0,5).map(([m,g])=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-full h-12 rounded-lg border shadow-sm mb-2",style:{backgroundColor:`hsl(${g})`}}),e.jsx(W,{className:"text-xs capitalize",children:m})]},m))})]})]}),e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(tt,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-xl font-semibold",children:"Chart Preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-sm mb-2 block",children:"Default Chart Type"}),e.jsxs(Re,{value:n.defaultChartType,onValueChange:m=>o("defaultChartType",m),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"bar",children:"Bar Chart"}),e.jsx(J,{value:"pie",children:"Pie Chart"}),e.jsx(J,{value:"line",children:"Line Chart"}),e.jsx(J,{value:"area",children:"Area Chart"}),e.jsx(J,{value:"donut",children:"Donut Chart"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm mb-2 block",children:"Tooltip Style"}),e.jsxs(Re,{value:n.tooltipStyle,onValueChange:m=>o("tooltipStyle",m),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"minimal",children:"Minimal"}),e.jsx(J,{value:"detailed",children:"Detailed"}),e.jsx(J,{value:"compact",children:"Compact"})]})]})]}),e.jsxs("div",{children:[e.jsxs(W,{className:"text-sm mb-2 block",children:["Chart Height: ",n.chartHeight,"px"]}),e.jsx(ct,{value:[n.chartHeight],onValueChange:m=>o("chartHeight",m[0]),min:200,max:600,step:25,className:"w-full"})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm mb-2 block",children:"Comparison Mode"}),e.jsxs(Re,{value:n.comparisonMode,onValueChange:m=>o("comparisonMode",m),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"none",children:"None"}),e.jsx(J,{value:"previous-period",children:"Previous Period"}),e.jsx(J,{value:"budget",children:"Budget"}),e.jsx(J,{value:"both",children:"Both"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{className:"text-sm",children:"Grid Lines"}),e.jsx(ot,{checked:n.gridLines,onCheckedChange:m=>o("gridLines",m)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{className:"text-sm",children:"Data Labels"}),e.jsx(ot,{checked:n.dataLabels,onCheckedChange:m=>o("dataLabels",m)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{className:"text-sm",children:"Show Trends"}),e.jsx(ot,{checked:n.showTrends,onCheckedChange:m=>o("showTrends",m)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{className:"text-sm",children:"Animations"}),e.jsx(ot,{checked:n.animationsEnabled,onCheckedChange:m=>o("animationsEnabled",m)})]})]}),n.animationsEnabled&&e.jsxs("div",{className:"mt-4",children:[e.jsxs(W,{className:"text-sm mb-2 block",children:["Animation Speed: ",n.animationSpeed,"ms"]}),e.jsx(ct,{value:[n.animationSpeed],onValueChange:m=>o("animationSpeed",m[0]),min:100,max:1e3,step:50,className:"w-full"})]})]}),e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(ep,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-xl font-semibold",children:"Theme Management"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(_,{variant:"outline",className:"gap-2 h-auto p-4 justify-start",onClick:c,children:[e.jsx(Ct,{className:"h-4 w-4"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Reset Theme"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Restore default settings"})]})]}),e.jsxs(_,{variant:"outline",className:"gap-2 h-auto p-4 justify-start",onClick:h,children:[e.jsx(vt,{className:"h-4 w-4"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Export Theme"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Save current preferences"})]})]}),e.jsxs(_,{variant:"outline",className:"gap-2 h-auto p-4 justify-start",onClick:()=>{var m;return(m=document.getElementById("theme-import"))==null?void 0:m.click()},children:[e.jsx(js,{className:"h-4 w-4"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Import Theme"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Load saved preferences"})]})]}),e.jsx("input",{id:"theme-import",type:"file",accept:".json",className:"hidden",onChange:x})]})]})]})},rS=({className:s})=>{const{toast:t}=Ue(),[a,n]=u.useState(navigator.onLine),[r,i]=u.useState(!1),[l,o]=u.useState([]),[c,h]=u.useState(null);u.useEffect(()=>{const p=()=>{n(!0),t({title:"Back Online! 🎉",description:"Connection restored. Syncing pending changes..."}),x()},j=()=>{n(!1),t({title:"Offline Mode",description:"You can continue using the app. Changes will sync when you're back online.",variant:"default"})};return window.addEventListener("online",p),window.addEventListener("offline",j),()=>{window.removeEventListener("online",p),window.removeEventListener("offline",j)}},[]),u.useEffect(()=>{(async()=>{if("storage"in navigator&&"estimate"in navigator.storage)try{const j=await navigator.storage.estimate();h({used:j.usage||0,quota:j.quota||0})}catch(j){console.error("Failed to estimate storage:",j)}})()},[]),u.useEffect(()=>{(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(()=>{i(!0)}).catch(()=>{i(!1)})})()},[]);const x=async()=>{if(a)try{const p=localStorage.getItem("pending-transactions");if(p){const j=JSON.parse(p);localStorage.removeItem("pending-transactions"),o([]),t({title:"Sync Complete",description:`${j.length} transaction(s) synced successfully`})}}catch{t({title:"Sync Failed",description:"Some changes couldn't be synced. They'll be retried later.",variant:"destructive"})}},d=async()=>{if("serviceWorker"in navigator)try{await(await navigator.serviceWorker.ready).update(),t({title:"Cache Updated",description:"App has been updated with the latest version"})}catch{t({title:"Update Failed",description:"Couldn't update the app cache",variant:"destructive"})}},m=()=>{try{["pending-transactions","cached-data"].forEach(j=>localStorage.removeItem(j)),t({title:"Offline Data Cleared",description:"All cached data has been removed"})}catch{t({title:"Clear Failed",description:"Couldn't clear offline data",variant:"destructive"})}},g=async()=>{if("serviceWorker"in navigator)try{await navigator.serviceWorker.register("/sw.js"),i(!0),t({title:"Offline Mode Enabled",description:"The app is now available offline!"})}catch{t({title:"Offline Setup Failed",description:"Couldn't enable offline mode",variant:"destructive"})}else t({title:"Not Supported",description:"Offline mode isn't supported in this browser",variant:"destructive"})},y=p=>{if(p===0)return"0 B";const j=1024,v=["B","KB","MB","GB"],N=Math.floor(Math.log(p)/Math.log(j));return parseFloat((p/Math.pow(j,N)).toFixed(2))+" "+v[N]};return e.jsxs("div",{className:s,children:[!a&&e.jsxs(us,{className:"mb-4 border-warning",children:[e.jsx(Dl,{className:"h-4 w-4"}),e.jsx(ms,{children:"You're currently offline. The app will continue to work and sync your changes when you're back online."})]}),e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[a?e.jsx(gp,{className:"h-5 w-5 text-success"}):e.jsx(Dl,{className:"h-5 w-5 text-warning"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Offline Support"})]}),e.jsx(K,{variant:a?"default":"secondary",children:a?"Online":"Offline"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[r?e.jsx(Ee,{className:"h-5 w-5 text-success"}):e.jsx(Ba,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"App Cache"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:r?"Available offline":"Not cached"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[e.jsx(cr,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Pending Sync"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.length," items"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[e.jsx(Kg,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Storage Used"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:c?`${y(c.used)} / ${y(c.quota)}`:"Calculating..."})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-3",children:[!r&&e.jsxs(_,{onClick:g,className:"gap-2",children:[e.jsx(vt,{className:"h-4 w-4"}),"Enable Offline Mode"]}),r&&e.jsxs(_,{variant:"outline",onClick:d,className:"gap-2",children:[e.jsx(Ct,{className:"h-4 w-4"}),"Update App Cache"]}),e.jsxs(_,{variant:"outline",onClick:m,className:"gap-2",children:[e.jsx(cr,{className:"h-4 w-4"}),"Clear Offline Data"]})]}),e.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-3",children:"What works offline:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-3 w-3 text-success"}),e.jsx("span",{children:"View existing transactions"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-3 w-3 text-success"}),e.jsx("span",{children:"Add new transactions"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-3 w-3 text-success"}),e.jsx("span",{children:"View budgets and analytics"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-3 w-3 text-success"}),e.jsx("span",{children:"Search and filter data"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-3 w-3 text-success"}),e.jsx("span",{children:"Export data as CSV"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-3 w-3 text-success"}),e.jsx("span",{children:"Modify settings"})]})]})]}),c&&e.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Storage Details:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Used:"}),e.jsx("span",{children:y(c.used)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Available:"}),e.jsx("span",{children:y(c.quota-c.used)})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${c.used/c.quota*100}%`}})})]})]})]})]})]})]})},iS=()=>{const{monthlyStartingPoint:s,setMonthlyStartingPoint:t,dailyData:a,transactions:n,currency:r,clearAllData:i}=he(),{toast:l}=Ue(),[o,c]=u.useState(s.toString()),[h,x]=u.useState(!0),[d,m]=u.useState(!1),[g,y]=u.useState(""),[p,j]=u.useState("");u.useEffect(()=>{const w=localStorage.getItem("user-name")||"";y(w),j(w)},[]);const v=()=>{const w=p.trim();y(w),localStorage.setItem("user-name",w),window.dispatchEvent(new Event("user-name-updated")),l({title:"Name Updated",description:w?`Welcome, ${w}!`:"Name cleared successfully"})},N=()=>{const w=parseFloat(o);if(isNaN(w)){l({title:"Error",description:"Please enter a valid amount",variant:"destructive"});return}t(w),l({title:"Success",description:"Starting point updated successfully"})},f=()=>{const w={monthlyStartingPoint:s,dailyData:a,transactions:n,exportDate:new Date().toISOString()},R=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),b=URL.createObjectURL(R),k=document.createElement("a");k.href=b,k.download=`moneylens-financial-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(b),l({title:"Success",description:"Data exported successfully"})},S=async()=>{try{await i(),l({title:"Data Cleared",description:"All financial data has been cleared successfully."})}catch{l({title:"Error",description:"Failed to clear data. Please try again.",variant:"destructive"})}},D=()=>{c("755"),x(!0),m(!1),j(""),y(""),localStorage.removeItem("user-name"),l({title:"Settings Reset",description:"All settings have been reset to defaults"})};return e.jsxs("div",{className:"space-y-6 animate-fade-in max-w-4xl mx-auto px-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:g?`Settings - ${g}`:"Settings"}),e.jsx("p",{className:"text-muted-foreground",children:g?`Manage your account and application preferences, ${g}`:"Manage your account and application preferences"})]})}),e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(vn,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Account Settings"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"user-name",children:"Display Name"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ae,{id:"user-name",type:"text",placeholder:"Enter your name (optional)",value:p,onChange:w=>j(w.target.value),className:"flex-1",maxLength:50}),e.jsx(_,{onClick:v,disabled:p===g,size:"sm",children:g?"Update":"Save"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:g?`Currently set to: ${g}. This name will appear throughout the app.`:"Set a display name to personalize your experience."})]}),e.jsx(os,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"starting-balance",children:["Monthly Starting Balance (",r,")"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ae,{id:"starting-balance",type:"number",step:"0.01",value:o,onChange:w=>c(w.target.value),className:"flex-1"}),e.jsx(_,{onClick:N,size:"sm",children:"Update"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This will recalculate all your balances based on the new starting point."})]}),e.jsx(os,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{className:"text-sm font-medium",children:"Currency"}),e.jsx(aS,{}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Change the currency symbol used throughout the app."})]}),e.jsx(os,{}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-sm font-medium",children:"Total Transactions"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:n.length})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm font-medium",children:"Days Tracked"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:a.length})]})]})]})]}),e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ma,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Preferences"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-sm font-medium",children:"Enable Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications for daily summaries"})]}),e.jsx(ot,{checked:h,onCheckedChange:x})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-sm font-medium",children:"Auto Backup"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically backup data daily"})]}),e.jsx(ot,{checked:d,onCheckedChange:m})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-sm font-medium",children:"Theme"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Switch between light and dark themes"})]}),e.jsx(tS,{})]})]})]}),e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Lt,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Data Management"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(_,{variant:"outline",className:"gap-2 h-auto p-4 justify-start",onClick:f,children:[e.jsx(vt,{className:"h-4 w-4"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Export Data"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Download all your financial data"})]})]}),e.jsxs(_,{variant:"outline",className:"gap-2 h-auto p-4 justify-start",onClick:()=>window.location.href="/import-export",children:[e.jsx(js,{className:"h-4 w-4"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Import/Export Data"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Full data management and backup"})]})]}),e.jsxs(_,{variant:"outline",className:"gap-2 h-auto p-4 justify-start",onClick:D,children:[e.jsx(Ct,{className:"h-4 w-4"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Reset Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Restore all settings to default"})]})]}),e.jsxs(dt,{children:[e.jsx(Ft,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:"gap-2 h-auto p-4 justify-start border-destructive/50 text-destructive hover:bg-destructive/5",children:[e.jsx(ft,{className:"h-4 w-4"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Clear All Data"}),e.jsx("p",{className:"text-sm opacity-80",children:"Permanently delete all financial data"})]})]})}),e.jsxs(at,{children:[e.jsxs(nt,{children:[e.jsx(rt,{children:"Clear All Data"}),e.jsx(pr,{children:"This action cannot be undone. This will permanently delete all your financial data including transactions, balances, and settings."})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(_,{variant:"outline",children:"Cancel"}),e.jsx(_,{variant:"destructive",onClick:S,children:"Delete Everything"})]})]})]})]})]}),e.jsx(nS,{}),e.jsx(rS,{})]})},oS=()=>{const{transactions:s}=he(),{toast:t}=Ue(),[a,n]=u.useState({}),[r,i]=u.useState([]),[l,o]=u.useState(null),[c,h]=u.useState(""),[x,d]=u.useState({}),[m,g]=u.useState(!1),[y,p]=u.useState(!1),[j,v]=u.useState({name:"",budget:"",usePreset:!1});u.useEffect(()=>{N()},[]);const N=async()=>{try{const{data:E,error:V}=await ue.from("tags").select("*").order("name");if(V)throw V;if(i(E||[]),E&&E.length>0){const U={...a};let H=!1;E.forEach(Z=>{U[Z.name]||(U[Z.name]=500,H=!0)}),H&&n(U)}}catch(E){console.error("Error loading categories:",E)}};u.useEffect(()=>{d(a)},[a]);const f=E=>s.filter(V=>V.category===E).reduce((V,U)=>V+U.amount,0),S=E=>{const V=new Date,U=new Date(V.getTime()-7*24*60*60*1e3);return s.filter(Z=>Z.category===E&&new Date(Z.date)>=U).reduce((Z,ee)=>Z+ee.amount,0)},D=E=>S(E)*4.33,w=(E,V,U)=>{const H=D(E),Z=V/U*100;return H>U?{type:"warning",message:`Trending to overspend by £${(H-U).toFixed(2)} this month`}:Z<50?{type:"success",message:`On track to save £${(U-H).toFixed(2)} this month`}:null},R=Object.entries(x).map(([E,V])=>{const U=f(E),H=D(E),Z=U/V*100,ee=H/V*100,ge=V-U,le=w(E,U,V);let Oe="safe";return Z>=100?Oe="danger":(Z>=75||ee>=100)&&(Oe="warning"),{category:E,budget:V,spent:U,predicted:H,percentage:Math.min(Z,100),predictedPercentage:Math.min(ee,100),remaining:ge,status:Oe,recommendation:le}}),b=R.map(E=>({category:E.category,budget:E.budget,spent:E.spent,predicted:E.predicted,remaining:Math.max(0,E.budget-E.spent)})),k=Object.values(x).reduce((E,V)=>E+V,0),T=Object.keys(x).reduce((E,V)=>E+f(V),0),F=Object.keys(x).reduce((E,V)=>E+D(V),0),O=k-T,q=(E,V)=>{d(U=>({...U,[E]:V[0]}))},P=()=>{n(x),t({title:"Budgets Updated!",description:"Your new budget allocations have been saved"})},A=()=>{d(a)},$=async()=>{const E=j.name.trim(),V=parseFloat(j.budget);if(!E||isNaN(V)||V<=0){t({title:"Error",description:"Please select a category and enter a valid budget amount",variant:"destructive"});return}if(a.hasOwnProperty(E)){t({title:"Error",description:"This category already has a budget set",variant:"destructive"});return}n(U=>({...U,[E]:V})),v({name:"",budget:"",usePreset:!1}),p(!1),await N(),t({title:"Success",description:`Budget of £${V} set for ${E}`})},M=E=>{if(Object.keys(a).length<=1){t({title:"Error",description:"You must have at least one budget category",variant:"destructive"});return}const V={...a};delete V[E],n(V),t({title:"Success",description:`${E} budget removed`})},z=E=>{const V=parseFloat(c);if(isNaN(V)||V<=0){t({title:"Error",description:"Please enter a valid budget amount",variant:"destructive"});return}n(U=>({...U,[E]:V})),o(null),h(""),t({title:"Success",description:`${E} budget updated to £${V}`})},I=E=>{switch(E){case"danger":return"text-destructive";case"warning":return"text-warning";default:return"text-success"}},C=E=>{switch(E){case"danger":return Ze;case"warning":return Ze;default:return Ee}},B=({active:E,payload:V,label:U})=>E&&V&&V.length?e.jsxs("div",{className:"bg-card border border-border rounded-lg p-3 shadow-lg",children:[e.jsx("p",{className:"font-medium text-sm mb-2",children:U}),e.jsx("div",{className:"space-y-1 text-xs",children:V.map((H,Z)=>e.jsxs("p",{className:"flex justify-between text-foreground",children:[e.jsx("span",{children:H.dataKey==="spent"?"Spent:":H.dataKey==="predicted"?"Predicted:":H.dataKey==="budget"?"Budget:":"Remaining:"}),e.jsxs("span",{className:"font-medium ml-2",children:["£",H.value.toFixed(2)]})]},Z))})]}):null;return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Budget Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Track spending, adjust budgets, and get smart recommendations"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(dt,{open:y,onOpenChange:p,children:[e.jsx(Ft,{asChild:!0,children:e.jsxs(_,{className:"gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Add Category"]})}),e.jsxs(at,{className:"sm:max-w-[500px]",children:[e.jsx(nt,{children:e.jsx(rt,{children:"Add New Budget Category"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-sm font-medium mb-3 block",children:"Select from Your Categories"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(wn,{value:j.name,onCategorySelect:E=>v(V=>({...V,name:E})),showCreateNew:!0}),r.length===0&&e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"No categories found. Create some categories first using the + button above."})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Set Budget Amount"})})]}),e.jsx("div",{className:"space-y-4",children:j.name&&e.jsxs("div",{children:[e.jsxs(W,{htmlFor:"category-budget",children:['Monthly Budget for "',j.name,'" (£)']}),e.jsx(ae,{id:"category-budget",type:"number",step:"0.01",value:j.budget,onChange:E=>v(V=>({...V,budget:E.target.value})),placeholder:"0.00"})]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(_,{variant:"outline",onClick:()=>{p(!1),v({name:"",budget:"",usePreset:!1})},children:"Cancel"}),e.jsx(_,{onClick:$,disabled:!j.name||!j.budget,children:"Set Budget"})]})]})]})]}),e.jsxs(_,{variant:"outline",onClick:()=>g(!m),className:"gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),m?"Hide":"Show"," Smart Insights"]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsx(L,{className:"p-6 bg-gradient-to-r from-primary to-primary/80 text-primary-foreground hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-full",children:e.jsx(je,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Total Budget"}),e.jsxs("p",{className:"text-3xl font-bold",children:["£",k.toFixed(2)]})]})]})}),e.jsx(L,{className:"p-6 hover:shadow-lg transition-all duration-300 border-destructive/20",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-destructive/10 rounded-full",children:e.jsx(de,{className:"h-6 w-6 text-destructive"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Spent"}),e.jsxs("p",{className:"text-3xl font-bold text-destructive",children:["£",T.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(T/k*100).toFixed(1),"% of budget"]})]})]})}),e.jsx(L,{className:"p-6 hover:shadow-lg transition-all duration-300 border-warning/20",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-warning/10 rounded-full",children:e.jsx(Fe,{className:"h-6 w-6 text-warning"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Predicted Total"}),e.jsxs("p",{className:"text-3xl font-bold text-warning",children:["£",F.toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This month projection"})]})]})}),e.jsx(L,{className:"p-6 hover:shadow-lg transition-all duration-300 border-success/20",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-success/10 rounded-full",children:e.jsx(ht,{className:`h-6 w-6 ${O>=0?"text-success":"text-destructive"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Remaining"}),e.jsxs("p",{className:`text-3xl font-bold ${O>=0?"text-success":"text-destructive"}`,children:["£",Math.abs(O).toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:O>=0?"Under budget":"Over budget"})]})]})})]}),e.jsxs(L,{className:"p-6 hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Budget vs Actual Spending"}),e.jsx(K,{variant:"outline",className:"text-xs",children:"Monthly Overview"})]}),e.jsx("div",{className:"h-80",children:e.jsx(Tt,{width:"100%",height:"100%",children:e.jsxs(ua,{data:b,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(wt,{strokeDasharray:"3 3",className:"stroke-border/30"}),e.jsx(St,{dataKey:"category",className:"text-xs",tick:{fontSize:12}}),e.jsx(gt,{className:"text-xs",tick:{fontSize:12}}),e.jsx(st,{content:e.jsx(B,{})}),e.jsx(pt,{dataKey:"budget",fill:"hsl(var(--muted))",name:"Budget",radius:[2,2,0,0]}),e.jsx(pt,{dataKey:"spent",fill:"hsl(var(--destructive))",name:"Spent",radius:[2,2,0,0]}),e.jsx(pt,{dataKey:"predicted",fill:"hsl(var(--warning))",name:"Predicted",radius:[2,2,0,0],opacity:.7})]})})})]}),e.jsxs(L,{className:"p-6 hover:shadow-lg transition-all duration-300 border-primary/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Quick Budget Adjustments"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use sliders to adjust your budget allocations"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:A,children:"Reset"}),e.jsx(_,{size:"sm",onClick:P,children:"Apply Changes"})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:Object.entries(x).map(([E,V])=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(W,{className:"font-medium",children:E}),e.jsxs("span",{className:"text-lg font-bold text-primary",children:["£",V]})]}),e.jsx(ct,{value:[V],onValueChange:U=>q(E,U),max:1e3,min:50,step:25,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"£50"}),e.jsxs("span",{children:["Current: £",f(E).toFixed(0)]}),e.jsx("span",{children:"£1000"})]})]},E))})]}),e.jsx("div",{className:"grid gap-6 lg:grid-cols-2 xl:grid-cols-3",children:R.map(E=>{const V=C(E.status);return e.jsxs(L,{className:`p-6 hover:shadow-xl transition-all duration-300 hover:scale-[1.02] ${E.status==="danger"?"border-destructive/50 bg-destructive/5":E.status==="warning"?"border-warning/50 bg-warning/5":"border-border hover:border-primary/30"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl mb-1",children:E.category}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:`h-4 w-4 ${I(E.status)}`}),e.jsx("span",{className:`text-sm font-medium ${I(E.status)}`,children:E.status==="danger"?"Over Budget!":E.status==="warning"?"Approaching Limit":"On Track"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(dt,{children:[e.jsx(Ft,{asChild:!0,children:e.jsx(_,{variant:"ghost",size:"sm",className:"hover:bg-primary/10",onClick:()=>{o(E.category),h(E.budget.toString())},children:e.jsx(As,{className:"h-4 w-4"})})}),e.jsxs(at,{className:"sm:max-w-[425px]",children:[e.jsx(nt,{children:e.jsxs(rt,{children:["Update ",E.category," Budget"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"budget-amount",children:"Monthly Budget (£)"}),e.jsx(ae,{id:"budget-amount",type:"number",step:"0.01",value:c,onChange:U=>h(U.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{variant:"outline",onClick:()=>{o(null),h("")},children:"Cancel"}),e.jsx(_,{onClick:()=>z(E.category),children:"Update Budget"})]})]})]})]}),Object.keys(a).length>1&&e.jsx(_,{variant:"ghost",size:"sm",className:"hover:bg-destructive/10 text-destructive",onClick:()=>M(E.category),children:e.jsx(ft,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Spent"}),e.jsxs("p",{className:"text-lg font-bold text-destructive",children:["£",E.spent.toFixed(2)]})]}),e.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Budget"}),e.jsxs("p",{className:"text-lg font-bold",children:["£",E.budget.toFixed(2)]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Current Usage"}),e.jsxs("span",{className:`text-sm font-bold ${I(E.status)}`,children:[E.percentage.toFixed(0),"%"]})]}),e.jsx(Te,{value:E.percentage,className:`h-3 transition-all duration-700 ${E.status==="danger"?"[&>div]:bg-destructive":E.status==="warning"?"[&>div]:bg-warning":"[&>div]:bg-success"}`})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Predicted Usage"}),e.jsxs("span",{className:"text-sm font-bold text-warning",children:[E.predictedPercentage.toFixed(0),"%"]})]}),e.jsx(Te,{value:E.predictedPercentage,className:"h-2 opacity-60 [&>div]:bg-warning"})]})]}),e.jsxs("div",{className:`text-center p-3 rounded-lg border ${E.remaining>=0?"border-success/30 bg-success/5":"border-destructive/30 bg-destructive/5"}`,children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:E.remaining>=0?"Remaining":"Over Budget"}),e.jsxs("p",{className:`text-xl font-bold ${E.remaining>=0?"text-success":"text-destructive"}`,children:["£",Math.abs(E.remaining).toFixed(2)]})]}),m&&E.recommendation&&e.jsxs(us,{className:`${E.recommendation.type==="warning"?"border-warning bg-warning/5":"border-success bg-success/5"}`,children:[e.jsx(Be,{className:`h-4 w-4 ${E.recommendation.type==="warning"?"text-warning":"text-success"}`}),e.jsx(ms,{className:"text-sm font-medium",children:E.recommendation.message})]})]})]},E.category)})})]})},lS=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],hc=["Food","Transport","Housing","Utilities","Entertainment","Healthcare","Other"];function cS({onConfigUpdate:s,initialConfig:t}){const{transactions:a,goals:n,dailyData:r,monthlyStartingPoint:i,currency:l}=he(),[o,c]=u.useState("expenses"),[h,x]=u.useState([]),[d,m]=u.useState([]),[g,y]=u.useState(i),[p,j]=u.useState("daily"),[v,N]=u.useState(0),[f,S]=u.useState(0),[D,w]=u.useState({name:"",amount:0,frequency:"monthly",category:"Other"}),[R,b]=u.useState({name:"",goalAmount:0,currentAmount:0,frequency:"monthly",type:"savings",priority:"medium"});u.useEffect(()=>{const A=a.filter(M=>M.amount>0);if(A.length>0){const M=A.reduce((C,B)=>C+B.amount,0),z=new Set(A.map(C=>C.date)).size,I=M/Math.max(z,1);N(Math.round(I)),S(Math.round(I*7))}const $={};a.forEach(M=>{if(M.amount<0){const z=M.category||"Other";$[z]||($[z]={total:0,count:0,avg:0}),$[z].total+=Math.abs(M.amount),$[z].count+=1}}),Object.entries($).forEach(([M,z])=>{z.avg=z.total/z.count,z.count>=3&&x(I=>[...I,{id:`suggested_${M}`,name:`${M} Expense`,amount:Math.round(z.avg),frequency:"monthly",category:M,notes:`Based on ${z.count} transactions`}])}),n.forEach(M=>{m(z=>[...z,{id:M.id,name:M.title,goalAmount:M.targetAmount,currentAmount:M.currentAmount,frequency:"monthly",type:"savings",priority:M.targetAmount>1e3?"high":"medium"}])})},[a,n]),u.useEffect(()=>{s({expenses:h,pots:d,startingBalance:g,incomeFrequency:p,averageDailyIncome:v,weeklyIncome:p==="weekly"?f:void 0})},[h,d,g,p,v,f]);const k=()=>{if(!D.name||!D.amount)return;const A={id:`exp_${Date.now()}`,name:D.name,amount:Number(D.amount),frequency:D.frequency||"monthly",dayOfWeek:D.dayOfWeek,dayOfMonth:D.dayOfMonth,category:D.category||"Other",notes:D.notes};x($=>[...$,A]),w({name:"",amount:0,frequency:"monthly",category:"Other"})},T=A=>{x($=>$.filter(M=>M.id!==A))},F=(A,$)=>{x(M=>M.map(z=>z.id===A?{...z,...$}:z))},O=()=>{if(!R.name||!R.goalAmount)return;const A={id:`pot_${Date.now()}`,name:R.name,goalAmount:Number(R.goalAmount),currentAmount:Number(R.currentAmount||0),frequency:R.frequency||"monthly",type:R.type||"savings",priority:R.priority||"medium"};m($=>[...$,A]),b({name:"",goalAmount:0,currentAmount:0,frequency:"monthly",type:"savings",priority:"medium"})},q=A=>{m($=>$.filter(M=>M.id!==A))},P=(A,$)=>{m(M=>M.map(z=>z.id===A?{...z,...$}:z))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex border-b",children:[e.jsx(_,{variant:o==="expenses"?"default":"ghost",onClick:()=>c("expenses"),className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary",children:"Expenses"}),e.jsx(_,{variant:o==="pots"?"default":"ghost",onClick:()=>c("pots"),className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary",children:"Pots & Goals"}),e.jsx(_,{variant:o==="income"?"default":"ghost",onClick:()=>c("income"),className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary",children:"Income"}),e.jsx(_,{variant:o==="rules"?"default":"ghost",onClick:()=>c("rules"),className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary",children:"Rules"})]}),o==="expenses"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(L,{children:e.jsxs(Q,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Add New Expense"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{children:"Expense Name"}),e.jsx(ae,{value:D.name||"",onChange:A=>w($=>({...$,name:A.target.value})),placeholder:"e.g., Rent, Groceries"})]}),e.jsxs("div",{children:[e.jsxs(W,{children:["Amount (",l,")"]}),e.jsx(ae,{type:"number",value:D.amount||0,onChange:A=>w($=>({...$,amount:Number(A.target.value)}))})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Frequency"}),e.jsxs(Re,{value:D.frequency,onValueChange:A=>w($=>({...$,frequency:A})),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"daily",children:"Daily"}),e.jsx(J,{value:"weekly",children:"Weekly"}),e.jsx(J,{value:"biweekly",children:"Bi-weekly"}),e.jsx(J,{value:"monthly",children:"Monthly"}),e.jsx(J,{value:"one-time",children:"One-time"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Category"}),e.jsxs(Re,{value:D.category,onValueChange:A=>w($=>({...$,category:A})),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsx(Pe,{children:hc.map(A=>e.jsx(J,{value:A,children:A},A))})]})]})]}),(D.frequency==="weekly"||D.frequency==="biweekly")&&e.jsxs("div",{className:"mt-4",children:[e.jsx(W,{children:"Day of Week"}),e.jsxs(Re,{value:D.dayOfWeek||"",onValueChange:A=>w($=>({...$,dayOfWeek:A})),children:[e.jsx(Me,{children:e.jsx(Ie,{placeholder:"Select day"})}),e.jsx(Pe,{children:lS.map(A=>e.jsx(J,{value:A,children:A},A))})]})]}),(D.frequency==="monthly"||D.frequency==="one-time")&&e.jsxs("div",{className:"mt-4",children:[e.jsx(W,{children:"Day of Month (1-31)"}),e.jsx(ae,{type:"number",min:"1",max:"31",value:D.dayOfMonth||"",onChange:A=>w($=>({...$,dayOfMonth:Number(A.target.value)})),placeholder:"e.g., 15"})]}),e.jsxs(_,{onClick:k,className:"mt-4",disabled:!D.name||!D.amount,children:[e.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Add Expense"]})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold mb-4",children:["Configured Expenses (",h.length,")"]}),e.jsxs("div",{className:"space-y-3",children:[h.map(A=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:A.name}),e.jsx(K,{variant:"outline",children:A.category}),e.jsx(K,{variant:"secondary",children:A.frequency})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[l," ",A.amount," • ",A.notes]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>F(A.id,{amount:A.amount+10}),children:"+10"}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>F(A.id,{amount:Math.max(0,A.amount-10)}),children:"-10"}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>T(A.id),children:e.jsx(ft,{className:"w-4 h-4"})})]})]},A.id)),h.length===0&&e.jsx("div",{className:"text-center text-gray-500 py-8",children:"No expenses configured. Add some expenses to start planning."})]})]})})]}),o==="pots"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(L,{children:e.jsxs(Q,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Add New Pot/Goal"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{children:"Pot Name"}),e.jsx(ae,{value:R.name||"",onChange:A=>b($=>({...$,name:A.target.value})),placeholder:"e.g., Emergency Fund, Vacation"})]}),e.jsxs("div",{children:[e.jsxs(W,{children:["Goal Amount (",l,")"]}),e.jsx(ae,{type:"number",value:R.goalAmount||0,onChange:A=>b($=>({...$,goalAmount:Number(A.target.value)}))})]}),e.jsxs("div",{children:[e.jsxs(W,{children:["Current Amount (",l,")"]}),e.jsx(ae,{type:"number",value:R.currentAmount||0,onChange:A=>b($=>({...$,currentAmount:Number(A.target.value)}))})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Type"}),e.jsxs(Re,{value:R.type,onValueChange:A=>b($=>({...$,type:A})),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"essential",children:"Essential"}),e.jsx(J,{value:"savings",children:"Savings"}),e.jsx(J,{value:"buffer",children:"Buffer"}),e.jsx(J,{value:"next-month",children:"Next Month"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Frequency"}),e.jsxs(Re,{value:R.frequency,onValueChange:A=>b($=>({...$,frequency:A})),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"weekly",children:"Weekly"}),e.jsx(J,{value:"monthly",children:"Monthly"}),e.jsx(J,{value:"flexible",children:"Flexible"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Priority"}),e.jsxs(Re,{value:R.priority,onValueChange:A=>b($=>({...$,priority:A})),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"high",children:"High"}),e.jsx(J,{value:"medium",children:"Medium"}),e.jsx(J,{value:"low",children:"Low"})]})]})]})]}),e.jsxs(_,{onClick:O,className:"mt-4",disabled:!R.name||!R.goalAmount,children:[e.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Add Pot"]})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold mb-4",children:["Configured Pots & Goals (",d.length,")"]}),e.jsxs("div",{className:"space-y-3",children:[d.map(A=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:A.name}),e.jsx(K,{variant:"outline",children:A.type}),e.jsx(K,{variant:"secondary",children:A.frequency}),e.jsx(K,{variant:A.priority==="high"?"destructive":A.priority==="medium"?"default":"outline",children:A.priority})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[l," ",A.currentAmount," / ",A.goalAmount," • ",Math.round(A.currentAmount/A.goalAmount*100),"% complete"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:"h-2 rounded-full bg-green-500 transition-all",style:{width:`${Math.min(100,A.currentAmount/A.goalAmount*100)}%`}})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>P(A.id,{currentAmount:A.currentAmount+50}),children:"+50"}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>P(A.id,{currentAmount:Math.max(0,A.currentAmount-50)}),children:"-50"}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>q(A.id),children:e.jsx(ft,{className:"w-4 h-4"})})]})]},A.id)),d.length===0&&e.jsx("div",{className:"text-center text-gray-500 py-8",children:"No pots configured. Add some pots or goals to start planning."})]})]})})]}),o==="income"&&e.jsx("div",{className:"space-y-4",children:e.jsx(L,{children:e.jsxs(Q,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Income Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs(W,{children:["Starting Balance (",l,")"]}),e.jsx(ae,{type:"number",value:g,onChange:A=>y(Number(A.target.value))}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Based on your current monthly starting point: ",l," ",i]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Income Frequency"}),e.jsxs(Re,{value:p,onValueChange:A=>j(A),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"daily",children:"Daily"}),e.jsx(J,{value:"weekly",children:"Weekly"}),e.jsx(J,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{children:[e.jsxs(W,{children:["Average Daily Income (",l,")"]}),e.jsx(ae,{type:"number",value:v,onChange:A=>N(Number(A.target.value))}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Calculated from your transaction history"})]}),p==="weekly"&&e.jsxs("div",{children:[e.jsxs(W,{children:["Weekly Income (",l,")"]}),e.jsx(ae,{type:"number",value:f,onChange:A=>S(Number(A.target.value))})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900",children:"Income Summary"}),e.jsxs("div",{className:"text-sm text-blue-700 mt-1",children:[e.jsxs("p",{children:["Daily: ",l," ",v]}),e.jsxs("p",{children:["Weekly: ",l," ",p==="weekly"?f:v*7]}),e.jsxs("p",{children:["Monthly: ",l," ",Math.round(v*30)]})]})]})]})})}),o==="rules"&&e.jsx("div",{className:"space-y-4",children:e.jsx(L,{children:e.jsxs(Q,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Planning Rules"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Essential Expense Priority Order"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Expenses will be paid in this order when funds are limited"}),e.jsx("div",{className:"mt-2 space-y-2",children:hc.map((A,$)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{variant:"outline",children:$+1}),e.jsx("span",{children:A})]},A))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Weekly Allocation Strategy"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Weeks 1-2:"}),e.jsx(K,{variant:"outline",children:"Next Month Pot"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Weeks 3-5:"}),e.jsx(K,{variant:"outline",children:"Buffer"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Pot Contribution Rules"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Essential pots are funded first with daily contributions"}),e.jsx("li",{children:"Weekly pots are funded on Mondays"}),e.jsx("li",{children:"Leftover funds are allocated based on weekly strategy"}),e.jsx("li",{children:"Buffer pot has flexible funding (no specific goal)"})]})]})]})]})})})]})}function dS({onConfigurationComplete:s}){const{currency:t}=he(),a=u.useRef(null),[n,r]=u.useState(!1),[i,l]=u.useState(null),[o,c]=u.useState(""),[h,x]=u.useState(0),d=p=>{const j=p.split(`
`).filter(f=>f.trim());if(j.length<2)return[];const v=j[0].split(",").map(f=>f.trim().toLowerCase()),N=[];for(let f=1;f<j.length;f++){const S=j[f].split(",").map(w=>w.trim());if(S.length<4)continue;const D={date:S[v.indexOf("date")]||"",description:S[v.indexOf("description")]||S[v.indexOf("name")]||"",amount:Math.abs(parseFloat(S[v.indexOf("amount")]||"0")),category:S[v.indexOf("category")]||"Other",type:parseFloat(S[v.indexOf("amount")]||"0")>0?"income":"expense"};D.date&&!isNaN(D.amount)&&D.amount>0&&N.push(D)}return N},m=p=>{x(10),p.sort((F,O)=>new Date(F.date).getTime()-new Date(O.date).getTime()),x(30);const j=p.map(F=>new Date(F.date)),v={start:j[0].toISOString().split("T")[0],end:j[j.length-1].toISOString().split("T")[0]};x(50);const N=p.filter(F=>F.type==="income"),f=p.filter(F=>F.type==="expense"),S=N.reduce((F,O)=>F+O.amount,0),D=f.reduce((F,O)=>F+O.amount,0),w=new Set(N.map(F=>F.date)).size,R=S/Math.max(w,1);x(70);const b={};f.forEach(F=>{b[F.category]||(b[F.category]={total:0,count:0,avg:0}),b[F.category].total+=F.amount,b[F.category].count+=1}),Object.keys(b).forEach(F=>{b[F].avg=b[F].total/b[F].count}),x(80);const k=[];Object.entries(b).forEach(([F,O])=>{if(O.count>=3){let q="monthly";O.count>20?q="daily":O.count>8&&(q="weekly"),k.push({name:`${F} Expense`,amount:Math.round(O.avg),frequency:q,category:F,occurrences:O.count})}}),x(90);const T=[{name:"Emergency Fund",goalAmount:Math.round(R*30),type:"savings",priority:"high"},{name:"Next Month Buffer",goalAmount:Math.round(R*15),type:"next-month",priority:"high"},{name:"Flexible Buffer",goalAmount:Math.round(R*7),type:"buffer",priority:"medium"}];return k.filter(F=>F.amount>R*3).forEach(F=>{T.push({name:`${F.name} Pot`,goalAmount:F.amount,type:"essential",priority:"high"})}),x(100),{totalRows:p.length,dateRange:v,totalIncome:S,totalExpenses:D,averageDailyIncome:Math.round(R),recurringExpenses:k,categories:b,suggestedPots:T}},g=p=>{var N;const j=(N=p.target.files)==null?void 0:N[0];if(!j)return;c(j.name),r(!0),x(0);const v=new FileReader;v.onload=f=>{var S;try{const D=(S=f.target)==null?void 0:S.result,w=d(D);if(w.length===0)throw new Error("No valid data found in CSV");const R=m(w);l(R);const b={expenses:R.recurringExpenses.map((k,T)=>({id:`csv_exp_${T}`,name:k.name,amount:k.amount,frequency:k.frequency,category:k.category,notes:`Based on ${k.occurrences} occurrences in CSV`})),pots:R.suggestedPots.map((k,T)=>({id:`csv_pot_${T}`,name:k.name,goalAmount:k.goalAmount,currentAmount:0,frequency:"monthly",type:k.type,priority:k.priority})),startingBalance:Math.round(R.averageDailyIncome*7),incomeFrequency:"daily",averageDailyIncome:R.averageDailyIncome,weeklyIncome:Math.round(R.averageDailyIncome*7)};s(b)}catch(D){console.error("Error processing CSV:",D),alert("Error processing CSV file. Please check the format.")}finally{r(!1)}},v.readAsText(j)},y=()=>{var p;(p=a.current)==null||p.click()};return e.jsx(L,{children:e.jsxs(Q,{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(js,{className:"w-12 h-12 mx-auto mb-4 text-blue-500"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"CSV Configuration Import"}),e.jsx("p",{className:"text-gray-600",children:"Upload a CSV file with your financial transactions to automatically configure the Financial Hub"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx("input",{ref:a,type:"file",accept:".csv",onChange:g,className:"hidden"}),!o&&!n&&e.jsxs("div",{children:[e.jsx(Ts,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Supported format: Date, Description, Amount, Category"}),e.jsx(_,{onClick:y,children:"Choose CSV File"})]}),o&&e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ts,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"font-medium",children:o})]}),n&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(Te,{value:h,className:"w-full"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Analyzing data... ",h,"%"]})]})]}),i&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.totalRows}),e.jsx("div",{className:"text-sm text-blue-800",children:"Transactions"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[t," ",i.totalIncome]}),e.jsx("div",{className:"text-sm text-green-800",children:"Total Income"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[t," ",i.totalExpenses]}),e.jsx("div",{className:"text-sm text-red-800",children:"Total Expenses"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[t," ",i.averageDailyIncome]}),e.jsx("div",{className:"text-sm text-purple-800",children:"Avg Daily"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4"}),"Recurring Expenses Found"]}),e.jsx("div",{className:"space-y-2",children:i.recurringExpenses.map((p,j)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:p.name}),e.jsxs(K,{variant:"outline",children:[t," ",p.amount," (",p.frequency,")"]})]},j))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Suggested Pots"]}),e.jsx("div",{className:"space-y-2",children:i.suggestedPots.map((p,j)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:p.name}),e.jsxs(K,{variant:"secondary",children:[t," ",p.goalAmount]})]},j))})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(Ee,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Configuration generated successfully!"})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Ba,{className:"w-4 h-4 text-yellow-600"}),"CSV Format Requirements"]}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Include columns: Date, Description, Amount, Category"}),e.jsx("li",{children:"Date format: YYYY-MM-DD or DD/MM/YYYY"}),e.jsx("li",{children:"Amount: Positive for income, negative for expenses"}),e.jsx("li",{children:"Category: Any descriptive category name"}),e.jsx("li",{children:"Minimum 30 days of data recommended for accurate analysis"})]})]})]})]})})}const hs=(s="id")=>`${s}_${Math.random().toString(36).slice(2,9)}`,ar=s=>ce(s,"yyyy-MM-dd"),uS=s=>{const t=mt(s),a=Ja(t),n=Gt(s,a);return Math.floor(n/7)+1},mS=(s,t)=>{let a=Ks(s);for(let n=0;n<14;n++){if(ce(a,"EEEE")===t)return a;a=qe(a,1)}return s},hS=(s,t,a)=>{if(s.frequency==="daily")return!0;if(s.frequency==="one-time")return s.dayOfMonth?t.getDate()===s.dayOfMonth:!1;if(s.frequency==="weekly")return s.dayOfWeek?ce(t,"EEEE")===s.dayOfWeek:!1;if(s.frequency==="biweekly"){if(!s.dayOfWeek||ce(t,"EEEE")!==s.dayOfWeek)return!1;const n=mS(a,s.dayOfWeek);return Gt(Ks(t),Ks(n))%14===0}return s.frequency==="monthly"&&s.dayOfMonth?t.getDate()===s.dayOfMonth:!1};function xS(s,t){const a={};let n=s.startingBalance;const r=Ks(t),i=new Map(s.pots.map(l=>[l.id,l.currentAmount]));for(let l=0;l<12;l++){const o=mt(Ot(r,l)),c=Ys(o),h=ce(o,"MMMM yyyy"),x=[],d=hg(o);s.pots.forEach(y=>{y.frequency==="monthly"&&i.set(y.id,0)});const m=new Map;s.pots.forEach(y=>{y.frequency==="monthly"&&m.set(y.id,y.goalAmount/d)});let g={income:0,expenses:0,pots:0,days:[],weekNumber:1};for(let y=o;y<=c;y=qe(y,1)){const p=uS(y),j=xg(y),v=gg(y)||y.getTime()===c.getTime();let N=0;s.incomeFrequency==="daily"?N=s.averageDailyIncome:s.incomeFrequency==="weekly"?N=(s.weeklyIncome||0)/7:s.incomeFrequency==="monthly"&&(N=(s.weeklyIncome||0)/30),n+=N;const f=s.expenses.filter(b=>hS(b,y,r)).sort((b,k)=>{const T=s.rules.essentialOrder.indexOf(b.category),F=s.rules.essentialOrder.indexOf(k.category);return T-F}).map(b=>({id:b.id,name:b.name,amount:b.amount,category:b.category}));f.forEach(b=>{n-=b.amount});const S=[];s.pots.filter(b=>b.type==="essential").forEach(b=>{if(b.frequency==="monthly"){const k=m.get(b.id)||0;if(k>0){const T=i.get(b.id)||0,F=b.goalAmount-T,O=Math.min(k,F,n);O>0&&(n-=O,i.set(b.id,T+O),S.push({id:b.id,name:b.name,contribution:O,type:b.type}))}}}),j&&s.pots.filter(b=>b.frequency==="weekly").forEach(b=>{const k=b.goalAmount/4;k>0&&n>=k&&(n-=k,S.push({id:b.id,name:b.name,contribution:k,type:b.type}))});const D=n<s.rules.thresholds.danger?"danger":n<s.rules.thresholds.warning?"warning":"good",w=[];n<s.rules.thresholds.danger?w.push("⚠️ Balance negative - adjust pots or expenses"):p<=2?w.push("💰 Leftovers go to Next-Month Pot"):w.push("💰 Leftovers go to Buffer");const R={date:ar(y),income:Number(N.toFixed(2)),expenses:f,pots:S,balanceAfter:Number(n.toFixed(2)),weekNumber:p,dayStatus:D,recommendations:w};if(g.income+=R.income,g.expenses+=R.expenses.reduce((b,k)=>b+k.amount,0),g.pots+=R.pots.reduce((b,k)=>b+k.contribution,0),g.days.push(R),v){const b=g.income-g.expenses-g.pots;if(b>0){let k;if(p<=2?k=s.pots.find(T=>T.type==="next-month"):k=s.pots.find(T=>T.type==="buffer"),k&&g.days.length>0){const T=g.days[g.days.length-1];T.pots.push({id:k.id,name:k.name,contribution:b,type:k.type}),n-=b,T.balanceAfter=Number((T.balanceAfter-b).toFixed(2))}}g={income:0,expenses:0,pots:0,days:[],weekNumber:p}}x.push(R)}a[h]=x}return a}const gS=(s,t)=>{var r,i;const a=[];return pg({start:_e(((r=s[0])==null?void 0:r.date)||new Date().toISOString()),end:_e(((i=s[s.length-1])==null?void 0:i.date)||new Date().toISOString())}).forEach((l,o)=>{const c=_r(l),h=s.filter(f=>{const S=_e(f.date);return S>=l&&S<=c});if(h.length===0)return;const x=h.reduce((f,S)=>f+S.income,0),d=h.reduce((f,S)=>f+S.expenses.reduce((D,w)=>D+w.amount,0),0),m=h.reduce((f,S)=>f+S.pots.reduce((D,w)=>D+w.contribution,0),0),g=x-d-m,y=h[h.length-1].balanceAfter,p=o+1;let j={pot:"Buffer",amount:g};p<=2&&(j={pot:"Next-Month Pot",amount:g});const v=[];v.push("1. Cover petrol daily (£20/day)"),v.push("2. Cover food on Monday (£50)"),(p===1||p===3)&&v.push("3. Contribute to Car Rent pot (£120)"),(p===2||p===4)&&v.push("3. Pay Car Rent from pot (£240)"),v.push("4. Contribute to Bills pot (£250/week)"),v.push("5. Contribute to Savings pot (£200/week)"),v.push(`6. Leftovers → ${j.pot}`);const N=y<t.rules.thresholds.danger?"behind":y>t.rules.thresholds.warning+100?"ahead":"on-track";a.push({weekLabel:`Week ${p} (${ce(l,"MMM dd")} - ${ce(c,"MMM dd")})`,weekNumber:p,income:x,expenses:d,pots:m,endBalance:y,leftover:g,leftoverAllocation:j,actions:v,status:N})}),a},pS=(s,t)=>{let a=`Date,Week,Income,Expenses,Pot Contributions,Balance,Status,Recommendations
`;Object.entries(s).forEach(([l,o])=>{o.forEach(c=>{const h=c.expenses.map(m=>`${m.name}:£${m.amount}`).join(";"),x=c.pots.map(m=>`${m.name}:£${m.contribution}`).join(";"),d=c.recommendations.join(";");a+=`"${c.date}",Week ${c.weekNumber},£${c.income},"${h}","${x}",£${c.balanceAfter},${c.dayStatus},"${d}"
`})});const n=new Blob([a],{type:"text/csv"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="moneyLens-plan.csv",i.click(),URL.revokeObjectURL(r)},xc={petrol:"#FF6B6B",food:"#4ECDC4",rent:"#45B7D1",bills:"#96CEB4",cleaning:"#FFEAA7",other:"#DDA0DD"},fS={essential:"#4ECDC4",savings:"#45B7D1",buffer:"#96CEB4","next-month":"#FFEAA7"};function vS(){var b,k,T,F,O,q;const[s,t]=u.useState(()=>({currency:"GBP",startingBalance:340,averageDailyIncome:180,weeklyIncome:1200,incomeFrequency:"daily",payDays:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],expenses:[{id:hs("exp"),name:"Petrol",amount:20,frequency:"daily",category:"petrol"},{id:hs("exp"),name:"Food",amount:50,frequency:"weekly",dayOfWeek:"Monday",category:"food"},{id:hs("exp"),name:"Car Rent",amount:240,frequency:"biweekly",dayOfWeek:"Friday",category:"rent"},{id:hs("exp"),name:"Bills",amount:990,frequency:"monthly",dayOfMonth:28,category:"bills"},{id:hs("exp"),name:"Cleaning",amount:15,frequency:"biweekly",dayOfWeek:"Saturday",category:"cleaning"}],pots:[{id:hs("pot"),name:"Savings Pot",goalAmount:800,currentAmount:0,frequency:"monthly",priority:"high",type:"savings"},{id:hs("pot"),name:"Next-Month Pot",goalAmount:700,currentAmount:0,frequency:"flexible",priority:"high",type:"next-month"},{id:hs("pot"),name:"Buffer",goalAmount:0,currentAmount:0,frequency:"flexible",priority:"low",type:"buffer"},{id:hs("pot"),name:"Bills Pot",goalAmount:990,currentAmount:0,frequency:"monthly",priority:"high",type:"essential"},{id:hs("pot"),name:"Car Rent Pot",goalAmount:480,currentAmount:0,frequency:"monthly",priority:"high",type:"essential"}],rules:{leftoverStrategy:"buffer",weeklyAllocation:{weeks1_2:"next-month-pot",weeks3_5:"buffer"},essentialOrder:["petrol","food","rent","bills","cleaning","other"],thresholds:{warning:100,danger:0}}})),[a,n]=u.useState(ar(new Date)),[r,i]=u.useState({}),[l,o]=u.useState(null),[c,h]=u.useState(null),[x,d]=u.useState("config"),[m,g]=u.useState([]);u.useState(null);const[y,p]=u.useState(null),j=s.currency;u.useEffect(()=>{const P=_e(a),A=xS(s,P);i(A);const $=Object.keys(A);o($[0]||null)},[s,a]);const v=u.useMemo(()=>Object.keys(r),[r]),N=u.useMemo(()=>l?gS(r[l]||[],s):[],[l,r,s]),f=u.useMemo(()=>{var P;return l?((P=r[l])==null?void 0:P.map(A=>({date:A.date.split("-")[2],income:A.income,expenses:A.expenses.reduce(($,M)=>$+M.amount,0),pots:A.pots.reduce(($,M)=>$+M.contribution,0),balance:A.balanceAfter})))||[]:[]},[l,r]),S=u.useMemo(()=>{var A;if(!l)return[];const P={};return(A=r[l])==null||A.forEach($=>{$.expenses.forEach(M=>{P[M.category]=(P[M.category]||0)+M.amount})}),Object.entries(P).map(([$,M])=>({name:$,value:M}))},[l,r]),D=u.useMemo(()=>{var P;return!l||m.length===0?r[l]||[]:((P=r[l])==null?void 0:P.filter(A=>A.expenses.some($=>m.includes($.category))))||[]},[l,r,m]),w=(P,A)=>{t($=>({...$,rules:{...$.rules,thresholds:{warning:P,danger:A}}}))},R=u.useMemo(()=>{var A;if(!l)return[];const P=new Date;return((A=r[l])==null?void 0:A.filter($=>{const M=_e($.date),z=Gt(M,P);return z>=0&&z<=3}).map($=>({date:$.date,message:`${$.expenses.length} expenses due`,type:$.balanceAfter<s.rules.thresholds.warning?"warning":"info"})))||[]},[l,r,s.rules.thresholds.warning]);return e.jsxs("div",{className:"p-6 space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Financial Hub"}),e.jsx("p",{className:"text-gray-600",children:"Your complete financial roadmap"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Plan Start:"}),e.jsx("input",{type:"date",value:a,onChange:P=>n(P.target.value),className:"border rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:x==="config"?"default":"outline",onClick:()=>d("config"),children:"Configuration"}),e.jsx(_,{variant:x==="csv-import"?"default":"outline",onClick:()=>d("csv-import"),children:"CSV Import"}),e.jsx(_,{variant:x==="weekly"?"default":"outline",onClick:()=>d("weekly"),children:"Weekly View"}),e.jsx(_,{variant:x==="calendar"?"default":"outline",onClick:()=>d("calendar"),children:"Calendar View"}),e.jsx(_,{variant:x==="transition"?"default":"outline",onClick:()=>d("transition"),children:"Transition Plan"})]}),e.jsx(_,{onClick:()=>pS(r),children:"Export CSV"})]})]}),x==="config"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(L,{children:e.jsxs(Q,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Financial Planning Configuration"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Configure your expenses, income, and savings goals. The system will automatically analyze your existing financial data and suggest realistic values based on your transaction history."}),e.jsx(cS,{onConfigUpdate:P=>{p(P);const A={currency:"GBP",startingBalance:P.startingBalance,averageDailyIncome:P.averageDailyIncome,weeklyIncome:P.weeklyIncome,incomeFrequency:P.incomeFrequency,payDays:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],expenses:P.expenses.map($=>({id:$.id,name:$.name,amount:$.amount,frequency:$.frequency,dayOfWeek:$.dayOfWeek,dayOfMonth:$.dayOfMonth,category:$.category,notes:$.notes})),pots:P.pots.map($=>({id:$.id,name:$.name,goalAmount:$.goalAmount,currentAmount:$.currentAmount,frequency:$.frequency,priority:$.priority,type:$.type})),rules:{leftoverStrategy:"buffer",weeklyAllocation:{weeks1_2:"next-month-pot",weeks3_5:"buffer"},essentialOrder:["Food","Transport","Housing","Utilities","Entertainment","Healthcare","Other"],thresholds:{warning:100,danger:0}}};t(A)}})]})}),y&&e.jsx(L,{children:e.jsxs(Q,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Configuration Summary"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Expenses:"})," ",((b=y.expenses)==null?void 0:b.length)||0]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Pots:"})," ",((k=y.pots)==null?void 0:k.length)||0]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Daily Income:"})," ",s.currency," ",y.averageDailyIncome]})]}),e.jsx(_,{onClick:()=>d("weekly"),className:"mt-4",disabled:!((T=y.expenses)!=null&&T.length)||!((F=y.pots)!=null&&F.length),children:"Generate Plan"})]})})]}),x==="csv-import"&&e.jsx("div",{className:"space-y-6",children:e.jsx(L,{children:e.jsxs(Q,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"CSV Configuration Import"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Upload a CSV file with your financial transactions to automatically configure the entire Financial Hub. The system will analyze your data and create a complete financial plan for the next 12 months."}),e.jsx(dS,{onConfigurationComplete:P=>{p(P);const A={currency:"GBP",startingBalance:P.startingBalance,averageDailyIncome:P.averageDailyIncome,weeklyIncome:P.weeklyIncome,incomeFrequency:P.incomeFrequency,payDays:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],expenses:P.expenses.map($=>({id:$.id,name:$.name,amount:$.amount,frequency:$.frequency,dayOfWeek:$.dayOfWeek,dayOfMonth:$.dayOfMonth,category:$.category,notes:$.notes})),pots:P.pots.map($=>({id:$.id,name:$.name,goalAmount:$.goalAmount,currentAmount:$.currentAmount,frequency:$.frequency,priority:$.priority,type:$.type})),rules:{leftoverStrategy:"buffer",weeklyAllocation:{weeks1_2:"next-month-pot",weeks3_5:"buffer"},essentialOrder:["Food","Transport","Housing","Utilities","Entertainment","Healthcare","Other"],thresholds:{warning:100,danger:0}}};t(A),d("weekly")}})]})})}),R.length>0&&x!=="config"&&e.jsx(L,{className:"border-l-4 border-l-yellow-500",children:e.jsxs(Q,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Upcoming Alerts"}),e.jsx("div",{className:"space-y-2",children:R.map((P,A)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${P.type==="warning"?"bg-yellow-500":"bg-blue-500"}`}),e.jsxs("span",{children:[ce(_e(P.date),"EEE, MMM dd"),":"]}),e.jsx("span",{children:P.message})]},A))})]})}),x==="weekly"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:N.map(P=>e.jsx(L,{className:`border-l-4 ${P.status==="on-track"?"border-l-green-500":P.status==="ahead"?"border-l-blue-500":"border-l-red-500"}`,children:e.jsxs(Q,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"font-semibold",children:P.weekLabel}),e.jsx(K,{variant:P.status==="on-track"?"default":P.status==="ahead"?"secondary":"destructive",children:P.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{children:["Income: ",e.jsxs("span",{className:"font-semibold",children:["£",P.income]})]}),e.jsxs("p",{children:["Expenses: ",e.jsxs("span",{className:"font-semibold",children:["£",P.expenses]})]}),e.jsxs("p",{children:["Pots: ",e.jsxs("span",{className:"font-semibold",children:["£",P.pots]})]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:["Leftover: ",e.jsxs("span",{className:"font-semibold",children:["£",P.leftover]})]}),e.jsxs("p",{children:["End Balance: ",e.jsxs("span",{className:"font-semibold",children:["£",P.endBalance]})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["→ ",P.leftoverAllocation.pot]})]})]}),e.jsx("div",{className:"mt-3 space-y-1",children:P.actions.map((A,$)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full"}),A]},$))})]})},P.weekLabel))}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx(L,{children:e.jsxs(Q,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Monthly Cash Flow"}),e.jsx(Tt,{width:"100%",height:300,children:e.jsxs(rr,{data:f,children:[e.jsx(wt,{strokeDasharray:"3 3"}),e.jsx(St,{dataKey:"date"}),e.jsx(gt,{}),e.jsx(st,{}),e.jsx(dn,{}),e.jsx(is,{type:"monotone",dataKey:"income",stroke:"#4ECDC4",strokeWidth:2}),e.jsx(is,{type:"monotone",dataKey:"expenses",stroke:"#FF6B6B",strokeWidth:2}),e.jsx(is,{type:"monotone",dataKey:"pots",stroke:"#45B7D1",strokeWidth:2})]})})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Expense Categories"}),e.jsx(Tt,{width:"100%",height:300,children:e.jsxs(Ir,{children:[e.jsx(Or,{data:S,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:P,percent:A})=>`${P} ${(A*100).toFixed(0)}%`,children:S.map((P,A)=>e.jsx(Fr,{fill:xc[P.name]},`cell-${A}`))}),e.jsx(st,{})]})})]})})]})]}),x==="calendar"&&l&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(L,{children:e.jsxs(Q,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Filter by Category"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.keys(xc).map(P=>e.jsx(K,{variant:m.includes(P)?"default":"outline",className:"cursor-pointer",onClick:()=>{g(A=>A.includes(P)?A.filter($=>$!==P):[...A,P])},children:P},P))})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:l}),e.jsx("div",{className:"flex gap-2",children:v.map(P=>e.jsx(_,{variant:l===P?"default":"outline",onClick:()=>o(P),children:P.split(" ")[0]},P))})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(P=>e.jsx("div",{className:"text-center font-semibold text-sm py-2",children:P},P))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:(O=m.length>0?D:r[l])==null?void 0:O.map(P=>{const A=_e(P.date),$=A.getDate(),M=ar(A)===ar(new Date);return e.jsxs("div",{className:`border rounded-lg p-3 min-h-[120px] cursor-pointer transition-all hover:shadow-md ${P.dayStatus==="danger"?"bg-red-50 border-red-200":P.dayStatus==="warning"?"bg-amber-50 border-amber-200":"bg-green-50 border-green-200"} ${M?"ring-2 ring-blue-500":""}`,onClick:()=>h(P),children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:`font-semibold ${M?"text-blue-600":""}`,children:$}),e.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:["£",P.income]})]}),e.jsxs("div",{className:"space-y-1 text-xs",children:[P.expenses.slice(0,2).map(z=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:z.name}),e.jsxs("span",{className:"text-red-600",children:["-£",z.amount]})]},z.id)),P.pots.length>0&&e.jsxs("div",{className:"text-green-600",children:["+",P.pots.length," pots"]}),e.jsxs("div",{className:"font-semibold mt-1",children:["£",P.balanceAfter]})]})]},P.date)})})]})})]}),x==="transition"&&l&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(L,{children:e.jsxs(Q,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Pot Transition Plan"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Track how your pots will grow over time and see the transition from current state to target goals."}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:s.pots.map(P=>{var I;const A=P.currentAmount/P.goalAmount*100,$=((I=r[l])==null?void 0:I.length)||30,M=P.goalAmount/$,z=Math.ceil((P.goalAmount-P.currentAmount)/M);return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-sm",children:P.name}),e.jsx(K,{variant:P.type==="essential"?"default":P.type==="savings"?"secondary":P.type==="buffer"?"outline":"destructive",children:P.type})]}),e.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:[j,P.currentAmount," / ",j,P.goalAmount]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:e.jsx("div",{className:"h-2 rounded-full bg-green-500 transition-all",style:{width:`${Math.min(100,A)}%`}})}),e.jsx("div",{className:"text-xs text-gray-600",children:A>=100?"Complete":`${Math.round(A)}% • ${z} days left`})]},P.id)})}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Weekly Pot Allocation Strategy"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"font-medium",children:"Weeks 1-2:"})]}),e.jsx("p",{className:"text-blue-700",children:"Leftover funds go to Next-Month Pot"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Focus on building buffer for upcoming month"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"font-medium",children:"Weeks 3-5:"})]}),e.jsx("p",{className:"text-blue-700",children:"Leftover funds go to Buffer Pot"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Build emergency fund and flexibility"})]})]})]})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Daily Transition Timeline"}),e.jsx("div",{className:"space-y-4",children:(q=r[l])==null?void 0:q.slice(0,14).map((P,A)=>{const $=P.pots.reduce((I,C)=>I+C.contribution,0),M=P.expenses.reduce((I,C)=>I+C.amount,0),z=P.income-M-$;return e.jsxs("div",{className:`border-l-4 pl-4 py-3 ${P.dayStatus==="danger"?"border-l-red-500 bg-red-50":P.dayStatus==="warning"?"border-l-yellow-500 bg-yellow-50":"border-l-green-500 bg-green-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:ce(_e(P.date),"EEE")}),e.jsx("div",{className:"text-2xl font-bold",children:ce(_e(P.date),"dd")}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Week ",P.weekNumber]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(K,{variant:"outline",className:"bg-white",children:[j,P.income]}),e.jsx("span",{className:"text-sm text-gray-600",children:"→"}),e.jsxs(K,{variant:"outline",className:"bg-white",children:[j,M]}),e.jsx("span",{className:"text-sm text-gray-600",children:"→"}),e.jsxs(K,{variant:"outline",className:"bg-white",children:[j,$]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-semibold ${P.dayStatus==="danger"?"text-red-600":P.dayStatus==="warning"?"text-yellow-600":"text-green-600"}`,children:[j,P.balanceAfter]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[z>=0?"+":"",j,z]})]})]}),P.pots.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-600 mb-1",children:"Pot Contributions:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:P.pots.map(I=>e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${I.type==="essential"?"bg-blue-500":I.type==="savings"?"bg-green-500":I.type==="buffer"?"bg-yellow-500":"bg-purple-500"}`}),e.jsxs("span",{children:[I.name,":"]}),e.jsxs("span",{className:"font-semibold text-green-600",children:["+",j,I.contribution]})]},I.id))})]}),P.recommendations.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-600 mb-1",children:"Recommendations:"}),e.jsx("div",{className:"space-y-1",children:P.recommendations.map((I,C)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),e.jsx("span",{children:I})]},C))})]})]},P.date)})})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Monthly Pot Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Pot Contributions by Type"}),e.jsx("div",{className:"space-y-3",children:Object.entries(fS).map(([P,A])=>{var M;const $=((M=r[l])==null?void 0:M.reduce((z,I)=>z+I.pots.filter(C=>C.type===P).reduce((C,B)=>C+B.contribution,0),0))||0;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:A}}),e.jsx("span",{className:"text-sm capitalize",children:P})]}),e.jsxs("span",{className:"font-semibold",children:[j,$.toFixed(2)]})]},P)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Pot Progress Projection"}),e.jsx("div",{className:"space-y-3",children:s.pots.map(P=>{var z;const A=((z=r[l])==null?void 0:z.reduce((I,C)=>I+C.pots.filter(B=>B.id===P.id).reduce((B,E)=>B+E.contribution,0),0))||0,$=P.currentAmount+A,M=$/P.goalAmount*100;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:P.name}),e.jsxs("span",{children:[j,$.toFixed(0)," / ",j,P.goalAmount]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full bg-green-500 transition-all",style:{width:`${Math.min(100,M)}%`}})}),e.jsx("div",{className:"text-xs text-gray-600",children:M>=100?"Target reached this month!":`${Math.round(M)}% complete`})]},P.id)})})]})]})]})})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx(L,{className:"w-full max-w-2xl",children:e.jsxs(Q,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Day Details - ",c.date]}),e.jsx(_,{variant:"outline",onClick:()=>h(null),children:"Close"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Transactions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Income"}),e.jsxs("span",{children:["+£",c.income]})]}),c.expenses.map(P=>e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{children:P.name}),e.jsxs("span",{children:["-£",P.amount]})]},P.id)),c.pots.map(P=>e.jsxs("div",{className:"flex justify-between text-blue-600",children:[e.jsx("span",{children:P.name}),e.jsxs("span",{children:["+£",P.contribution]})]},P.id))]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Recommendations"}),e.jsx("div",{className:"space-y-2",children:c.recommendations.map((P,A)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),P]},A))})]})]})]})})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Settings & Customization"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Threshold Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"warning-threshold",children:"Warning Threshold (£)"}),e.jsx(ae,{id:"warning-threshold",type:"number",value:s.rules.thresholds.warning,onChange:P=>w(Number(P.target.value),s.rules.thresholds.danger)})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"danger-threshold",children:"Danger Threshold (£)"}),e.jsx(ae,{id:"danger-threshold",type:"number",value:s.rules.thresholds.danger,onChange:P=>w(s.rules.thresholds.warning,Number(P.target.value))})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Pot Progress"}),e.jsx("div",{className:"space-y-4",children:s.pots.map(P=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:P.name}),e.jsxs("span",{children:["£",P.currentAmount," / £",P.goalAmount]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full bg-green-500 transition-all",style:{width:`${P.currentAmount/P.goalAmount*100}%`}})})]},P.id))})]})]})]})})]})}const Vn=u.forwardRef(({className:s,...t},a)=>e.jsx("textarea",{className:G("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...t}));Vn.displayName="Textarea";const yS=()=>{const{goals:s,transactions:t,addTransaction:a,updateGoal:n,recurringTransactions:r}=he(),{toast:i}=Ue(),l=Js(),[o,c]=u.useState(0),[h,x]=u.useState(""),[d,m]=u.useState([]),[g,y]=u.useState(!1),[p,j]=u.useState(!0),[v,N]=u.useState("smart"),[f,S]=u.useState("balanced"),D=[{id:"conservative",name:"Conservative",description:"Prioritize safety with higher buffer allocation",bufferRatio:.4,goalRatio:.3,expenseRatio:.3,icon:e.jsx(Lt,{className:"h-4 w-4"})},{id:"balanced",name:"Balanced",description:"Even distribution across all categories",bufferRatio:.3,goalRatio:.4,expenseRatio:.3,icon:e.jsx(de,{className:"h-4 w-4"})},{id:"aggressive",name:"Aggressive",description:"Maximize goal progress with higher goal allocation",bufferRatio:.2,goalRatio:.5,expenseRatio:.3,icon:e.jsx(Be,{className:"h-4 w-4"})}],w=()=>r.filter(M=>M.isActive).map(M=>({id:M.id,name:M.name,amount:Math.abs(M.amount),frequency:M.frequency,category:M.category,nextDate:M.nextDate})),R=M=>{if(M.completed)return 0;const z=M.currentAmount/M.targetAmount,I=M.targetDate?Math.ceil((new Date(M.targetDate).getTime()-new Date().getTime())/(1e3*60*60*24)):30,C=(1-z)*50,B=Math.max(0,(30-I)/30*50);return C+B},b=(M,z="balanced")=>{const B=new Date().getDay()===1,E=D.find(ve=>ve.id===z)||D[1],V=w(),U=[];let H=M;const Z=V.filter(ve=>ve.frequency==="daily"||B&&ve.frequency==="weekly");for(const ve of Z)H>=ve.amount&&(U.push({id:`expense-${ve.id}`,name:`💳 ${ve.name}`,amount:ve.amount,type:"expense",essential:!0,dueToday:!0,completed:p,category:ve.category,priority:1}),H-=ve.amount);const ge=s.filter(ve=>!ve.completed).map(ve=>({...ve,urgency:R(ve)})).sort((ve,kt)=>kt.urgency-ve.urgency),le=ge.reduce((ve,kt)=>ve+kt.urgency,0),Oe=H*E.goalRatio;for(const ve of ge){if(Oe<=0)break;const kt=ve.urgency/le,Y=Math.min(ve.targetAmount-ve.currentAmount,Oe*kt);if(Y>0&&H>=Y){const se=Y/ve.targetAmount*100;U.push({id:`goal-${ve.id}`,name:`🎯 ${ve.title}`,amount:Y,type:"goal",essential:ve.urgency>50,dueToday:ve.urgency>70,completed:!1,priority:ve.urgency>50?2:3,goalId:ve.id,progressImpact:Math.round(se)}),H-=Y}}const $t=H*E.bufferRatio;return $t>0&&(U.push({id:"buffer",name:"🛡️ Emergency Buffer",amount:$t,type:"buffer",essential:!1,dueToday:!0,completed:!1,priority:4}),H-=$t),H>0&&U.push({id:"leftover",name:"🎉 Discretionary Spending",amount:H,type:"buffer",essential:!1,dueToday:!0,completed:!1,isLeftover:!0,priority:5}),U.sort((ve,kt)=>ve.priority-kt.priority)},k=M=>{const z=o*(M/100),I=b(z,f);m(I),y(!0)},T={doubleIncome:o*2,halfIncome:o/2,emergency:Math.max(0,o-100)},F=M=>{const z=T[M],I=b(z,f);i({title:`Scenario: ${M.replace(/([A-Z])/g," $1").trim()}`,description:`Allocation preview for £${z}`}),m(I.map(C=>({...C,isScenario:!0}))),y(!0)},O=()=>{if(o>0){const M=b(o,f);m(M),y(!0),i({title:"Smart Allocation Generated",description:`Created ${M.length} allocation suggestions using ${f} strategy.`})}},q=M=>{m(z=>z.map(I=>I.id===M?{...I,completed:!I.completed}:I))},P=async()=>{try{const M=d.filter(z=>z.completed&&!z.isScenario);if(M.length===0){i({title:"No Allocations Selected",description:"Please select at least one allocation to confirm.",variant:"destructive"});return}for(const z of M)if(z.type==="expense")await a({amount:-z.amount,category:z.category||"Other",date:new Date().toISOString().split("T")[0],description:`Quick Allocation: ${z.name}`});else if(z.type==="goal"&&z.goalId){const I=s.find(C=>C.id===z.goalId);I&&(await n(z.goalId,{currentAmount:I.currentAmount+z.amount}),I.currentAmount+z.amount>=I.targetAmount&&i({title:"🎉 Goal Completed!",description:`Congratulations! You've completed "${I.title}"!`}))}i({title:"Allocations Confirmed!",description:`Successfully processed ${M.length} allocations totaling £${M.reduce((z,I)=>z+I.amount,0)}.`}),c(0),x(""),m([]),y(!1)}catch{i({title:"Error",description:"Failed to process allocations. Please try again.",variant:"destructive"})}},A=()=>d.filter(M=>M.completed).reduce((M,z)=>M+z.amount,0),$=()=>d.filter(M=>!M.completed).reduce((M,z)=>M+z.amount,0);return g?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/50 to-emerald-50/50 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Smart Allocation Plan"}),e.jsxs("p",{className:"text-lg text-gray-600",children:["From £",o," earned today"]}),h&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Note: ",h]}),d.some(M=>M.isScenario)&&e.jsx(K,{variant:"secondary",className:"mt-2",children:"Scenario Preview"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(L,{className:"shadow-lg",children:[e.jsxs(re,{children:[e.jsx(oe,{children:"Recommended Allocations"}),e.jsx(Ce,{children:"Based on your goals and current financial status"})]}),e.jsx(Q,{children:e.jsx("div",{className:"space-y-3",children:d.map(M=>e.jsxs("div",{className:`flex items-center justify-between p-4 border rounded-lg transition-all duration-200 ${M.completed?"bg-green-50 border-green-200 shadow-sm":"bg-white border-gray-200 hover:shadow-md"} ${M.isScenario?"border-dashed border-blue-300":""}`,children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsx("div",{className:`p-2 rounded-full ${M.completed?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,children:M.completed?e.jsx(Ee,{className:"h-5 w-5"}):e.jsx(je,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[M.name,M.essential&&e.jsx(K,{variant:"destructive",className:"text-xs",children:"Essential"}),M.dueToday&&e.jsx(K,{variant:"secondary",className:"text-xs",children:"Due Today"}),M.progressImpact&&e.jsxs(K,{variant:"outline",className:"text-xs",children:["+",M.progressImpact,"% progress"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground capitalize",children:[M.type," • Priority ",M.priority]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-bold text-lg ${M.isLeftover?"text-blue-600":M.essential?"text-red-600":"text-gray-900"}`,children:["£",M.amount]}),M.isLeftover&&e.jsx("div",{className:"text-xs text-blue-500",children:"Discretionary"})]}),!M.isScenario&&e.jsx(ot,{checked:M.completed,onCheckedChange:()=>q(M.id)})]})]},M.id))})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(L,{children:[e.jsx(re,{children:e.jsx(oe,{children:"Allocation Summary"})}),e.jsxs(Q,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Total Earned"}),e.jsxs("span",{className:"font-semibold",children:["£",o]})]}),e.jsx(Te,{value:A()/o*100,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["£",A()]}),e.jsx("div",{className:"text-sm text-green-700",children:"Allocated"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["£",$()]}),e.jsx("div",{className:"text-sm text-blue-700",children:"Pending"})]})]})]})]}),e.jsx(L,{children:e.jsx(Q,{className:"p-4 space-y-3",children:d.some(M=>M.isScenario)?e.jsxs(_,{variant:"outline",onClick:()=>{m([]),y(!1)},className:"w-full",children:[e.jsx(ha,{className:"w-4 h-4 mr-2"}),"Back to Earnings"]}):e.jsxs(e.Fragment,{children:[e.jsxs(_,{variant:"outline",onClick:()=>y(!1),className:"w-full",children:[e.jsx(ha,{className:"w-4 h-4 mr-2"}),"Adjust Earnings"]}),e.jsx(_,{onClick:P,className:"w-full bg-green-600 hover:bg-green-700",children:"Confirm Allocations ✅"})]})})}),e.jsxs(L,{children:[e.jsx(re,{children:e.jsx(oe,{children:"Quick Actions"})}),e.jsxs(Q,{className:"space-y-3",children:[e.jsxs(_,{variant:"outline",onClick:()=>l("/goals"),className:"w-full justify-start",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"View All Goals"]}),e.jsxs(_,{variant:"outline",onClick:()=>l("/transactions"),className:"w-full justify-start",children:[e.jsx(vs,{className:"w-4 h-4 mr-2"}),"View Transactions"]})]})]})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/50 to-emerald-50/50 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(Be,{className:"h-8 w-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quick Allocation Engine"})]}),e.jsx("p",{className:"text-lg text-gray-600",children:"Smart money allocation based on your financial context"})]}),e.jsxs(Xt,{value:v,onValueChange:N,className:"space-y-6",children:[e.jsxs(Bt,{className:"grid w-full grid-cols-3",children:[e.jsxs($e,{value:"smart",className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Smart Allocation"]}),e.jsxs($e,{value:"quick",className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4"}),"Quick Percentages"]}),e.jsxs($e,{value:"scenarios",className:"flex items-center gap-2",children:[e.jsx(up,{className:"h-4 w-4"}),"Test Scenarios"]})]}),e.jsx(Le,{value:"smart",className:"space-y-6",children:e.jsxs(L,{className:"shadow-lg",children:[e.jsxs(re,{children:[e.jsx(oe,{children:"Enter Today's Earnings"}),e.jsx(Ce,{children:"Choose your allocation strategy and enter your earnings for smart suggestions."})]}),e.jsxs(Q,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-lg font-medium mb-3 block",children:"Allocation Strategy"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:D.map(M=>e.jsx(L,{className:`cursor-pointer transition-all ${f===M.id?"border-primary bg-primary/5":"hover:border-gray-300"}`,onClick:()=>S(M.id),children:e.jsxs(Q,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[M.icon,e.jsx("span",{className:"font-medium",children:M.name})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:M.description}),e.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Buffer: ",M.bufferRatio*100,"% • Goals: ",M.goalRatio*100,"%"]})]})},M.id))})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"earnings",className:"text-lg font-medium",children:"Earnings Amount (£)"}),e.jsx(ae,{id:"earnings",type:"number",value:o||"",onChange:M=>c(Number(M.target.value)),className:"text-2xl font-bold text-center h-16 mt-2",placeholder:"0",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"note",children:"Notes (optional)"}),e.jsx(Vn,{id:"note",value:h,onChange:M=>x(M.target.value),placeholder:"e.g., overtime, weekend work, bonus",className:"mt-1"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"auto-allocate",className:"font-medium",children:"Auto-allocate essentials"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically mark essential expenses as completed"})]}),e.jsx(ot,{id:"auto-allocate",checked:p,onCheckedChange:j})]}),e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"Financial Context"})}),e.jsx(Q,{className:"pt-0",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:w().length}),e.jsx("div",{className:"text-muted-foreground",children:"Expenses"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:s.length}),e.jsx("div",{className:"text-muted-foreground",children:"Goals"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:t.length}),e.jsx("div",{className:"text-muted-foreground",children:"Transactions"})]})]})})]}),e.jsxs(_,{onClick:O,disabled:!o||o<=0,className:"w-full py-3 text-lg",size:"lg",children:[e.jsx(vs,{className:"w-5 h-5 mr-2"}),"Generate Smart Allocations"]})]})]})}),e.jsx(Le,{value:"quick",className:"space-y-6",children:e.jsxs(L,{className:"shadow-lg",children:[e.jsxs(re,{children:[e.jsx(oe,{children:"Quick Percentage Allocation"}),e.jsx(Ce,{children:"Allocate a percentage of your earnings with one click."})]}),e.jsxs(Q,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"earnings-quick",className:"text-lg font-medium",children:"Earnings Amount (£)"}),e.jsx(ae,{id:"earnings-quick",type:"number",value:o||"",onChange:M=>c(Number(M.target.value)),className:"text-2xl font-bold text-center h-16 mt-2",placeholder:"0",min:"0",step:"0.01"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[25,50,75,100].map(M=>e.jsxs(_,{variant:"outline",onClick:()=>k(M),disabled:!o||o<=0,className:"h-16 text-lg font-semibold",children:[M,"%"]},M))}),e.jsxs(_,{onClick:()=>k(100),disabled:!o||o<=0,className:"w-full py-3 text-lg",size:"lg",children:[e.jsx(vs,{className:"w-5 h-5 mr-2"}),"Allocate Full Amount"]})]})]})}),e.jsx(Le,{value:"scenarios",className:"space-y-6",children:e.jsxs(L,{className:"shadow-lg",children:[e.jsxs(re,{children:[e.jsx(oe,{children:"Test Allocation Scenarios"}),e.jsx(Ce,{children:"See how different income scenarios would affect your allocations."})]}),e.jsxs(Q,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"earnings-scenarios",className:"text-lg font-medium",children:"Base Earnings Amount (£)"}),e.jsx(ae,{id:"earnings-scenarios",type:"number",value:o||"",onChange:M=>c(Number(M.target.value)),className:"text-2xl font-bold text-center h-16 mt-2",placeholder:"0",min:"0",step:"0.01"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(_,{variant:"outline",onClick:()=>F("doubleIncome"),disabled:!o||o<=0,className:"h-16",children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Double Income"]}),e.jsxs(_,{variant:"outline",onClick:()=>F("halfIncome"),disabled:!o||o<=0,className:"h-16",children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Half Income"]}),e.jsxs(_,{variant:"outline",onClick:()=>F("emergency"),disabled:!o||o<=0,className:"h-16",children:[e.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Emergency (-£100)"]})]})]})]})})]})]})})},Xn=[{id:"emergency",name:"Emergency Fund",description:"For unexpected expenses and financial security",icon:e.jsx(Be,{className:"h-6 w-6"}),color:"bg-yellow-500",suggestedAmount:1e3,priority:1},{id:"rent",name:"Rent/Mortgage",description:"Monthly housing payments",icon:e.jsx(An,{className:"h-6 w-6"}),color:"bg-blue-500",priority:2},{id:"bills",name:"Utilities & Bills",description:"Electricity, water, internet, phone bills",icon:e.jsx(Be,{className:"h-6 w-6"}),color:"bg-purple-500",priority:3},{id:"groceries",name:"Groceries",description:"Weekly food shopping",icon:e.jsx(xp,{className:"h-6 w-6"}),color:"bg-green-500",priority:4},{id:"transport",name:"Transport",description:"Fuel, public transport, car maintenance",icon:e.jsx(nd,{className:"h-6 w-6"}),color:"bg-orange-500",priority:5},{id:"savings",name:"Savings",description:"Long-term savings and investments",icon:e.jsx(It,{className:"h-6 w-6"}),color:"bg-emerald-500",priority:6},{id:"vacation",name:"Vacation",description:"Travel and holiday expenses",icon:e.jsx(hd,{className:"h-6 w-6"}),color:"bg-cyan-500",priority:7},{id:"health",name:"Healthcare",description:"Medical expenses and insurance",icon:e.jsx(ld,{className:"h-6 w-6"}),color:"bg-red-500",priority:8},{id:"education",name:"Education",description:"Courses, books, learning materials",icon:e.jsx(od,{className:"h-6 w-6"}),color:"bg-indigo-500",priority:9},{id:"entertainment",name:"Entertainment",description:"Dining out, movies, hobbies",icon:e.jsx(xd,{className:"h-6 w-6"}),color:"bg-pink-500",priority:10}];function jS({isOpen:s,onComplete:t}){const{createPot:a}=In(),[n,r]=u.useState(1),[i,l]=u.useState([]),[o,c]=u.useState({}),[h,x]=u.useState(!1),d=3,m=v=>{l(N=>N.includes(v)?N.filter(f=>f!==v):[...N,v])},g=(v,N,f)=>{c(S=>({...S,[v]:{...S[v],[N]:f}}))},y=()=>{n<d&&r(n+1)},p=()=>{n>1&&r(n-1)},j=async()=>{if(i.length===0){ne.error("Please select at least one pot to create");return}x(!0);try{for(const v of i){const N=Xn.find(S=>S.id===v);if(!N)continue;const f=o[v]||{};await a({name:N.name,description:f.description||N.description,target_amount:f.targetAmount||N.suggestedAmount||500,current_balance:0,priority:N.priority,allocation_rule:{type:"manual"},auto_transfer_enabled:!1,color:N.color.replace("bg-",""),icon:N.name.toLowerCase()})}ne.success(`Successfully created ${i.length} pots!`),t()}catch(v){console.error("Error creating pots:",v),ne.error("Failed to create pots")}finally{x(!1)}};return s?e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs(L,{className:"w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs(re,{children:[e.jsx(oe,{className:"text-2xl",children:"Set Up Your Financial Pots"}),e.jsx(Ce,{children:"Create pots to organize your money and achieve your financial goals"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Step ",n," of ",d]}),e.jsxs("span",{children:[Math.round(n/d*100),"% Complete"]})]}),e.jsx(Te,{value:n/d*100,className:"h-2"})]})]}),e.jsxs(Q,{className:"space-y-6 max-h-[60vh] overflow-y-auto",children:[n===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Choose Your Pots"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select the pots you'd like to create. You can always add more later."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Xn.map(v=>e.jsx("div",{className:G("border-2 rounded-lg p-4 cursor-pointer transition-all duration-200",i.includes(v.id)?"border-primary bg-primary/5":"border-muted hover:border-primary/50"),onClick:()=>m(v.id),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:G("p-2 rounded-full text-white",v.color),children:v.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:v.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:v.description})]}),e.jsx(Ee,{className:G("h-5 w-5",i.includes(v.id)?"text-primary":"text-muted")})]})},v.id))})]}),n===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Configure Your Pots"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Set target amounts and descriptions for your selected pots."}),e.jsx("div",{className:"space-y-4",children:i.map(v=>{var S;const N=Xn.find(D=>D.id===v);if(!N)return null;const f=o[v]||{};return e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:G("p-2 rounded-full text-white",N.color),children:N.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:N.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:N.description})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:`${v}-amount`,children:"Target Amount (£)"}),e.jsx(ae,{id:`${v}-amount`,type:"number",placeholder:((S=N.suggestedAmount)==null?void 0:S.toString())||"500",value:f.targetAmount||"",onChange:D=>g(v,"targetAmount",parseFloat(D.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:`${v}-description`,children:"Description (Optional)"}),e.jsx(Vn,{id:`${v}-description`,placeholder:N.description,value:f.description||"",onChange:D=>g(v,"description",D.target.value)})]})]})]},v)})})]}),n===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Review Your Pots"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Review your pot selections before creating them."}),e.jsx("div",{className:"space-y-4",children:i.map(v=>{const N=Xn.find(S=>S.id===v);if(!N)return null;const f=o[v]||{};return e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:G("p-2 rounded-full text-white",N.color),children:N.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:N.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:f.description||N.description})]})]}),e.jsxs(K,{variant:"secondary",children:["£",(f.targetAmount||N.suggestedAmount||500).toLocaleString()]})]})},v)})}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Quick Tips"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• You can always edit pot details later in the settings"}),e.jsx("li",{children:"• Set up allocation rules to automatically fund your pots"}),e.jsx("li",{children:"• Track your progress towards each pot's target amount"}),e.jsx("li",{children:"• Transfer money between pots as needed"})]})]})]})]}),e.jsx("div",{className:"border-t p-6",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(_,{variant:"outline",onClick:p,disabled:n===1,children:[e.jsx(ha,{className:"h-4 w-4 mr-2"}),"Back"]}),n<d?e.jsxs(_,{onClick:y,disabled:n===1&&i.length===0,children:["Next",e.jsx(Ps,{className:"h-4 w-4 ml-2"})]}):e.jsx(_,{onClick:j,disabled:h||i.length===0,children:h?"Creating Pots...":`Create ${i.length} Pots`})]})})]})}):null}function bS({className:s}){const[t,a]=u.useState(new Date),[n,r]=u.useState(new Date),[i,l]=u.useState([]),{transactions:o}=he(),{allocationTransactions:c,pots:h}=In();u.useEffect(()=>{x()},[o,c,n]);const x=()=>{const p=mt(n),j=Ys(n),N=$r({start:p,end:j}).map(f=>{const S=o.filter(k=>lt(_e(k.date),f)),D=c.filter(k=>lt(_e(k.allocation_date),f)),w=S.filter(k=>k.amount>0).reduce((k,T)=>k+T.amount,0),R=S.filter(k=>k.amount<0).reduce((k,T)=>k+Math.abs(T.amount),0),b=D.reduce((k,T)=>k+T.amount,0);return{date:f,income:w,expenses:R,net:w-R+b,transactions:S,potAllocations:D}});l(N)},d=p=>i.find(j=>lt(j.date,p)),m=p=>{const j=d(p);return j?j.net>0?"bg-green-50 text-green-700 hover:bg-green-100":j.net<0?"bg-red-50 text-red-700 hover:bg-red-100":"bg-gray-50 text-gray-600 hover:bg-gray-100":""},g=p=>{const j=d(p);return j?e.jsxs("div",{className:"text-xs text-center space-y-1",children:[e.jsxs("div",{className:G("font-medium",j.net>0?"text-green-600":j.net<0?"text-red-600":"text-gray-500"),children:["£",Math.abs(j.net).toFixed(0)]}),j.transactions.length>0&&e.jsx(K,{variant:"secondary",className:"h-4 w-4 p-0 text-[8px]",children:j.transactions.length})]}):null},y=d(t);return e.jsxs(L,{className:s,children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5"}),"Cashflow Calendar"]}),e.jsx(Ce,{children:"Visual overview of your daily income, expenses, and pot allocations"})]}),e.jsxs(Q,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx($n,{mode:"single",selected:t,onSelect:p=>p&&a(p),month:n,onMonthChange:r,className:"rounded-md border",modifiers:{hasTransactions:i.filter(p=>p.transactions.length>0).map(p=>p.date),hasAllocations:i.filter(p=>p.potAllocations.length>0).map(p=>p.date)},modifiersClassNames:{hasTransactions:"ring-2 ring-blue-200",hasAllocations:"ring-2 ring-purple-200"},components:{Day:({date:p,...j})=>{const v=d(p);return e.jsxs(Es,{children:[e.jsx(Ms,{asChild:!0,children:e.jsxs("button",{...j,className:G("relative h-9 w-9 p-0 font-normal aria-selected:opacity-100",m(p)),children:[p.getDate(),g(p)]})}),e.jsx(bs,{className:"w-80",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-medium",children:ce(p,"EEEE, MMMM d, yyyy")}),v&&e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[e.jsx(de,{className:"h-3 w-3"}),"Income:"]}),e.jsxs("span",{children:["£",v.income.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-red-600 flex items-center gap-1",children:[e.jsx(We,{className:"h-3 w-3"}),"Expenses:"]}),e.jsxs("span",{children:["£",v.expenses.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between font-medium border-t pt-1",children:[e.jsx("span",{children:"Net:"}),e.jsxs("span",{className:v.net>=0?"text-green-600":"text-red-600",children:["£",v.net.toFixed(2)]})]}),v.potAllocations.length>0&&e.jsxs("div",{className:"pt-1",children:[e.jsx("div",{className:"text-xs text-purple-600 font-medium",children:"Pot Allocations:"}),v.potAllocations.map(N=>{const f=h.find(S=>S.id===N.pot_id);return e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{children:[(f==null?void 0:f.name)||"Unknown Pot",":"]}),e.jsxs("span",{children:["+£",N.amount.toFixed(2)]})]},N.id)})]})]})]})})]})}}})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-lg font-semibold",children:ce(t,"EEEE, MMMM d")}),y?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{className:"bg-green-50 rounded p-2",children:[e.jsx("div",{className:"text-green-600 font-medium",children:"Income"}),e.jsxs("div",{className:"text-lg font-bold",children:["£",y.income.toFixed(2)]})]}),e.jsxs("div",{className:"bg-red-50 rounded p-2",children:[e.jsx("div",{className:"text-red-600 font-medium",children:"Expenses"}),e.jsxs("div",{className:"text-lg font-bold",children:["£",y.expenses.toFixed(2)]})]}),e.jsxs("div",{className:G("rounded p-2",y.net>=0?"bg-green-50":"bg-red-50"),children:[e.jsx("div",{className:y.net>=0?"text-green-600":"text-red-600",children:"Net"}),e.jsxs("div",{className:G("text-lg font-bold",y.net>=0?"text-green-600":"text-red-600"),children:["£",y.net.toFixed(2)]})]})]}),y.transactions.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-sm mb-2",children:["Transactions (",y.transactions.length,")"]}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:y.transactions.map(p=>e.jsxs("div",{className:"flex justify-between items-center text-xs p-1 rounded bg-gray-50",children:[e.jsx("span",{className:"truncate",children:p.description||p.category}),e.jsxs("span",{className:p.amount>=0?"text-green-600":"text-red-600",children:[p.amount>=0?"+":"-","£",Math.abs(p.amount).toFixed(2)]})]},p.id))})]}),y.potAllocations.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm mb-2",children:"Pot Allocations"}),e.jsx("div",{className:"space-y-1",children:y.potAllocations.map(p=>{const j=h.find(v=>v.id===p.pot_id);return e.jsxs("div",{className:"flex justify-between items-center text-xs p-1 rounded bg-purple-50",children:[e.jsx("span",{className:"text-purple-700",children:(j==null?void 0:j.name)||"Unknown Pot"}),e.jsxs("span",{className:"text-purple-700 font-medium",children:["+£",p.amount.toFixed(2)]})]},p.id)})})]}),y.transactions.length===0&&y.potAllocations.length===0&&e.jsx("div",{className:"text-center text-gray-500 text-sm py-4",children:"No activity recorded for this day"})]}):e.jsx("div",{className:"text-center text-gray-500 text-sm py-4",children:"No data available for this day"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-50 border border-green-200 rounded"}),e.jsx("span",{children:"Positive net"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-50 border border-red-200 rounded"}),e.jsx("span",{children:"Negative net"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 border-2 border-blue-200 rounded"}),e.jsx("span",{children:"Has transactions"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 border-2 border-purple-200 rounded"}),e.jsx("span",{children:"Has pot allocations"})]})]})]})]})}function NS({className:s}){const{pots:t,allocationRules:a,allocationTransactions:n}=In(),{transactions:r}=he(),[i,l]=u.useState([]),[o,c]=u.useState(0);u.useEffect(()=>{h()},[t,a,n,r]);const h=()=>{const N=[];t.forEach(w=>{const R=w.current_balance/w.target_amount*100;R<20&&w.current_balance>0&&N.push({id:`low_balance_${w.id}`,type:"low_balance",potId:w.id,title:"Low Balance Alert",message:`${w.name} is at ${R.toFixed(1)}% of its target. Consider adding funds.`,severity:"warning",timestamp:new Date,action:{label:"Add Funds",onClick:()=>x(w.id)}}),w.current_balance>=w.target_amount&&w.target_amount>0&&N.push({id:`target_reached_${w.id}`,type:"target_reached",potId:w.id,title:"Target Reached!",message:`${w.name} has reached its target of £${w.target_amount.toLocaleString()}.`,severity:"success",timestamp:new Date,action:{label:"View Pot",onClick:()=>d(w.id)}})});const f=new Date;a.forEach(w=>{if(!w.enabled)return;const R=n.filter(k=>k.rule_id===w.id).sort((k,T)=>new Date(T.allocation_date).getTime()-new Date(k.allocation_date).getTime())[0];let b=null;if(R){const k=new Date(R.allocation_date);switch(w.rule_type){case"daily":b=qe(k,1);break;case"weekly":b=qe(k,7);break;case"monthly":b=qe(k,30);break}}if(b&&mn(f,b)){const k=t.find(T=>T.id===w.pot_id);k&&N.push({id:`allocation_due_${w.id}`,type:"allocation_due",potId:k.id,title:"Allocation Due",message:`Allocation of £${w.amount} to ${k.name} is overdue.`,severity:"warning",timestamp:new Date,action:{label:"Run Allocation",onClick:()=>m(w.id)}})}});const S=r.slice(0,30),D={};S.forEach(w=>{w.amount<0&&(D[w.category]=(D[w.category]||0)+Math.abs(w.amount))}),t.forEach(w=>{const R=w.name.toLowerCase();Object.entries(D).forEach(([b,k])=>{const T=b.toLowerCase();(R.includes(T)||T.includes(R))&&k>w.current_balance*.5&&N.push({id:`transfer_suggestion_${w.id}_${b}`,type:"transfer_suggestion",potId:w.id,title:"Transfer Suggestion",message:`Consider adding funds to ${w.name}. Recent ${b} spending: £${k.toLocaleString()}.`,severity:"info",timestamp:new Date,action:{label:"Transfer Funds",onClick:()=>g(w.id)}})})}),l(N),c(N.length)},x=N=>{ne.info(`Add funds to pot ${N}`)},d=N=>{ne.info(`Viewing pot ${N}`)},m=N=>{ne.info(`Running allocation rule ${N}`)},g=N=>{ne.info(`Transfer to pot ${N}`)},y=N=>{l(f=>f.filter(S=>S.id!==N)),c(f=>Math.max(0,f-1))},p=()=>{l([]),c(0)},j=N=>{switch(N){case"warning":return e.jsx(Ze,{className:"h-4 w-4 text-yellow-600"});case"success":return e.jsx(Ee,{className:"h-4 w-4 text-green-600"});case"info":default:return e.jsx(mr,{className:"h-4 w-4 text-blue-600"})}},v=N=>{switch(N){case"warning":return"border-yellow-200 bg-yellow-50";case"success":return"border-green-200 bg-green-50";case"info":default:return"border-blue-200 bg-blue-50"}};return e.jsxs(L,{className:s,children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ma,{className:"h-5 w-5"}),"Pot Notifications",o>0&&e.jsx(K,{variant:"destructive",className:"ml-2",children:o})]}),i.length>0&&e.jsx(_,{variant:"ghost",size:"sm",onClick:p,children:"Mark all as read"})]}),e.jsx(Ce,{children:"Alerts and suggestions for your financial pots"})]}),e.jsxs(Q,{className:"space-y-4",children:[i.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(It,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No notifications at the moment."}),e.jsx("p",{className:"text-sm",children:"Your pots are looking good!"})]}):e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:i.map(N=>{const f=t.find(S=>S.id===N.potId);return e.jsxs("div",{className:G("border rounded-lg p-3 transition-all duration-200",v(N.severity)),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"mt-0.5",children:j(N.severity)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:N.title}),f&&e.jsx(K,{variant:"outline",className:"text-xs",children:f.name})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:N.message}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:ce(N.timestamp,"MMM d, HH:mm")}),N.action&&e.jsx(_,{variant:"outline",size:"sm",onClick:N.action.onClick,className:"text-xs h-7",children:N.action.label})]})]})]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>y(N.id),className:"h-6 w-6 p-0 ml-2",children:"×"})]}),N.type==="low_balance"&&f&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsxs("span",{children:["Current: £",f.current_balance.toLocaleString()]}),e.jsxs("span",{children:["Target: £",f.target_amount.toLocaleString()]})]}),e.jsx(Te,{value:f.current_balance/f.target_amount*100,className:"h-1"})]})]},N.id)})}),t.length>0&&e.jsx("div",{className:"border-t pt-4 mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",children:t.length}),e.jsx("div",{className:"text-muted-foreground",children:"Total Pots"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-medium text-green-600",children:["£",t.reduce((N,f)=>N+f.current_balance,0).toLocaleString()]}),e.jsx("div",{className:"text-muted-foreground",children:"Total Balance"})]})]})})]})]})}const wS=["Income","Housing","Transportation","Food","Utilities","Healthcare","Entertainment","Shopping","Personal Care","Education","Savings","Debt","Gifts","Other"];function SS({className:s}){const{addTransaction:t}=he(),{pots:a}=In(),[n,r]=u.useState(!1),[i,l]=u.useState(!1),[o,c]=u.useState({amount:"",description:"",category:"",date:new Date,potId:"",tags:[]}),[h,x]=u.useState(""),d=async p=>{if(p.preventDefault(),!o.amount||!o.category){ne.error("Please fill in required fields");return}l(!0);try{await t({amount:parseFloat(o.amount),description:o.description,category:o.category,date:ce(o.date,"yyyy-MM-dd"),pot_id:o.potId||null,tags:o.tags}),ne.success("Transaction added successfully"),c({amount:"",description:"",category:"",date:new Date,potId:"",tags:[]}),x(""),r(!1)}catch(j){console.error("Error adding transaction:",j),ne.error("Failed to add transaction")}finally{l(!1)}},m=()=>{h.trim()&&!o.tags.includes(h.trim())&&(c(p=>({...p,tags:[...p.tags,h.trim()]})),x(""))},g=p=>{c(j=>({...j,tags:j.tags.filter(v=>v!==p)}))},y=p=>{p.key==="Enter"&&h.trim()&&(p.preventDefault(),m())};return e.jsx("div",{className:s,children:e.jsxs(Es,{open:n,onOpenChange:r,children:[e.jsx(Ms,{asChild:!0,children:e.jsxs(_,{className:"w-full",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Quick Add Transaction"]})}),e.jsx(bs,{className:"w-96 p-0",align:"start",children:e.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Add Transaction"}),e.jsx(K,{variant:"secondary",className:"text-xs",children:"Quick Add"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"amount",children:"Amount (£)"}),e.jsx(ae,{id:"amount",type:"number",step:"0.01",placeholder:"0.00",value:o.amount,onChange:p=>c(j=>({...j,amount:p.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"description",children:"Description"}),e.jsx(Vn,{id:"description",placeholder:"What was this transaction for?",value:o.description,onChange:p=>c(j=>({...j,description:p.target.value})),rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"category",children:"Category"}),e.jsxs(Re,{value:o.category,onValueChange:p=>c(j=>({...j,category:p})),children:[e.jsx(Me,{children:e.jsx(Ie,{placeholder:"Select category"})}),e.jsx(Pe,{children:wS.map(p=>e.jsx(J,{value:p,children:p},p))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Date"}),e.jsxs(Es,{children:[e.jsx(Ms,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:G("w-full justify-start text-left font-normal",!o.date&&"text-muted-foreground"),children:[e.jsx(Fe,{className:"mr-2 h-4 w-4"}),o.date?ce(o.date,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(bs,{className:"w-auto p-0",children:e.jsx($n,{mode:"single",selected:o.date,onSelect:p=>p&&c(j=>({...j,date:p})),initialFocus:!0})})]})]}),a.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"pot",className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Assign to Pot (Optional)"]}),e.jsxs(Re,{value:o.potId,onValueChange:p=>c(j=>({...j,potId:p})),children:[e.jsx(Me,{children:e.jsx(Ie,{placeholder:"Select a pot"})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"",children:"No pot assigned"}),a.map(p=>e.jsx(J,{value:p.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:p.color}}),p.name]})},p.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"tags",className:"flex items-center gap-2",children:[e.jsx(fn,{className:"h-4 w-4"}),"Tags"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ae,{id:"tags",placeholder:"Add a tag...",value:h,onChange:p=>x(p.target.value),onKeyPress:y}),e.jsx(_,{type:"button",variant:"outline",onClick:m,children:"Add"})]}),o.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:o.tags.map(p=>e.jsxs(K,{variant:"secondary",className:"flex items-center gap-1",children:[p,e.jsx("button",{type:"button",onClick:()=>g(p),className:"hover:text-destructive",children:"×"})]},p))})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Cancel"}),e.jsx(_,{type:"submit",disabled:i,className:"flex-1",children:i?"Adding...":"Add Transaction"})]})]})})]})})}function CS(){const{user:s}=Rs(),{pots:t,allocationRules:a,allocationTransactions:n,createPot:r,updatePot:i,deletePot:l,createAllocationRule:o,deleteAllocationRule:c,allocateIncome:h,transferBetweenPots:x}=In(),[d,m]=u.useState(t.length===0),[g,y]=u.useState(!1),[p,j]=u.useState(!1),[v,N]=u.useState(""),[f,S]=u.useState({name:"",description:"",target_amount:1e3,color:"blue-500",icon:"piggy-bank"}),[D,w]=u.useState({pot_id:"",rule_type:"monthly",amount:100,schedule:{},priority:1,enabled:!0}),R=async()=>{if(!f.name.trim()){ne.error("Please enter a pot name");return}try{await r({name:f.name.trim(),description:f.description||null,target_amount:f.target_amount,current_balance:0,priority:t.length+1,allocation_rule:{type:"manual"},auto_transfer_enabled:!1,color:f.color,icon:f.icon}),y(!1),S({name:"",description:"",target_amount:1e3,color:"blue-500",icon:"piggy-bank"}),ne.success("Pot created successfully")}catch(M){console.error("Error creating pot:",M),ne.error("Failed to create pot")}},b=async()=>{try{await o(D),j(!1),w({pot_id:"",rule_type:"monthly",amount:100,schedule:{},priority:1,enabled:!0}),ne.success("Allocation rule created successfully")}catch{ne.error("Failed to create allocation rule")}},k=async()=>{if(!v){ne.error("Please enter an amount");return}try{await h(parseFloat(v)),N(""),ne.success("Income allocated successfully")}catch{ne.error("Failed to allocate income")}},T=async M=>{const z=prompt("Enter amount to add:");if(!z||isNaN(parseFloat(z))){ne.error("Please enter a valid amount");return}try{const I=t.find(C=>C.id===M);if(!I)throw new Error("Pot not found");await i(M,{current_balance:I.current_balance+parseFloat(z)}),await ue.from("allocation_transactions").insert({user_id:s==null?void 0:s.id,pot_id:M,amount:parseFloat(z),allocation_date:new Date().toISOString().split("T")[0],status:"completed"}),ne.success(`Added £${z} to ${I.name}`)}catch(I){console.error("Error adding funds:",I),ne.error("Failed to add funds")}},F=async M=>{const z=prompt("Enter amount to transfer:");if(!z||isNaN(parseFloat(z))){ne.error("Please enter a valid amount");return}const I=prompt("Enter destination pot ID (or name):");if(!I){ne.error("Please select a destination pot");return}try{const C=t.find(B=>B.id===I||B.name.toLowerCase()===I.toLowerCase());if(!C)throw new Error("Destination pot not found");await x(M,C.id,parseFloat(z)),ne.success(`Transferred £${z} successfully`)}catch(C){console.error("Error transferring funds:",C),ne.error("Failed to transfer funds")}},O=M=>M.target_amount===0?0:Math.min(M.current_balance/M.target_amount*100,100),q=M=>M>=100?"bg-green-500":M>=75?"bg-blue-500":M>=50?"bg-yellow-500":"bg-red-500",P=t.reduce((M,z)=>M+z.current_balance,0),A=t.reduce((M,z)=>M+z.target_amount,0),$=A>0?P/A*100:0;return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Financial Pots"}),e.jsx("p",{className:"text-muted-foreground",children:"Organize your money into dedicated categories"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(SS,{}),e.jsxs(_,{onClick:()=>y(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"New Pot"]})]})]}),e.jsx(jS,{isOpen:d,onComplete:()=>m(!1)}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(L,{children:[e.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(oe,{className:"text-sm font-medium",children:"Total Pots"}),e.jsx(It,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Q,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active financial categories"})]})]}),e.jsxs(L,{children:[e.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(oe,{className:"text-sm font-medium",children:"Total Balance"}),e.jsx(de,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Q,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["£",P.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all pots"})]})]}),e.jsxs(L,{children:[e.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(oe,{className:"text-sm font-medium",children:"Overall Progress"}),e.jsxs(K,{variant:"secondary",children:[$.toFixed(1),"%"]})]}),e.jsxs(Q,{children:[e.jsx(Te,{value:$,className:"h-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Towards total targets"})]})]})]}),e.jsxs(Xt,{defaultValue:"pots",className:"space-y-4",children:[e.jsxs(Bt,{children:[e.jsxs($e,{value:"pots",className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Pots"]}),e.jsxs($e,{value:"calendar",className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4"}),"Cashflow Calendar"]}),e.jsxs($e,{value:"notifications",className:"flex items-center gap-2",children:[e.jsx(Ma,{className:"h-4 w-4"}),"Notifications"]}),e.jsxs($e,{value:"allocation",className:"flex items-center gap-2",children:[e.jsx(kg,{className:"h-4 w-4"}),"Allocation"]})]}),e.jsx(Le,{value:"pots",className:"space-y-4",children:t.length===0?e.jsx(L,{children:e.jsxs(Q,{className:"text-center py-12",children:[e.jsx(It,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No pots yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by creating your first financial pot to organize your money."}),e.jsxs(_,{onClick:()=>m(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Set Up Pots"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(M=>e.jsxs(L,{className:"relative",children:[e.jsxs(re,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(oe,{className:"text-lg",children:M.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(K,{variant:"secondary",children:["£",M.current_balance.toLocaleString()]}),e.jsx(_,{variant:"ghost",size:"sm",children:e.jsx(zg,{className:"h-4 w-4"})})]})]}),e.jsx(Ce,{children:M.description})]}),e.jsxs(Q,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[O(M).toFixed(1),"%"]})]}),e.jsx(Te,{value:O(M),className:G("h-2",q(O(M)))}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{children:["£",M.current_balance.toLocaleString()]}),e.jsxs("span",{children:["£",M.target_amount.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>T(M.id),children:"Add Funds"}),e.jsx(_,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>F(M.id),children:"Transfer"})]})]})]},M.id))})}),e.jsx(Le,{value:"calendar",children:e.jsx(bS,{})}),e.jsx(Le,{value:"notifications",children:e.jsx(NS,{})}),e.jsxs(Le,{value:"allocation",className:"space-y-6",children:[e.jsxs(L,{children:[e.jsxs(re,{children:[e.jsx(oe,{children:"Quick Income Allocation"}),e.jsx(Ce,{children:"Distribute income to your pots automatically based on allocation rules"})]}),e.jsx(Q,{className:"space-y-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(W,{htmlFor:"income-amount",children:"Income Amount (£)"}),e.jsx(ae,{id:"income-amount",type:"number",value:v,onChange:M=>N(M.target.value),placeholder:"Enter amount"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(_,{onClick:k,children:"Allocate Income"})})]})})]}),e.jsxs(L,{children:[e.jsxs(re,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(oe,{children:"Allocation Rules"}),e.jsx(Ce,{children:"Automated funding rules for your pots"})]}),e.jsxs(_,{onClick:()=>j(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"New Rule"]})]}),e.jsx(Q,{children:a.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(As,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No allocation rules set up yet."}),e.jsx("p",{className:"text-sm",children:"Create rules to automate your pot funding."})]}):e.jsx("div",{className:"space-y-4",children:a.map(M=>{const z=t.find(I=>I.id===M.pot_id);return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[(z==null?void 0:z.name)||"Unknown Pot"," - £",M.amount," ",M.rule_type]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Priority: ",M.priority," • ",M.enabled?"Enabled":"Disabled"]})]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>c(M.id),children:"Delete"})]},M.id)})})})]})]})]}),e.jsx(dt,{open:g,onOpenChange:y,children:e.jsxs(at,{children:[e.jsxs(nt,{children:[e.jsx(rt,{children:"Create New Pot"}),e.jsx(pr,{children:"Create a new financial pot to organize your money."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"pot-name",children:"Pot Name"}),e.jsx(ae,{id:"pot-name",value:f.name,onChange:M=>S({...f,name:M.target.value}),placeholder:"e.g., Emergency Fund"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"pot-description",children:"Description (Optional)"}),e.jsx(Vn,{id:"pot-description",value:f.description,onChange:M=>S({...f,description:M.target.value}),placeholder:"Describe what this pot is for"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"pot-target",children:"Target Amount (£)"}),e.jsx(ae,{id:"pot-target",type:"number",value:f.target_amount,onChange:M=>S({...f,target_amount:parseFloat(M.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"pot-color",children:"Color"}),e.jsxs(Re,{value:f.color,onValueChange:M=>S({...f,color:M}),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"blue-500",children:"Blue"}),e.jsx(J,{value:"green-500",children:"Green"}),e.jsx(J,{value:"red-500",children:"Red"}),e.jsx(J,{value:"yellow-500",children:"Yellow"}),e.jsx(J,{value:"purple-500",children:"Purple"})]})]})]})]}),e.jsxs(eo,{children:[e.jsx(_,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(_,{onClick:R,children:"Create Pot"})]})]})}),e.jsx(dt,{open:p,onOpenChange:j,children:e.jsxs(at,{children:[e.jsxs(nt,{children:[e.jsx(rt,{children:"Create Allocation Rule"}),e.jsx(pr,{children:"Set up automated funding for your pots."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"rule-pot",children:"Pot"}),e.jsxs(Re,{value:D.pot_id,onValueChange:M=>w({...D,pot_id:M}),children:[e.jsx(Me,{children:e.jsx(Ie,{placeholder:"Select a pot"})}),e.jsx(Pe,{children:t.map(M=>e.jsx(J,{value:M.id,children:M.name},M.id))})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"rule-type",children:"Frequency"}),e.jsxs(Re,{value:D.rule_type,onValueChange:M=>w({...D,rule_type:M}),children:[e.jsx(Me,{children:e.jsx(Ie,{})}),e.jsxs(Pe,{children:[e.jsx(J,{value:"daily",children:"Daily"}),e.jsx(J,{value:"weekly",children:"Weekly"}),e.jsx(J,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"rule-amount",children:"Amount (£)"}),e.jsx(ae,{id:"rule-amount",type:"number",value:D.amount,onChange:M=>w({...D,amount:parseFloat(M.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"rule-priority",children:"Priority"}),e.jsx(ae,{id:"rule-priority",type:"number",value:D.priority,onChange:M=>w({...D,priority:parseInt(M.target.value)||1})})]})]}),e.jsxs(eo,{children:[e.jsx(_,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(_,{onClick:b,children:"Create Rule"})]})]})})]})}class ax{constructor(){}createScenario(t){return{id:`scenario_${Date.now()}`,...t,createdAt:new Date}}calculateScenarioImpact(t,a){const n=this.calculateBaselineMetrics(t),r=this.applyScenarioChanges(t,a.modifiedScenario),i=this.calculateModifiedMetrics(r),l=i.netWorth-n.netWorth,o=this.calculateGoalTimelineChanges(n,i),c=this.calculateDebtFreeDateChange(n,i),h=this.generateTimelineEvents(a,r),x=this.calculateRiskScore(a),d=this.calculateProbability(a);return{scenarioId:a.id,netWorthImpact:l,goalTimelineChanges:o,debtFreeDateChange:c,riskScore:x,probability:d,keyMetrics:{monthlyCashFlow:i.monthlyCashFlow,savingsRate:i.savingsRate,debtToIncome:i.debtToIncome,emergencyFundMonths:i.emergencyFundMonths},timeline:h}}calculateBaselineMetrics(t){const a=t.transactions.filter(c=>c.amount>0).reduce((c,h)=>c+h.amount,0),n=t.transactions.filter(c=>c.amount<0).reduce((c,h)=>c+Math.abs(h.amount),0),r=t.debts.reduce((c,h)=>c+h.remainingAmount,0),i=t.monthlyStartingPoint+a-n,l=a/12,o=n/12;return{netWorth:i-r,monthlyCashFlow:l-o,savingsRate:l>0?(l-o)/l*100:0,debtToIncome:l>0?r/l*100:0,emergencyFundMonths:o>0?i/o:0}}applyScenarioChanges(t,a){return{...t,transactions:[...t.transactions]}}calculateModifiedMetrics(t){return this.calculateBaselineMetrics(t)}calculateGoalTimelineChanges(t,a){return{emergency_fund:a.emergencyFundMonths>t.emergencyFundMonths?-1:1,debt_free:a.debtToIncome<t.debtToIncome?-6:6}}calculateDebtFreeDateChange(t,a){return a.debtToIncome<t.debtToIncome?-12:12}generateTimelineEvents(t,a){const n=[];return n.push({date:new Date,type:"milestone",amount:0,description:`Scenario "${t.name}" started`}),t.modifiedScenario.forEach(r=>{n.push({date:r.startDate,type:r.type,amount:r.amount,description:`${r.type}: ${r.name}`,category:r.category})}),n.sort((r,i)=>r.date.getTime()-i.date.getTime())}calculateRiskScore(t){let a=5;return t.modifiedScenario.forEach(n=>{n.type==="debt"&&(a+=2),n.type==="expense"&&(a+=1),n.amount>1e3&&(a+=1)}),Math.min(10,Math.max(1,a))}calculateProbability(t){let a=70;return t.modifiedScenario.forEach(n=>{n.type==="income"&&(a-=10),n.type==="investment"&&(a-=20)}),Math.min(100,Math.max(0,a))}compareScenarios(t,a){const r=a.map(c=>(c.results||(c.results=this.calculateScenarioImpact(t,c)),c)).sort((c,h)=>{var x,d;return(((x=h.results)==null?void 0:x.netWorthImpact)||0)-(((d=c.results)==null?void 0:d.netWorthImpact)||0)}),i=r[0]||null,l=r[r.length-1]||null,o=this.generateRecommendations(r);return{scenarios:r,bestScenario:i,worstScenario:l,recommendations:o}}generateRecommendations(t){const a=[];if(t.length>0){const n=t[0];n.results&&n.results.netWorthImpact>0&&a.push(`Consider implementing "${n.name}" as it shows positive net worth impact.`),t.some(r=>r.results&&r.results.riskScore>7)&&a.push("Some scenarios show high risk. Consider more conservative approaches.")}return a}generateTimelineProjection(t,a=5){const n=[],r=new Date;n.push({date:r,type:"milestone",amount:0,description:"Current financial position"});for(let i=1;i<=a*12;i++){const l=new Date(r);l.setMonth(l.getMonth()+i),t.modifiedScenario.forEach(o=>{o.frequency==="monthly"&&n.push({date:l,type:o.type,amount:o.amount,description:`Monthly ${o.type}: ${o.name}`,category:o.category})}),i%3===0&&n.push({date:l,type:"milestone",amount:0,description:`Quarter ${Math.ceil(i/3)} review`}),i%12===0&&n.push({date:l,type:"milestone",amount:0,description:`Year ${i/12} financial review`})}return n.sort((i,l)=>i.date.getTime()-l.date.getTime())}}function kS(){const s=he(),[t]=u.useState(()=>new ax),[a,n]=u.useState([]),[r,i]=u.useState(!1),[l,o]=u.useState(null),c=u.useCallback(()=>({transactions:s.transactions,goals:s.goals,debts:s.debts,dailyData:s.dailyData,monthlyStartingPoint:s.monthlyStartingPoint,currency:s.currency}),[s]),h=u.useCallback(async(j,v,N)=>{i(!0);try{const f=c(),D={name:j,description:v,baseScenario:[{id:"current_state",name:"Current Financial State",description:"Baseline financial position",type:"goal",startDate:new Date,amount:0,frequency:"one-time"}],modifiedScenario:N},w=t.createScenario(D);return w.results=t.calculateScenarioImpact(f,w),n(R=>[w,...R]),o(w),w}finally{i(!1)}},[t,c]),x=u.useCallback(async(j,v)=>{i(!0);try{const N=c(),f=a.findIndex(w=>w.id===j);if(f===-1)return null;const S={...a[f],...v,id:j};S.results=t.calculateScenarioImpact(N,S);const D=[...a];return D[f]=S,n(D),(l==null?void 0:l.id)===j&&o(S),S}finally{i(!1)}},[t,a,l,c]),d=u.useCallback(j=>{n(v=>v.filter(N=>N.id!==j)),(l==null?void 0:l.id)===j&&o(null)},[l]),m=u.useCallback(j=>{o(j)},[]),g=u.useCallback(j=>{const v=c(),N=a.filter(f=>j.includes(f.id));return t.compareScenarios(v,N)},[t,a,c]),y=u.useCallback((j,v=5)=>t.generateTimelineProjection(j,v),[t]),p=u.useCallback(async()=>{const j=c(),v=[{name:"Salary Increase Scenario",description:"Test the impact of a 10% salary increase",baseScenario:[],modifiedScenario:[{id:"salary_increase",name:"10% Salary Increase",description:"Hypothetical salary increase",type:"income",startDate:new Date,amount:500,frequency:"monthly",category:"Salary"}]},{name:"Debt Payoff Strategy",description:"Accelerated debt payoff with extra payments",baseScenario:[],modifiedScenario:[{id:"extra_debt_payment",name:"Extra Debt Payment",description:"Additional $200 monthly debt payment",type:"debt",startDate:new Date,amount:-200,frequency:"monthly",category:"Debt Reduction"}]},{name:"Investment Growth",description:"Regular monthly investment contributions",baseScenario:[],modifiedScenario:[{id:"monthly_investment",name:"Monthly Investment",description:"$300 monthly investment contribution",type:"investment",startDate:new Date,amount:300,frequency:"monthly",category:"Investments"}]}],N=await Promise.all(v.map(async f=>{const S=t.createScenario(f);return S.results=t.calculateScenarioImpact(j,S),S}));return n(N),N},[t,c]);return u.useEffect(()=>{p()},[p]),{scenarios:a,currentScenario:l,loading:r,createScenario:h,updateScenario:x,deleteScenario:d,setScenario:m,compareScenarios:g,generateTimelineProjection:y,createSampleScenarios:p,financialData:c(),scenarioEngine:t}}function DS({scenario:s,className:t}){var w,R,b;const[a,n]=u.useState(0),[r,i]=u.useState(!1),[l,o]=u.useState(1),[c,h]=u.useState(null),x=u.useRef(null),d=((R=(w=s.results)==null?void 0:w.timeline)==null?void 0:R.sort((k,T)=>k.date.getTime()-T.date.getTime()))||[],m=Array.from(new Set(d.map(k=>k.date.toISOString().split("T")[0]))).map(k=>new Date(k));u.useEffect(()=>{if(!r||m.length===0)return;const k=setInterval(()=>{n(T=>T>=m.length-1?(i(!1),T):T+1)},1e3);return()=>clearInterval(k)},[r,m.length]);const g=m[a],y=d.filter(k=>k.date.toISOString().split("T")[0]===(g==null?void 0:g.toISOString().split("T")[0])),p=k=>{switch(k){case"income":return e.jsx(de,{className:"h-4 w-4 text-green-600"});case"expense":return e.jsx(We,{className:"h-4 w-4 text-red-600"});case"debt_payment":return e.jsx(Mt,{className:"h-4 w-4 text-blue-600"});case"goal_achieved":return e.jsx(je,{className:"h-4 w-4 text-purple-600"});default:return e.jsx(Fe,{className:"h-4 w-4 text-gray-600"})}},j=k=>{switch(k){case"income":return"border-l-green-500 bg-green-50";case"expense":return"border-l-red-500 bg-red-50";case"debt_payment":return"border-l-blue-500 bg-blue-50";case"goal_achieved":return"border-l-purple-500 bg-purple-50";default:return"border-l-gray-500 bg-gray-50"}},v=k=>k.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),N=k=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(k),f=k=>{n(k),h(null)},S=()=>{o(k=>Math.min(3,k+.25))},D=()=>{o(k=>Math.max(.5,k-.25))};return!((b=s.results)!=null&&b.timeline)||s.results.timeline.length===0?e.jsx(L,{className:t,children:e.jsxs(re,{children:[e.jsx(oe,{children:"Timeline Visualization"}),e.jsx(Ce,{children:"No timeline data available for this scenario."})]})}):e.jsxs(L,{className:G("w-full",t),children:[e.jsx(re,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(oe,{children:"Timeline Visualization"}),e.jsxs(Ce,{children:['Explore the financial impact of "',s.name,'" over time']})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(K,{variant:"secondary",children:v(g)})})]})}),e.jsxs(Q,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>n(0),disabled:a===0,children:e.jsx(hn,{className:"h-4 w-4"})}),e.jsx(_,{variant:r?"default":"outline",size:"sm",onClick:()=>i(!r),children:r?e.jsx(zi,{className:"h-4 w-4"}):e.jsx(ls,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>n(m.length-1),disabled:a===m.length-1,children:e.jsx(Za,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:D,disabled:l<=.5,children:e.jsx(pd,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm text-muted-foreground min-w-[40px] text-center",children:[Math.round(l*100),"%"]}),e.jsx(_,{variant:"outline",size:"sm",onClick:S,disabled:l>=3,children:e.jsx(gd,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:v(m[0])}),e.jsx("span",{children:v(m[m.length-1])})]}),e.jsx(ct,{value:[a],min:0,max:m.length-1,step:1,onValueChange:([k])=>n(k),className:"w-full"})]}),e.jsxs("div",{ref:x,className:"relative h-32 bg-muted/20 rounded-lg overflow-hidden",style:{transform:`scale(${l})`,transformOrigin:"top left"},children:[e.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 bg-primary/30 transform -translate-y-1/2"}),m.map((k,T)=>{const F=T/(m.length-1)*100,O=T===a;return e.jsx("div",{className:G("absolute top-1/2 w-3 h-3 rounded-full border-2 cursor-pointer transform -translate-y-1/2 -translate-x-1/2",O?"bg-primary border-primary shadow-lg":"bg-background border-primary/50 hover:bg-primary/20"),style:{left:`${F}%`},onClick:()=>f(T),title:v(k)},k.toISOString())})]}),y.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-sm",children:["Events on ",v(g)]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:y.map((k,T)=>e.jsx("div",{className:G("p-3 rounded-lg border-l-4 cursor-pointer transition-all hover:shadow-sm",j(k.type),c===k&&"ring-2 ring-primary/50"),onClick:()=>h(k),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[p(k.type),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:k.description}),k.category&&e.jsx(K,{variant:"outline",className:"text-xs mt-1",children:k.category})]})]}),k.amount!==0&&e.jsxs("span",{className:G("font-medium text-sm",k.type==="income"||k.type==="goal_achieved"?"text-green-600":"text-red-600"),children:[k.type==="income"||k.type==="goal_achieved"?"+":"-",N(Math.abs(k.amount))]})]})},T))})]}),c&&e.jsxs(L,{className:"bg-muted/20",children:[e.jsx(re,{className:"pb-3",children:e.jsxs(oe,{className:"text-sm flex items-center gap-2",children:[p(c.type),"Event Details"]})}),e.jsx(Q,{className:"pt-0",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Date:"}),e.jsx("span",{children:v(c.date)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx(K,{variant:"secondary",className:"capitalize",children:c.type.replace("_"," ")})]}),c.category&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Category:"}),e.jsx("span",{children:c.category})]}),c.amount!==0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),e.jsxs("span",{className:G("font-medium",c.type==="income"||c.type==="goal_achieved"?"text-green-600":"text-red-600"),children:[c.type==="income"||c.type==="goal_achieved"?"+":"-",N(Math.abs(c.amount))]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Description:"}),e.jsx("span",{className:"text-right",children:c.description})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Net Worth Impact:"}),e.jsxs("p",{className:G("font-medium",s.results.netWorthImpact>=0?"text-green-600":"text-red-600"),children:[s.results.netWorthImpact>=0?"+":"",N(s.results.netWorthImpact)]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Risk Score:"}),e.jsxs("p",{className:G("font-medium",s.results.riskScore<=3?"text-green-600":s.results.riskScore<=6?"text-yellow-600":"text-red-600"),children:[s.results.riskScore,"/10"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Probability:"}),e.jsxs("p",{className:"font-medium",children:[s.results.probability,"%"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Timeline Events:"}),e.jsx("p",{className:"font-medium",children:d.length})]})]})]})]})}function TS({scenarios:s,financialData:t,className:a}){var y,p,j,v,N,f;const[n,r]=u.useState(s.map(S=>S.id)),[i,l]=u.useState(null),o=new ax,c=()=>{const S=s.filter(w=>n.includes(w.id)),D=o.compareScenarios(t,S);l(D)},h=S=>{r(D=>D.includes(S)?D.filter(w=>w!==S):[...D,S])},x=S=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(S),d=S=>S<=3?"text-green-600":S<=6?"text-yellow-600":"text-red-600",m=S=>S>=80?"text-green-600":S>=60?"text-yellow-600":"text-red-600",g=S=>S>0?e.jsx(de,{className:"h-4 w-4 text-green-600"}):S<0?e.jsx(We,{className:"h-4 w-4 text-red-600"}):e.jsx(tt,{className:"h-4 w-4 text-gray-600"});return s.length===0?e.jsx(L,{className:a,children:e.jsxs(re,{children:[e.jsx(oe,{children:"Scenario Comparison"}),e.jsx(Ce,{children:"No scenarios available for comparison."})]})}):e.jsxs(L,{className:G("w-full",a),children:[e.jsxs(re,{children:[e.jsx(oe,{children:"Scenario Comparison"}),e.jsx(Ce,{children:"Compare multiple What-If scenarios to find the best financial strategy"})]}),e.jsxs(Q,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Select Scenarios to Compare"}),e.jsx("div",{className:"grid gap-3",children:s.map(S=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(pa,{checked:n.includes(S.id),onCheckedChange:()=>h(S.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:S.name}),S.results&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(K,{variant:S.results.netWorthImpact>=0?"default":"destructive",className:"text-xs",children:[g(S.results.netWorthImpact),x(S.results.netWorthImpact)]}),e.jsxs(K,{variant:"outline",className:d(S.results.riskScore),children:["Risk: ",S.results.riskScore,"/10"]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:S.description})]})]},S.id))}),e.jsxs(_,{onClick:c,disabled:n.length<2,className:"w-full",children:["Compare Selected Scenarios (",n.length,")"]})]}),i&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.bestScenario&&e.jsxs(L,{className:"bg-green-50 border-green-200",children:[e.jsx(re,{className:"pb-3",children:e.jsxs(oe,{className:"text-sm flex items-center gap-2 text-green-700",children:[e.jsx(pn,{className:"h-4 w-4"}),"Best Scenario"]})}),e.jsx(Q,{className:"pt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium",children:i.bestScenario.name}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Net Worth Impact:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["+",x(((y=i.bestScenario.results)==null?void 0:y.netWorthImpact)||0)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Risk Score:"}),e.jsxs("span",{className:d(((p=i.bestScenario.results)==null?void 0:p.riskScore)||0),children:[(j=i.bestScenario.results)==null?void 0:j.riskScore,"/10"]})]})]})})]}),i.worstScenario&&e.jsxs(L,{className:"bg-red-50 border-red-200",children:[e.jsx(re,{className:"pb-3",children:e.jsxs(oe,{className:"text-sm flex items-center gap-2 text-red-700",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Highest Risk Scenario"]})}),e.jsx(Q,{className:"pt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium",children:i.worstScenario.name}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Net Worth Impact:"}),e.jsx("span",{className:"font-medium text-red-600",children:x(((v=i.worstScenario.results)==null?void 0:v.netWorthImpact)||0)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Risk Score:"}),e.jsxs("span",{className:d(((N=i.worstScenario.results)==null?void 0:N.riskScore)||0),children:[(f=i.worstScenario.results)==null?void 0:f.riskScore,"/10"]})]})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Detailed Comparison"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Scenario"}),e.jsx("th",{className:"text-right p-2",children:"Net Worth Impact"}),e.jsx("th",{className:"text-right p-2",children:"Monthly Cash Flow"}),e.jsx("th",{className:"text-right p-2",children:"Savings Rate"}),e.jsx("th",{className:"text-right p-2",children:"Debt-to-Income"}),e.jsx("th",{className:"text-right p-2",children:"Risk Score"}),e.jsx("th",{className:"text-right p-2",children:"Probability"})]})}),e.jsx("tbody",{children:i.scenarios.map((S,D)=>{var w,R,b,k,T,F,O,q,P,A,$,M,z,I,C,B;return e.jsxs("tr",{className:G("border-b",S.id===((w=i.bestScenario)==null?void 0:w.id)&&"bg-green-50",S.id===((R=i.worstScenario)==null?void 0:R.id)&&"bg-red-50"),children:[e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[S.id===((b=i.bestScenario)==null?void 0:b.id)&&e.jsx(Ee,{className:"h-4 w-4 text-green-600"}),S.id===((k=i.worstScenario)==null?void 0:k.id)&&e.jsx(Rg,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"font-medium",children:S.name})]})}),e.jsxs("td",{className:G("p-2 text-right font-medium",((T=S.results)==null?void 0:T.netWorthImpact)>=0?"text-green-600":"text-red-600"),children:[((F=S.results)==null?void 0:F.netWorthImpact)>=0?"+":"",x(((O=S.results)==null?void 0:O.netWorthImpact)||0)]}),e.jsx("td",{className:"p-2 text-right",children:x(((q=S.results)==null?void 0:q.keyMetrics.monthlyCashFlow)||0)}),e.jsxs("td",{className:"p-2 text-right",children:[(A=(P=S.results)==null?void 0:P.keyMetrics.savingsRate)==null?void 0:A.toFixed(1),"%"]}),e.jsxs("td",{className:"p-2 text-right",children:[(M=($=S.results)==null?void 0:$.keyMetrics.debtToIncome)==null?void 0:M.toFixed(1),"%"]}),e.jsxs("td",{className:G("p-2 text-right font-medium",d(((z=S.results)==null?void 0:z.riskScore)||0)),children:[(I=S.results)==null?void 0:I.riskScore,"/10"]}),e.jsxs("td",{className:G("p-2 text-right font-medium",m(((C=S.results)==null?void 0:C.probability)||0)),children:[(B=S.results)==null?void 0:B.probability,"%"]})]},S.id)})})]})})]}),i.recommendations.length>0&&e.jsxs(L,{children:[e.jsx(re,{children:e.jsxs(oe,{className:"text-sm flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"}),"Recommendations"]})}),e.jsx(Q,{children:e.jsx("ul",{className:"space-y-2",children:i.recommendations.map((S,D)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(Ee,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:S})]},D))})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Key Metrics Comparison"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:i.scenarios.map(S=>{var D,w,R,b,k;return e.jsxs(L,{className:"text-center",children:[e.jsx(re,{className:"pb-2",children:e.jsx(oe,{className:"text-sm",children:S.name})}),e.jsx(Q,{className:"pt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["+",x(((D=S.results)==null?void 0:D.netWorthImpact)||0)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Net Worth Impact"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Risk:"}),e.jsxs("span",{className:d(((w=S.results)==null?void 0:w.riskScore)||0),children:[(R=S.results)==null?void 0:R.riskScore,"/10"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Probability:"}),e.jsxs("span",{className:m(((b=S.results)==null?void 0:b.probability)||0),children:[(k=S.results)==null?void 0:k.probability,"%"]})]})]})})]},S.id)})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(_,{variant:"outline",className:"flex-1",children:"Save Comparison Report"}),e.jsx(_,{className:"flex-1",children:"Implement Best Scenario"})]})]}),!i&&n.length>=2&&e.jsx(L,{className:"text-center py-8",children:e.jsxs(Q,{children:[e.jsx(tt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h4",{className:"font-medium mb-2",children:"Ready to Compare"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Click the "Compare Selected Scenarios" button to see detailed analysis and recommendations.'})]})})]})]})}function ES({className:s}){const{scenarios:t,currentScenario:a,loading:n,createScenario:r,updateScenario:i,deleteScenario:l,setScenario:o,compareScenarios:c,financialData:h}=kS(),[x,d]=u.useState("scenarios"),[m,g]=u.useState(""),[y,p]=u.useState("all"),[j,v]=u.useState(!1),[N,f]=u.useState(null),S=t.filter(T=>{const F=T.name.toLowerCase().includes(m.toLowerCase())||T.description.toLowerCase().includes(m.toLowerCase()),O=y==="all"||T.modifiedScenario.some(q=>q.type===y);return F&&O}),D=T=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(T),w=T=>T<=3?"text-green-600 bg-green-50":T<=6?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",R=T=>{const F=T.modifiedScenario.map(O=>O.type);return F.includes("income")?e.jsx(de,{className:"h-4 w-4 text-green-600"}):F.includes("investment")?e.jsx(It,{className:"h-4 w-4 text-blue-600"}):F.includes("debt")?e.jsx(Mt,{className:"h-4 w-4 text-orange-600"}):F.includes("goal")?e.jsx(je,{className:"h-4 w-4 text-purple-600"}):e.jsx(tt,{className:"h-4 w-4 text-gray-600"})},b=async()=>{const T=await r("New Financial Scenario","Test different financial strategies and their impact",[{id:"sample_change",name:"Sample Change",description:"Example financial change",type:"income",startDate:new Date,amount:100,frequency:"monthly",category:"Salary"}]);o(T),d("timeline"),v(!1)},k=T=>{confirm("Are you sure you want to delete this scenario?")&&l(T)};return n&&t.length===0?e.jsx(L,{className:s,children:e.jsx(Q,{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(tt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading scenarios..."})]})})}):e.jsxs("div",{className:G("space-y-6",s),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"What-If Mode"}),e.jsx("p",{className:"text-muted-foreground",children:"Test financial scenarios and explore different futures"})]}),e.jsxs(_,{onClick:b,disabled:j,children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"New Scenario"]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ca,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ae,{placeholder:"Search scenarios...",value:m,onChange:T=>g(T.target.value),className:"pl-9"})]}),e.jsxs("select",{value:y,onChange:T=>p(T.target.value),className:"px-3 py-2 border rounded-md bg-background",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"income",children:"Income"}),e.jsx("option",{value:"expense",children:"Expense"}),e.jsx("option",{value:"debt",children:"Debt"}),e.jsx("option",{value:"investment",children:"Investment"}),e.jsx("option",{value:"goal",children:"Goal"})]})]}),e.jsxs(Xt,{value:x,onValueChange:d,className:"space-y-4",children:[e.jsxs(Bt,{className:"grid w-full grid-cols-3",children:[e.jsx($e,{value:"scenarios",children:"My Scenarios"}),e.jsx($e,{value:"timeline",disabled:!a,children:"Timeline View"}),e.jsx($e,{value:"compare",disabled:t.length<2,children:"Compare Scenarios"})]}),e.jsx(Le,{value:"scenarios",className:"space-y-4",children:S.length===0?e.jsx(L,{children:e.jsxs(Q,{className:"text-center py-8",children:[e.jsx(tt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"font-medium mb-2",children:"No scenarios found"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:m||y!=="all"?"Try adjusting your search or filter criteria":"Create your first scenario to start testing financial strategies"}),e.jsxs(_,{onClick:b,children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Create First Scenario"]})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:S.map(T=>{var F,O,q,P,A,$;return e.jsxs(L,{className:G("cursor-pointer transition-all hover:shadow-md",(a==null?void 0:a.id)===T.id&&"ring-2 ring-primary"),onClick:()=>{o(T),d("timeline")},children:[e.jsxs(re,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[R(T),e.jsx(oe,{className:"text-sm",children:T.name})]}),e.jsxs(K,{variant:((F=T.results)==null?void 0:F.netWorthImpact)>=0?"default":"destructive",className:"text-xs",children:[((O=T.results)==null?void 0:O.netWorthImpact)>=0?"+":"",D(((q=T.results)==null?void 0:q.netWorthImpact)||0)]})]}),e.jsx(Ce,{className:"text-xs line-clamp-2",children:T.description})]}),e.jsxs(Q,{className:"pt-0",children:[e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Risk:"}),e.jsxs(K,{variant:"outline",className:G("text-xs",w(((P=T.results)==null?void 0:P.riskScore)||0)),children:[(A=T.results)==null?void 0:A.riskScore,"/10"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Probability:"}),e.jsxs("span",{children:[($=T.results)==null?void 0:$.probability,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{children:new Date(T.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",onClick:M=>{M.stopPropagation(),o(T),d("timeline")},children:[e.jsx(ls,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsx(_,{variant:"outline",size:"sm",onClick:M=>{M.stopPropagation(),f(T)},children:e.jsx(xa,{className:"h-3 w-3"})}),e.jsx(_,{variant:"outline",size:"sm",onClick:M=>{M.stopPropagation(),k(T.id)},children:e.jsx(ft,{className:"h-3 w-3"})})]})]})]},T.id)})})}),e.jsx(Le,{value:"timeline",children:a?e.jsx(DS,{scenario:a}):e.jsx(L,{children:e.jsxs(Q,{className:"text-center py-8",children:[e.jsx(Fe,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"font-medium mb-2",children:"No scenario selected"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Select a scenario from the list to view its timeline"})]})})}),e.jsx(Le,{value:"compare",children:e.jsx(TS,{scenarios:t,financialData:h})})]}),e.jsxs(L,{children:[e.jsx(re,{children:e.jsx(oe,{className:"text-sm",children:"Quick Actions"})}),e.jsx(Q,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(_,{variant:"outline",className:"flex-col h-auto p-4",children:[e.jsx(de,{className:"h-6 w-6 mb-2 text-green-600"}),e.jsx("span",{className:"text-xs",children:"Salary Increase"})]}),e.jsxs(_,{variant:"outline",className:"flex-col h-auto p-4",children:[e.jsx(Mt,{className:"h-6 w-6 mb-2 text-orange-600"}),e.jsx("span",{className:"text-xs",children:"Debt Payoff"})]}),e.jsxs(_,{variant:"outline",className:"flex-col h-auto p-4",children:[e.jsx(It,{className:"h-6 w-6 mb-2 text-blue-600"}),e.jsx("span",{className:"text-xs",children:"Investment"})]}),e.jsxs(_,{variant:"outline",className:"flex-col h-auto p-4",children:[e.jsx(je,{className:"h-6 w-6 mb-2 text-purple-600"}),e.jsx("span",{className:"text-xs",children:"Goal Planning"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(L,{children:e.jsxs(Q,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(T=>{var F;return((F=T.results)==null?void 0:F.netWorthImpact)>0}).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Positive Scenarios"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t.filter(T=>{var F;return(((F=T.results)==null?void 0:F.riskScore)||0)>6}).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"High Risk"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Scenarios"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[Math.max(...t.map(T=>{var F;return((F=T.results)==null?void 0:F.netWorthImpact)||0}))>0?"+":"",D(Math.max(...t.map(T=>{var F;return((F=T.results)==null?void 0:F.netWorthImpact)||0})))]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Best Impact"})]})})]})]})}class MS{async analyzeScenarios(t){const a=[],n=this.groupScenariosByType(t);return a.push(...this.analyzeSavingsScenarios(n.savings)),a.push(...this.analyzeInvestmentScenarios(n.investment)),a.push(...this.analyzeLoanScenarios(n.loan)),a.push(...this.analyzeRetirementScenarios(n.retirement)),a.push(...this.analyzeWhatIfScenarios(n["what-if"])),a.push(...this.generateCrossScenarioInsights(t)),a.sort((r,i)=>{const l={high:3,medium:2,low:1};return l[i.severity]!==l[r.severity]?l[i.severity]-l[r.severity]:i.confidence-r.confidence})}async calculateFinancialHealth(t){const a={savings:this.calculateSavingsHealth(t),investment:this.calculateInvestmentHealth(t),debt:this.calculateDebtHealth(t),retirement:this.calculateRetirementHealth(t),risk:this.calculateRiskHealth(t)},n=Math.round((a.savings+a.investment+a.debt+a.retirement+a.risk)/5),r=this.generateHealthRecommendations(a,t),i=this.determineRiskLevel(a.risk);return{overall:n,categories:a,recommendations:r,riskLevel:i}}async generateRecommendations(t){const a=await this.analyzeScenarios(t),n=await this.calculateFinancialHealth(t),r=[];return a.filter(i=>i.severity==="high").forEach(i=>{r.push(`${i.title}: ${i.description}`)}),n.overall<60&&r.push("Consider focusing on improving your overall financial health by addressing key areas identified in your scenarios."),a.filter(i=>i.type==="opportunity").forEach(i=>{r.push(`Opportunity: ${i.description}`)}),r.slice(0,5)}groupScenariosByType(t){return t.reduce((a,n)=>(a[n.type]||(a[n.type]=[]),a[n.type].push(n),a),{})}analyzeSavingsScenarios(t){const a=[];return t.forEach(n=>{const r=n.data;if(r.monthlyContribution&&r.targetAmount){const i=r.timeframe,l=(r.targetAmount-r.currentSavings)/i;r.monthlyContribution<l&&a.push({id:`savings-${n.id}-1`,type:"warning",title:"Insufficient Savings Rate",description:`Your current savings rate may not reach your goal of $${r.targetAmount} within ${i} months. Consider increasing monthly contributions.`,severity:"medium",category:"savings",action:`Increase monthly savings by $${(l-r.monthlyContribution).toFixed(0)}`,impact:"Goal achievement timeline",confidence:.85,relatedScenarios:[n.id]})}r.targetAmount&&r.currentSavings&&r.currentSavings/r.targetAmount*100<25&&n.name.toLowerCase().includes("emergency")&&a.push({id:`savings-${n.id}-2`,type:"warning",title:"Low Emergency Fund Progress",description:"Your emergency fund is less than 25% funded. Consider prioritizing this goal for financial security.",severity:"high",category:"savings",action:"Increase emergency fund contributions",impact:"Financial security and risk mitigation",confidence:.9,relatedScenarios:[n.id]})}),a}analyzeInvestmentScenarios(t){const a=[];return t.forEach(n=>{const r=n.data;r.annualReturn&&r.investmentPeriod&&(r.annualReturn>12&&a.push({id:`investment-${n.id}-1`,type:"warning",title:"High Return Expectations",description:`Your expected annual return of ${r.annualReturn}% may be optimistic. Consider more conservative projections.`,severity:"medium",category:"risk",action:"Review return assumptions",impact:"Realistic planning",confidence:.75,relatedScenarios:[n.id]}),r.annualReturn<4&&r.investmentPeriod>10&&a.push({id:`investment-${n.id}-2`,type:"opportunity",title:"Conservative Investment Strategy",description:"Consider exploring higher-return investment options for long-term growth.",severity:"low",category:"investment",action:"Research diversified investment portfolios",impact:"Potential growth improvement",confidence:.7,relatedScenarios:[n.id]}))}),a}analyzeLoanScenarios(t){const a=[];return t.forEach(n=>{const r=n.data;r.extraPayments&&r.extraPayments>0&&a.push({id:`loan-${n.id}-1`,type:"optimization",title:"Debt Acceleration Strategy",description:"Your extra payment strategy can significantly reduce interest costs and payoff time.",severity:"medium",category:"debt",action:"Continue accelerated payoff strategy",impact:"Interest savings and faster debt freedom",confidence:.85,relatedScenarios:[n.id]}),r.interestRate&&r.interestRate>8&&a.push({id:`loan-${n.id}-2`,type:"warning",title:"High-Interest Debt",description:`Consider prioritizing payoff of this ${r.interestRate}% interest debt.`,severity:"high",category:"debt",action:"Explore refinancing options",impact:"Interest cost reduction",confidence:.9,relatedScenarios:[n.id]})}),a}analyzeRetirementScenarios(t){const a=[];return t.forEach(n=>{const r=n.data;r.currentSavings&&r.desiredIncome&&r.currentSavings*.04<r.desiredIncome*.7&&a.push({id:`retirement-${n.id}-1`,type:"warning",title:"Retirement Income Gap",description:"Your current savings may not support your desired retirement lifestyle.",severity:"high",category:"retirement",action:"Increase retirement contributions or adjust expectations",impact:"Retirement security",confidence:.8,relatedScenarios:[n.id]}),r.currentAge&&r.retirementAge&&r.retirementAge-r.currentAge<10&&r.currentSavings<5e5&&a.push({id:`retirement-${n.id}-2`,type:"warning",title:"Approaching Retirement with Limited Savings",description:"Consider aggressive savings strategy or delayed retirement.",severity:"high",category:"retirement",action:"Maximize retirement contributions",impact:"Retirement readiness",confidence:.85,relatedScenarios:[n.id]})}),a}analyzeWhatIfScenarios(t){const a=[];return t.forEach(n=>{a.push({id:`whatif-${n.id}-1`,type:"optimization",title:"Scenario Testing Active",description:"You are actively testing financial scenarios - great practice for informed decision making.",severity:"low",category:"risk",confidence:.9,relatedScenarios:[n.id]})}),a}generateCrossScenarioInsights(t){const a=[],n=t.filter(o=>o.type==="loan").reduce((o,c)=>o+(c.data.loanAmount||0),0),r=t.filter(o=>o.type==="savings").reduce((o,c)=>o+(c.data.currentSavings||0),0),i=t.filter(o=>o.type==="investment").reduce((o,c)=>o+(c.data.initialInvestment||0),0);n>0&&r+i>0&&n/(r+i)>.5&&a.push({id:"cross-1",type:"warning",title:"High Debt-to-Asset Ratio",description:"Your total debt exceeds 50% of your liquid assets. Consider debt reduction strategies.",severity:"high",category:"debt",confidence:.8});const l=t.filter(o=>o.type==="savings").reduce((o,c)=>o+(c.data.monthlyContribution||0),0);return l>0&&a.push({id:"cross-2",type:"optimization",title:"Active Savings Strategy",description:`You are saving $${l} monthly across your goals - excellent financial habit.`,severity:"low",category:"savings",confidence:.9}),a}calculateSavingsHealth(t){const a=t.filter(r=>r.type==="savings");if(a.length===0)return 50;let n=0;return a.forEach(r=>{const i=r.data;if(i.currentSavings&&i.targetAmount){const l=i.currentSavings/i.targetAmount*100;n+=Math.min(l,100)}}),Math.round(n/a.length)}calculateInvestmentHealth(t){const a=t.filter(r=>r.type==="investment");if(a.length===0)return 50;let n=0;return a.forEach(r=>{const i=r.data;if(i.investmentPeriod&&i.annualReturn){const l=Math.min(i.investmentPeriod/10*20,40),o=Math.min((i.annualReturn-2)*5,30),c=i.monthlyContribution>0?30:0;n+=l+o+c}}),Math.round(n/a.length)}calculateDebtHealth(t){const a=t.filter(r=>r.type==="loan");if(a.length===0)return 75;let n=0;return a.forEach(r=>{const i=r.data;let l=100;i.interestRate>10?l-=30:i.interestRate>6&&(l-=15),i.extraPayments&&i.extraPayments>0&&(l+=10),n+=Math.max(0,l)}),Math.round(n/a.length)}calculateRetirementHealth(t){const a=t.filter(r=>r.type==="retirement");if(a.length===0)return 40;let n=0;return a.forEach(r=>{const i=r.data;if(i.currentSavings&&i.desiredIncome){const l=i.currentSavings/(i.desiredIncome*25);n+=Math.min(l*100,100)}}),Math.round(n/a.length)}calculateRiskHealth(t){let a=70;const n=t.filter(l=>l.type==="savings").length>0,r=t.filter(l=>l.type==="investment").length>0,i=t.filter(l=>l.type==="retirement").length>0;return n&&r&&i?a+=15:n&&r||n&&i?a+=10:(n||r||i)&&(a+=5),t.forEach(l=>{const o=l.data;o.annualReturn&&o.annualReturn>15&&(a-=10),o.interestRate&&o.interestRate>12&&(a-=5)}),Math.max(0,Math.min(100,a))}generateHealthRecommendations(t,a){const n=[];return t.savings<60&&n.push("Focus on building your emergency fund and short-term savings goals."),t.investment<60&&n.push("Consider developing a long-term investment strategy with regular contributions."),t.debt<60&&n.push("Prioritize paying down high-interest debt to improve your financial health."),t.retirement<60&&n.push("Increase retirement contributions or consider working longer to improve retirement readiness."),t.risk<60&&n.push("Review your financial assumptions and consider more conservative planning approaches."),a.length===0&&n.push("Start creating financial scenarios to get personalized insights and recommendations."),n}determineRiskLevel(t){return t>=80?"low":t>=60?"moderate":"high"}}const gc=new MS;class PS{constructor(){Ca(this,"STORAGE_KEY","moneylens-scenarios");Ca(this,"EXPORT_VERSION","1.0.0")}async getScenarios(){try{const t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t).scenarios.map(n=>({...n,createdAt:new Date(n.createdAt),updatedAt:new Date(n.updatedAt)})):[]}catch(t){return console.error("Error loading scenarios:",t),[]}}async saveScenario(t){try{const a=await this.getScenarios(),n={...t,id:this.generateId(),createdAt:new Date,updatedAt:new Date};return a.push(n),await this.saveScenarios(a),n}catch(a){throw console.error("Error saving scenario:",a),a}}async updateScenario(t,a){try{const n=await this.getScenarios(),r=n.findIndex(i=>i.id===t);return r===-1?null:(n[r]={...n[r],...a,updatedAt:new Date},await this.saveScenarios(n),n[r])}catch(n){throw console.error("Error updating scenario:",n),n}}async deleteScenario(t){try{const a=await this.getScenarios(),n=a.filter(r=>r.id!==t);return n.length===a.length?!1:(await this.saveScenarios(n),!0)}catch(a){throw console.error("Error deleting scenario:",a),a}}async getScenariosByType(t){return(await this.getScenarios()).filter(n=>n.type===t)}async getFavoriteScenarios(){return(await this.getScenarios()).filter(a=>a.isFavorite)}async toggleFavorite(t){const a=await this.getScenario(t);return a?this.updateScenario(t,{isFavorite:!a.isFavorite}):null}async getScenario(t){return(await this.getScenarios()).find(n=>n.id===t)||null}async exportScenarios(){const t=await this.getScenarios(),a={version:this.EXPORT_VERSION,exportDate:new Date,scenarios:t,metadata:{appVersion:"2.4.0",exportType:"full"}};return JSON.stringify(a,null,2)}async importScenarios(t){const a={success:!1,importedCount:0,errors:[],warnings:[]};try{const n=JSON.parse(t);n.version!==this.EXPORT_VERSION&&a.warnings.push(`Export version ${n.version} may not be fully compatible with current version ${this.EXPORT_VERSION}`);const r=await this.getScenarios(),i=[];for(const l of n.scenarios){if(r.find(h=>h.name===l.name&&h.type===l.type)){a.warnings.push(`Skipping duplicate scenario: ${l.name}`);continue}const c={...l,id:this.generateId(),createdAt:new Date,updatedAt:new Date};i.push(c)}i.length>0?(await this.saveScenarios([...r,...i]),a.importedCount=i.length,a.success=!0):(a.warnings.push("No new scenarios to import"),a.success=!0)}catch(n){a.errors.push(`Invalid import file: ${n instanceof Error?n.message:"Unknown error"}`)}return a}async clearAllScenarios(){try{localStorage.removeItem(this.STORAGE_KEY)}catch(t){throw console.error("Error clearing scenarios:",t),t}}async getStatistics(){const t=await this.getScenarios();return{total:t.length,byType:{loan:t.filter(a=>a.type==="loan").length,investment:t.filter(a=>a.type==="investment").length,retirement:t.filter(a=>a.type==="retirement").length,savings:t.filter(a=>a.type==="savings").length,"what-if":t.filter(a=>a.type==="what-if").length},favorites:t.filter(a=>a.isFavorite).length,lastUpdated:t.length>0?new Date(Math.max(...t.map(a=>a.updatedAt.getTime()))):null}}async saveScenarios(t){const a={scenarios:t,categories:[...new Set(t.map(n=>n.type))],tags:[...new Set(t.flatMap(n=>n.tags||[]))]};localStorage.setItem(this.STORAGE_KEY,JSON.stringify(a))}generateId(){return`scenario_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}const AS=new PS;function RS({className:s}){const[t,a]=u.useState([]),[n,r]=u.useState(null),[i,l]=u.useState([]),[o,c]=u.useState(!0),[h,x]=u.useState("overview");u.useEffect(()=>{d()},[]);const d=async()=>{try{c(!0);const v=await AS.getScenarios();if(l(v),v.length>0){const N=await gc.analyzeScenarios(v),f=await gc.calculateFinancialHealth(v);a(N),r(f)}}catch(v){console.error("Error loading AI insights:",v),td({title:"Error",description:"Failed to load AI insights",variant:"destructive"})}finally{c(!1)}},m=v=>{switch(v){case"warning":return e.jsx(Ze,{className:"h-5 w-5"});case"opportunity":return e.jsx(gn,{className:"h-5 w-5"});case"optimization":return e.jsx(Be,{className:"h-5 w-5"});case"recommendation":return e.jsx(pn,{className:"h-5 w-5"});default:return e.jsx(Yt,{className:"h-5 w-5"})}},g=v=>{switch(v){case"warning":return"text-red-600";case"opportunity":return"text-green-600";case"optimization":return"text-blue-600";case"recommendation":return"text-yellow-600";default:return"text-gray-600"}},y=v=>{switch(v){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},p=v=>{switch(v){case"savings":return e.jsx(It,{className:"h-4 w-4"});case"investment":return e.jsx(de,{className:"h-4 w-4"});case"debt":return e.jsx(An,{className:"h-4 w-4"});case"retirement":return e.jsx(Do,{className:"h-4 w-4"});case"risk":return e.jsx(Lt,{className:"h-4 w-4"});default:return e.jsx(je,{className:"h-4 w-4"})}},j=v=>{switch(v){case"low":return"text-green-600 bg-green-100";case"moderate":return"text-yellow-600 bg-yellow-100";case"high":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return o?e.jsx("div",{className:G("space-y-6",s),children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(v=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},v))})]})}):i.length===0?e.jsxs("div",{className:G("text-center py-12",s),children:[e.jsx(Yt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Scenarios to Analyze"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create some financial scenarios to get AI-powered insights and recommendations."}),e.jsxs(_,{onClick:()=>window.location.href="/tools",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Go to Tools Hub"]})]}):e.jsxs("div",{className:G("space-y-6",s),children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Yt,{className:"h-6 w-6"}),"AI Financial Insights"]}),e.jsx("p",{className:"text-muted-foreground",children:"Intelligent analysis of your financial scenarios"})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:d,children:[e.jsx(Ct,{className:"h-4 w-4 mr-2"}),"Refresh Insights"]})]}),e.jsxs("div",{className:"flex border-b",children:[e.jsx("button",{className:G("px-4 py-2 text-sm font-medium border-b-2 transition-colors",h==="overview"?"border-blue-600 text-blue-600":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>x("overview"),children:"Overview"}),e.jsxs("button",{className:G("px-4 py-2 text-sm font-medium border-b-2 transition-colors",h==="insights"?"border-blue-600 text-blue-600":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>x("insights"),children:["Insights (",t.length,")"]}),e.jsx("button",{className:G("px-4 py-2 text-sm font-medium border-b-2 transition-colors",h==="recommendations"?"border-blue-600 text-blue-600":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>x("recommendations"),children:"Recommendations"})]}),h==="overview"&&n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(L,{children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"h-5 w-5"}),"Financial Health Score"]}),e.jsx(Ce,{children:"Overall assessment of your financial situation based on your scenarios"})]}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-4xl font-bold mb-2",children:[n.overall,"/100"]}),e.jsxs(K,{className:j(n.riskLevel),children:[n.riskLevel.toUpperCase()," RISK"]})]}),e.jsx(Te,{value:n.overall,className:"h-3"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(n.categories).map(([v,N])=>e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[p(v),e.jsx("span",{className:"text-sm font-medium capitalize",children:v})]}),e.jsx("div",{className:"text-lg font-bold",children:N}),e.jsx(Te,{value:N,className:"h-2"})]},v))})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx(de,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:t.filter(v=>v.type==="opportunity").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Opportunities"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx(Ze,{className:"h-8 w-8 text-red-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:t.filter(v=>v.type==="warning").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Warnings"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx(Be,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:t.filter(v=>v.type==="optimization").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Optimizations"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx(Fe,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:i.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Scenarios Analyzed"})]})})]}),e.jsxs(L,{children:[e.jsxs(re,{children:[e.jsx(oe,{children:"Top Recommendations"}),e.jsx(Ce,{children:"Based on your financial scenarios and AI analysis"})]}),e.jsx(Q,{children:e.jsx("div",{className:"space-y-3",children:n.recommendations.slice(0,3).map((v,N)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[e.jsx($i,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsx("div",{children:e.jsx("div",{className:"font-medium",children:v})})]},N))})})]})]}),h==="insights"&&e.jsx("div",{className:"space-y-4",children:t.length===0?e.jsx(L,{children:e.jsxs(Q,{className:"p-8 text-center",children:[e.jsx(gn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Insights Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Create more scenarios to generate AI-powered insights."})]})}):t.map(v=>e.jsxs(L,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(re,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:G("p-2 rounded-full",g(v.type)),children:m(v.type)}),e.jsxs("div",{children:[e.jsx(oe,{className:"text-lg",children:v.title}),e.jsx(Ce,{className:"mt-1",children:v.description})]})]}),e.jsx(K,{className:y(v.severity),children:v.severity.toUpperCase()})]})}),e.jsx(Q,{children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(K,{variant:"secondary",className:"capitalize",children:[p(v.category),v.category]}),e.jsxs(K,{variant:"outline",children:["Confidence: ",(v.confidence*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[v.action&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"h-3 w-3"}),v.action]}),v.impact&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(de,{className:"h-3 w-3"}),v.impact]})]})]})})]},v.id))}),h==="recommendations"&&e.jsx("div",{className:"space-y-4",children:(n==null?void 0:n.recommendations.length)===0?e.jsx(L,{children:e.jsxs(Q,{className:"p-8 text-center",children:[e.jsx(pn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Recommendations Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Create more diverse scenarios to get personalized recommendations."})]})}):n==null?void 0:n.recommendations.map((v,N)=>e.jsx(L,{children:e.jsx(Q,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx($i,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-semibold mb-2",children:["Recommendation #",N+1]}),e.jsx("p",{className:"text-muted-foreground",children:v})]}),e.jsxs(K,{variant:"outline",className:"self-start",children:["Priority ",N+1]})]})})},N))})]})}function IS({className:s}){const[t,a]=u.useState(25e4),[n,r]=u.useState(4.5),[i,l]=u.useState(30),[o,c]=u.useState(5e4),[h,x]=u.useState(3e3),[d,m]=u.useState(1200),[g,y]=u.useState(100),[p,j]=u.useState(0),[v,N]=u.useState("fixed"),S=(()=>{const P=t-o,A=n/100/12,$=i*12,M=P*(A*Math.pow(1+A,$))/(Math.pow(1+A,$)-1),I=M*$-P;let C=P,B=0,E=0;const V=[];for(;C>0&&E<$*2;){const Z=C*A;let ee=M-Z;C<M+p?ee=C:ee+=p;const ge=ee+Z;if(C-=ee,B+=ge,E++,V.push({month:E,payment:ge,principal:ee,interest:Z,balance:Math.max(0,C)}),C<=0)break}const U=M*$-B,H=new Date;return H.setMonth(H.getMonth()+E),{monthlyPayment:M+(h+d+g)/12,totalPayment:B+o,totalInterest:I,interestSavings:U,payoffDate:H,amortizationSchedule:V}})(),D=S.monthlyPayment,w=S.totalPayment,R=S.totalInterest,b=i*12-S.amortizationSchedule.length,k=b/12,T=P=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(P),F=P=>P.toLocaleDateString("en-US",{year:"numeric",month:"long"}),O=P=>P>0?"text-green-600":"text-red-600";return e.jsxs("div",{className:G("space-y-6",s),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Loan Calculator"}),e.jsx("p",{className:"text-muted-foreground",children:"Calculate mortgage payments, interest costs, and payoff strategies"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(zr,{className:"h-4 w-4 mr-2"}),"Share"]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(L,{className:"lg:col-span-1",children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-5 w-5"}),"Loan Details"]}),e.jsx(Ce,{children:"Enter your loan information to calculate payments"})]}),e.jsxs(Q,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"loanAmount",children:"Loan Amount"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ht,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"loanAmount",type:"number",value:t,onChange:P=>a(Number(P.target.value)),className:"flex-1"})]}),e.jsx(ct,{value:[t],onValueChange:([P])=>a(P),max:1e6,step:1e3,className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"interestRate",children:"Interest Rate (%)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ko,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"interestRate",type:"number",step:"0.01",value:n,onChange:P=>r(Number(P.target.value)),className:"flex-1"})]}),e.jsx(ct,{value:[n],onValueChange:([P])=>r(P),max:10,step:.1,className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"loanTerm",children:"Loan Term (Years)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"loanTerm",type:"number",value:i,onChange:P=>l(Number(P.target.value)),className:"flex-1"})]}),e.jsx(ct,{value:[i],onValueChange:([P])=>l(P),max:40,step:1,className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"downPayment",children:"Down Payment"}),e.jsx(ae,{id:"downPayment",type:"number",value:o,onChange:P=>c(Number(P.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"extraPayment",children:"Extra Monthly Payment"}),e.jsx(ae,{id:"extraPayment",type:"number",value:p,onChange:P=>j(Number(P.target.value))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"propertyTax",children:"Property Tax (Yearly)"}),e.jsx(ae,{id:"propertyTax",type:"number",value:h,onChange:P=>x(Number(P.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"homeInsurance",children:"Home Insurance (Yearly)"}),e.jsx(ae,{id:"homeInsurance",type:"number",value:d,onChange:P=>m(Number(P.target.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"pmi",children:"PMI (Monthly)"}),e.jsx(ae,{id:"pmi",type:"number",value:g,onChange:P=>y(Number(P.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Loan Type"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:v==="fixed"?"default":"outline",onClick:()=>N("fixed"),className:"flex-1",children:"Fixed Rate"}),e.jsx(_,{variant:v==="variable"?"default":"outline",onClick:()=>N("variable"),className:"flex-1",children:"Variable Rate"})]})]})]})]}),e.jsxs(L,{className:"lg:col-span-2",children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5"}),"Calculation Results"]}),e.jsx(Ce,{children:"Detailed breakdown of your loan payments and costs"})]}),e.jsx(Q,{children:e.jsxs(Xt,{defaultValue:"summary",className:"space-y-4",children:[e.jsxs(Bt,{className:"grid w-full grid-cols-3",children:[e.jsx($e,{value:"summary",children:"Summary"}),e.jsx($e,{value:"schedule",children:"Amortization"}),e.jsx($e,{value:"comparison",children:"Comparison"})]}),e.jsxs(Le,{value:"summary",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:T(D)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Monthly Payment"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:T(w)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Cost"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:T(R)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Interest Paid"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx("div",{className:G("text-2xl font-bold",O(S.interestSavings)),children:T(S.interestSavings)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Interest Savings"})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"Payoff Timeline"})}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Original Payoff:"}),e.jsxs("span",{children:[i," years"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"With Extra Payments:"}),e.jsxs("span",{children:[(S.amortizationSchedule.length/12).toFixed(1)," years"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Time Saved:"}),e.jsxs(K,{variant:k>0?"default":"secondary",children:[k.toFixed(1)," years"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Payoff Date:"}),e.jsx("span",{children:F(S.payoffDate)})]})]})})]}),e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"Cost Breakdown"})}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Principal:"}),e.jsx("span",{children:T(t-o)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Interest:"}),e.jsx("span",{children:T(R)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Down Payment:"}),e.jsx("span",{children:T(o)})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total Cost:"}),e.jsx("span",{children:T(w)})]})]})})]})]}),p>0&&e.jsxs(L,{className:"bg-green-50 border-green-200",children:[e.jsx(re,{children:e.jsxs(oe,{className:"text-green-800 text-sm flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),"Extra Payment Impact"]})}),e.jsx(Q,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-green-800",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold",children:[k.toFixed(1)," years"]}),e.jsx("div",{className:"text-xs",children:"Time Saved"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:T(S.interestSavings)}),e.jsx("div",{className:"text-xs",children:"Interest Saved"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold",children:[b," months"]}),e.jsx("div",{className:"text-xs",children:"Payments Saved"})]})]})})]})]}),e.jsx(Le,{value:"schedule",children:e.jsxs("div",{className:"max-h-96 overflow-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"sticky top-0 bg-background",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Month"}),e.jsx("th",{className:"text-right p-2",children:"Payment"}),e.jsx("th",{className:"text-right p-2",children:"Principal"}),e.jsx("th",{className:"text-right p-2",children:"Interest"}),e.jsx("th",{className:"text-right p-2",children:"Balance"})]})}),e.jsx("tbody",{children:S.amortizationSchedule.slice(0,12).map(P=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:P.month}),e.jsx("td",{className:"text-right p-2",children:T(P.payment)}),e.jsx("td",{className:"text-right p-2",children:T(P.principal)}),e.jsx("td",{className:"text-right p-2",children:T(P.interest)}),e.jsx("td",{className:"text-right p-2",children:T(P.balance)})]},P.month))})]}),S.amortizationSchedule.length>12&&e.jsxs("div",{className:"text-center p-4 text-muted-foreground text-sm",children:["Showing first 12 months of ",S.amortizationSchedule.length," total payments"]})]})}),e.jsx(Le,{value:"comparison",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Compare different scenarios to optimize your loan strategy"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"15-Year vs 30-Year"})}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"15-Year Term:"}),e.jsxs("span",{children:[T(q(15).monthlyPayment),"/mo"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"30-Year Term:"}),e.jsxs("span",{children:[T(D),"/mo"]})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Monthly Difference:"}),e.jsx("span",{className:O(D-q(15).monthlyPayment),children:T(D-q(15).monthlyPayment)})]})]})})]}),e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"Extra Payment Impact"})}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"No Extra Payment:"}),e.jsxs("span",{children:[i," years"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["With $",p,"/mo:"]}),e.jsxs("span",{children:[(S.amortizationSchedule.length/12).toFixed(1)," years"]})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Time Saved:"}),e.jsxs(K,{variant:k>0?"default":"secondary",children:[k.toFixed(1)," years"]})]})]})})]})]}),e.jsxs(_,{variant:"outline",className:"w-full",onClick:()=>{console.log("Open What-If Mode for loan comparison")},children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Create Detailed Comparison in What-If Mode"]})]})})]})})]})]})]});function q(P){const A=t-o,$=n/100/12,M=P*12;return{monthlyPayment:A*($*Math.pow(1+$,M))/(Math.pow(1+$,M)-1)+(h+d+g)/12}}}function OS({className:s}){const[t,a]=u.useState(1e4),[n,r]=u.useState(500),[i,l]=u.useState(7),[o,c]=u.useState(30),[h,x]=u.useState(2.5),[d,m]=u.useState(15),[g,y]=u.useState("lump-sum"),j=(()=>{const q=i/100/12,P=o*12;let A=t;const $=[],M=[];let z=t;for(let C=1;C<=P;C++)if((C>1||g==="dca")&&(A+=n,z+=n),A*=1+q,C%12===0){const B=C/12,E=A-z;$.push({year:B,value:A,contributions:z,interest:E}),(B===5||B===10||B===20||B===o)&&M.push({year:B,value:A,milestone:`${B}-Year Mark`});const V=[1e5,25e4,5e5,1e6,2e6];for(const U of V)A>=U&&!M.some(H=>H.value>=U)&&M.push({year:B,value:A,milestone:`$${(U/1e3).toFixed(0)}k+`})}const I=A-z;return{futureValue:A,totalContributions:z,totalInterest:I,growthChart:$,milestones:M.slice(0,8)}})(),v=j.futureValue,N=j.totalContributions,f=j.totalInterest,S=v/Math.pow(1+h/100,o),D=f/Math.pow(1+h/100,o),w=v-f*(d/100),R=f*(d/100),b=q=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(q),k=q=>`${q.toFixed(1)}%`,T=q=>q>0?"text-green-600":"text-red-600";return e.jsxs("div",{className:G("space-y-6",s),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Investment Calculator"}),e.jsx("p",{className:"text-muted-foreground",children:"Project investment growth with compound interest and contributions"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(zr,{className:"h-4 w-4 mr-2"}),"Share"]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(L,{className:"lg:col-span-1",children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5"}),"Investment Details"]}),e.jsx(Ce,{children:"Configure your investment strategy and parameters"})]}),e.jsxs(Q,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"initialInvestment",children:"Initial Investment"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ht,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"initialInvestment",type:"number",value:t,onChange:q=>a(Number(q.target.value)),className:"flex-1"})]}),e.jsx(ct,{value:[t],onValueChange:([q])=>a(q),max:1e5,step:1e3,className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"monthlyContribution",children:"Monthly Contribution"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"monthlyContribution",type:"number",value:n,onChange:q=>r(Number(q.target.value)),className:"flex-1"})]}),e.jsx(ct,{value:[n],onValueChange:([q])=>r(q),max:5e3,step:100,className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"annualReturn",children:"Expected Annual Return (%)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ko,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"annualReturn",type:"number",step:"0.1",value:i,onChange:q=>l(Number(q.target.value)),className:"flex-1"})]}),e.jsx(ct,{value:[i],onValueChange:([q])=>l(q),max:20,step:.5,className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"investmentYears",children:"Investment Period (Years)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"investmentYears",type:"number",value:o,onChange:q=>c(Number(q.target.value)),className:"flex-1"})]}),e.jsx(ct,{value:[o],onValueChange:([q])=>c(q),max:50,step:1,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"inflationRate",children:"Inflation Rate (%)"}),e.jsx(ae,{id:"inflationRate",type:"number",step:"0.1",value:h,onChange:q=>x(Number(q.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"taxRate",children:"Tax Rate (%)"}),e.jsx(ae,{id:"taxRate",type:"number",step:"0.1",value:d,onChange:q=>m(Number(q.target.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Investment Strategy"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:g==="lump-sum"?"default":"outline",onClick:()=>y("lump-sum"),className:"flex-1",children:"Lump Sum"}),e.jsx(_,{variant:g==="dca"?"default":"outline",onClick:()=>y("dca"),className:"flex-1",children:"DCA"})]})]})]})]}),e.jsxs(L,{className:"lg:col-span-2",children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5"}),"Investment Projection"]}),e.jsx(Ce,{children:"Detailed breakdown of your investment growth and milestones"})]}),e.jsx(Q,{children:e.jsxs(Xt,{defaultValue:"summary",className:"space-y-4",children:[e.jsxs(Bt,{className:"grid w-full grid-cols-3",children:[e.jsx($e,{value:"summary",children:"Summary"}),e.jsx($e,{value:"growth",children:"Growth Chart"}),e.jsx($e,{value:"scenarios",children:"Scenarios"})]}),e.jsxs(Le,{value:"summary",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:b(v)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Future Value"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:b(N)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Contributions"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:b(f)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Investment Growth"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:k(f/N*100)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Return on Investment"})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"Adjusted Values"})}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Inflation Adjusted:"}),e.jsx("span",{children:b(S)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"After Tax Value:"}),e.jsx("span",{children:b(w)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Taxes Paid:"}),e.jsx("span",{children:b(R)})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Real Growth:"}),e.jsx("span",{className:T(D),children:b(D)})]})]})})]}),e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"Investment Milestones"})}),e.jsx(Q,{children:e.jsx("div",{className:"space-y-3 text-sm max-h-48 overflow-auto",children:j.milestones.map(q=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:q.milestone}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:["Year ",q.year]})]}),e.jsx(K,{variant:"outline",children:b(q.value)})]},q.year))})})]})]}),e.jsxs(L,{className:"bg-blue-50 border-blue-200",children:[e.jsx(re,{children:e.jsxs(oe,{className:"text-blue-800 text-sm flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Compound Interest Power"]})}),e.jsx(Q,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-blue-800",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold",children:[o," years"]}),e.jsx("div",{className:"text-xs",children:"Time Horizon"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:k(i)}),e.jsx("div",{className:"text-xs",children:"Annual Return"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:b(n*12*o)}),e.jsx("div",{className:"text-xs",children:"Total Contributions"})]})]})})]})]}),e.jsx(Le,{value:"growth",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"max-h-96 overflow-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"sticky top-0 bg-background",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Year"}),e.jsx("th",{className:"text-right p-2",children:"Portfolio Value"}),e.jsx("th",{className:"text-right p-2",children:"Contributions"}),e.jsx("th",{className:"text-right p-2",children:"Growth"}),e.jsx("th",{className:"text-right p-2",children:"ROI"})]})}),e.jsx("tbody",{children:j.growthChart.slice(0,15).map(q=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:q.year}),e.jsx("td",{className:"text-right p-2",children:b(q.value)}),e.jsx("td",{className:"text-right p-2",children:b(q.contributions)}),e.jsx("td",{className:"text-right p-2",children:b(q.interest)}),e.jsx("td",{className:"text-right p-2",children:k(q.interest/q.contributions*100)})]},q.year))})]}),j.growthChart.length>15&&e.jsxs("div",{className:"text-center p-4 text-muted-foreground text-sm",children:["Showing first 15 years of ",j.growthChart.length," total years"]})]})})}),e.jsx(Le,{value:"scenarios",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Compare different investment scenarios and strategies"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"Conservative vs Aggressive"})}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"5% Return:"}),e.jsx("span",{children:b(F(5).futureValue)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"7% Return:"}),e.jsx("span",{children:b(v)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"10% Return:"}),e.jsx("span",{children:b(F(10).futureValue)})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Difference (5% vs 10%):"}),e.jsx("span",{className:T(F(10).futureValue-F(5).futureValue),children:b(F(10).futureValue-F(5).futureValue)})]})]})})]}),e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"Contribution Impact"})}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"$250/mo:"}),e.jsx("span",{children:b(O(250).futureValue)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"$500/mo:"}),e.jsx("span",{children:b(v)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"$1000/mo:"}),e.jsx("span",{children:b(O(1e3).futureValue)})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Difference:"}),e.jsx("span",{className:T(O(1e3).futureValue-O(250).futureValue),children:b(O(1e3).futureValue-O(250).futureValue)})]})]})})]})]}),e.jsxs(_,{variant:"outline",className:"w-full",onClick:()=>{console.log("Open What-If Mode for investment comparison")},children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Create Detailed Investment Scenarios in What-If Mode"]})]})})]})})]})]})]});function F(q){const P=q/100/12,A=o*12;let $=t,M=t;for(let z=1;z<=A;z++)(z>1||g==="dca")&&($+=n,M+=n),$*=1+P;return{futureValue:$,totalContributions:M}}function O(q){const P=i/100/12,A=o*12;let $=t,M=t;for(let z=1;z<=A;z++)(z>1||g==="dca")&&($+=q,M+=q),$*=1+P;return{futureValue:$,totalContributions:M}}}function FS({className:s}){const[t,a]=u.useState(35),[n,r]=u.useState(65),[i,l]=u.useState(85),[o,c]=u.useState(5e4),[h,x]=u.useState(1e4),[d,m]=u.useState(7),[g,y]=u.useState(5),[p,j]=u.useState(2.5),[v,N]=u.useState(2e4),[f,S]=u.useState(0),[D,w]=u.useState(6e4),b=(()=>{var ve,kt;const I=n-t,C=i-n;let B=o;const E=d/100/12,V=I*12;for(let Y=1;Y<=V;Y++)B*=1+E,Y%12===0&&(B+=h);const U=.04,H=B*U,Z=H/12,ee=g/100/12;let ge=B;const le=[];for(let Y=1;Y<=C;Y++){const se=H,xe=se/12;for(let be=1;be<=12;be++)ge*=1+ee,ge-=xe;const ye=n+Y;if(le.push({year:Y,age:ye,portfolioValue:Math.max(0,ge),withdrawal:se,remaining:Math.max(0,ge)}),ge<=0)break}const Oe=le.length,$t=[{age:n,value:B,milestone:"Retirement Start"},{age:n+10,value:((ve=le.find(Y=>Y.year===10))==null?void 0:ve.portfolioValue)||0,milestone:"10 Years In"},{age:i,value:((kt=le.find(Y=>Y.year===C))==null?void 0:kt.portfolioValue)||0,milestone:"Life Expectancy"}].filter(Y=>Y.value>0);return{retirementSavings:B,annualWithdrawal:H,monthlyWithdrawal:Z,yearsOfRetirement:Oe,safeWithdrawalRate:U*100,withdrawalChart:le,milestones:$t}})(),k=n-t,T=b.annualWithdrawal+v+f,F=D-T,O=F<=0,q=I=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(I),P=I=>`${I.toFixed(1)}%`,A=I=>I?"text-green-600":"text-red-600",$=I=>I?"default":"destructive";return e.jsxs("div",{className:G("space-y-6",s),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Retirement Calculator"}),e.jsx("p",{className:"text-muted-foreground",children:"Plan your retirement savings, withdrawals, and income strategy"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(zr,{className:"h-4 w-4 mr-2"}),"Share"]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(L,{className:"lg:col-span-1",children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(Do,{className:"h-5 w-5"}),"Retirement Details"]}),e.jsx(Ce,{children:"Configure your retirement timeline and savings strategy"})]}),e.jsxs(Q,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"currentAge",children:"Current Age"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"currentAge",type:"number",value:t,onChange:I=>a(Number(I.target.value)),className:"flex-1"})]}),e.jsx(ct,{value:[t],onValueChange:([I])=>a(I),max:80,step:1,className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"retirementAge",children:"Retirement Age"}),e.jsx(ae,{id:"retirementAge",type:"number",value:n,onChange:I=>r(Number(I.target.value))}),e.jsx(ct,{value:[n],onValueChange:([I])=>r(I),max:80,step:1,className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"lifeExpectancy",children:"Life Expectancy"}),e.jsx(ae,{id:"lifeExpectancy",type:"number",value:i,onChange:I=>l(Number(I.target.value))}),e.jsx(ct,{value:[i],onValueChange:([I])=>l(I),max:100,step:1,className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"currentSavings",children:"Current Savings"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ht,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"currentSavings",type:"number",value:o,onChange:I=>c(Number(I.target.value)),className:"flex-1"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"annualContribution",children:"Annual Contribution"}),e.jsx(ae,{id:"annualContribution",type:"number",value:h,onChange:I=>x(Number(I.target.value))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"preRetirementReturn",children:"Pre-Retirement Return (%)"}),e.jsx(ae,{id:"preRetirementReturn",type:"number",step:"0.1",value:d,onChange:I=>m(Number(I.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"postRetirementReturn",children:"Post-Retirement Return (%)"}),e.jsx(ae,{id:"postRetirementReturn",type:"number",step:"0.1",value:g,onChange:I=>y(Number(I.target.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"inflationRate",children:"Inflation Rate (%)"}),e.jsx(ae,{id:"inflationRate",type:"number",step:"0.1",value:p,onChange:I=>j(Number(I.target.value))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"socialSecurity",children:"Social Security (Yearly)"}),e.jsx(ae,{id:"socialSecurity",type:"number",value:v,onChange:I=>N(Number(I.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"pension",children:"Pension (Yearly)"}),e.jsx(ae,{id:"pension",type:"number",value:f,onChange:I=>S(Number(I.target.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"desiredIncome",children:"Desired Retirement Income"}),e.jsx(ae,{id:"desiredIncome",type:"number",value:D,onChange:I=>w(Number(I.target.value))})]})]})]}),e.jsxs(L,{className:"lg:col-span-2",children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5"}),"Retirement Projection"]}),e.jsx(Ce,{children:"Detailed breakdown of your retirement plan and income strategy"})]}),e.jsx(Q,{children:e.jsxs(Xt,{defaultValue:"summary",className:"space-y-4",children:[e.jsxs(Bt,{className:"grid w-full grid-cols-3",children:[e.jsx($e,{value:"summary",children:"Summary"}),e.jsx($e,{value:"withdrawal",children:"Withdrawal Plan"}),e.jsx($e,{value:"scenarios",children:"Scenarios"})]}),e.jsxs(Le,{value:"summary",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:q(b.retirementSavings)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Retirement Savings"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:q(b.annualWithdrawal)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Annual Withdrawal"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[b.yearsOfRetirement," years"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Retirement Duration"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:P(b.safeWithdrawalRate)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Withdrawal Rate"})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"Income Analysis"})}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Investment Income:"}),e.jsx("span",{children:q(b.annualWithdrawal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Social Security:"}),e.jsx("span",{children:q(v)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Pension:"}),e.jsx("span",{children:q(f)})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total Income:"}),e.jsx("span",{children:q(T)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Desired Income:"}),e.jsx("span",{children:q(D)})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Income Gap:"}),e.jsx(K,{variant:$(O),children:q(F)})]})]})})]}),e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"Timeline"})}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Years to Retirement:"}),e.jsxs("span",{children:[k," years"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Retirement Age:"}),e.jsx("span",{children:n})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Life Expectancy:"}),e.jsx("span",{children:i})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Retirement Duration:"}),e.jsxs("span",{children:[b.yearsOfRetirement," years"]})]})]})})]})]}),!O&&e.jsxs(L,{className:"bg-yellow-50 border-yellow-200",children:[e.jsx(re,{children:e.jsxs(oe,{className:"text-yellow-800 text-sm flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"}),"Action Required"]})}),e.jsx(Q,{children:e.jsxs("div",{className:"text-yellow-800 space-y-2",children:[e.jsx("p",{className:"font-medium",children:"You need to increase your savings to meet your retirement goals."}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsxs("li",{children:["• Increase annual contributions by ",q(Math.abs(F)/k)]}),e.jsxs("li",{children:["• Work ",Math.ceil(Math.abs(F)/b.annualWithdrawal)," more years"]}),e.jsxs("li",{children:["• Reduce desired retirement income by ",P(Math.abs(F)/D*100)]})]})]})})]}),e.jsxs(L,{className:"bg-blue-50 border-blue-200",children:[e.jsx(re,{children:e.jsxs(oe,{className:"text-blue-800 text-sm flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Retirement Readiness"]})}),e.jsx(Q,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-blue-800",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold",children:[k," years"]}),e.jsx("div",{className:"text-xs",children:"To Retirement"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:P(d)}),e.jsx("div",{className:"text-xs",children:"Growth Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:q(h*k)}),e.jsx("div",{className:"text-xs",children:"Future Contributions"})]})]})})]})]}),e.jsx(Le,{value:"withdrawal",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"max-h-96 overflow-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"sticky top-0 bg-background",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Year"}),e.jsx("th",{className:"text-left p-2",children:"Age"}),e.jsx("th",{className:"text-right p-2",children:"Portfolio Value"}),e.jsx("th",{className:"text-right p-2",children:"Withdrawal"}),e.jsx("th",{className:"text-right p-2",children:"Remaining"})]})}),e.jsx("tbody",{children:b.withdrawalChart.slice(0,15).map(I=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:I.year}),e.jsx("td",{className:"p-2",children:I.age}),e.jsx("td",{className:"text-right p-2",children:q(I.portfolioValue)}),e.jsx("td",{className:"text-right p-2",children:q(I.withdrawal)}),e.jsx("td",{className:"text-right p-2",children:q(I.remaining)})]},I.year))})]}),b.withdrawalChart.length>15&&e.jsxs("div",{className:"text-center p-4 text-muted-foreground text-sm",children:["Showing first 15 years of ",b.withdrawalChart.length," total years"]})]})})}),e.jsx(Le,{value:"scenarios",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Compare different retirement scenarios and strategies"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"Early vs Late Retirement"})}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Retire at 60:"}),e.jsx("span",{children:q(M(60).retirementSavings)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Retire at 65:"}),e.jsx("span",{children:q(b.retirementSavings)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Retire at 70:"}),e.jsx("span",{children:q(M(70).retirementSavings)})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Difference (60 vs 70):"}),e.jsx("span",{className:A(M(70).retirementSavings-M(60).retirementSavings>0),children:q(M(70).retirementSavings-M(60).retirementSavings)})]})]})})]}),e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"Contribution Impact"})}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"$5k/year:"}),e.jsx("span",{children:q(z(5e3).retirementSavings)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"$10k/year:"}),e.jsx("span",{children:q(b.retirementSavings)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"$20k/year:"}),e.jsx("span",{children:q(z(2e4).retirementSavings)})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Difference:"}),e.jsx("span",{className:A(z(2e4).retirementSavings-z(5e3).retirementSavings>0),children:q(z(2e4).retirementSavings-z(5e3).retirementSavings)})]})]})})]})]}),e.jsxs(_,{variant:"outline",className:"w-full",onClick:()=>{console.log("Open What-If Mode for retirement comparison")},children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Create Detailed Retirement Scenarios in What-If Mode"]})]})})]})})]})]})]});function M(I){const C=I-t;let B=o;const E=d/100/12,V=C*12;for(let U=1;U<=V;U++)B*=1+E,U%12===0&&(B+=h);return{retirementSavings:B}}function z(I){const C=n-t;let B=o;const E=d/100/12,V=C*12;for(let U=1;U<=V;U++)B*=1+E,U%12===0&&(B+=I);return{retirementSavings:B}}}function _S({className:s}){var q,P;const[t,a]=u.useState("New Car"),[n,r]=u.useState(25e3),[i,l]=u.useState(5e3),[o,c]=u.useState(500),[h,x]=u.useState(5),[d,m]=u.useState(2.5),[g,y]=u.useState(36),p=()=>{var V;const A=h/100/12;let $=i;const M=[],z=[];for(let U=1;U<=g;U++){const H=$*A;$+=H,$+=o,M.push({month:U,savings:i+o*U,interest:H,total:$});const Z=$/n*100;if(Z>=25&&!z.find(ee=>ee.milestone==="25%")&&z.push({month:U,amount:$,milestone:"25%",percentage:25}),Z>=50&&!z.find(ee=>ee.milestone==="50%")&&z.push({month:U,amount:$,milestone:"50%",percentage:50}),Z>=75&&!z.find(ee=>ee.milestone==="75%")&&z.push({month:U,amount:$,milestone:"75%",percentage:75}),Z>=100&&!z.find(ee=>ee.milestone==="100%")){z.push({month:U,amount:$,milestone:"100%",percentage:100});break}}const I=((V=M[M.length-1])==null?void 0:V.total)||i,C=i+o*g,B=I-C;let E=g;for(let U=1;U<=g;U++)if(j(U)>=n){E=U;break}return{targetAmount:n,currentSavings:i,monthlyContribution:o,timeToGoal:E,totalContributions:C,interestEarned:B,monthlyChart:M,milestones:z}},j=A=>{const $=h/100/12;let M=i;for(let z=1;z<=A;z++){const I=M*$;M+=I+o}return M},v=p(),N=v.totalContributions/n*100,f=v.timeToGoal<=g,S=v.timeToGoal,D=v.milestones.some(A=>A.milestone==="100%"),w=A=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(A),R=A=>`${A.toFixed(1)}%`,b=A=>{const $=Math.floor(A/12),M=A%12;return $===0?`${A} months`:M===0?`${$} year${$>1?"s":""}`:`${$} year${$>1?"s":""} ${M} month${M>1?"s":""}`},k=A=>A?"text-green-600":"text-red-600",T=A=>A?"default":"destructive";return e.jsxs("div",{className:G("space-y-6",s),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Savings Goal Calculator"}),e.jsx("p",{className:"text-muted-foreground",children:"Plan and track progress toward your financial goals"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(zr,{className:"h-4 w-4 mr-2"}),"Share"]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(L,{className:"lg:col-span-1",children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"}),"Goal Details"]}),e.jsx(Ce,{children:"Configure your savings goal and strategy"})]}),e.jsxs(Q,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"goalName",children:"Goal Name"}),e.jsx(ae,{id:"goalName",value:t,onChange:A=>a(A.target.value),placeholder:"e.g., New Car, Vacation, Down Payment"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"targetAmount",children:"Target Amount"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ht,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"targetAmount",type:"number",value:n,onChange:A=>r(Number(A.target.value)),className:"flex-1"})]}),e.jsx(ct,{value:[n],onValueChange:([A])=>r(A),max:1e5,step:1e3,className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"currentSavings",children:"Current Savings"}),e.jsx(ae,{id:"currentSavings",type:"number",value:i,onChange:A=>l(Number(A.target.value))}),e.jsx(ct,{value:[i],onValueChange:([A])=>l(A),max:n,step:100,className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"monthlyContribution",children:"Monthly Contribution"}),e.jsx(ae,{id:"monthlyContribution",type:"number",value:o,onChange:A=>c(Number(A.target.value))}),e.jsx(ct,{value:[o],onValueChange:([A])=>c(A),max:5e3,step:50,className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"timeframe",children:"Timeframe (Months)"}),e.jsx(ae,{id:"timeframe",type:"number",value:g,onChange:A=>y(Number(A.target.value))}),e.jsx(ct,{value:[g],onValueChange:([A])=>y(A),max:120,step:1,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"annualReturn",children:"Annual Return (%)"}),e.jsx(ae,{id:"annualReturn",type:"number",step:"0.1",value:h,onChange:A=>x(Number(A.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"inflationRate",children:"Inflation Rate (%)"}),e.jsx(ae,{id:"inflationRate",type:"number",step:"0.1",value:d,onChange:A=>m(Number(A.target.value))})]})]})]})]}),e.jsxs(L,{className:"lg:col-span-2",children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5"}),"Goal Progress"]}),e.jsx(Ce,{children:"Track your progress and see when you'll reach your goal"})]}),e.jsx(Q,{children:e.jsxs(Xt,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(Bt,{className:"grid w-full grid-cols-3",children:[e.jsx($e,{value:"overview",children:"Overview"}),e.jsx($e,{value:"timeline",children:"Timeline"}),e.jsx($e,{value:"strategies",children:"Strategies"})]}),e.jsxs(Le,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:w(v.targetAmount)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Target Amount"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:w(v.currentSavings)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Current Savings"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:b(v.timeToGoal)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Time to Goal"})]})}),e.jsx(L,{children:e.jsxs(Q,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:w(v.monthlyContribution)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Monthly Save"})]})})]}),e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsxs(oe,{className:"text-sm flex items-center justify-between",children:[e.jsxs("span",{children:["Goal Progress: ",t]}),e.jsx(K,{variant:D?"default":"secondary",children:D?"Achieved!":`${Math.min(100,Math.round(N))}%`})]})}),e.jsxs(Q,{children:[e.jsx(Te,{value:Math.min(100,N),className:"h-3"}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[e.jsxs("span",{children:[w(v.currentSavings)," saved"]}),e.jsxs("span",{children:[w(v.targetAmount)," goal"]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"Financial Breakdown"})}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Contributions:"}),e.jsx("span",{children:w(v.totalContributions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Interest Earned:"}),e.jsx("span",{className:"text-green-600",children:w(v.interestEarned)})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Final Amount:"}),e.jsx("span",{children:w(((q=v.monthlyChart[v.monthlyChart.length-1])==null?void 0:q.total)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Monthly Contribution:"}),e.jsx("span",{children:w(o)})]})]})})]}),e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"Goal Timeline"})}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Current Progress:"}),e.jsxs("span",{children:[Math.round(i/n*100),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Time to Goal:"}),e.jsx("span",{children:b(S)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Goal Achievable:"}),e.jsx(K,{variant:T(f),children:f?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Projected Date:"}),e.jsx("span",{children:new Date(Date.now()+S*30*24*60*60*1e3).toLocaleDateString()})]})]})})]})]}),!f&&e.jsxs(L,{className:"bg-yellow-50 border-yellow-200",children:[e.jsx(re,{children:e.jsxs(oe,{className:"text-yellow-800 text-sm flex items-center gap-2",children:[e.jsx(Ba,{className:"h-4 w-4"}),"Goal Adjustment Needed"]})}),e.jsx(Q,{children:e.jsxs("div",{className:"text-yellow-800 space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Your current plan won't reach the goal within the timeframe."}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsxs("li",{children:["• Increase monthly contributions by ",w((n-i)/g-o)]}),e.jsxs("li",{children:["• Extend timeframe by ",Math.ceil((n-i)/o)-g," months"]}),e.jsxs("li",{children:["• Reduce target amount by ",w(n-j(g))]})]})]})})]}),D&&e.jsxs(L,{className:"bg-green-50 border-green-200",children:[e.jsx(re,{children:e.jsxs(oe,{className:"text-green-800 text-sm flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),"Goal Achieved!"]})}),e.jsx(Q,{children:e.jsxs("div",{className:"text-green-800 space-y-2",children:[e.jsxs("p",{className:"font-medium",children:["Congratulations! You'll reach your goal in ",b(S),"."]}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsxs("li",{children:["• Final amount: ",w(((P=v.monthlyChart[v.monthlyChart.length-1])==null?void 0:P.total)||0)]}),e.jsxs("li",{children:["• Interest earned: ",w(v.interestEarned)]}),e.jsxs("li",{children:["• You'll reach goal ",b(g-S)," early!"]})]})]})})]}),e.jsxs(L,{className:"bg-blue-50 border-blue-200",children:[e.jsx(re,{children:e.jsxs(oe,{className:"text-blue-800 text-sm flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Goal Acceleration"]})}),e.jsx(Q,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-blue-800",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:b(S)}),e.jsx("div",{className:"text-xs",children:"Current Timeline"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:R(h)}),e.jsx("div",{className:"text-xs",children:"Return Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:w(o*S)}),e.jsx("div",{className:"text-xs",children:"Total Contributions"})]})]})})]})]}),e.jsx(Le,{value:"timeline",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"max-h-96 overflow-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"sticky top-0 bg-background",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Month"}),e.jsx("th",{className:"text-right p-2",children:"Contributions"}),e.jsx("th",{className:"text-right p-2",children:"Interest"}),e.jsx("th",{className:"text-right p-2",children:"Total"}),e.jsx("th",{className:"text-right p-2",children:"Progress"})]})}),e.jsx("tbody",{children:v.monthlyChart.slice(0,24).map(A=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:A.month}),e.jsx("td",{className:"text-right p-2",children:w(A.savings)}),e.jsx("td",{className:"text-right p-2 text-green-600",children:w(A.interest)}),e.jsx("td",{className:"text-right p-2 font-medium",children:w(A.total)}),e.jsx("td",{className:"text-right p-2",children:e.jsxs(K,{variant:"secondary",children:[Math.min(100,Math.round(A.total/n*100)),"%"]})})]},A.month))})]}),v.monthlyChart.length>24&&e.jsxs("div",{className:"text-center p-4 text-muted-foreground text-sm",children:["Showing first 24 months of ",v.monthlyChart.length," total months"]})]})})}),e.jsx(Le,{value:"strategies",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Compare different savings strategies to reach your goal faster"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"Contribution Strategies"})}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Current Plan:"}),e.jsx("span",{children:b(S)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"+25% Monthly:"}),e.jsx("span",{children:b(F(o*1.25))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"+50% Monthly:"}),e.jsx("span",{children:b(F(o*1.5))})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Time Saved (50%):"}),e.jsx("span",{className:k(S-F(o*1.5)>0),children:b(S-F(o*1.5))})]})]})})]}),e.jsxs(L,{children:[e.jsx(re,{className:"pb-3",children:e.jsx(oe,{className:"text-sm",children:"Return Rate Impact"})}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"3% Return:"}),e.jsx("span",{children:b(O(3))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"5% Return:"}),e.jsx("span",{children:b(S)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"7% Return:"}),e.jsx("span",{children:b(O(7))})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Time Saved (7%):"}),e.jsx("span",{className:k(S-O(7)>0),children:b(S-O(7))})]})]})})]})]}),e.jsxs(_,{variant:"outline",className:"w-full",onClick:()=>{console.log("Open What-If Mode for savings comparison")},children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Create Detailed Savings Scenarios in What-If Mode"]})]})})]})})]})]})]});function F(A){let $=0,M=i;const z=h/100/12;for(;M<n&&$<120;){const I=M*z;M+=I+A,$++}return $}function O(A){let $=0,M=i;const z=A/100/12;for(;M<n&&$<120;){const I=M*z;M+=I+o,$++}return $}}function $S(){const[s,t]=u.useState(null),[a]=Gx(),n=Js(),r=[{id:"what-if",title:"What-If Scenarios",description:"Test different financial scenarios and see their impact",icon:de,status:"Available",color:"text-green-600"},{id:"ai-insights",title:"AI Financial Insights",description:"Get intelligent analysis and recommendations for your scenarios",icon:Yt,status:"Available",color:"text-purple-600"},{id:"loan-calculator",title:"Loan Calculator",description:"Calculate mortgage payments, interest costs, and payoff strategies",icon:An,status:"Available",color:"text-blue-600"},{id:"investment-calculator",title:"Investment Calculator",description:"Project investment growth with compound interest and contributions",icon:It,status:"Available",color:"text-purple-600"},{id:"retirement-calculator",title:"Retirement Calculator",description:"Plan your retirement savings and withdrawal strategies",icon:Do,status:"Available",color:"text-orange-600"},{id:"savings-calculator",title:"Savings Goal Calculator",description:"Calculate how much to save for specific financial goals",icon:je,status:"Available",color:"text-red-600"}];return u.useEffect(()=>{const i=a.get("tool");i&&r.find(l=>l.id===i)?t(i):t(null)},[a]),s==="what-if"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(_,{variant:"outline",onClick:()=>n("/tools"),className:"mb-4",children:"← Back to Tools"}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"What-If Mode"}),e.jsx("p",{className:"text-muted-foreground",children:"Test financial scenarios and explore different futures"})]})}),e.jsx(ES,{})]}):s==="loan-calculator"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(_,{variant:"outline",onClick:()=>n("/tools"),className:"mb-4",children:"← Back to Tools"}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Loan Calculator"}),e.jsx("p",{className:"text-muted-foreground",children:"Calculate mortgage payments, interest costs, and payoff strategies"})]})}),e.jsx(IS,{})]}):s==="investment-calculator"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(_,{variant:"outline",onClick:()=>n("/tools"),className:"mb-4",children:"← Back to Tools"}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Investment Calculator"}),e.jsx("p",{className:"text-muted-foreground",children:"Project investment growth with compound interest and contributions"})]})}),e.jsx(OS,{})]}):s==="retirement-calculator"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(_,{variant:"outline",onClick:()=>n("/tools"),className:"mb-4",children:"← Back to Tools"}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Retirement Calculator"}),e.jsx("p",{className:"text-muted-foreground",children:"Plan your retirement savings, withdrawals, and income strategy"})]})}),e.jsx(FS,{})]}):s==="savings-calculator"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(_,{variant:"outline",onClick:()=>n("/tools"),className:"mb-4",children:"← Back to Tools"}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Savings Goal Calculator"}),e.jsx("p",{className:"text-muted-foreground",children:"Plan and track progress toward your financial goals"})]})}),e.jsx(_S,{})]}):s==="ai-insights"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(_,{variant:"outline",onClick:()=>n("/tools"),className:"mb-4",children:"← Back to Tools"}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"AI Financial Insights"}),e.jsx("p",{className:"text-muted-foreground",children:"Intelligent analysis and recommendations for your financial scenarios"})]})}),e.jsx(RS,{})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Tools Hub"}),e.jsx("p",{className:"text-muted-foreground",children:"Advanced financial calculators and scenario testing tools"})]})}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map(i=>{const l=i.icon;return e.jsxs(L,{className:"group hover:shadow-lg transition-all duration-300",children:[e.jsxs(re,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:`h-8 w-8 ${i.color}`}),e.jsx(K,{variant:i.status==="Available"?"default":"secondary",children:i.status})]}),e.jsx(oe,{className:"text-xl",children:i.title}),e.jsx(Ce,{children:i.description})]}),e.jsx(Q,{children:e.jsx(_,{variant:i.status==="Available"?"default":"outline",className:"w-full",disabled:i.status!=="Available",onClick:()=>{i.status==="Available"&&n(`/tools?tool=${i.id}`)},children:i.status==="Available"?e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"h-4 w-4 mr-2"}),"Launch Tool"]}):"Coming Soon"})})]},i.id)})}),e.jsxs(L,{children:[e.jsxs(re,{children:[e.jsx(oe,{children:"What-If Mode Features"}),e.jsx(Ce,{children:"Test different financial scenarios to see how they impact your goals and budget"})]}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4 text-green-600"}),"Income Scenarios"]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Test salary increases"}),e.jsx("li",{children:"• Simulate bonus scenarios"}),e.jsx("li",{children:"• Explore side income"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4 text-orange-600"}),"Expense Scenarios"]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Analyze major purchases"}),e.jsx("li",{children:"• Test lifestyle changes"}),e.jsx("li",{children:"• Evaluate cost reductions"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4 text-blue-600"}),"Debt Scenarios"]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Compare payoff strategies"}),e.jsx("li",{children:"• Test extra payments"}),e.jsx("li",{children:"• Analyze interest savings"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4 text-purple-600"}),"Investment Scenarios"]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Project growth"}),e.jsx("li",{children:"• Test contribution levels"}),e.jsx("li",{children:"• Compare strategies"})]})]})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-full",children:e.jsx(ls,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"What-If Mode is Live!"}),e.jsx("p",{className:"text-green-700 text-sm",children:"Start testing financial scenarios with real-time impact analysis and timeline projections."})]})]})})]})})]})]})}const LS=()=>{const{monthlyStartingPoint:s,dailyData:t,transactions:a,currency:n,clearAllData:r,setMonthlyStartingPoint:i,addTransaction:l,addDailyData:o}=he(),{toast:c}=Ue(),[h,x]=u.useState(null),[d,m]=u.useState(!1),g=()=>{const N={monthlyStartingPoint:s,dailyData:t,transactions:a,exportDate:new Date().toISOString(),version:"1.0.0"},f=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),S=URL.createObjectURL(f),D=document.createElement("a");D.href=S,D.download=`moneylens-financial-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(S),c({title:"Success",description:"Data exported successfully"})},y=()=>{const f=[["Date","Description","Amount","Type","Category"].join(","),...a.map(R=>[R.date,`"${R.description.replace(/"/g,'""')}"`,R.amount,R.type,R.category].join(","))].join(`
`),S=new Blob([f],{type:"text/csv"}),D=URL.createObjectURL(S),w=document.createElement("a");w.href=D,w.download=`moneylens-transactions-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(D),c({title:"Success",description:"Transactions exported as CSV"})},p=N=>{var S;const f=(S=N.target.files)==null?void 0:S[0];f&&x(f)},j=async()=>{if(!h){c({title:"Error",description:"Please select a file to import",variant:"destructive"});return}m(!0);try{const N=await h.text(),f=JSON.parse(N);if(!f.monthlyStartingPoint||!Array.isArray(f.dailyData)||!Array.isArray(f.transactions))throw new Error("Invalid data format");await r(),i(f.monthlyStartingPoint);for(const D of f.transactions)await l(D);for(const D of f.dailyData)await o(D);c({title:"Success",description:"Data imported successfully"}),x(null);const S=document.getElementById("import-file");S&&(S.value="")}catch(N){console.error("Import error:",N),c({title:"Import Failed",description:"The file format is invalid or corrupted",variant:"destructive"})}finally{m(!1)}},v={transactions:a.length,dailyData:t.length,startingBalance:s,totalEarnings:a.filter(N=>N.type==="income").reduce((N,f)=>N+f.amount,0),totalExpenses:a.filter(N=>N.type==="expense").reduce((N,f)=>N+f.amount,0)};return e.jsxs("div",{className:"space-y-6 animate-fade-in max-w-4xl mx-auto px-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Import & Export"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your financial data with backup and restore functionality"})]}),e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(cr,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Data Overview"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{className:"text-sm font-medium",children:"Total Transactions"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:v.transactions})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{className:"text-sm font-medium",children:"Days Tracked"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:v.dailyData})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{className:"text-sm font-medium",children:"Total Earnings"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["£",v.totalEarnings.toFixed(2)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{className:"text-sm font-medium",children:"Total Expenses"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["£",v.totalExpenses.toFixed(2)]})]})]})]}),e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(vt,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Export Data"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ee,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800",children:"Export Options"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Choose between JSON for full backup or CSV for spreadsheet compatibility"})]})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(_,{variant:"outline",className:"gap-3 h-auto p-4 justify-start",onClick:g,children:[e.jsx(Ts,{className:"h-5 w-5"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Export JSON Backup"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete data backup with all settings"})]})]}),e.jsxs(_,{variant:"outline",className:"gap-3 h-auto p-4 justify-start",onClick:y,children:[e.jsx(vt,{className:"h-5 w-5"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Export CSV"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Transaction data for spreadsheets"})]})]})]})]})]}),e.jsx(os,{}),e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(js,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Import Data"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ze,{className:"h-5 w-5 text-amber-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-amber-800",children:"Important Notice"}),e.jsx("p",{className:"text-amber-700 text-sm",children:"Importing data will replace all existing financial data. This action cannot be undone."})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"import-file",children:"Select Backup File"}),e.jsx(ae,{id:"import-file",type:"file",accept:".json",onChange:p,className:"cursor-pointer"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a previously exported JSON backup file"})]}),h&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium text-green-800",children:["File selected: ",h.name]})]})}),e.jsx(_,{onClick:j,disabled:!h||d,className:"w-full",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importing Data..."]}):e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Import Data"]})})]})]})]}),e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Data Format Information"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"JSON Backup Format"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Complete application data"}),e.jsx("li",{children:"• All transactions and daily records"}),e.jsx("li",{children:"• Monthly starting balance"}),e.jsx("li",{children:"• Export metadata and version"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"CSV Export Format"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Transaction data only"}),e.jsx("li",{children:"• Date, description, amount, type, category"}),e.jsx("li",{children:"• Compatible with Excel/Google Sheets"}),e.jsx("li",{children:"• For analysis and reporting"})]})]})]})]})})]})},zS=()=>{const s=Rr();return u.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),e.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},BS=()=>{const[s,t]=u.useState(""),[a,n]=u.useState(""),[r,i]=u.useState(!1),[l,o]=u.useState(!1),[c,h]=u.useState(""),{signIn:x,isAuthenticated:d,loading:m}=Rs(),g=Js(),y=Rr();u.useEffect(()=>{var v,N;if(d&&!m){const f=((N=(v=y.state)==null?void 0:v.from)==null?void 0:N.pathname)||"/";g(f,{replace:!0})}},[d,m,g,y]);const p=async v=>{var N,f;v.preventDefault(),h(""),o(!0);try{const{error:S}=await x(s,a);if(S)h(S.message);else{const D=((f=(N=y.state)==null?void 0:N.from)==null?void 0:f.pathname)||"/";g(D,{replace:!0})}}catch{h("An unexpected error occurred. Please try again.")}finally{o(!1)}},j=async()=>{var f,S;h(""),o(!0);const v="demo@moneylens.app",N="demo123456";try{const{error:D}=await x(v,N);if(D)ne.info("Demo account not available. Please create your own account."),h("Demo account not available. Please create your own account or sign up.");else{ne.success("Signed in with demo account!");const w=((S=(f=y.state)==null?void 0:f.from)==null?void 0:S.pathname)||"/";g(w,{replace:!0})}}catch{h("Demo login failed. Please try creating your own account.")}finally{o(!1)}};return m?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pt,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading..."})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:e.jsxs(L,{className:"w-full max-w-md",children:[e.jsxs(re,{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"ML"})})}),e.jsx(oe,{className:"text-2xl font-bold text-center",children:"Welcome back"}),e.jsx(Ce,{className:"text-center",children:"Sign in to your MoneyLens account to continue managing your finances"})]}),e.jsxs(Q,{children:[e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[c&&e.jsx(us,{variant:"destructive",children:e.jsx(ms,{children:c})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Lr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"email",type:"email",placeholder:"Enter your email",value:s,onChange:v=>t(v.target.value),className:"pl-10",required:!0,disabled:l})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Li,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"password",type:r?"text":"password",placeholder:"Enter your password",value:a,onChange:v=>n(v.target.value),className:"pl-10 pr-10",required:!0,disabled:l}),e.jsx(_,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!r),disabled:l,children:r?e.jsx(qa,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"})})]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(Ds,{to:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:"Forgot password?"})}),e.jsx(_,{type:"submit",className:"w-full",disabled:l||!s||!a,children:l?e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:["Sign in",e.jsx(Ps,{className:"ml-2 h-4 w-4"})]})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(os,{className:"my-4"}),e.jsx(_,{type:"button",variant:"outline",className:"w-full",onClick:j,disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading demo..."]}):"Try Demo Account"})]})]}),e.jsx(Nn,{children:e.jsxs("div",{className:"text-center text-sm text-muted-foreground w-full",children:["Don't have an account?"," ",e.jsx(Ds,{to:"/register",className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Sign up"})]})})]})})},qS=()=>{const[s,t]=u.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[a,n]=u.useState(!1),[r,i]=u.useState(!1),[l,o]=u.useState(!1),[c,h]=u.useState(""),[x,d]=u.useState(!1),[m,g]=u.useState({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1}),{signUp:y,isAuthenticated:p,loading:j}=Rs(),v=Js();u.useEffect(()=>{p&&!j&&v("/",{replace:!0})},[p,j,v]),u.useEffect(()=>{const w=s.password;g({length:w.length>=8,uppercase:/[A-Z]/.test(w),lowercase:/[a-z]/.test(w),number:/\d/.test(w),special:/[!@#$%^&*(),.?":{}|<>]/.test(w)})},[s.password]);const N=w=>{const{name:R,value:b}=w.target;t(k=>({...k,[R]:b})),h("")},f=()=>s.firstName.trim()?s.lastName.trim()?s.email.trim()?/\S+@\S+\.\S+/.test(s.email)?s.password.length<8?(h("Password must be at least 8 characters long"),!1):s.password!==s.confirmPassword?(h("Passwords do not match"),!1):x?!0:(h("Please accept the terms and conditions"),!1):(h("Please enter a valid email address"),!1):(h("Email is required"),!1):(h("Last name is required"),!1):(h("First name is required"),!1),S=async w=>{if(w.preventDefault(),h(""),!!f()){o(!0);try{const R={first_name:s.firstName,last_name:s.lastName,full_name:`${s.firstName} ${s.lastName}`},{error:b}=await y(s.email,s.password,R);b?h(b.message):(ne.success("Account created successfully! Please check your email to verify your account."),v("/login"))}catch{h("An unexpected error occurred. Please try again.")}finally{o(!1)}}},D=Object.values(m).every(Boolean);return j?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pt,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading..."})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:e.jsxs(L,{className:"w-full max-w-md",children:[e.jsxs(re,{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"ML"})})}),e.jsx(oe,{className:"text-2xl font-bold text-center",children:"Create your account"}),e.jsx(Ce,{className:"text-center",children:"Join MoneyLens to start managing your finances intelligently"})]}),e.jsx(Q,{children:e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[c&&e.jsx(us,{variant:"destructive",children:e.jsx(ms,{children:c})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"firstName",children:"First Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(vn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"firstName",name:"firstName",type:"text",placeholder:"John",value:s.firstName,onChange:N,className:"pl-10",required:!0,disabled:l})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"lastName",children:"Last Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(vn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"lastName",name:"lastName",type:"text",placeholder:"Doe",value:s.lastName,onChange:N,className:"pl-10",required:!0,disabled:l})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Lr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"email",name:"email",type:"email",placeholder:"john@example.com",value:s.email,onChange:N,className:"pl-10",required:!0,disabled:l})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Li,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"password",name:"password",type:a?"text":"password",placeholder:"Create a strong password",value:s.password,onChange:N,className:"pl-10 pr-10",required:!0,disabled:l}),e.jsx(_,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>n(!a),disabled:l,children:a?e.jsx(qa,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"})})]}),s.password&&e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsx("div",{className:"text-muted-foreground",children:"Password requirements:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("div",{className:`flex items-center space-x-1 ${m.length?"text-green-600":"text-muted-foreground"}`,children:[e.jsx(Ee,{className:"h-3 w-3"}),e.jsx("span",{children:"8+ characters"})]}),e.jsxs("div",{className:`flex items-center space-x-1 ${m.uppercase?"text-green-600":"text-muted-foreground"}`,children:[e.jsx(Ee,{className:"h-3 w-3"}),e.jsx("span",{children:"Uppercase"})]}),e.jsxs("div",{className:`flex items-center space-x-1 ${m.lowercase?"text-green-600":"text-muted-foreground"}`,children:[e.jsx(Ee,{className:"h-3 w-3"}),e.jsx("span",{children:"Lowercase"})]}),e.jsxs("div",{className:`flex items-center space-x-1 ${m.number?"text-green-600":"text-muted-foreground"}`,children:[e.jsx(Ee,{className:"h-3 w-3"}),e.jsx("span",{children:"Number"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Li,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"confirmPassword",name:"confirmPassword",type:r?"text":"password",placeholder:"Confirm your password",value:s.confirmPassword,onChange:N,className:"pl-10 pr-10",required:!0,disabled:l}),e.jsx(_,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!r),disabled:l,children:r?e.jsx(qa,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pa,{id:"terms",checked:x,onCheckedChange:w=>d(w),disabled:l}),e.jsxs(W,{htmlFor:"terms",className:"text-sm",children:["I agree to the"," ",e.jsx(Ds,{to:"/terms",className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:"Terms of Service"})," ","and"," ",e.jsx(Ds,{to:"/privacy",className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:"Privacy Policy"})]})]}),e.jsx(_,{type:"submit",className:"w-full",disabled:l||!x||!D,children:l?e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):e.jsxs(e.Fragment,{children:["Create account",e.jsx(Ps,{className:"ml-2 h-4 w-4"})]})})]})}),e.jsx(Nn,{children:e.jsxs("div",{className:"text-center text-sm text-muted-foreground w-full",children:["Already have an account?"," ",e.jsx(Ds,{to:"/login",className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Sign in"})]})})]})})},VS=()=>{const[s,t]=u.useState(""),[a,n]=u.useState(!1),[r,i]=u.useState(""),[l,o]=u.useState(!1),{resetPassword:c}=Rs(),h=async x=>{if(x.preventDefault(),i(""),n(!0),!s.trim()){i("Email is required"),n(!1);return}if(!/\S+@\S+\.\S+/.test(s)){i("Please enter a valid email address"),n(!1);return}try{const{error:d}=await c(s);d?i(d.message):o(!0)}catch{i("An unexpected error occurred. Please try again.")}finally{n(!1)}};return l?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:e.jsxs(L,{className:"w-full max-w-md",children:[e.jsxs(re,{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"h-12 w-12 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center",children:e.jsx(Ee,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})}),e.jsx(oe,{className:"text-2xl font-bold text-center",children:"Check your email"}),e.jsxs(Ce,{className:"text-center",children:["We've sent a password reset link to ",e.jsx("strong",{children:s})]})]}),e.jsxs(Q,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[e.jsx("p",{children:"Click the link in the email to reset your password."}),e.jsx("p",{className:"mt-2",children:"If you don't see the email, check your spam folder."})]}),e.jsx(_,{onClick:()=>{o(!1),t("")},variant:"outline",className:"w-full",children:"Send another email"})]}),e.jsx(Nn,{children:e.jsx("div",{className:"text-center text-sm text-muted-foreground w-full",children:e.jsxs(Ds,{to:"/login",className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium inline-flex items-center",children:[e.jsx(ha,{className:"mr-1 h-4 w-4"}),"Back to sign in"]})})})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:e.jsxs(L,{className:"w-full max-w-md",children:[e.jsxs(re,{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"ML"})})}),e.jsx(oe,{className:"text-2xl font-bold text-center",children:"Forgot your password?"}),e.jsx(Ce,{className:"text-center",children:"Enter your email address and we'll send you a link to reset your password"})]}),e.jsx(Q,{children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[r&&e.jsx(us,{variant:"destructive",children:e.jsx(ms,{children:r})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Lr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"email",type:"email",placeholder:"Enter your email address",value:s,onChange:x=>t(x.target.value),className:"pl-10",required:!0,disabled:a})]})]}),e.jsx(_,{type:"submit",className:"w-full",disabled:a||!s,children:a?e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending reset link..."]}):"Send reset link"})]})}),e.jsx(Nn,{children:e.jsxs("div",{className:"text-center text-sm text-muted-foreground w-full",children:["Remember your password?"," ",e.jsxs(Ds,{to:"/login",className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium inline-flex items-center",children:[e.jsx(ha,{className:"mr-1 h-4 w-4"}),"Back to sign in"]})]})})]})})};var nx={exports:{}},rx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qa=u;function US(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var WS=typeof Object.is=="function"?Object.is:US,HS=Qa.useState,GS=Qa.useEffect,YS=Qa.useLayoutEffect,KS=Qa.useDebugValue;function QS(s,t){var a=t(),n=HS({inst:{value:a,getSnapshot:t}}),r=n[0].inst,i=n[1];return YS(function(){r.value=a,r.getSnapshot=t,Fi(r)&&i({inst:r})},[s,a,t]),GS(function(){return Fi(r)&&i({inst:r}),s(function(){Fi(r)&&i({inst:r})})},[s]),KS(a),a}function Fi(s){var t=s.getSnapshot;s=s.value;try{var a=t();return!WS(s,a)}catch{return!0}}function XS(s,t){return t()}var JS=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?XS:QS;rx.useSyncExternalStore=Qa.useSyncExternalStore!==void 0?Qa.useSyncExternalStore:JS;nx.exports=rx;var ZS=nx.exports;function eC(){return ZS.useSyncExternalStore(tC,()=>!0,()=>!1)}function tC(){return()=>{}}var ul="Avatar",[sC,DC]=ds(ul),[aC,ix]=sC(ul),ox=u.forwardRef((s,t)=>{const{__scopeAvatar:a,...n}=s,[r,i]=u.useState("idle");return e.jsx(aC,{scope:a,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:e.jsx(Ae.span,{...n,ref:t})})});ox.displayName=ul;var lx="AvatarImage",cx=u.forwardRef((s,t)=>{const{__scopeAvatar:a,src:n,onLoadingStatusChange:r=()=>{},...i}=s,l=ix(lx,a),o=nC(n,i),c=fs(h=>{r(h),l.onImageLoadingStatusChange(h)});return nr(()=>{o!=="idle"&&c(o)},[o,c]),o==="loaded"?e.jsx(Ae.img,{...i,ref:t,src:n}):null});cx.displayName=lx;var dx="AvatarFallback",ux=u.forwardRef((s,t)=>{const{__scopeAvatar:a,delayMs:n,...r}=s,i=ix(dx,a),[l,o]=u.useState(n===void 0);return u.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(c)}},[n]),l&&i.imageLoadingStatus!=="loaded"?e.jsx(Ae.span,{...r,ref:t}):null});ux.displayName=dx;function pc(s,t){return s?t?(s.src!==t&&(s.src=t),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function nC(s,{referrerPolicy:t,crossOrigin:a}){const n=eC(),r=u.useRef(null),i=n?(r.current||(r.current=new window.Image),r.current):null,[l,o]=u.useState(()=>pc(i,s));return nr(()=>{o(pc(i,s))},[i,s]),nr(()=>{const c=d=>()=>{o(d)};if(!i)return;const h=c("loaded"),x=c("error");return i.addEventListener("load",h),i.addEventListener("error",x),t&&(i.referrerPolicy=t),typeof a=="string"&&(i.crossOrigin=a),()=>{i.removeEventListener("load",h),i.removeEventListener("error",x)}},[i,a,t]),l}var mx=ox,hx=cx,xx=ux;const gx=u.forwardRef(({className:s,...t},a)=>e.jsx(mx,{ref:a,className:G("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t}));gx.displayName=mx.displayName;const px=u.forwardRef(({className:s,...t},a)=>e.jsx(hx,{ref:a,className:G("aspect-square h-full w-full",s),...t}));px.displayName=hx.displayName;const fx=u.forwardRef(({className:s,...t},a)=>e.jsx(xx,{ref:a,className:G("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));fx.displayName=xx.displayName;const rC=()=>{var N,f,S,D;const{user:s,updateProfile:t,signOut:a}=Rs(),[n,r]=u.useState(!1),[i,l]=u.useState(""),[o,c]=u.useState({firstName:"",lastName:"",email:""}),[h,x]=u.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[d,m]=u.useState({current:!1,new:!1,confirm:!1});u.useEffect(()=>{var w,R;s&&c({firstName:((w=s.user_metadata)==null?void 0:w.first_name)||"",lastName:((R=s.user_metadata)==null?void 0:R.last_name)||"",email:s.email||""})},[s]);const g=async w=>{w.preventDefault(),l(""),r(!0);try{const R={data:{first_name:o.firstName,last_name:o.lastName,full_name:`${o.firstName} ${o.lastName}`}},{error:b}=await t(R);b?l(b.message):ne.success("Profile updated successfully!")}catch{l("An unexpected error occurred while updating your profile.")}finally{r(!1)}},y=async w=>{if(w.preventDefault(),l(""),h.newPassword!==h.confirmPassword){l("New passwords do not match");return}if(h.newPassword.length<8){l("New password must be at least 8 characters long");return}r(!0);try{const{error:R}=await t({password:h.newPassword});R?l(R.message):(ne.success("Password updated successfully!"),x({currentPassword:"",newPassword:"",confirmPassword:""}))}catch{l("An unexpected error occurred while updating your password.")}finally{r(!1)}},p=async()=>{try{await a()}catch{ne.error("Error signing out")}},j=(w,R)=>`${w.charAt(0)}${R.charAt(0)}`.toUpperCase(),v=w=>new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return s?e.jsx("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx(L,{children:e.jsx(re,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(gx,{className:"h-20 w-20",children:[e.jsx(px,{src:(N=s.user_metadata)==null?void 0:N.avatar_url}),e.jsx(fx,{className:"text-lg",children:j(((f=s.user_metadata)==null?void 0:f.first_name)||"U",((S=s.user_metadata)==null?void 0:S.last_name)||"U")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:((D=s.user_metadata)==null?void 0:D.full_name)||"User Profile"}),e.jsx("p",{className:"text-muted-foreground",children:s.email})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(K,{variant:s.email_confirmed_at?"default":"secondary",children:[e.jsx(Lt,{className:"mr-1 h-3 w-3"}),s.email_confirmed_at?"Verified":"Unverified"]}),e.jsxs(K,{variant:"outline",children:[e.jsx(Fe,{className:"mr-1 h-3 w-3"}),"Joined ",v(s.created_at)]})]})]})]})})}),e.jsxs(L,{children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center",children:[e.jsx(vn,{className:"mr-2 h-5 w-5"}),"Profile Information"]}),e.jsx(Ce,{children:"Update your personal information and account details"})]}),e.jsx(Q,{children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[i&&e.jsx(us,{variant:"destructive",children:e.jsx(ms,{children:i})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"firstName",children:"First Name"}),e.jsx(ae,{id:"firstName",value:o.firstName,onChange:w=>c(R=>({...R,firstName:w.target.value})),disabled:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"lastName",children:"Last Name"}),e.jsx(ae,{id:"lastName",value:o.lastName,onChange:w=>c(R=>({...R,lastName:w.target.value})),disabled:n})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"email",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Lr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ae,{id:"email",type:"email",value:o.email,className:"pl-10",disabled:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email address cannot be changed. Contact support if you need to update it."})]}),e.jsx(_,{type:"submit",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(np,{className:"mr-2 h-4 w-4"}),"Update Profile"]})})]})})]}),e.jsxs(L,{children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center",children:[e.jsx(Lt,{className:"mr-2 h-5 w-5"}),"Security"]}),e.jsx(Ce,{children:"Update your password to keep your account secure"})]}),e.jsx(Q,{children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"newPassword",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ae,{id:"newPassword",type:d.new?"text":"password",placeholder:"Enter new password",value:h.newPassword,onChange:w=>x(R=>({...R,newPassword:w.target.value})),disabled:n}),e.jsx(_,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>m(w=>({...w,new:!w.new})),children:d.new?e.jsx(qa,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ae,{id:"confirmPassword",type:d.confirm?"text":"password",placeholder:"Confirm new password",value:h.confirmPassword,onChange:w=>x(R=>({...R,confirmPassword:w.target.value})),disabled:n}),e.jsx(_,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>m(w=>({...w,confirm:!w.confirm})),children:d.confirm?e.jsx(qa,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"})})]})]}),e.jsx(_,{type:"submit",disabled:n||!h.newPassword||!h.confirmPassword,children:n?e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Password"})]})})]}),e.jsxs(L,{children:[e.jsxs(re,{children:[e.jsx(oe,{children:"Account Actions"}),e.jsx(Ce,{children:"Manage your account settings and data"})]}),e.jsxs(Q,{className:"space-y-4",children:[e.jsx(os,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Sign Out"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sign out of your account on this device"})]}),e.jsx(_,{variant:"outline",onClick:p,children:"Sign Out"})]})]})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pt,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading profile..."})]})})},iC=new Xv,bt=({children:s})=>e.jsx(ny,{children:e.jsx(ry,{children:e.jsxs(zd,{children:[e.jsxs("div",{className:"flex min-h-screen w-full",children:[e.jsx(uy,{}),e.jsxs("main",{className:"flex-1 overflow-auto bg-gradient-to-br from-background to-muted/20",children:[e.jsx("header",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur-sm border-b shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(qd,{className:"mr-2"}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsx("h1",{className:"text-lg font-semibold text-primary",children:"MoneyLens"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your financial companion"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xy,{}),e.jsx(Zy,{})]})]})}),e.jsx("div",{className:"p-6",children:s}),e.jsx(Gy,{}),e.jsx(Hy,{}),e.jsx(Ky,{}),e.jsx(Qy,{}),e.jsx(G0,{}),e.jsx(Pu,{}),e.jsx(tm,{}),e.jsx(Y0,{})]})]}),e.jsx(Jp,{}),e.jsx(Pf,{})]})})});function oC(){return e.jsxs(Yx,{children:[e.jsx(it,{path:"/login",element:e.jsx(BS,{})}),e.jsx(it,{path:"/register",element:e.jsx(qS,{})}),e.jsx(it,{path:"/forgot-password",element:e.jsx(VS,{})}),e.jsx(it,{path:"/",element:e.jsx(jt,{children:e.jsx(bt,{children:e.jsx(db,{})})})}),e.jsx(it,{path:"/profile",element:e.jsx(jt,{children:e.jsx(bt,{children:e.jsx(rC,{})})})}),e.jsx(it,{path:"/financial-hub",element:e.jsx(jt,{children:e.jsx(bt,{children:e.jsx(vS,{})})})}),e.jsx(it,{path:"/quick-allocation",element:e.jsx(jt,{children:e.jsx(bt,{children:e.jsx(yS,{})})})}),e.jsx(it,{path:"/analytics",element:e.jsx(jt,{children:e.jsx(bt,{children:e.jsx(mb,{})})})}),e.jsx(it,{path:"/transactions",element:e.jsx(jt,{children:e.jsx(bt,{children:e.jsx(cw,{})})})}),e.jsx(it,{path:"/goals",element:e.jsx(jt,{children:e.jsx(bt,{children:e.jsx(dw,{})})})}),e.jsx(it,{path:"/debts",element:e.jsx(jt,{children:e.jsx(bt,{children:e.jsx(mw,{})})})}),e.jsx(it,{path:"/recurring",element:e.jsx(jt,{children:e.jsx(bt,{children:e.jsx(Ew,{})})})}),e.jsx(it,{path:"/categories",element:e.jsx(jt,{children:e.jsx(bt,{children:e.jsx(Mw,{})})})}),e.jsx(it,{path:"/budget",element:e.jsx(jt,{children:e.jsx(bt,{children:e.jsx(oS,{})})})}),e.jsx(it,{path:"/pots",element:e.jsx(jt,{children:e.jsx(bt,{children:e.jsx(CS,{})})})}),e.jsx(it,{path:"/calendar",element:e.jsx(jt,{children:e.jsx(bt,{children:e.jsx(eS,{})})})}),e.jsx(it,{path:"/settings",element:e.jsx(jt,{children:e.jsx(bt,{children:e.jsx(iS,{})})})}),e.jsx(it,{path:"/tools",element:e.jsx(jt,{children:e.jsx(bt,{children:e.jsx($S,{})})})}),e.jsx(it,{path:"/import-export",element:e.jsx(jt,{children:e.jsx(bt,{children:e.jsx(LS,{})})})}),e.jsx(it,{path:"*",element:e.jsx(zS,{})})]})}const lC=()=>e.jsx(ly,{children:e.jsx(Zv,{client:iC,children:e.jsx(ay,{children:e.jsx(Ur,{children:e.jsx(oC,{})})})})});ed(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(Kx,{children:e.jsx(lC,{})})}));
